"use strict";(self.webpackChunktoolbox_app=self.webpackChunktoolbox_app||[]).push([[179],{6304:(ct,Te,O)=>{O.d(Te,{Dh:()=>Re,GT:()=>me,cc:()=>Ve,on:()=>xe,pX:()=>oe,xv:()=>Fe});var E=O(7989),F=O(7142);ct=O.hmd(ct);const k=["ngOnDestroy"],oe=(Ee,Pe,We,Ye={})=>new Proxy(Ee,{get:(K,ce)=>We.runOutsideAngular(()=>{var J;if(Ee[ce])return!(null===(J=Ye?.spy)||void 0===J)&&J.get&&Ye.spy.get(ce,Ee[ce]),Ee[ce];if(k.indexOf(ce)>-1)return()=>{};const pe=Pe.toPromise().then(Me=>{const Z=Me&&Me[ce];return"function"==typeof Z?Z.bind(Me):Z&&Z.then?Z.then(Je=>We.run(()=>Je)):We.run(()=>Z)});return new Proxy(()=>{},{get:(Me,Z)=>pe[Z],apply:(Me,Z,Je)=>pe.then(Xe=>{var Rt;const ar=Xe&&Xe(...Je);return!(null===(Rt=Ye?.spy)||void 0===Rt)&&Rt.apply&&Ye.spy.apply(ce,Je,ar),ar})})})}),me=(Ee,Pe)=>{Pe.forEach(We=>{Object.getOwnPropertyNames(We.prototype||We).forEach(Ye=>{Object.defineProperty(Ee.prototype,Ye,Object.getOwnPropertyDescriptor(We.prototype||We,Ye))})})};class we{constructor(Pe){return Pe}}const Re=new E.OlP("angularfire2.app.options"),Fe=new E.OlP("angularfire2.app.name");function xe(Ee,Pe,We){const K="object"==typeof We&&We||{};K.name=K.name||"string"==typeof We&&We||"[DEFAULT]";const J=F.Z.apps.filter(pe=>pe&&pe.name===K.name)[0]||Pe.runOutsideAngular(()=>F.Z.initializeApp(Ee,K));try{JSON.stringify(Ee)!==JSON.stringify(J.options)&&V("error",`${J.name} Firebase App already initialized with different options${ct.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch{}return new we(J)}const V=(Ee,...Pe)=>{(0,E.X6Q)()&&typeof console<"u"&&console[Ee](...Pe)};function Ve(Ee,Pe,We,Ye,K){const[,ce,J]=globalThis.\u0275AngularfireInstanceCache.find(pe=>pe[0]===Ee)||[];if(ce)return function De(Ee,Pe){try{return Ee.toString()===Pe.toString()}catch{return Ee===Pe}}(K,J)||(ue("error",`${Pe} was already initialized on the ${We} Firebase App with different settings.${st?" You may need to reload as Firebase is not HMR aware.":""}`),ue("warn",{is:K,was:J})),ce;{const pe=Ye();return globalThis.\u0275AngularfireInstanceCache.push([Ee,pe,K]),pe}}const st=!!ct.hot,ue=(Ee,...Pe)=>{(0,E.X6Q)()&&typeof console<"u"&&console[Ee](...Pe)};globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=[])},6878:(ct,Te,O)=>{O.d(Te,{$:()=>gd,A:()=>j,D:()=>De,I:()=>ed,J:()=>Na,L:()=>Oe,N:()=>Wr,P:()=>Ep,Q:()=>Po,R:()=>eE,U:()=>Zf,V:()=>so,W:()=>os,X:()=>As,Y:()=>ld,Z:()=>dd,_:()=>Oa,a:()=>Ms,a0:()=>G0,a1:()=>mn,a2:()=>kT,a3:()=>OT,a4:()=>Iy,a5:()=>Xf,a6:()=>xs,a7:()=>W0,a8:()=>ep,a9:()=>q0,aA:()=>Z,aB:()=>Cp,aC:()=>hn,aD:()=>bi,aE:()=>Ni,aF:()=>zo,aG:()=>Dp,aH:()=>pn,aL:()=>lc,aO:()=>Ti,aa:()=>Hi,ab:()=>Xn,ac:()=>wy,ad:()=>_d,ae:()=>LT,af:()=>rp,ai:()=>FT,aj:()=>K0,ak:()=>Ty,an:()=>hd,ao:()=>Id,aq:()=>My,ar:()=>uc,as:()=>Xe,at:()=>ze,au:()=>de,av:()=>K,aw:()=>jd,ax:()=>Za,ay:()=>Ft,az:()=>ce,b:()=>dp,c:()=>wp,d:()=>Mi,e:()=>BT,f:()=>Wa,g:()=>bp,h:()=>vc,i:()=>Td,j:()=>lo,k:()=>hs,l:()=>pc,m:()=>qy,o:()=>Rp,p:()=>Fe,r:()=>Ai,s:()=>Ad,u:()=>xd,x:()=>tn});var E=O(5861),F=O(9058),k=O(534),oe=O(7582),me=O(7879),we=O(4537);const Fe={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",PHONE:"phone",TWITTER:"twitter.com"},j={EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"};const De=function re(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-password":"A non-empty password must be provided","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance.","missing-recaptcha-token":"The reCAPTCHA token is missing when sending request to the backend.","invalid-recaptcha-token":"The reCAPTCHA token is invalid when sending request to the backend.","invalid-recaptcha-action":"The reCAPTCHA action is invalid when sending request to the backend.","recaptcha-not-enabled":"reCAPTCHA Enterprise integration is not enabled for this project.","missing-client-type":"The reCAPTCHA client type is missing when sending request to the backend.","missing-recaptcha-version":"The reCAPTCHA version is missing when sending request to the backend.","invalid-req-type":"Invalid request parameters.","invalid-recaptcha-version":"The reCAPTCHA version is invalid when sending request to the backend."}},st=function Ve(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},ue=new F.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),Pe=new me.Yd("@firebase/auth");function Ye(_,...f){Pe.logLevel<=me.in.ERROR&&Pe.error(`Auth (${k.SDK_VERSION}): ${_}`,...f)}function K(_,...f){throw Me(_,...f)}function ce(_,...f){return Me(_,...f)}function J(_,f,p){const I=Object.assign(Object.assign({},st()),{[f]:p});return new F.LL("auth","Firebase",I).create(f,{appName:_.name})}function pe(_,f,p){if(!(f instanceof p))throw p.name!==f.constructor.name&&K(_,"argument-error"),J(_,"argument-error",`Type of ${f.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Me(_,...f){if("string"!=typeof _){const p=f[0],I=[...f.slice(1)];return I[0]&&(I[0].appName=_.name),_._errorFactory.create(p,...I)}return ue.create(_,...f)}function Z(_,f,...p){if(!_)throw Me(f,...p)}function Je(_){const f="INTERNAL ASSERTION FAILED: "+_;throw Ye(f),new Error(f)}function Xe(_,f){_||Je(f)}function Rt(){var _;return typeof self<"u"&&(null===(_=self.location)||void 0===_?void 0:_.href)||""}function ar(){return"http:"===Ii()||"https:"===Ii()}function Ii(){var _;return typeof self<"u"&&(null===(_=self.location)||void 0===_?void 0:_.protocol)||null}class Ei{constructor(f,p){this.shortDelay=f,this.longDelay=p,Xe(p>f,"Short delay should be less than long delay!"),this.isMobile=(0,F.uI)()||(0,F.b$)()}get(){return function Ji(){return!(typeof navigator<"u"&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(ar()||(0,F.ru)()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function bs(_,f){Xe(_.emulator,"Emulator should always be set here");const{url:p}=_.emulator;return f?`${p}${f.startsWith("/")?f.slice(1):f}`:p}class ne{static initialize(f,p,I){this.fetchImpl=f,p&&(this.headersImpl=p),I&&(this.responseImpl=I)}static fetch(){return this.fetchImpl?this.fetchImpl:typeof self<"u"&&"fetch"in self?self.fetch:void Je("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:typeof self<"u"&&"Headers"in self?self.Headers:void Je("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:typeof self<"u"&&"Response"in self?self.Response:void Je("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const ie={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"},le=new Ei(3e4,6e4);function X(_,f){return _.tenantId&&!f.tenantId?Object.assign(Object.assign({},f),{tenantId:_.tenantId}):f}function fe(_,f,p,I){return Ce.apply(this,arguments)}function Ce(){return(Ce=(0,E.Z)(function*(_,f,p,I,C={}){return Ze(_,C,(0,E.Z)(function*(){let M={},H={};I&&("GET"===f?H=I:M={body:JSON.stringify(I)});const te=(0,F.xO)(Object.assign({key:_.config.apiKey},H)).slice(1),Ne=yield _._getAdditionalHeaders();return Ne["Content-Type"]="application/json",_.languageCode&&(Ne["X-Firebase-Locale"]=_.languageCode),ne.fetch()(jt(_,_.config.apiHost,p,te),Object.assign({method:f,headers:Ne,referrerPolicy:"no-referrer"},M))}))})).apply(this,arguments)}function Ze(_,f,p){return Le.apply(this,arguments)}function Le(){return(Le=(0,E.Z)(function*(_,f,p){_._canInitEmulator=!1;const I=Object.assign(Object.assign({},ie),f);try{const C=new Dt(_),M=yield Promise.race([p(),C.promise]);C.clearNetworkTimeout();const H=yield M.json();if("needConfirmation"in H)throw Zt(_,"account-exists-with-different-credential",H);if(M.ok&&!("errorMessage"in H))return H;{const te=M.ok?H.errorMessage:H.error.message,[Ne,je]=te.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===Ne)throw Zt(_,"credential-already-in-use",H);if("EMAIL_EXISTS"===Ne)throw Zt(_,"email-already-in-use",H);if("USER_DISABLED"===Ne)throw Zt(_,"user-disabled",H);const et=I[Ne]||Ne.toLowerCase().replace(/[_\s]+/g,"-");if(je)throw J(_,et,je);K(_,et)}}catch(C){if(C instanceof F.ZR)throw C;K(_,"network-request-failed",{message:String(C)})}})).apply(this,arguments)}function Jt(_,f,p,I){return dt.apply(this,arguments)}function dt(){return(dt=(0,E.Z)(function*(_,f,p,I,C={}){const M=yield fe(_,f,p,I,C);return"mfaPendingCredential"in M&&K(_,"multi-factor-auth-required",{_serverResponse:M}),M})).apply(this,arguments)}function jt(_,f,p,I){const C=`${f}${p}?${I}`;return _.config.emulator?bs(_.config,C):`${_.config.apiScheme}://${C}`}class Dt{constructor(f){this.auth=f,this.timer=null,this.promise=new Promise((p,I)=>{this.timer=setTimeout(()=>I(ce(this.auth,"network-request-failed")),le.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Zt(_,f,p){const I={appName:_.name};p.email&&(I.email=p.email),p.phoneNumber&&(I.phoneNumber=p.phoneNumber);const C=ce(_,f,I);return C.customData._tokenResponse=p,C}function vn(){return(vn=(0,E.Z)(function*(_,f){return fe(_,"POST","/v1/accounts:delete",f)})).apply(this,arguments)}function kn(){return(kn=(0,E.Z)(function*(_,f){return fe(_,"POST","/v1/accounts:update",f)})).apply(this,arguments)}function zr(){return(zr=(0,E.Z)(function*(_,f){return fe(_,"POST","/v1/accounts:lookup",f)})).apply(this,arguments)}function mr(_){if(_)try{const f=new Date(Number(_));if(!isNaN(f.getTime()))return f.toUTCString()}catch{}}function ji(){return(ji=(0,E.Z)(function*(_,f=!1){const p=(0,F.m9)(_),I=yield p.getIdToken(f),C=_t(I);Z(C&&C.exp&&C.auth_time&&C.iat,p.auth,"internal-error");const M="object"==typeof C.firebase?C.firebase:void 0,H=M?.sign_in_provider;return{claims:C,token:I,authTime:mr(at(C.auth_time)),issuedAtTime:mr(at(C.iat)),expirationTime:mr(at(C.exp)),signInProvider:H||null,signInSecondFactor:M?.sign_in_second_factor||null}})).apply(this,arguments)}function at(_){return 1e3*Number(_)}function _t(_){const[f,p,I]=_.split(".");if(void 0===f||void 0===p||void 0===I)return Ye("JWT malformed, contained fewer than 3 sections"),null;try{const C=(0,F.tV)(p);return C?JSON.parse(C):(Ye("Failed to decode base64 JWT payload"),null)}catch(C){return Ye("Caught error parsing JWT payload as JSON",C?.toString()),null}}function $t(_,f){return _r.apply(this,arguments)}function _r(){return(_r=(0,E.Z)(function*(_,f,p=!1){if(p)return f;try{return yield f}catch(I){throw I instanceof F.ZR&&function Gr({code:_}){return"auth/user-disabled"===_||"auth/user-token-expired"===_}(I)&&_.auth.currentUser===_&&(yield _.auth.signOut()),I}})).apply(this,arguments)}class At{constructor(f){this.user=f,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(f){var p;if(f){const I=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),I}{this.errorBackoff=3e4;const C=(null!==(p=this.user.stsTokenManager.expirationTime)&&void 0!==p?p:0)-Date.now()-3e5;return Math.max(0,C)}}schedule(f=!1){var p=this;if(!this.isRunning)return;const I=this.getInterval(f);this.timerId=setTimeout((0,E.Z)(function*(){yield p.iteration()}),I)}iteration(){var f=this;return(0,E.Z)(function*(){try{yield f.user.getIdToken(!0)}catch(p){return void("auth/network-request-failed"===p?.code&&f.schedule(!0))}f.schedule()})()}}class En{constructor(f,p){this.createdAt=f,this.lastLoginAt=p,this._initializeTime()}_initializeTime(){this.lastSignInTime=mr(this.lastLoginAt),this.creationTime=mr(this.createdAt)}_copy(f){this.createdAt=f.createdAt,this.lastLoginAt=f.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function Xi(_){return Ht.apply(this,arguments)}function Ht(){return Ht=(0,E.Z)(function*(_){var f;const p=_.auth,I=yield _.getIdToken(),C=yield $t(_,function Hr(_,f){return zr.apply(this,arguments)}(p,{idToken:I}));Z(C?.users.length,p,"internal-error");const M=C.users[0];_._notifyReloadListener(M);const H=null!==(f=M.providerUserInfo)&&void 0!==f&&f.length?function wi(_){return _.map(f=>{var{providerId:p}=f,I=(0,oe._T)(f,["providerId"]);return{providerId:p,uid:I.rawId||"",displayName:I.displayName||null,email:I.email||null,phoneNumber:I.phoneNumber||null,photoURL:I.photoUrl||null}})}(M.providerUserInfo):[],te=function wn(_,f){return[..._.filter(I=>!f.some(C=>C.providerId===I.providerId)),...f]}(_.providerData,H),et=!!_.isAnonymous&&!(_.email&&M.passwordHash||te?.length),Mt={uid:M.localId,displayName:M.displayName||null,photoURL:M.photoUrl||null,email:M.email||null,emailVerified:M.emailVerified||!1,phoneNumber:M.phoneNumber||null,tenantId:M.tenantId||null,providerData:te,metadata:new En(M.createdAt,M.lastLoginAt),isAnonymous:et};Object.assign(_,Mt)}),Ht.apply(this,arguments)}function bt(){return(bt=(0,E.Z)(function*(_){const f=(0,F.m9)(_);yield Xi(f),yield f.auth._persistUserIfCurrent(f),f.auth._notifyListenersIfCurrent(f)})).apply(this,arguments)}function $i(){return($i=(0,E.Z)(function*(_,f){const p=yield Ze(_,{},(0,E.Z)(function*(){const I=(0,F.xO)({grant_type:"refresh_token",refresh_token:f}).slice(1),{tokenApiHost:C,apiKey:M}=_.config,H=jt(_,C,"/v1/token",`key=${M}`),te=yield _._getAdditionalHeaders();return te["Content-Type"]="application/x-www-form-urlencoded",ne.fetch()(H,{method:"POST",headers:te,body:I})}));return{accessToken:p.access_token,expiresIn:p.expires_in,refreshToken:p.refresh_token}})).apply(this,arguments)}class jn{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(f){Z(f.idToken,"internal-error"),Z(typeof f.idToken<"u","internal-error"),Z(typeof f.refreshToken<"u","internal-error");const p="expiresIn"in f&&typeof f.expiresIn<"u"?Number(f.expiresIn):function mt(_){const f=_t(_);return Z(f,"internal-error"),Z(typeof f.exp<"u","internal-error"),Z(typeof f.iat<"u","internal-error"),Number(f.exp)-Number(f.iat)}(f.idToken);this.updateTokensAndExpiration(f.idToken,f.refreshToken,p)}getToken(f,p=!1){var I=this;return(0,E.Z)(function*(){return Z(!I.accessToken||I.refreshToken,f,"user-token-expired"),p||!I.accessToken||I.isExpired?I.refreshToken?(yield I.refresh(f,I.refreshToken),I.accessToken):null:I.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(f,p){var I=this;return(0,E.Z)(function*(){const{accessToken:C,refreshToken:M,expiresIn:H}=yield function Di(_,f){return $i.apply(this,arguments)}(f,p);I.updateTokensAndExpiration(C,M,Number(H))})()}updateTokensAndExpiration(f,p,I){this.refreshToken=p||null,this.accessToken=f||null,this.expirationTime=Date.now()+1e3*I}static fromJSON(f,p){const{refreshToken:I,accessToken:C,expirationTime:M}=p,H=new jn;return I&&(Z("string"==typeof I,"internal-error",{appName:f}),H.refreshToken=I),C&&(Z("string"==typeof C,"internal-error",{appName:f}),H.accessToken=C),M&&(Z("number"==typeof M,"internal-error",{appName:f}),H.expirationTime=M),H}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(f){this.accessToken=f.accessToken,this.refreshToken=f.refreshToken,this.expirationTime=f.expirationTime}_clone(){return Object.assign(new jn,this.toJSON())}_performRefresh(){return Je("not implemented")}}function $n(_,f){Z("string"==typeof _||typeof _>"u","internal-error",{appName:f})}class Yn{constructor(f){var{uid:p,auth:I,stsTokenManager:C}=f,M=(0,oe._T)(f,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new At(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=p,this.auth=I,this.stsTokenManager=C,this.accessToken=C.accessToken,this.displayName=M.displayName||null,this.email=M.email||null,this.emailVerified=M.emailVerified||!1,this.phoneNumber=M.phoneNumber||null,this.photoURL=M.photoURL||null,this.isAnonymous=M.isAnonymous||!1,this.tenantId=M.tenantId||null,this.providerData=M.providerData?[...M.providerData]:[],this.metadata=new En(M.createdAt||void 0,M.lastLoginAt||void 0)}getIdToken(f){var p=this;return(0,E.Z)(function*(){const I=yield $t(p,p.stsTokenManager.getToken(p.auth,f));return Z(I,p.auth,"internal-error"),p.accessToken!==I&&(p.accessToken=I,yield p.auth._persistUserIfCurrent(p),p.auth._notifyListenersIfCurrent(p)),I})()}getIdTokenResult(f){return function yr(_){return ji.apply(this,arguments)}(this,f)}reload(){return function Ts(_){return bt.apply(this,arguments)}(this)}_assign(f){this!==f&&(Z(this.uid===f.uid,this.auth,"internal-error"),this.displayName=f.displayName,this.photoURL=f.photoURL,this.email=f.email,this.emailVerified=f.emailVerified,this.phoneNumber=f.phoneNumber,this.isAnonymous=f.isAnonymous,this.tenantId=f.tenantId,this.providerData=f.providerData.map(p=>Object.assign({},p)),this.metadata._copy(f.metadata),this.stsTokenManager._assign(f.stsTokenManager))}_clone(f){const p=new Yn(Object.assign(Object.assign({},this),{auth:f,stsTokenManager:this.stsTokenManager._clone()}));return p.metadata._copy(this.metadata),p}_onReload(f){Z(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=f,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(f){this.reloadListener?this.reloadListener(f):this.reloadUserInfo=f}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(f,p=!1){var I=this;return(0,E.Z)(function*(){let C=!1;f.idToken&&f.idToken!==I.stsTokenManager.accessToken&&(I.stsTokenManager.updateFromServerResponse(f),C=!0),p&&(yield Xi(I)),yield I.auth._persistUserIfCurrent(I),C&&I.auth._notifyListenersIfCurrent(I)})()}delete(){var f=this;return(0,E.Z)(function*(){const p=yield f.getIdToken();return yield $t(f,function _n(_,f){return vn.apply(this,arguments)}(f.auth,{idToken:p})),f.stsTokenManager.clearRefreshToken(),f.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(f=>Object.assign({},f)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(f,p){var I,C,M,H,te,Ne,je,et;const Mt=null!==(I=p.displayName)&&void 0!==I?I:void 0,er=null!==(C=p.email)&&void 0!==C?C:void 0,Ri=null!==(M=p.phoneNumber)&&void 0!==M?M:void 0,Xa=null!==(H=p.photoURL)&&void 0!==H?H:void 0,Gd=null!==(te=p.tenantId)&&void 0!==te?te:void 0,Mc=null!==(Ne=p._redirectEventId)&&void 0!==Ne?Ne:void 0,Nc=null!==(je=p.createdAt)&&void 0!==je?je:void 0,Ky=null!==(et=p.lastLoginAt)&&void 0!==et?et:void 0,{uid:Wd,emailVerified:Pp,isAnonymous:Rc,providerData:kp,stsTokenManager:qd}=p;Z(Wd&&qd,f,"internal-error");const Kd=jn.fromJSON(this.name,qd);Z("string"==typeof Wd,f,"internal-error"),$n(Mt,f.name),$n(er,f.name),Z("boolean"==typeof Pp,f,"internal-error"),Z("boolean"==typeof Rc,f,"internal-error"),$n(Ri,f.name),$n(Xa,f.name),$n(Gd,f.name),$n(Mc,f.name),$n(Nc,f.name),$n(Ky,f.name);const Pc=new Yn({uid:Wd,auth:f,email:er,emailVerified:Pp,displayName:Mt,isAnonymous:Rc,photoURL:Xa,phoneNumber:Ri,tenantId:Gd,stsTokenManager:Kd,createdAt:Nc,lastLoginAt:Ky});return kp&&Array.isArray(kp)&&(Pc.providerData=kp.map(sE=>Object.assign({},sE))),Mc&&(Pc._redirectEventId=Mc),Pc}static _fromIdTokenResponse(f,p,I=!1){return(0,E.Z)(function*(){const C=new jn;C.updateFromServerResponse(p);const M=new Yn({uid:p.localId,auth:f,stsTokenManager:C,isAnonymous:I});return yield Xi(M),M})()}}const Rr=new Map;function hn(_){Xe(_ instanceof Function,"Expected a class definition");let f=Rr.get(_);return f?(Xe(f instanceof _,"Instance stored in cache mismatched with class"),f):(f=new _,Rr.set(_,f),f)}const Wr=(()=>{class _{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,E.Z)(function*(){return!0})()}_set(p,I){var C=this;return(0,E.Z)(function*(){C.storage[p]=I})()}_get(p){var I=this;return(0,E.Z)(function*(){const C=I.storage[p];return void 0===C?null:C})()}_remove(p){var I=this;return(0,E.Z)(function*(){delete I.storage[p]})()}_addListener(p,I){}_removeListener(p,I){}}return _.type="NONE",_})();function bi(_,f,p){return`firebase:${_}:${f}:${p}`}class B{constructor(f,p,I){this.persistence=f,this.auth=p,this.userKey=I;const{config:C,name:M}=this.auth;this.fullUserKey=bi(this.userKey,C.apiKey,M),this.fullPersistenceKey=bi("persistence",C.apiKey,M),this.boundEventHandler=p._onStorageEvent.bind(p),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(f){return this.persistence._set(this.fullUserKey,f.toJSON())}getCurrentUser(){var f=this;return(0,E.Z)(function*(){const p=yield f.persistence._get(f.fullUserKey);return p?Yn._fromJSON(f.auth,p):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(f){var p=this;return(0,E.Z)(function*(){if(p.persistence===f)return;const I=yield p.getCurrentUser();return yield p.removeCurrentUser(),p.persistence=f,I?p.setCurrentUser(I):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(f,p,I="authUser"){return(0,E.Z)(function*(){if(!p.length)return new B(hn(Wr),f,I);const C=(yield Promise.all(p.map(function(){var je=(0,E.Z)(function*(et){if(yield et._isAvailable())return et});return function(et){return je.apply(this,arguments)}}()))).filter(je=>je);let M=C[0]||hn(Wr);const H=bi(I,f.config.apiKey,f.name);let te=null;for(const je of p)try{const et=yield je._get(H);if(et){const Mt=Yn._fromJSON(f,et);je!==M&&(te=Mt),M=je;break}}catch{}const Ne=C.filter(je=>je._shouldAllowMigration);return M._shouldAllowMigration&&Ne.length?(M=Ne[0],te&&(yield M._set(H,te.toJSON())),yield Promise.all(p.map(function(){var je=(0,E.Z)(function*(et){if(et!==M)try{yield et._remove(H)}catch{}});return function(et){return je.apply(this,arguments)}}())),new B(M,f,I)):new B(M,f,I)})()}}function L(_){const f=_.toLowerCase();if(f.includes("opera/")||f.includes("opr/")||f.includes("opios/"))return"Opera";if(G(f))return"IEMobile";if(f.includes("msie")||f.includes("trident/"))return"IE";if(f.includes("edge/"))return"Edge";if(N(f))return"Firefox";if(f.includes("silk/"))return"Silk";if(ke(f))return"Blackberry";if(ht(f))return"Webos";if(R(f))return"Safari";if((f.includes("chrome/")||x(f))&&!f.includes("edge/"))return"Chrome";if(de(f))return"Android";{const I=_.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===I?.length)return I[1]}return"Other"}function N(_=(0,F.z$)()){return/firefox\//i.test(_)}function R(_=(0,F.z$)()){const f=_.toLowerCase();return f.includes("safari/")&&!f.includes("chrome/")&&!f.includes("crios/")&&!f.includes("android")}function x(_=(0,F.z$)()){return/crios\//i.test(_)}function G(_=(0,F.z$)()){return/iemobile/i.test(_)}function de(_=(0,F.z$)()){return/android/i.test(_)}function ke(_=(0,F.z$)()){return/blackberry/i.test(_)}function ht(_=(0,F.z$)()){return/webos/i.test(_)}function ze(_=(0,F.z$)()){return/iphone|ipad|ipod/i.test(_)||/macintosh/i.test(_)&&/mobile/i.test(_)}function Ft(_=(0,F.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(_)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(_)}function St(_=(0,F.z$)()){return ze(_)||de(_)||ht(_)||ke(_)||/windows phone/i.test(_)||G(_)}function ro(_,f=[]){let p;switch(_){case"Browser":p=L((0,F.z$)());break;case"Worker":p=`${L((0,F.z$)())}-${_}`;break;default:p=_}const I=f.length?f.join(","):"FirebaseCore-web";return`${p}/JsCore/${k.SDK_VERSION}/${I}`}function Y(){return(Y=(0,E.Z)(function*(_){return(yield fe(_,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function Ie(_,f){return qe.apply(this,arguments)}function qe(){return(qe=(0,E.Z)(function*(_,f){return fe(_,"GET","/v2/recaptchaConfig",X(_,f))})).apply(this,arguments)}function Ue(_){return void 0!==_&&void 0!==_.getResponse}function Tt(_){return void 0!==_&&void 0!==_.enterprise}class Bt{constructor(f){if(this.siteKey="",this.emailPasswordEnabled=!1,void 0===f.recaptchaKey)throw new Error("recaptchaKey undefined");this.siteKey=f.recaptchaKey.split("/")[3],this.emailPasswordEnabled=f.recaptchaEnforcementState.some(p=>"EMAIL_PASSWORD_PROVIDER"===p.provider&&"OFF"!==p.enforcementState)}}function fn(_){return new Promise((f,p)=>{const I=document.createElement("script");I.setAttribute("src",_),I.onload=f,I.onerror=C=>{const M=ce("internal-error");M.customData=C,p(M)},I.type="text/javascript",I.charset="UTF-8",function Vn(){var _,f;return null!==(f=null===(_=document.getElementsByTagName("head"))||void 0===_?void 0:_[0])&&void 0!==f?f:document}().appendChild(I)})}function ur(_){return`__${_}${Math.floor(1e6*Math.random())}`}class Gu{constructor(f){this.type="recaptcha-enterprise",this.auth=pn(f)}verify(f="verify",p=!1){var I=this;return(0,E.Z)(function*(){function M(){return M=(0,E.Z)(function*(te){if(!p){if(null==te.tenantId&&null!=te._agentRecaptchaConfig)return te._agentRecaptchaConfig.siteKey;if(null!=te.tenantId&&void 0!==te._tenantRecaptchaConfigs[te.tenantId])return te._tenantRecaptchaConfigs[te.tenantId].siteKey}return new Promise(function(){var Ne=(0,E.Z)(function*(je,et){Ie(te,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(Mt=>{if(void 0!==Mt.recaptchaKey){const er=new Bt(Mt);return null==te.tenantId?te._agentRecaptchaConfig=er:te._tenantRecaptchaConfigs[te.tenantId]=er,je(er.siteKey)}et(new Error("recaptcha Enterprise site key undefined"))}).catch(Mt=>{et(Mt)})});return function(je,et){return Ne.apply(this,arguments)}}())}),M.apply(this,arguments)}function H(te,Ne,je){const et=window.grecaptcha;Tt(et)?et.enterprise.ready(()=>{et.enterprise.execute(te,{action:f}).then(Mt=>{Ne(Mt)}).catch(()=>{Ne("NO_RECAPTCHA")})}):je(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((te,Ne)=>{(function C(te){return M.apply(this,arguments)})(I.auth).then(je=>{if(!p&&Tt(window.grecaptcha))H(je,te,Ne);else{if(typeof window>"u")return void Ne(new Error("RecaptchaVerifier is only supported in browser"));fn("https://www.google.com/recaptcha/enterprise.js?render="+je).then(()=>{H(je,te,Ne)}).catch(et=>{Ne(et)})}}).catch(je=>{Ne(je)})})})()}}function ns(_,f,p){return xa.apply(this,arguments)}function xa(){return(xa=(0,E.Z)(function*(_,f,p,I=!1){const C=new Gu(_);let M;try{M=yield C.verify(p)}catch{M=yield C.verify(p,!0)}const H=Object.assign({},f);return Object.assign(H,I?{captchaResp:M}:{captchaResponse:M}),Object.assign(H,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(H,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),H})).apply(this,arguments)}class Ma{constructor(f){this.auth=f,this.queue=[]}pushCallback(f,p){const I=M=>new Promise((H,te)=>{try{H(f(M))}catch(Ne){te(Ne)}});I.onAbort=p,this.queue.push(I);const C=this.queue.length-1;return()=>{this.queue[C]=()=>Promise.resolve()}}runMiddleware(f){var p=this;return(0,E.Z)(function*(){if(p.auth.currentUser===f)return;const I=[];try{for(const C of p.queue)yield C(f),C.onAbort&&I.push(C.onAbort)}catch(C){I.reverse();for(const M of I)try{M()}catch{}throw p.auth._errorFactory.create("login-blocked",{originalMessage:C?.message})}})()}}class zf{constructor(f,p,I,C){this.app=f,this.heartbeatServiceProvider=p,this.appCheckServiceProvider=I,this.config=C,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new uy(this),this.idTokenSubscription=new uy(this),this.beforeStateQueue=new Ma(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=ue,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=f.name,this.clientVersion=C.sdkClientVersion}_initializeWithPersistence(f,p){var I=this;return p&&(this._popupRedirectResolver=hn(p)),this._initializationPromise=this.queue((0,E.Z)(function*(){var C,M;if(!I._deleted&&(I.persistenceManager=yield B.create(I,f),!I._deleted)){if(null!==(C=I._popupRedirectResolver)&&void 0!==C&&C._shouldInitProactively)try{yield I._popupRedirectResolver._initialize(I)}catch{}yield I.initializeCurrentUser(p),I.lastNotifiedUid=(null===(M=I.currentUser)||void 0===M?void 0:M.uid)||null,!I._deleted&&(I._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var f=this;return(0,E.Z)(function*(){if(f._deleted)return;const p=yield f.assertedPersistence.getCurrentUser();if(f.currentUser||p){if(f.currentUser&&p&&f.currentUser.uid===p.uid)return f._currentUser._assign(p),void(yield f.currentUser.getIdToken());yield f._updateCurrentUser(p,!0)}})()}initializeCurrentUser(f){var p=this;return(0,E.Z)(function*(){var I;const C=yield p.assertedPersistence.getCurrentUser();let M=C,H=!1;if(f&&p.config.authDomain){yield p.getOrInitRedirectPersistenceManager();const te=null===(I=p.redirectUser)||void 0===I?void 0:I._redirectEventId,Ne=M?._redirectEventId,je=yield p.tryRedirectSignIn(f);(!te||te===Ne)&&je?.user&&(M=je.user,H=!0)}if(!M)return p.directlySetCurrentUser(null);if(!M._redirectEventId){if(H)try{yield p.beforeStateQueue.runMiddleware(M)}catch(te){M=C,p._popupRedirectResolver._overrideRedirectResult(p,()=>Promise.reject(te))}return M?p.reloadAndSetCurrentUserOrClear(M):p.directlySetCurrentUser(null)}return Z(p._popupRedirectResolver,p,"argument-error"),yield p.getOrInitRedirectPersistenceManager(),p.redirectUser&&p.redirectUser._redirectEventId===M._redirectEventId?p.directlySetCurrentUser(M):p.reloadAndSetCurrentUserOrClear(M)})()}tryRedirectSignIn(f){var p=this;return(0,E.Z)(function*(){let I=null;try{I=yield p._popupRedirectResolver._completeRedirectFn(p,f,!0)}catch{yield p._setRedirectUser(null)}return I})()}reloadAndSetCurrentUserOrClear(f){var p=this;return(0,E.Z)(function*(){try{yield Xi(f)}catch(I){if("auth/network-request-failed"!==I?.code)return p.directlySetCurrentUser(null)}return p.directlySetCurrentUser(f)})()}useDeviceLanguage(){this.languageCode=function cn(){if(typeof navigator>"u")return null;const _=navigator;return _.languages&&_.languages[0]||_.language||null}()}_delete(){var f=this;return(0,E.Z)(function*(){f._deleted=!0})()}updateCurrentUser(f){var p=this;return(0,E.Z)(function*(){const I=f?(0,F.m9)(f):null;return I&&Z(I.auth.config.apiKey===p.config.apiKey,p,"invalid-user-token"),p._updateCurrentUser(I&&I._clone(p))})()}_updateCurrentUser(f,p=!1){var I=this;return(0,E.Z)(function*(){if(!I._deleted)return f&&Z(I.tenantId===f.tenantId,I,"tenant-id-mismatch"),p||(yield I.beforeStateQueue.runMiddleware(f)),I.queue((0,E.Z)(function*(){yield I.directlySetCurrentUser(f),I.notifyAuthListeners()}))})()}signOut(){var f=this;return(0,E.Z)(function*(){return yield f.beforeStateQueue.runMiddleware(null),(f.redirectPersistenceManager||f._popupRedirectResolver)&&(yield f._setRedirectUser(null)),f._updateCurrentUser(null,!0)})()}setPersistence(f){var p=this;return this.queue((0,E.Z)(function*(){yield p.assertedPersistence.setPersistence(hn(f))}))}initializeRecaptchaConfig(){var f=this;return(0,E.Z)(function*(){const p=yield Ie(f,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}),I=new Bt(p);null==f.tenantId?f._agentRecaptchaConfig=I:f._tenantRecaptchaConfigs[f.tenantId]=I,I.emailPasswordEnabled&&new Gu(f).verify()})()}_getRecaptchaConfig(){return null==this.tenantId?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(f){this._errorFactory=new F.LL("auth","Firebase",f())}onAuthStateChanged(f,p,I){return this.registerStateListener(this.authStateSubscription,f,p,I)}beforeAuthStateChanged(f,p){return this.beforeStateQueue.pushCallback(f,p)}onIdTokenChanged(f,p,I){return this.registerStateListener(this.idTokenSubscription,f,p,I)}toJSON(){var f;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(f=this._currentUser)||void 0===f?void 0:f.toJSON()}}_setRedirectUser(f,p){var I=this;return(0,E.Z)(function*(){const C=yield I.getOrInitRedirectPersistenceManager(p);return null===f?C.removeCurrentUser():C.setCurrentUser(f)})()}getOrInitRedirectPersistenceManager(f){var p=this;return(0,E.Z)(function*(){if(!p.redirectPersistenceManager){const I=f&&hn(f)||p._popupRedirectResolver;Z(I,p,"argument-error"),p.redirectPersistenceManager=yield B.create(p,[hn(I._redirectPersistence)],"redirectUser"),p.redirectUser=yield p.redirectPersistenceManager.getCurrentUser()}return p.redirectPersistenceManager})()}_redirectUserForId(f){var p=this;return(0,E.Z)(function*(){var I,C;return p._isInitialized&&(yield p.queue((0,E.Z)(function*(){}))),(null===(I=p._currentUser)||void 0===I?void 0:I._redirectEventId)===f?p._currentUser:(null===(C=p.redirectUser)||void 0===C?void 0:C._redirectEventId)===f?p.redirectUser:null})()}_persistUserIfCurrent(f){var p=this;return(0,E.Z)(function*(){if(f===p.currentUser)return p.queue((0,E.Z)(function*(){return p.directlySetCurrentUser(f)}))})()}_notifyListenersIfCurrent(f){f===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var f,p;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const I=null!==(p=null===(f=this.currentUser)||void 0===f?void 0:f.uid)&&void 0!==p?p:null;this.lastNotifiedUid!==I&&(this.lastNotifiedUid=I,this.authStateSubscription.next(this.currentUser))}registerStateListener(f,p,I,C){if(this._deleted)return()=>{};const M="function"==typeof p?p:p.next.bind(p),H=this._isInitialized?Promise.resolve():this._initializationPromise;return Z(H,this,"internal-error"),H.then(()=>M(this.currentUser)),"function"==typeof p?f.addObserver(p,I,C):f.addObserver(p)}directlySetCurrentUser(f){var p=this;return(0,E.Z)(function*(){p.currentUser&&p.currentUser!==f&&p._currentUser._stopProactiveRefresh(),f&&p.isProactiveRefreshEnabled&&f._startProactiveRefresh(),p.currentUser=f,f?yield p.assertedPersistence.setCurrentUser(f):yield p.assertedPersistence.removeCurrentUser()})()}queue(f){return this.operations=this.operations.then(f,f),this.operations}get assertedPersistence(){return Z(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(f){!f||this.frameworks.includes(f)||(this.frameworks.push(f),this.frameworks.sort(),this.clientVersion=ro(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var f=this;return(0,E.Z)(function*(){var p;const I={"X-Client-Version":f.clientVersion};f.app.options.appId&&(I["X-Firebase-gmpid"]=f.app.options.appId);const C=yield null===(p=f.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===p?void 0:p.getHeartbeatsHeader();C&&(I["X-Firebase-Client"]=C);const M=yield f._getAppCheckToken();return M&&(I["X-Firebase-AppCheck"]=M),I})()}_getAppCheckToken(){var f=this;return(0,E.Z)(function*(){var p;const I=yield null===(p=f.appCheckServiceProvider.getImmediate({optional:!0}))||void 0===p?void 0:p.getToken();return I?.error&&function We(_,...f){Pe.logLevel<=me.in.WARN&&Pe.warn(`Auth (${k.SDK_VERSION}): ${_}`,...f)}(`Error while retrieving App Check token: ${I.error}`),I?.token})()}}function pn(_){return(0,F.m9)(_)}class uy{constructor(f){this.auth=f,this.observer=null,this.addObserver=(0,F.ne)(p=>this.observer=p)}get next(){return Z(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function ed(_,f,p){const I=pn(_);Z(I._canInitEmulator,I,"emulator-config-failed"),Z(/^https?:\/\//.test(f),I,"invalid-emulator-scheme");const C=!!p?.disableWarnings,M=Pr(f),{host:H,port:te}=function td(_){const f=Pr(_),p=/(\/\/)?([^?#/]+)/.exec(_.substr(f.length));if(!p)return{host:"",port:null};const I=p[2].split("@").pop()||"",C=/^(\[[^\]]+\])(:|$)/.exec(I);if(C){const M=C[1];return{host:M,port:nd(I.substr(M.length+1))}}{const[M,H]=I.split(":");return{host:M,port:nd(H)}}}(f);I.config.emulator={url:`${M}//${H}${null===te?"":`:${te}`}/`},I.settings.appVerificationDisabledForTesting=!0,I.emulatorConfig=Object.freeze({host:H,port:te,protocol:M.replace(":",""),options:Object.freeze({disableWarnings:C})}),C||function ly(){function _(){const f=document.createElement("p"),p=f.style;f.innerText="Running in emulator mode. Do not use with production credentials.",p.position="fixed",p.width="100%",p.backgroundColor="#ffffff",p.border=".1em solid #000000",p.color="#b50000",p.bottom="0px",p.left="0px",p.margin="0px",p.zIndex="10000",p.textAlign="center",f.classList.add("firebase-emulator-warning"),document.body.appendChild(f)}typeof console<"u"&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",_):_())}()}function Pr(_){const f=_.indexOf(":");return f<0?"":_.substr(0,f+1)}function nd(_){if(!_)return null;const f=Number(_);return isNaN(f)?null:f}class Na{constructor(f,p){this.providerId=f,this.signInMethod=p}toJSON(){return Je("not implemented")}_getIdTokenResponse(f){return Je("not implemented")}_linkToIdToken(f,p){return Je("not implemented")}_getReauthenticationResolver(f){return Je("not implemented")}}function rd(_,f){return Gf.apply(this,arguments)}function Gf(){return(Gf=(0,E.Z)(function*(_,f){return fe(_,"POST","/v1/accounts:resetPassword",X(_,f))})).apply(this,arguments)}function Wf(_,f){return qf.apply(this,arguments)}function qf(){return(qf=(0,E.Z)(function*(_,f){return fe(_,"POST","/v1/accounts:update",f)})).apply(this,arguments)}function qr(){return(qr=(0,E.Z)(function*(_,f){return fe(_,"POST","/v1/accounts:update",X(_,f))})).apply(this,arguments)}function qu(_,f){return id.apply(this,arguments)}function id(){return(id=(0,E.Z)(function*(_,f){return Jt(_,"POST","/v1/accounts:signInWithPassword",X(_,f))})).apply(this,arguments)}function Ku(_,f){return sd.apply(this,arguments)}function sd(){return(sd=(0,E.Z)(function*(_,f){return fe(_,"POST","/v1/accounts:sendOobCode",X(_,f))})).apply(this,arguments)}function ad(){return(ad=(0,E.Z)(function*(_,f){return Ku(_,f)})).apply(this,arguments)}function Zu(_,f){return Yu.apply(this,arguments)}function Yu(){return(Yu=(0,E.Z)(function*(_,f){return Ku(_,f)})).apply(this,arguments)}function Qu(_,f){return kt.apply(this,arguments)}function kt(){return(kt=(0,E.Z)(function*(_,f){return Ku(_,f)})).apply(this,arguments)}function Jn(){return(Jn=(0,E.Z)(function*(_,f){return Ku(_,f)})).apply(this,arguments)}function Ir(){return(Ir=(0,E.Z)(function*(_,f){return Jt(_,"POST","/v1/accounts:signInWithEmailLink",X(_,f))})).apply(this,arguments)}function Ju(){return(Ju=(0,E.Z)(function*(_,f){return Jt(_,"POST","/v1/accounts:signInWithEmailLink",X(_,f))})).apply(this,arguments)}class Cs extends Na{constructor(f,p,I,C=null){super("password",I),this._email=f,this._password=p,this._tenantId=C}static _fromEmailAndPassword(f,p){return new Cs(f,p,"password")}static _fromEmailAndCode(f,p,I=null){return new Cs(f,p,"emailLink",I)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(f){const p="string"==typeof f?JSON.parse(f):f;if(p?.email&&p?.password){if("password"===p.signInMethod)return this._fromEmailAndPassword(p.email,p.password);if("emailLink"===p.signInMethod)return this._fromEmailAndCode(p.email,p.password,p.tenantId)}return null}_getIdTokenResponse(f){var p=this;return(0,E.Z)(function*(){var I;switch(p.signInMethod){case"password":const C={returnSecureToken:!0,email:p._email,password:p._password,clientType:"CLIENT_TYPE_WEB"};if(null!==(I=f._getRecaptchaConfig())&&void 0!==I&&I.emailPasswordEnabled){const M=yield ns(f,C,"signInWithPassword");return qu(f,M)}return qu(f,C).catch(function(){var M=(0,E.Z)(function*(H){if("auth/missing-recaptcha-token"===H.code){console.log("Sign-in with email address and password is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-in flow.");const te=yield ns(f,C,"signInWithPassword");return qu(f,te)}return Promise.reject(H)});return function(H){return M.apply(this,arguments)}}());case"emailLink":return function Ra(_,f){return Ir.apply(this,arguments)}(f,{email:p._email,oobCode:p._password});default:K(f,"internal-error")}})()}_linkToIdToken(f,p){var I=this;return(0,E.Z)(function*(){switch(I.signInMethod){case"password":return Wf(f,{idToken:p,returnSecureToken:!0,email:I._email,password:I._password});case"emailLink":return function Kf(_,f){return Ju.apply(this,arguments)}(f,{idToken:p,email:I._email,oobCode:I._password});default:K(f,"internal-error")}})()}_getReauthenticationResolver(f){return this._getIdTokenResponse(f)}}function rs(_,f){return ud.apply(this,arguments)}function ud(){return(ud=(0,E.Z)(function*(_,f){return Jt(_,"POST","/v1/accounts:signInWithIdp",X(_,f))})).apply(this,arguments)}class Oe extends Na{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(f){const p=new Oe(f.providerId,f.signInMethod);return f.idToken||f.accessToken?(f.idToken&&(p.idToken=f.idToken),f.accessToken&&(p.accessToken=f.accessToken),f.nonce&&!f.pendingToken&&(p.nonce=f.nonce),f.pendingToken&&(p.pendingToken=f.pendingToken)):f.oauthToken&&f.oauthTokenSecret?(p.accessToken=f.oauthToken,p.secret=f.oauthTokenSecret):K("argument-error"),p}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(f){const p="string"==typeof f?JSON.parse(f):f,{providerId:I,signInMethod:C}=p,M=(0,oe._T)(p,["providerId","signInMethod"]);if(!I||!C)return null;const H=new Oe(I,C);return H.idToken=M.idToken||void 0,H.accessToken=M.accessToken||void 0,H.secret=M.secret,H.nonce=M.nonce,H.pendingToken=M.pendingToken||null,H}_getIdTokenResponse(f){return rs(f,this.buildRequest())}_linkToIdToken(f,p){const I=this.buildRequest();return I.idToken=p,rs(f,I)}_getReauthenticationResolver(f){const p=this.buildRequest();return p.autoCreate=!1,rs(f,p)}buildRequest(){const f={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)f.pendingToken=this.pendingToken;else{const p={};this.idToken&&(p.id_token=this.idToken),this.accessToken&&(p.access_token=this.accessToken),this.secret&&(p.oauth_token_secret=this.secret),p.providerId=this.providerId,this.nonce&&!this.pendingToken&&(p.nonce=this.nonce),f.postBody=(0,F.xO)(p)}return f}}function rn(){return(rn=(0,E.Z)(function*(_,f){return fe(_,"POST","/v1/accounts:sendVerificationCode",X(_,f))})).apply(this,arguments)}function is(){return(is=(0,E.Z)(function*(_,f){return Jt(_,"POST","/v1/accounts:signInWithPhoneNumber",X(_,f))})).apply(this,arguments)}function io(){return(io=(0,E.Z)(function*(_,f){const p=yield Jt(_,"POST","/v1/accounts:signInWithPhoneNumber",X(_,f));if(p.temporaryProof)throw Zt(_,"account-exists-with-different-credential",p);return p})).apply(this,arguments)}const Dn={USER_NOT_FOUND:"user-not-found"};function Ss(){return(Ss=(0,E.Z)(function*(_,f){return Jt(_,"POST","/v1/accounts:signInWithPhoneNumber",X(_,Object.assign(Object.assign({},f),{operation:"REAUTH"})),Dn)})).apply(this,arguments)}class lt extends Na{constructor(f){super("phone","phone"),this.params=f}static _fromVerification(f,p){return new lt({verificationId:f,verificationCode:p})}static _fromTokenResponse(f,p){return new lt({phoneNumber:f,temporaryProof:p})}_getIdTokenResponse(f){return function Kr(_,f){return is.apply(this,arguments)}(f,this._makeVerificationRequest())}_linkToIdToken(f,p){return function Er(_,f){return io.apply(this,arguments)}(f,Object.assign({idToken:p},this._makeVerificationRequest()))}_getReauthenticationResolver(f){return function ss(_,f){return Ss.apply(this,arguments)}(f,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:f,phoneNumber:p,verificationId:I,verificationCode:C}=this.params;return f&&p?{temporaryProof:f,phoneNumber:p}:{sessionInfo:I,code:C}}toJSON(){const f={providerId:this.providerId};return this.params.phoneNumber&&(f.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(f.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(f.verificationCode=this.params.verificationCode),this.params.verificationId&&(f.verificationId=this.params.verificationId),f}static fromJSON(f){"string"==typeof f&&(f=JSON.parse(f));const{verificationId:p,verificationCode:I,phoneNumber:C,temporaryProof:M}=f;return I||p||C||M?new lt({verificationId:p,verificationCode:I,phoneNumber:C,temporaryProof:M}):null}}class Zr{constructor(f){var p,I,C,M,H,te;const Ne=(0,F.zd)((0,F.pd)(f)),je=null!==(p=Ne.apiKey)&&void 0!==p?p:null,et=null!==(I=Ne.oobCode)&&void 0!==I?I:null,Mt=function Pa(_){switch(_){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(C=Ne.mode)&&void 0!==C?C:null);Z(je&&et&&Mt,"argument-error"),this.apiKey=je,this.operation=Mt,this.code=et,this.continueUrl=null!==(M=Ne.continueUrl)&&void 0!==M?M:null,this.languageCode=null!==(H=Ne.languageCode)&&void 0!==H?H:null,this.tenantId=null!==(te=Ne.tenantId)&&void 0!==te?te:null}static parseLink(f){const p=function dy(_){const f=(0,F.zd)((0,F.pd)(_)).link,p=f?(0,F.zd)((0,F.pd)(f)).deep_link_id:null,I=(0,F.zd)((0,F.pd)(_)).deep_link_id;return(I?(0,F.zd)((0,F.pd)(I)).link:null)||I||p||f||_}(f);try{return new Zr(p)}catch{return null}}}let Po=(()=>{class _{constructor(){this.providerId=_.PROVIDER_ID}static credential(p,I){return Cs._fromEmailAndPassword(p,I)}static credentialWithLink(p,I){const C=Zr.parseLink(I);return Z(C,"argument-error"),Cs._fromEmailAndCode(p,C.code,C.tenantId)}}return _.PROVIDER_ID="password",_.EMAIL_PASSWORD_SIGN_IN_METHOD="password",_.EMAIL_LINK_SIGN_IN_METHOD="emailLink",_})();class Yr{constructor(f){this.providerId=f,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(f){this.defaultLanguageCode=f}setCustomParameters(f){return this.customParameters=f,this}getCustomParameters(){return this.customParameters}}class kr extends Yr{constructor(){super(...arguments),this.scopes=[]}addScope(f){return this.scopes.includes(f)||this.scopes.push(f),this}getScopes(){return[...this.scopes]}}class As extends kr{static credentialFromJSON(f){const p="string"==typeof f?JSON.parse(f):f;return Z("providerId"in p&&"signInMethod"in p,"argument-error"),Oe._fromParams(p)}credential(f){return this._credential(Object.assign(Object.assign({},f),{nonce:f.rawNonce}))}_credential(f){return Z(f.idToken||f.accessToken,"argument-error"),Oe._fromParams(Object.assign(Object.assign({},f),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(f){return As.oauthCredentialFromTaggedObject(f)}static credentialFromError(f){return As.oauthCredentialFromTaggedObject(f.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:f}){if(!f)return null;const{oauthIdToken:p,oauthAccessToken:I,oauthTokenSecret:C,pendingToken:M,nonce:H,providerId:te}=f;if(!I&&!C&&!p&&!M||!te)return null;try{return new As(te)._credential({idToken:p,accessToken:I,nonce:H,pendingToken:M})}catch{return null}}}let Zf=(()=>{class _ extends kr{constructor(){super("facebook.com")}static credential(p){return Oe._fromParams({providerId:_.PROVIDER_ID,signInMethod:_.FACEBOOK_SIGN_IN_METHOD,accessToken:p})}static credentialFromResult(p){return _.credentialFromTaggedObject(p)}static credentialFromError(p){return _.credentialFromTaggedObject(p.customData||{})}static credentialFromTaggedObject({_tokenResponse:p}){if(!p||!("oauthAccessToken"in p)||!p.oauthAccessToken)return null;try{return _.credential(p.oauthAccessToken)}catch{return null}}}return _.FACEBOOK_SIGN_IN_METHOD="facebook.com",_.PROVIDER_ID="facebook.com",_})(),so=(()=>{class _ extends kr{constructor(){super("google.com"),this.addScope("profile")}static credential(p,I){return Oe._fromParams({providerId:_.PROVIDER_ID,signInMethod:_.GOOGLE_SIGN_IN_METHOD,idToken:p,accessToken:I})}static credentialFromResult(p){return _.credentialFromTaggedObject(p)}static credentialFromError(p){return _.credentialFromTaggedObject(p.customData||{})}static credentialFromTaggedObject({_tokenResponse:p}){if(!p)return null;const{oauthIdToken:I,oauthAccessToken:C}=p;if(!I&&!C)return null;try{return _.credential(I,C)}catch{return null}}}return _.GOOGLE_SIGN_IN_METHOD="google.com",_.PROVIDER_ID="google.com",_})(),os=(()=>{class _ extends kr{constructor(){super("github.com")}static credential(p){return Oe._fromParams({providerId:_.PROVIDER_ID,signInMethod:_.GITHUB_SIGN_IN_METHOD,accessToken:p})}static credentialFromResult(p){return _.credentialFromTaggedObject(p)}static credentialFromError(p){return _.credentialFromTaggedObject(p.customData||{})}static credentialFromTaggedObject({_tokenResponse:p}){if(!p||!("oauthAccessToken"in p)||!p.oauthAccessToken)return null;try{return _.credential(p.oauthAccessToken)}catch{return null}}}return _.GITHUB_SIGN_IN_METHOD="github.com",_.PROVIDER_ID="github.com",_})();class Ti extends Na{constructor(f,p){super(f,f),this.pendingToken=p}_getIdTokenResponse(f){return rs(f,this.buildRequest())}_linkToIdToken(f,p){const I=this.buildRequest();return I.idToken=p,rs(f,I)}_getReauthenticationResolver(f){const p=this.buildRequest();return p.autoCreate=!1,rs(f,p)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(f){const p="string"==typeof f?JSON.parse(f):f,{providerId:I,signInMethod:C,pendingToken:M}=p;return I&&C&&M&&I===C?new Ti(I,M):null}static _create(f,p){return new Ti(f,p)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class ld extends Yr{constructor(f){Z(f.startsWith("saml."),"argument-error"),super(f)}static credentialFromResult(f){return ld.samlCredentialFromTaggedObject(f)}static credentialFromError(f){return ld.samlCredentialFromTaggedObject(f.customData||{})}static credentialFromJSON(f){const p=Ti.fromJSON(f);return Z(p,"argument-error"),p}static samlCredentialFromTaggedObject({_tokenResponse:f}){if(!f)return null;const{pendingToken:p,providerId:I}=f;if(!p||!I)return null;try{return Ti._create(I,p)}catch{return null}}}let dd=(()=>{class _ extends kr{constructor(){super("twitter.com")}static credential(p,I){return Oe._fromParams({providerId:_.PROVIDER_ID,signInMethod:_.TWITTER_SIGN_IN_METHOD,oauthToken:p,oauthTokenSecret:I})}static credentialFromResult(p){return _.credentialFromTaggedObject(p)}static credentialFromError(p){return _.credentialFromTaggedObject(p.customData||{})}static credentialFromTaggedObject({_tokenResponse:p}){if(!p)return null;const{oauthAccessToken:I,oauthTokenSecret:C}=p;if(!I||!C)return null;try{return _.credential(I,C)}catch{return null}}}return _.TWITTER_SIGN_IN_METHOD="twitter.com",_.PROVIDER_ID="twitter.com",_})();function ka(_,f){return wr.apply(this,arguments)}function wr(){return(wr=(0,E.Z)(function*(_,f){return Jt(_,"POST","/v1/accounts:signUp",X(_,f))})).apply(this,arguments)}class Dr{constructor(f){this.user=f.user,this.providerId=f.providerId,this._tokenResponse=f._tokenResponse,this.operationType=f.operationType}static _fromIdTokenResponse(f,p,I,C=!1){return(0,E.Z)(function*(){const M=yield Yn._fromIdTokenResponse(f,I,C),H=ko(I);return new Dr({user:M,providerId:H,_tokenResponse:I,operationType:p})})()}static _forOperation(f,p,I){return(0,E.Z)(function*(){yield f._updateTokensIfNecessary(I,!0);const C=ko(I);return new Dr({user:f,providerId:C,_tokenResponse:I,operationType:p})})()}}function ko(_){return _.providerId?_.providerId:"phoneNumber"in _?"phone":null}function Oa(_){return Un.apply(this,arguments)}function Un(){return(Un=(0,E.Z)(function*(_){var f;const p=pn(_);if(yield p._initializationPromise,null!==(f=p.currentUser)&&void 0!==f&&f.isAnonymous)return new Dr({user:p.currentUser,providerId:null,operationType:"signIn"});const I=yield ka(p,{returnSecureToken:!0}),C=yield Dr._fromIdTokenResponse(p,"signIn",I,!0);return yield p._updateCurrentUser(C.user),C})).apply(this,arguments)}class Yf extends F.ZR{constructor(f,p,I,C){var M;super(p.code,p.message),this.operationType=I,this.user=C,Object.setPrototypeOf(this,Yf.prototype),this.customData={appName:f.name,tenantId:null!==(M=f.tenantId)&&void 0!==M?M:void 0,_serverResponse:p.customData._serverResponse,operationType:I}}static _fromErrorAndOperation(f,p,I,C){return new Yf(f,p,I,C)}}function Or(_,f,p,I){return("reauthenticate"===f?p._getReauthenticationResolver(_):p._getIdTokenResponse(_)).catch(M=>{throw"auth/multi-factor-auth-required"===M.code?Yf._fromErrorAndOperation(_,M,f,I):M})}function br(_){return new Set(_.map(({providerId:f})=>f).filter(f=>!!f))}function hd(_,f){return as.apply(this,arguments)}function as(){return as=(0,E.Z)(function*(_,f){const p=(0,F.m9)(_);yield Oo(!0,p,f);const{providerUserInfo:I}=yield function Xt(_,f){return kn.apply(this,arguments)}(p.auth,{idToken:yield p.getIdToken(),deleteProvider:[f]}),C=br(I||[]);return p.providerData=p.providerData.filter(M=>C.has(M.providerId)),C.has("phone")||(p.phoneNumber=null),yield p.auth._persistUserIfCurrent(p),p}),as.apply(this,arguments)}function La(_,f){return di.apply(this,arguments)}function di(){return(di=(0,E.Z)(function*(_,f,p=!1){const I=yield $t(_,f._linkToIdToken(_.auth,yield _.getIdToken()),p);return Dr._forOperation(_,"link",I)})).apply(this,arguments)}function Oo(_,f,p){return fd.apply(this,arguments)}function fd(){return(fd=(0,E.Z)(function*(_,f,p){yield Xi(f);const C=!1===_?"provider-already-linked":"no-such-provider";Z(br(f.providerData).has(p)===_,f.auth,C)})).apply(this,arguments)}function Qf(_,f){return hy.apply(this,arguments)}function hy(){return(hy=(0,E.Z)(function*(_,f,p=!1){const{auth:I}=_,C="reauthenticate";try{const M=yield $t(_,Or(I,C,f,_),p);Z(M.idToken,I,"internal-error");const H=_t(M.idToken);Z(H,I,"internal-error");const{sub:te}=H;return Z(_.uid===te,I,"user-mismatch"),Dr._forOperation(_,C,M)}catch(M){throw"auth/user-not-found"===M?.code&&K(I,"user-mismatch"),M}})).apply(this,arguments)}function fy(_,f){return pd.apply(this,arguments)}function pd(){return(pd=(0,E.Z)(function*(_,f,p=!1){const I="signIn",C=yield Or(_,I,f),M=yield Dr._fromIdTokenResponse(_,I,C);return p||(yield _._updateCurrentUser(M.user)),M})).apply(this,arguments)}function gd(_,f){return Jf.apply(this,arguments)}function Jf(){return(Jf=(0,E.Z)(function*(_,f){return fy(pn(_),f)})).apply(this,arguments)}function G0(_,f){return py.apply(this,arguments)}function py(){return(py=(0,E.Z)(function*(_,f){const p=(0,F.m9)(_);return yield Oo(!1,p,f.providerId),La(p,f)})).apply(this,arguments)}function mn(_,f){return gy.apply(this,arguments)}function gy(){return(gy=(0,E.Z)(function*(_,f){return Qf((0,F.m9)(_),f)})).apply(this,arguments)}function my(){return(my=(0,E.Z)(function*(_,f){return Jt(_,"POST","/v1/accounts:signInWithCustomToken",X(_,f))})).apply(this,arguments)}function kT(_,f){return yy.apply(this,arguments)}function yy(){return yy=(0,E.Z)(function*(_,f){const p=pn(_),I=yield function PT(_,f){return my.apply(this,arguments)}(p,{token:f,returnSecureToken:!0}),C=yield Dr._fromIdTokenResponse(p,"signIn",I);return yield p._updateCurrentUser(C.user),C}),yy.apply(this,arguments)}class md{constructor(f,p){this.factorId=f,this.uid=p.mfaEnrollmentId,this.enrollmentTime=new Date(p.enrolledAt).toUTCString(),this.displayName=p.displayName}static _fromServerResponse(f,p){return"phoneInfo"in p?_y._fromServerResponse(f,p):"totpInfo"in p?Xu._fromServerResponse(f,p):K(f,"internal-error")}}class _y extends md{constructor(f){super("phone",f),this.phoneNumber=f.phoneInfo}static _fromServerResponse(f,p){return new _y(p)}}class Xu extends md{constructor(f){super("totp",f)}static _fromServerResponse(f,p){return new Xu(p)}}function Lo(_,f,p){var I;Z((null===(I=p.url)||void 0===I?void 0:I.length)>0,_,"invalid-continue-uri"),Z(typeof p.dynamicLinkDomain>"u"||p.dynamicLinkDomain.length>0,_,"invalid-dynamic-link-domain"),f.continueUrl=p.url,f.dynamicLinkDomain=p.dynamicLinkDomain,f.canHandleCodeInApp=p.handleCodeInApp,p.iOS&&(Z(p.iOS.bundleId.length>0,_,"missing-ios-bundle-id"),f.iOSBundleId=p.iOS.bundleId),p.android&&(Z(p.android.packageName.length>0,_,"missing-android-pkg-name"),f.androidInstallApp=p.android.installApp,f.androidMinimumVersionCode=p.android.minimumVersion,f.androidPackageName=p.android.packageName)}function OT(_,f,p){return vy.apply(this,arguments)}function vy(){return vy=(0,E.Z)(function*(_,f,p){var I;const C=pn(_),M={requestType:"PASSWORD_RESET",email:f,clientType:"CLIENT_TYPE_WEB"};if(null!==(I=C._getRecaptchaConfig())&&void 0!==I&&I.emailPasswordEnabled){const H=yield ns(C,M,"getOobCode",!0);p&&Lo(C,H,p),yield Zu(C,H)}else p&&Lo(C,M,p),yield Zu(C,M).catch(function(){var H=(0,E.Z)(function*(te){if("auth/missing-recaptcha-token"!==te.code)return Promise.reject(te);{console.log("Password resets are protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the password reset flow.");const Ne=yield ns(C,M,"getOobCode",!0);p&&Lo(C,Ne,p),yield Zu(C,Ne)}});return function(te){return H.apply(this,arguments)}}())}),vy.apply(this,arguments)}function Iy(_,f,p){return us.apply(this,arguments)}function us(){return(us=(0,E.Z)(function*(_,f,p){yield rd((0,F.m9)(_),{oobCode:f,newPassword:p})})).apply(this,arguments)}function Xf(_,f){return ec.apply(this,arguments)}function ec(){return ec=(0,E.Z)(function*(_,f){yield function z0(_,f){return qr.apply(this,arguments)}((0,F.m9)(_),{oobCode:f})}),ec.apply(this,arguments)}function xs(_,f){return yd.apply(this,arguments)}function yd(){return(yd=(0,E.Z)(function*(_,f){const p=(0,F.m9)(_),I=yield rd(p,{oobCode:f}),C=I.requestType;switch(Z(C,p,"internal-error"),C){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":Z(I.newEmail,p,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":Z(I.mfaInfo,p,"internal-error");default:Z(I.email,p,"internal-error")}let M=null;return I.mfaInfo&&(M=md._fromServerResponse(pn(p),I.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===I.requestType?I.newEmail:I.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===I.requestType?I.email:I.newEmail)||null,multiFactorInfo:M},operation:C}})).apply(this,arguments)}function W0(_,f){return tc.apply(this,arguments)}function tc(){return(tc=(0,E.Z)(function*(_,f){const{data:p}=yield xs((0,F.m9)(_),f);return p.email})).apply(this,arguments)}function ep(_,f,p){return Ey.apply(this,arguments)}function Ey(){return Ey=(0,E.Z)(function*(_,f,p){var I;const C=pn(_),M={returnSecureToken:!0,email:f,password:p,clientType:"CLIENT_TYPE_WEB"};let H;if(null!==(I=C._getRecaptchaConfig())&&void 0!==I&&I.emailPasswordEnabled){const je=yield ns(C,M,"signUpPassword");H=ka(C,je)}else H=ka(C,M).catch(function(){var je=(0,E.Z)(function*(et){if("auth/missing-recaptcha-token"===et.code){console.log("Sign-up is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-up flow.");const Mt=yield ns(C,M,"signUpPassword");return ka(C,Mt)}return Promise.reject(et)});return function(et){return je.apply(this,arguments)}}());const te=yield H.catch(je=>Promise.reject(je)),Ne=yield Dr._fromIdTokenResponse(C,"signIn",te);return yield C._updateCurrentUser(Ne.user),Ne}),Ey.apply(this,arguments)}function q0(_,f,p){return gd((0,F.m9)(_),Po.credential(f,p))}function Hi(_,f,p){return oo.apply(this,arguments)}function oo(){return oo=(0,E.Z)(function*(_,f,p){var I;const C=pn(_),M={requestType:"EMAIL_SIGNIN",email:f,clientType:"CLIENT_TYPE_WEB"};function H(te,Ne){Z(Ne.handleCodeInApp,C,"argument-error"),Ne&&Lo(C,te,Ne)}if(null!==(I=C._getRecaptchaConfig())&&void 0!==I&&I.emailPasswordEnabled){const te=yield ns(C,M,"getOobCode",!0);H(te,p),yield Qu(C,te)}else H(M,p),yield Qu(C,M).catch(function(){var te=(0,E.Z)(function*(Ne){if("auth/missing-recaptcha-token"!==Ne.code)return Promise.reject(Ne);{console.log("Email link sign-in is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-in flow.");const je=yield ns(C,M,"getOobCode",!0);H(je,p),yield Qu(C,je)}});return function(Ne){return te.apply(this,arguments)}}())}),oo.apply(this,arguments)}function Xn(_,f){const p=Zr.parseLink(f);return"EMAIL_SIGNIN"===p?.operation}function wy(_,f,p){return Dy.apply(this,arguments)}function Dy(){return(Dy=(0,E.Z)(function*(_,f,p){const I=(0,F.m9)(_),C=Po.credentialWithLink(f,p||Rt());return Z(C._tenantId===(I.tenantId||null),I,"tenant-id-mismatch"),gd(I,C)})).apply(this,arguments)}function nc(){return(nc=(0,E.Z)(function*(_,f){return fe(_,"POST","/v1/accounts:createAuthUri",X(_,f))})).apply(this,arguments)}function _d(_,f){return np.apply(this,arguments)}function np(){return np=(0,E.Z)(function*(_,f){const I={identifier:f,continueUri:ar()?Rt():"http://localhost"},{signinMethods:C}=yield function tp(_,f){return nc.apply(this,arguments)}((0,F.m9)(_),I);return C||[]}),np.apply(this,arguments)}function LT(_,f){return rc.apply(this,arguments)}function rc(){return rc=(0,E.Z)(function*(_,f){const p=(0,F.m9)(_),C={requestType:"VERIFY_EMAIL",idToken:yield _.getIdToken()};f&&Lo(p.auth,C,f);const{email:M}=yield function od(_,f){return ad.apply(this,arguments)}(p.auth,C);M!==_.email&&(yield _.reload())}),rc.apply(this,arguments)}function rp(_,f,p){return vd.apply(this,arguments)}function vd(){return vd=(0,E.Z)(function*(_,f,p){const I=(0,F.m9)(_),M={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield _.getIdToken(),newEmail:f};p&&Lo(I.auth,M,p);const{email:H}=yield function Qn(_,f){return Jn.apply(this,arguments)}(I.auth,M);H!==_.email&&(yield _.reload())}),vd.apply(this,arguments)}function ip(){return(ip=(0,E.Z)(function*(_,f){return fe(_,"POST","/v1/accounts:update",f)})).apply(this,arguments)}function FT(_,f){return by.apply(this,arguments)}function by(){return by=(0,E.Z)(function*(_,{displayName:f,photoURL:p}){if(void 0===f&&void 0===p)return;const I=(0,F.m9)(_),M={idToken:yield I.getIdToken(),displayName:f,photoUrl:p,returnSecureToken:!0},H=yield $t(I,function ic(_,f){return ip.apply(this,arguments)}(I.auth,M));I.displayName=H.displayName||null,I.photoURL=H.photoUrl||null;const te=I.providerData.find(({providerId:Ne})=>"password"===Ne);te&&(te.displayName=I.displayName,te.photoURL=I.photoURL),yield I._updateTokensIfNecessary(H)}),by.apply(this,arguments)}function K0(_,f){return Cy((0,F.m9)(_),f,null)}function Ty(_,f){return Cy((0,F.m9)(_),null,f)}function Cy(_,f,p){return sp.apply(this,arguments)}function sp(){return(sp=(0,E.Z)(function*(_,f,p){const{auth:I}=_,M={idToken:yield _.getIdToken(),returnSecureToken:!0};f&&(M.email=f),p&&(M.password=p);const H=yield $t(_,Wf(I,M));yield _._updateTokensIfNecessary(H,!0)})).apply(this,arguments)}class Fo{constructor(f,p,I={}){this.isNewUser=f,this.providerId=p,this.profile=I}}class Sy extends Fo{constructor(f,p,I,C){super(f,p,I),this.username=C}}class sc extends Fo{constructor(f,p){super(f,"facebook.com",p)}}class ap extends Sy{constructor(f,p){super(f,"github.com",p,"string"==typeof p?.login?p?.login:null)}}class oc extends Fo{constructor(f,p){super(f,"google.com",p)}}class Fa extends Sy{constructor(f,p,I){super(f,"twitter.com",p,I)}}function Id(_){const{user:f,_tokenResponse:p}=_;return f.isAnonymous&&!p?{providerId:null,isNewUser:!1,profile:null}:function op(_){var f,p;if(!_)return null;const{providerId:I}=_,C=_.rawUserInfo?JSON.parse(_.rawUserInfo):{},M=_.isNewUser||"identitytoolkit#SignupNewUserResponse"===_.kind;if(!I&&_?.idToken){const H=null===(p=null===(f=_t(_.idToken))||void 0===f?void 0:f.firebase)||void 0===p?void 0:p.sign_in_provider;if(H)return new Fo(M,"anonymous"!==H&&"custom"!==H?H:null)}if(!I)return null;switch(I){case"facebook.com":return new sc(M,C);case"github.com":return new ap(M,C);case"google.com":return new oc(M,C);case"twitter.com":return new Fa(M,C,_.screenName||null);case"custom":case"anonymous":return new Fo(M,null);default:return new Fo(M,I,C)}}(p)}function tn(_,f,p,I){return(0,F.m9)(_).onAuthStateChanged(f,p,I)}class Lr{constructor(f,p,I){this.type=f,this.credential=p,this.auth=I}static _fromIdtoken(f,p){return new Lr("enroll",f,p)}static _fromMfaPendingCredential(f){return new Lr("signin",f)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(f){var p,I;if(f?.multiFactorSession){if(null!==(p=f.multiFactorSession)&&void 0!==p&&p.pendingCredential)return Lr._fromMfaPendingCredential(f.multiFactorSession.pendingCredential);if(null!==(I=f.multiFactorSession)&&void 0!==I&&I.idToken)return Lr._fromIdtoken(f.multiFactorSession.idToken)}return null}}class cr{constructor(f,p,I){this.session=f,this.hints=p,this.signInResolver=I}static _fromError(f,p){const I=pn(f),C=p.customData._serverResponse,M=(C.mfaInfo||[]).map(te=>md._fromServerResponse(I,te));Z(C.mfaPendingCredential,I,"internal-error");const H=Lr._fromMfaPendingCredential(C.mfaPendingCredential);return new cr(H,M,function(){var te=(0,E.Z)(function*(Ne){const je=yield Ne._process(I,H);delete C.mfaInfo,delete C.mfaPendingCredential;const et=Object.assign(Object.assign({},C),{idToken:je.idToken,refreshToken:je.refreshToken});switch(p.operationType){case"signIn":const Mt=yield Dr._fromIdTokenResponse(I,p.operationType,et);return yield I._updateCurrentUser(Mt.user),Mt;case"reauthenticate":return Z(p.user,I,"internal-error"),Dr._forOperation(p.user,p.operationType,et);default:K(I,"internal-error")}});return function(Ne){return te.apply(this,arguments)}}())}resolveSignIn(f){var p=this;return(0,E.Z)(function*(){return p.signInResolver(f)})()}}function My(_,f){var p;const I=(0,F.m9)(_),C=f;return Z(f.customData.operationType,I,"argument-error"),Z(null===(p=C.customData._serverResponse)||void 0===p?void 0:p.mfaPendingCredential,I,"argument-error"),cr._fromError(I,C)}class Va{constructor(f){this.user=f,this.enrolledFactors=[],f._onReload(p=>{p.mfaInfo&&(this.enrolledFactors=p.mfaInfo.map(I=>md._fromServerResponse(f.auth,I)))})}static _fromUser(f){return new Va(f)}getSession(){var f=this;return(0,E.Z)(function*(){return Lr._fromIdtoken(yield f.user.getIdToken(),f.user.auth)})()}enroll(f,p){var I=this;return(0,E.Z)(function*(){const C=f,M=yield I.getSession(),H=yield $t(I.user,C._process(I.user.auth,M,p));return yield I.user._updateTokensIfNecessary(H),I.user.reload()})()}unenroll(f){var p=this;return(0,E.Z)(function*(){const I="string"==typeof f?f:f.uid,C=yield p.user.getIdToken();try{const M=yield $t(p.user,function Py(_,f){return fe(_,"POST","/v2/accounts/mfaEnrollment:withdraw",X(_,f))}(p.user.auth,{idToken:C,mfaEnrollmentId:I}));p.enrolledFactors=p.enrolledFactors.filter(({uid:H})=>H!==I),yield p.user._updateTokensIfNecessary(M),yield p.user.reload()}catch(M){throw M}})()}}const Ba=new WeakMap;function uc(_){const f=(0,F.m9)(_);return Ba.has(f)||Ba.set(f,Va._fromUser(f)),Ba.get(f)}const cc="__sak";class pt{constructor(f,p){this.storageRetriever=f,this.type=p}_isAvailable(){try{return this.storage?(this.storage.setItem(cc,"1"),this.storage.removeItem(cc),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(f,p){return this.storage.setItem(f,JSON.stringify(p)),Promise.resolve()}_get(f){const p=this.storage.getItem(f);return Promise.resolve(p?JSON.parse(p):null)}_remove(f){return this.storage.removeItem(f),Promise.resolve()}get storage(){return this.storageRetriever()}}const dp=(()=>{class _ extends pt{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(p,I)=>this.onStorageEvent(p,I),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function wd(){const _=(0,F.z$)();return R(_)||ze(_)}()&&function vr(){try{return!(!window||window===window.top)}catch{return!1}}(),this.fallbackToPolling=St(),this._shouldAllowMigration=!0}forAllChangedKeys(p){for(const I of Object.keys(this.listeners)){const C=this.storage.getItem(I),M=this.localCache[I];C!==M&&p(I,M,C)}}onStorageEvent(p,I=!1){if(!p.key)return void this.forAllChangedKeys((te,Ne,je)=>{this.notifyListeners(te,je)});const C=p.key;if(I?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const te=this.storage.getItem(C);if(p.newValue!==te)null!==p.newValue?this.storage.setItem(C,p.newValue):this.storage.removeItem(C);else if(this.localCache[C]===p.newValue&&!I)return}const M=()=>{const te=this.storage.getItem(C);!I&&this.localCache[C]===te||this.notifyListeners(C,te)},H=this.storage.getItem(C);!function en(){return(0,F.w1)()&&10===document.documentMode}()||H===p.newValue||p.newValue===p.oldValue?M():setTimeout(M,10)}notifyListeners(p,I){this.localCache[p]=I;const C=this.listeners[p];if(C)for(const M of Array.from(C))M(I&&JSON.parse(I))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((p,I,C)=>{this.onStorageEvent(new StorageEvent("storage",{key:p,oldValue:I,newValue:C}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(p,I){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[p]||(this.listeners[p]=new Set,this.localCache[p]=this.storage.getItem(p)),this.listeners[p].add(I)}_removeListener(p,I){this.listeners[p]&&(this.listeners[p].delete(I),0===this.listeners[p].size&&delete this.listeners[p]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(p,I){var C=()=>super._set,M=this;return(0,E.Z)(function*(){yield C().call(M,p,I),M.localCache[p]=JSON.stringify(I)})()}_get(p){var I=()=>super._get,C=this;return(0,E.Z)(function*(){const M=yield I().call(C,p);return C.localCache[p]=JSON.stringify(M),M})()}_remove(p){var I=()=>super._remove,C=this;return(0,E.Z)(function*(){yield I().call(C,p),delete C.localCache[p]})()}}return _.type="LOCAL",_})(),Ms=(()=>{class _ extends pt{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(p,I){}_removeListener(p,I){}}return _.type="SESSION",_})();let Ly=(()=>{class _{constructor(p){this.eventTarget=p,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(p){const I=this.receivers.find(M=>M.isListeningto(p));if(I)return I;const C=new _(p);return this.receivers.push(C),C}isListeningto(p){return this.eventTarget===p}handleEvent(p){var I=this;return(0,E.Z)(function*(){const C=p,{eventId:M,eventType:H,data:te}=C.data,Ne=I.handlersMap[H];if(!Ne?.size)return;C.ports[0].postMessage({status:"ack",eventId:M,eventType:H});const je=Array.from(Ne).map(function(){var Mt=(0,E.Z)(function*(er){return er(C.origin,te)});return function(er){return Mt.apply(this,arguments)}}()),et=yield function Oy(_){return Promise.all(_.map(function(){var f=(0,E.Z)(function*(p){try{return{fulfilled:!0,value:yield p}}catch(I){return{fulfilled:!1,reason:I}}});return function(p){return f.apply(this,arguments)}}()))}(je);C.ports[0].postMessage({status:"done",eventId:M,eventType:H,response:et})})()}_subscribe(p,I){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[p]||(this.handlersMap[p]=new Set),this.handlersMap[p].add(I)}_unsubscribe(p,I){this.handlersMap[p]&&I&&this.handlersMap[p].delete(I),(!I||0===this.handlersMap[p].size)&&delete this.handlersMap[p],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return _.receivers=[],_})();function lc(_="",f=10){let p="";for(let I=0;I<f;I++)p+=Math.floor(10*Math.random());return _+p}class Y0{constructor(f){this.target=f,this.handlers=new Set}removeMessageHandler(f){f.messageChannel&&(f.messageChannel.port1.removeEventListener("message",f.onMessage),f.messageChannel.port1.close()),this.handlers.delete(f)}_send(f,p,I=50){var C=this;return(0,E.Z)(function*(){const M=typeof MessageChannel<"u"?new MessageChannel:null;if(!M)throw new Error("connection_unavailable");let H,te;return new Promise((Ne,je)=>{const et=lc("",20);M.port1.start();const Mt=setTimeout(()=>{je(new Error("unsupported_event"))},I);te={messageChannel:M,onMessage(er){const Ri=er;if(Ri.data.eventId===et)switch(Ri.data.status){case"ack":clearTimeout(Mt),H=setTimeout(()=>{je(new Error("timeout"))},3e3);break;case"done":clearTimeout(H),Ne(Ri.data.response);break;default:clearTimeout(Mt),clearTimeout(H),je(new Error("invalid_response"))}}},C.handlers.add(te),M.port1.addEventListener("message",te.onMessage),C.target.postMessage({eventType:f,eventId:et,data:p},[M.port2])}).finally(()=>{te&&C.removeMessageHandler(te)})})()}}function bn(){return window}function Lt(){return typeof bn().WorkerGlobalScope<"u"&&"function"==typeof bn().importScripts}function dc(){return(dc=(0,E.Z)(function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})).apply(this,arguments)}const Bo="firebaseLocalStorageDb",uo="firebaseLocalStorage",Ua="fbase_key";class hc{constructor(f){this.request=f}toPromise(){return new Promise((f,p)=>{this.request.addEventListener("success",()=>{f(this.request.result)}),this.request.addEventListener("error",()=>{p(this.request.error)})})}}function bd(_,f){return _.transaction([uo],f?"readwrite":"readonly").objectStore(uo)}function lr(){const _=indexedDB.open(Bo,1);return new Promise((f,p)=>{_.addEventListener("error",()=>{p(_.error)}),_.addEventListener("upgradeneeded",()=>{const I=_.result;try{I.createObjectStore(uo,{keyPath:Ua})}catch(C){p(C)}}),_.addEventListener("success",(0,E.Z)(function*(){const I=_.result;I.objectStoreNames.contains(uo)?f(I):(I.close(),yield function Fy(){const _=indexedDB.deleteDatabase(Bo);return new hc(_).toPromise()}(),f(yield lr()))}))})}function zi(_,f,p){return ja.apply(this,arguments)}function ja(){return(ja=(0,E.Z)(function*(_,f,p){const I=bd(_,!0).put({[Ua]:f,value:p});return new hc(I).toPromise()})).apply(this,arguments)}function Si(){return(Si=(0,E.Z)(function*(_,f){const p=bd(_,!1).get(f),I=yield new hc(p).toPromise();return void 0===I?null:I.value})).apply(this,arguments)}function gp(_,f){const p=bd(_,!0).delete(f);return new hc(p).toPromise()}const Td=(()=>{class _{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var p=this;return(0,E.Z)(function*(){return p.db||(p.db=yield lr()),p.db})()}_withRetries(p){var I=this;return(0,E.Z)(function*(){let C=0;for(;;)try{const M=yield I._openDb();return yield p(M)}catch(M){if(C++>3)throw M;I.db&&(I.db.close(),I.db=void 0)}})()}initializeServiceWorkerMessaging(){var p=this;return(0,E.Z)(function*(){return Lt()?p.initializeReceiver():p.initializeSender()})()}initializeReceiver(){var p=this;return(0,E.Z)(function*(){p.receiver=Ly._getInstance(function pp(){return Lt()?self:null}()),p.receiver._subscribe("keyChanged",function(){var I=(0,E.Z)(function*(C,M){return{keyProcessed:(yield p._poll()).includes(M.key)}});return function(C,M){return I.apply(this,arguments)}}()),p.receiver._subscribe("ping",function(){var I=(0,E.Z)(function*(C,M){return["keyChanged"]});return function(C,M){return I.apply(this,arguments)}}())})()}initializeSender(){var p=this;return(0,E.Z)(function*(){var I,C;if(p.activeServiceWorker=yield function fp(){return dc.apply(this,arguments)}(),!p.activeServiceWorker)return;p.sender=new Y0(p.activeServiceWorker);const M=yield p.sender._send("ping",{},800);M&&null!==(I=M[0])&&void 0!==I&&I.fulfilled&&null!==(C=M[0])&&void 0!==C&&C.value.includes("keyChanged")&&(p.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(p){var I=this;return(0,E.Z)(function*(){if(I.sender&&I.activeServiceWorker&&function Hn(){var _;return(null===(_=navigator?.serviceWorker)||void 0===_?void 0:_.controller)||null}()===I.activeServiceWorker)try{yield I.sender._send("keyChanged",{key:p},I.serviceWorkerReceiverAvailable?800:50)}catch{}})()}_isAvailable(){return(0,E.Z)(function*(){try{if(!indexedDB)return!1;const p=yield lr();return yield zi(p,cc,"1"),yield gp(p,cc),!0}catch{}return!1})()}_withPendingWrite(p){var I=this;return(0,E.Z)(function*(){I.pendingWrites++;try{yield p()}finally{I.pendingWrites--}})()}_set(p,I){var C=this;return(0,E.Z)(function*(){return C._withPendingWrite((0,E.Z)(function*(){return yield C._withRetries(M=>zi(M,p,I)),C.localCache[p]=I,C.notifyServiceWorker(p)}))})()}_get(p){var I=this;return(0,E.Z)(function*(){const C=yield I._withRetries(M=>function Qr(_,f){return Si.apply(this,arguments)}(M,p));return I.localCache[p]=C,C})()}_remove(p){var I=this;return(0,E.Z)(function*(){return I._withPendingWrite((0,E.Z)(function*(){return yield I._withRetries(C=>gp(C,p)),delete I.localCache[p],I.notifyServiceWorker(p)}))})()}_poll(){var p=this;return(0,E.Z)(function*(){const I=yield p._withRetries(H=>{const te=bd(H,!1).getAll();return new hc(te).toPromise()});if(!I)return[];if(0!==p.pendingWrites)return[];const C=[],M=new Set;for(const{fbase_key:H,value:te}of I)M.add(H),JSON.stringify(p.localCache[H])!==JSON.stringify(te)&&(p.notifyListeners(H,te),C.push(H));for(const H of Object.keys(p.localCache))p.localCache[H]&&!M.has(H)&&(p.notifyListeners(H,null),C.push(H));return C})()}notifyListeners(p,I){this.localCache[p]=I;const C=this.listeners[p];if(C)for(const M of Array.from(C))M(I)}startPolling(){var p=this;this.stopPolling(),this.pollTimer=setInterval((0,E.Z)(function*(){return p._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(p,I){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[p]||(this.listeners[p]=new Set,this._get(p)),this.listeners[p].add(I)}_removeListener(p,I){this.listeners[p]&&(this.listeners[p].delete(I),0===this.listeners[p].size&&delete this.listeners[p]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return _.type="LOCAL",_})(),$a=1e12;class By{constructor(f){this.auth=f,this.counter=$a,this._widgets=new Map}render(f,p){const I=this.counter;return this._widgets.set(I,new Uy(f,this.auth.name,p||{})),this.counter++,I}reset(f){var p;const I=f||$a;null===(p=this._widgets.get(I))||void 0===p||p.delete(),this._widgets.delete(I)}getResponse(f){var p;return(null===(p=this._widgets.get(f||$a))||void 0===p?void 0:p.getResponse())||""}execute(f){var p=this;return(0,E.Z)(function*(){var I;return null===(I=p._widgets.get(f||$a))||void 0===I||I.execute(),""})()}}class Uy{constructor(f,p,I){this.params=I,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const C="string"==typeof f?document.getElementById(f):f;Z(C,"argument-error",{appName:p}),this.container=C,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function jy(_){const f=[],p="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let I=0;I<_;I++)f.push(p.charAt(Math.floor(62*Math.random())));return f.join("")}(50);const{callback:f,"expired-callback":p}=this.params;if(f)try{f(this.responseToken)}catch{}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,p)try{p()}catch{}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const Cd=ur("rcb"),Sd=new Ei(3e4,6e4);class J0{constructor(){var f;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!(null===(f=bn().grecaptcha)||void 0===f||!f.render)}load(f,p=""){return Z(function Fr(_){return _.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(_)}(p),f,"argument-error"),this.shouldResolveImmediately(p)&&Ue(bn().grecaptcha)?Promise.resolve(bn().grecaptcha):new Promise((I,C)=>{const M=bn().setTimeout(()=>{C(ce(f,"network-request-failed"))},Sd.get());bn()[Cd]=()=>{bn().clearTimeout(M),delete bn()[Cd];const te=bn().grecaptcha;if(!te||!Ue(te))return void C(ce(f,"internal-error"));const Ne=te.render;te.render=(je,et)=>{const Mt=Ne(je,et);return this.counter++,Mt},this.hostLanguage=p,I(te)},fn(`https://www.google.com/recaptcha/api.js??${(0,F.xO)({onload:Cd,render:"explicit",hl:p})}`).catch(()=>{clearTimeout(M),C(ce(f,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(f){var p;return!(null===(p=bn().grecaptcha)||void 0===p||!p.render)&&(f===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class Uo{load(f){return(0,E.Z)(function*(){return new By(f)})()}clearedOneInstance(){}}const ln="recaptcha",X0={theme:"light",type:"image"};class eE{constructor(f,p=Object.assign({},X0),I){this.parameters=p,this.type=ln,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=pn(I),this.isInvisible="invisible"===this.parameters.size,Z(typeof document<"u",this.auth,"operation-not-supported-in-this-environment");const C="string"==typeof f?document.getElementById(f):f;Z(C,this.auth,"argument-error"),this.container=C,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new Uo:new J0,this.validateStartingState()}verify(){var f=this;return(0,E.Z)(function*(){f.assertNotDestroyed();const p=yield f.render(),I=f.getAssertedRecaptcha();return I.getResponse(p)||new Promise(M=>{const H=te=>{te&&(f.tokenChangeListeners.delete(H),M(te))};f.tokenChangeListeners.add(H),f.isInvisible&&I.execute(p)})})()}render(){try{this.assertNotDestroyed()}catch(f){return Promise.reject(f)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(f=>{throw this.renderPromise=null,f})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(f=>{this.container.removeChild(f)})}validateStartingState(){Z(!this.parameters.sitekey,this.auth,"argument-error"),Z(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),Z(typeof document<"u",this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(f){return p=>{if(this.tokenChangeListeners.forEach(I=>I(p)),"function"==typeof f)f(p);else if("string"==typeof f){const I=bn()[f];"function"==typeof I&&I(p)}}}assertNotDestroyed(){Z(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var f=this;return(0,E.Z)(function*(){if(yield f.init(),!f.widgetId){let p=f.container;if(!f.isInvisible){const I=document.createElement("div");p.appendChild(I),p=I}f.widgetId=f.getAssertedRecaptcha().render(p,f.parameters)}return f.widgetId})()}init(){var f=this;return(0,E.Z)(function*(){Z(ar()&&!Lt(),f.auth,"internal-error"),yield function tE(){let _=null;return new Promise(f=>{"complete"!==document.readyState?(_=()=>f(),window.addEventListener("load",_)):f()}).catch(f=>{throw _&&window.removeEventListener("load",_),f})}(),f.recaptcha=yield f._recaptchaLoader.load(f.auth,f.auth.languageCode||void 0);const p=yield function se(_){return Y.apply(this,arguments)}(f.auth);Z(p,f.auth,"internal-error"),f.parameters.sitekey=p})()}getAssertedRecaptcha(){return Z(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class Ha{constructor(f,p){this.verificationId=f,this.onConfirmation=p}confirm(f){const p=lt._fromVerification(this.verificationId,f);return this.onConfirmation(p)}}function Ad(_,f,p){return jo.apply(this,arguments)}function jo(){return(jo=(0,E.Z)(function*(_,f,p){const I=pn(_),C=yield co(I,f,(0,F.m9)(p));return new Ha(C,M=>gd(I,M))})).apply(this,arguments)}function pc(_,f,p){return Gi.apply(this,arguments)}function Gi(){return(Gi=(0,E.Z)(function*(_,f,p){const I=(0,F.m9)(_);yield Oo(!1,I,"phone");const C=yield co(I.auth,f,(0,F.m9)(p));return new Ha(C,M=>G0(I,M))})).apply(this,arguments)}function Ai(_,f,p){return $o.apply(this,arguments)}function $o(){return($o=(0,E.Z)(function*(_,f,p){const I=(0,F.m9)(_),C=yield co(I.auth,f,(0,F.m9)(p));return new Ha(C,M=>mn(I,M))})).apply(this,arguments)}function co(_,f,p){return Tn.apply(this,arguments)}function Tn(){return Tn=(0,E.Z)(function*(_,f,p){var I;const C=yield p.verify();try{let M;if(Z("string"==typeof C,_,"argument-error"),Z(p.type===ln,_,"argument-error"),M="string"==typeof f?{phoneNumber:f}:f,"session"in M){const H=M.session;if("phoneNumber"in M)return Z("enroll"===H.type,_,"internal-error"),(yield function Ny(_,f){return fe(_,"POST","/v2/accounts/mfaEnrollment:start",X(_,f))}(_,{idToken:H.credential,phoneEnrollmentInfo:{phoneNumber:M.phoneNumber,recaptchaToken:C}})).phoneSessionInfo.sessionInfo;{Z("signin"===H.type,_,"internal-error");const te=(null===(I=M.multiFactorHint)||void 0===I?void 0:I.uid)||M.multiFactorUid;return Z(te,_,"missing-multi-factor-info"),(yield function yp(_,f){return fe(_,"POST","/v2/accounts/mfaSignIn:start",X(_,f))}(_,{mfaPendingCredential:H.credential,mfaEnrollmentId:te,phoneSignInInfo:{recaptchaToken:C}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:H}=yield function vt(_,f){return rn.apply(this,arguments)}(_,{phoneNumber:M.phoneNumber,recaptchaToken:C});return H}}finally{p._reset()}}),Tn.apply(this,arguments)}function xd(_,f){return gc.apply(this,arguments)}function gc(){return(gc=(0,E.Z)(function*(_,f){yield La((0,F.m9)(_),f)})).apply(this,arguments)}let Ep=(()=>{class _{constructor(p){this.providerId=_.PROVIDER_ID,this.auth=pn(p)}verifyPhoneNumber(p,I){return co(this.auth,p,(0,F.m9)(I))}static credential(p,I){return lt._fromVerification(p,I)}static credentialFromResult(p){return _.credentialFromTaggedObject(p)}static credentialFromError(p){return _.credentialFromTaggedObject(p.customData||{})}static credentialFromTaggedObject({_tokenResponse:p}){if(!p)return null;const{phoneNumber:I,temporaryProof:C}=p;return I&&C?lt._fromTokenResponse(I,C):null}}return _.PROVIDER_ID="phone",_.PHONE_SIGN_IN_METHOD="phone",_})();function Ns(_,f){return f?hn(f):(Z(_._popupRedirectResolver,_,"argument-error"),_._popupRedirectResolver)}class Rs extends Na{constructor(f){super("custom","custom"),this.params=f}_getIdTokenResponse(f){return rs(f,this._buildIdpRequest())}_linkToIdToken(f,p){return rs(f,this._buildIdpRequest(p))}_getReauthenticationResolver(f){return rs(f,this._buildIdpRequest())}_buildIdpRequest(f){const p={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return f&&(p.idToken=f),p}}function za(_){return fy(_.auth,new Rs(_),_.bypassAuthState)}function mc(_){const{auth:f,user:p}=_;return Z(p,f,"internal-error"),Qf(p,new Rs(_),_.bypassAuthState)}function nE(_){return Ho.apply(this,arguments)}function Ho(){return(Ho=(0,E.Z)(function*(_){const{auth:f,user:p}=_;return Z(p,f,"internal-error"),La(p,new Rs(_),_.bypassAuthState)})).apply(this,arguments)}class Md{constructor(f,p,I,C,M=!1){this.auth=f,this.resolver=I,this.user=C,this.bypassAuthState=M,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(p)?p:[p]}execute(){var f=this;return new Promise(function(){var p=(0,E.Z)(function*(I,C){f.pendingPromise={resolve:I,reject:C};try{f.eventManager=yield f.resolver._initialize(f.auth),yield f.onExecution(),f.eventManager.registerConsumer(f)}catch(M){f.reject(M)}});return function(I,C){return p.apply(this,arguments)}}())}onAuthEvent(f){var p=this;return(0,E.Z)(function*(){const{urlResponse:I,sessionId:C,postBody:M,tenantId:H,error:te,type:Ne}=f;if(te)return void p.reject(te);const je={auth:p.auth,requestUri:I,sessionId:C,tenantId:H||void 0,postBody:M||void 0,user:p.user,bypassAuthState:p.bypassAuthState};try{p.resolve(yield p.getIdpTask(Ne)(je))}catch(et){p.reject(et)}})()}onError(f){this.reject(f)}getIdpTask(f){switch(f){case"signInViaPopup":case"signInViaRedirect":return za;case"linkViaPopup":case"linkViaRedirect":return nE;case"reauthViaPopup":case"reauthViaRedirect":return mc;default:K(this.auth,"internal-error")}}resolve(f){Xe(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(f),this.unregisterAndCleanUp()}reject(f){Xe(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(f),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const Ga=new Ei(2e3,1e4);function wp(_,f,p){return Nd.apply(this,arguments)}function Nd(){return(Nd=(0,E.Z)(function*(_,f,p){const I=pn(_);pe(_,f,Yr);const C=Ns(I,p);return new Ct(I,"signInViaPopup",f,C).executeNotNull()})).apply(this,arguments)}function BT(_,f,p){return xi.apply(this,arguments)}function xi(){return(xi=(0,E.Z)(function*(_,f,p){const I=(0,F.m9)(_);pe(I.auth,f,Yr);const C=Ns(I.auth,p);return new Ct(I.auth,"reauthViaPopup",f,C,I).executeNotNull()})).apply(this,arguments)}function Mi(_,f,p){return Ps.apply(this,arguments)}function Ps(){return(Ps=(0,E.Z)(function*(_,f,p){const I=(0,F.m9)(_);pe(I.auth,f,Yr);const C=Ns(I.auth,p);return new Ct(I.auth,"linkViaPopup",f,C,I).executeNotNull()})).apply(this,arguments)}let Ct=(()=>{class _ extends Md{constructor(p,I,C,M,H){super(p,I,M,H),this.provider=C,this.authWindow=null,this.pollId=null,_.currentPopupAction&&_.currentPopupAction.cancel(),_.currentPopupAction=this}executeNotNull(){var p=this;return(0,E.Z)(function*(){const I=yield p.execute();return Z(I,p.auth,"internal-error"),I})()}onExecution(){var p=this;return(0,E.Z)(function*(){Xe(1===p.filter.length,"Popup operations only handle one event");const I=lc();p.authWindow=yield p.resolver._openPopup(p.auth,p.provider,p.filter[0],I),p.authWindow.associatedEvent=I,p.resolver._originValidation(p.auth).catch(C=>{p.reject(C)}),p.resolver._isIframeWebStorageSupported(p.auth,C=>{C||p.reject(ce(p.auth,"web-storage-unsupported"))}),p.pollUserCancellation()})()}get eventId(){var p;return(null===(p=this.authWindow)||void 0===p?void 0:p.associatedEvent)||null}cancel(){this.reject(ce(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,_.currentPopupAction=null}pollUserCancellation(){const p=()=>{var I,C;this.pollId=null!==(C=null===(I=this.authWindow)||void 0===I?void 0:I.window)&&void 0!==C&&C.closed?window.setTimeout(()=>{this.pollId=null,this.reject(ce(this.auth,"popup-closed-by-user"))},8e3):window.setTimeout(p,Ga.get())};p()}}return _.currentPopupAction=null,_})();const Rd="pendingRedirect",ks=new Map;class z extends Md{constructor(f,p,I=!1){super(f,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],p,void 0,I),this.eventId=null}execute(){var f=()=>super.execute,p=this;return(0,E.Z)(function*(){let I=ks.get(p.auth._key());if(!I){try{const M=(yield function tt(_,f){return Vr.apply(this,arguments)}(p.resolver,p.auth))?yield f().call(p):null;I=()=>Promise.resolve(M)}catch(C){I=()=>Promise.reject(C)}ks.set(p.auth._key(),I)}return p.bypassAuthState||ks.set(p.auth._key(),()=>Promise.resolve(null)),I()})()}onAuthEvent(f){var p=()=>super.onAuthEvent,I=this;return(0,E.Z)(function*(){if("signInViaRedirect"===f.type)return p().call(I,f);if("unknown"!==f.type){if(f.eventId){const C=yield I.auth._redirectUserForId(f.eventId);if(C)return I.user=C,p().call(I,f);I.resolve(null)}}else I.resolve(null)})()}onExecution(){return(0,E.Z)(function*(){})()}cleanUp(){}}function Vr(){return(Vr=(0,E.Z)(function*(_,f){const p=Pd(f),I=yc(_);if(!(yield I._isAvailable()))return!1;const C="true"===(yield I._get(p));return yield I._remove(p),C})).apply(this,arguments)}function Jr(_,f){return hi.apply(this,arguments)}function hi(){return(hi=(0,E.Z)(function*(_,f){return yc(_)._set(Pd(f),"true")})).apply(this,arguments)}function Dp(){ks.clear()}function zo(_,f){ks.set(_._key(),f)}function yc(_){return hn(_._redirectPersistence)}function Pd(_){return bi(Rd,_.config.apiKey,_.name)}function Wa(_,f,p){return function qa(_,f,p){return _c.apply(this,arguments)}(_,f,p)}function _c(){return(_c=(0,E.Z)(function*(_,f,p){const I=pn(_);pe(_,f,Yr),yield I._initializationPromise;const C=Ns(I,p);return yield Jr(C,I),C._openRedirect(I,f,"signInViaRedirect")})).apply(this,arguments)}function vc(_,f,p){return function Ic(_,f,p){return Ec.apply(this,arguments)}(_,f,p)}function Ec(){return(Ec=(0,E.Z)(function*(_,f,p){const I=(0,F.m9)(_);pe(I.auth,f,Yr),yield I.auth._initializationPromise;const C=Ns(I.auth,p);yield Jr(C,I.auth);const M=yield qo(I);return C._openRedirect(I.auth,f,"reauthViaRedirect",M)})).apply(this,arguments)}function bp(_,f,p){return function kd(_,f,p){return Go.apply(this,arguments)}(_,f,p)}function Go(){return(Go=(0,E.Z)(function*(_,f,p){const I=(0,F.m9)(_);pe(I.auth,f,Yr),yield I.auth._initializationPromise;const C=Ns(I.auth,p);yield Oo(!1,I,f.providerId),yield Jr(C,I.auth);const M=yield qo(I);return C._openRedirect(I.auth,f,"linkViaRedirect",M)})).apply(this,arguments)}function lo(_,f){return Od.apply(this,arguments)}function Od(){return(Od=(0,E.Z)(function*(_,f){return yield pn(_)._initializationPromise,Ni(_,f,!1)})).apply(this,arguments)}function Ni(_,f){return Wo.apply(this,arguments)}function Wo(){return(Wo=(0,E.Z)(function*(_,f,p=!1){const I=pn(_),C=Ns(I,f),H=yield new z(I,C,p).execute();return H&&!p&&(delete H.user._redirectEventId,yield I._persistUserIfCurrent(H.user),yield I._setRedirectUser(null,f)),H})).apply(this,arguments)}function qo(_){return Tp.apply(this,arguments)}function Tp(){return(Tp=(0,E.Z)(function*(_){const f=lc(`${_.uid}:::`);return _._redirectEventId=f,yield _.auth._setRedirectUser(_),yield _.auth._persistUserIfCurrent(_),f})).apply(this,arguments)}class Cp{constructor(f){this.auth=f,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(f){this.consumers.add(f),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,f)&&(this.sendToConsumer(this.queuedRedirectEvent,f),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(f){this.consumers.delete(f)}onEvent(f){if(this.hasEventBeenHandled(f))return!1;let p=!1;return this.consumers.forEach(I=>{this.isEventForConsumer(f,I)&&(p=!0,this.sendToConsumer(f,I),this.saveEventToCache(f))}),this.hasHandledPotentialRedirect||!function Sp(_){switch(_.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Ka(_);default:return!1}}(f)||(this.hasHandledPotentialRedirect=!0,p||(this.queuedRedirectEvent=f,p=!0)),p}sendToConsumer(f,p){var I;if(f.error&&!Ka(f)){const C=(null===(I=f.error.code)||void 0===I?void 0:I.split("auth/")[1])||"internal-error";p.onError(ce(this.auth,C))}else p.onAuthEvent(f)}isEventForConsumer(f,p){const I=null===p.eventId||!!f.eventId&&f.eventId===p.eventId;return p.filter.includes(f.type)&&I}hasEventBeenHandled(f){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(wc(f))}saveEventToCache(f){this.cachedEventUids.add(wc(f)),this.lastProcessedEventTime=Date.now()}}function wc(_){return[_.type,_.eventId,_.sessionId,_.tenantId].filter(f=>f).join("-")}function Ka({type:_,error:f}){return"unknown"===_&&"auth/no-auth-event"===f?.code}function Za(_){return Ko.apply(this,arguments)}function Ko(){return(Ko=(0,E.Z)(function*(_,f={}){return fe(_,"GET","/v1/projects",f)})).apply(this,arguments)}const ho=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,fo=/^https?/;function Dc(){return(Dc=(0,E.Z)(function*(_){if(_.config.emulator)return;const{authorizedDomains:f}=yield Za(_);for(const p of f)try{if(Ld(p))return}catch{}K(_,"unauthorized-domain")})).apply(this,arguments)}function Ld(_){const f=Rt(),{protocol:p,hostname:I}=new URL(f);if(_.startsWith("chrome-extension://")){const H=new URL(_);return""===H.hostname&&""===I?"chrome-extension:"===p&&_.replace("chrome-extension://","")===f.replace("chrome-extension://",""):"chrome-extension:"===p&&H.hostname===I}if(!fo.test(p))return!1;if(ho.test(_))return I===_;const C=_.replace(/\./g,"\\.");return new RegExp("^(.+\\."+C+"|"+C+")$","i").test(I)}const Yo=new Ei(3e4,6e4);function $y(){const _=bn().___jsl;if(_?.H)for(const f of Object.keys(_.H))if(_.H[f].r=_.H[f].r||[],_.H[f].L=_.H[f].L||[],_.H[f].r=[..._.H[f].L],_.CP)for(let p=0;p<_.CP.length;p++)_.CP[p]=null}let bc=null;const Hy=new Ei(5e3,15e3),xp="__/auth/iframe",Mp="emulator/auth/iframe",zy={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},po=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Fd(_){const f=_.config;Z(f.authDomain,_,"auth-domain-config-required");const p=f.emulator?bs(f,Mp):`https://${_.config.authDomain}/${xp}`,I={apiKey:f.apiKey,appName:_.name,v:k.SDK_VERSION},C=po.get(_.config.apiHost);C&&(I.eid=C);const M=_._getFrameworks();return M.length&&(I.fw=M.join(",")),`${p}?${(0,F.xO)(I).slice(1)}`}function Cn(){return Cn=(0,E.Z)(function*(_){const f=yield function Ap(_){return bc=bc||function ls(_){return new Promise((f,p)=>{var I,C,M;function H(){$y(),gapi.load("gapi.iframes",{callback:()=>{f(gapi.iframes.getContext())},ontimeout:()=>{$y(),p(ce(_,"network-request-failed"))},timeout:Yo.get()})}if(null!==(C=null===(I=bn().gapi)||void 0===I?void 0:I.iframes)&&void 0!==C&&C.Iframe)f(gapi.iframes.getContext());else{if(null===(M=bn().gapi)||void 0===M||!M.load){const te=ur("iframefcb");return bn()[te]=()=>{gapi.load?H():p(ce(_,"network-request-failed"))},fn(`https://apis.google.com/js/api.js?onload=${te}`).catch(Ne=>p(Ne))}H()}}).catch(f=>{throw bc=null,f})}(_),bc}(_),p=bn().gapi;return Z(p,_,"internal-error"),f.open({where:document.body,url:Fd(_),messageHandlersFilter:p.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:zy,dontclear:!0},I=>new Promise(function(){var C=(0,E.Z)(function*(M,H){yield I.restyle({setHideOnLeave:!1});const te=ce(_,"network-request-failed"),Ne=bn().setTimeout(()=>{H(te)},Hy.get());function je(){bn().clearTimeout(Ne),M(I)}I.ping(je).then(je,()=>{H(te)})});return function(M,H){return C.apply(this,arguments)}}()))}),Cn.apply(this,arguments)}const Gy={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class Ud{constructor(f){this.window=f,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}const Wy="__/auth/handler",Ja="emulator/auth/handler",Xo=encodeURIComponent("fac");function jd(_,f,p,I,C,M){return Sr.apply(this,arguments)}function Sr(){return(Sr=(0,E.Z)(function*(_,f,p,I,C,M){Z(_.config.authDomain,_,"auth-domain-config-required"),Z(_.config.apiKey,_,"invalid-api-key");const H={apiKey:_.config.apiKey,appName:_.name,authType:p,redirectUrl:I,v:k.SDK_VERSION,eventId:C};if(f instanceof Yr){f.setDefaultLanguage(_.languageCode),H.providerId=f.providerId||"",(0,F.xb)(f.getCustomParameters())||(H.customParameters=JSON.stringify(f.getCustomParameters()));for(const[et,Mt]of Object.entries(M||{}))H[et]=Mt}if(f instanceof kr){const et=f.getScopes().filter(Mt=>""!==Mt);et.length>0&&(H.scopes=et.join(","))}_.tenantId&&(H.tid=_.tenantId);const te=H;for(const et of Object.keys(te))void 0===te[et]&&delete te[et];const Ne=yield _._getAppCheckToken(),je=Ne?`#${Xo}=${encodeURIComponent(Ne)}`:"";return`${function $d({config:_}){return _.emulator?bs(_,Ja):`https://${_.authDomain}/${Wy}`}(_)}?${(0,F.xO)(te).slice(1)}${je}`})).apply(this,arguments)}const ds="webStorageSupport",hs=class rE{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Ms,this._completeRedirectFn=Ni,this._overrideRedirectResult=zo}_openPopup(f,p,I,C){var M=this;return(0,E.Z)(function*(){var H;Xe(null===(H=M.eventManagers[f._key()])||void 0===H?void 0:H.manager,"_initialize() not called before _openPopup()");const te=yield jd(f,p,I,Rt(),C);return function Jo(_,f,p,I=500,C=600){const M=Math.max((window.screen.availHeight-C)/2,0).toString(),H=Math.max((window.screen.availWidth-I)/2,0).toString();let te="";const Ne=Object.assign(Object.assign({},Gy),{width:I.toString(),height:C.toString(),top:M,left:H}),je=(0,F.z$)().toLowerCase();p&&(te=x(je)?"_blank":p),N(je)&&(f=f||"http://localhost",Ne.scrollbars="yes");const et=Object.entries(Ne).reduce((er,[Ri,Xa])=>`${er}${Ri}=${Xa},`,"");if(function ft(_=(0,F.z$)()){var f;return ze(_)&&!(null===(f=window.navigator)||void 0===f||!f.standalone)}(je)&&"_self"!==te)return function Qa(_,f){const p=document.createElement("a");p.href=_,p.target=f;const I=document.createEvent("MouseEvent");I.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),p.dispatchEvent(I)}(f||"",te),new Ud(null);const Mt=window.open(f||"",te,et);Z(Mt,_,"popup-blocked");try{Mt.focus()}catch{}return new Ud(Mt)}(f,te,lc())})()}_openRedirect(f,p,I,C){var M=this;return(0,E.Z)(function*(){return yield M._originValidation(f),function _e(_){bn().location.href=_}(yield jd(f,p,I,Rt(),C)),new Promise(()=>{})})()}_initialize(f){const p=f._key();if(this.eventManagers[p]){const{manager:C,promise:M}=this.eventManagers[p];return C?Promise.resolve(C):(Xe(M,"If manager is not set, promise should be"),M)}const I=this.initAndGetManager(f);return this.eventManagers[p]={promise:I},I.catch(()=>{delete this.eventManagers[p]}),I}initAndGetManager(f){var p=this;return(0,E.Z)(function*(){const I=yield function Vd(_){return Cn.apply(this,arguments)}(f),C=new Cp(f);return I.register("authEvent",M=>(Z(M?.authEvent,f,"invalid-auth-event"),{status:C.onEvent(M.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),p.eventManagers[f._key()]={manager:C},p.iframes[f._key()]=I,C})()}_isIframeWebStorageSupported(f,p){this.iframes[f._key()].send(ds,{type:ds},C=>{var M;const H=null===(M=C?.[0])||void 0===M?void 0:M[ds];void 0!==H&&p(!!H),K(f,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(f){const p=f._key();return this.originValidationPromises[p]||(this.originValidationPromises[p]=function Zo(_){return Dc.apply(this,arguments)}(f)),this.originValidationPromises[p]}get _shouldInitProactively(){return St()||R()||ze()}};class Np{constructor(f){this.factorId=f}_process(f,p,I){switch(p.type){case"enroll":return this._finalizeEnroll(f,p.credential,I);case"signin":return this._finalizeSignIn(f,p.credential);default:return Je("unexpected MultiFactorSessionType")}}}class Tc extends Np{constructor(f){super("phone"),this.credential=f}static _fromCredential(f){return new Tc(f)}_finalizeEnroll(f,p,I){return function Ry(_,f){return fe(_,"POST","/v2/accounts/mfaEnrollment:finalize",X(_,f))}(f,{idToken:p,displayName:I,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(f,p){return function _p(_,f){return fe(_,"POST","/v2/accounts/mfaSignIn:finalize",X(_,f))}(f,{mfaPendingCredential:p,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let qy=(()=>{class _{constructor(){}static assertion(p){return Tc._fromCredential(p)}}return _.FACTOR_ID="phone",_})();var Ls="@firebase/auth";class ea{constructor(f){this.auth=f,this.internalListeners=new Map}getUid(){var f;return this.assertAuthConfigured(),(null===(f=this.auth.currentUser)||void 0===f?void 0:f.uid)||null}getToken(f){var p=this;return(0,E.Z)(function*(){return p.assertAuthConfigured(),yield p.auth._initializationPromise,p.auth.currentUser?{accessToken:yield p.auth.currentUser.getIdToken(f)}:null})()}addAuthTokenListener(f){if(this.assertAuthConfigured(),this.internalListeners.has(f))return;const p=this.auth.onIdTokenChanged(I=>{f(I?.stsTokenManager.accessToken||null)});this.internalListeners.set(f,p),this.updateProactiveRefresh()}removeAuthTokenListener(f){this.assertAuthConfigured();const p=this.internalListeners.get(f);p&&(this.internalListeners.delete(f),p(),this.updateProactiveRefresh())}assertAuthConfigured(){Z(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}const Ac=(0,F.Pz)("authIdTokenMaxAge")||300;let ta=null;const xc=_=>function(){var f=(0,E.Z)(function*(p){const I=p&&(yield p.getIdTokenResult()),C=I&&((new Date).getTime()-Date.parse(I.issuedAtTime))/1e3;if(C&&C>Ac)return;const M=I?.token;ta!==M&&(ta=M,yield fetch(_,{method:M?"POST":"DELETE",headers:M?{Authorization:`Bearer ${M}`}:{}}))});return function(p){return f.apply(this,arguments)}}();function Rp(_=(0,k.getApp)()){const f=(0,k._getProvider)(_,"auth");if(f.isInitialized())return f.getImmediate();const p=function Wu(_,f){const p=(0,k._getProvider)(_,"auth");if(p.isInitialized()){const C=p.getImmediate(),M=p.getOptions();if((0,F.vZ)(M,f??{}))return C;K(C,"already-initialized")}return p.initialize({options:f})}(_,{popupRedirectResolver:hs,persistence:[Td,dp,Ms]}),I=(0,F.Pz)("authTokenSyncURL");if(I){const M=xc(I);(function cp(_,f,p){(0,F.m9)(_).beforeAuthStateChanged(f,p)})(p,M,()=>M(p.currentUser)),function up(_,f,p,I){(0,F.m9)(_).onIdTokenChanged(f,p,I)}(p,H=>M(H))}const C=(0,F.q4)("auth");return C&&ed(p,`http://${C}`),p}!function go(_){(0,k._registerComponent)(new we.wA("auth",(f,{options:p})=>{const I=f.getProvider("app").getImmediate(),C=f.getProvider("heartbeat"),M=f.getProvider("app-check-internal"),{apiKey:H,authDomain:te}=I.options;Z(H&&!H.includes(":"),"invalid-api-key",{appName:I.name});const Ne={apiKey:H,authDomain:te,clientPlatform:_,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:ro(_)},je=new zf(I,C,M,Ne);return function cy(_,f){const p=f?.persistence||[],I=(Array.isArray(p)?p:[p]).map(hn);f?.errorMap&&_._updateErrorMap(f.errorMap),_._initializeWithPersistence(I,f?.popupRedirectResolver)}(je,p),je},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((f,p,I)=>{f.getProvider("auth-internal").initialize()})),(0,k._registerComponent)(new we.wA("auth-internal",f=>{const p=pn(f.getProvider("auth").getImmediate());return new ea(p)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,k.registerVersion)(Ls,"0.23.2",function Hd(_){switch(_){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(_)),(0,k.registerVersion)(Ls,"0.23.2","esm2017")}("Browser")},9058:(ct,Te,O)=>{O.d(Te,{$s:()=>hn,BH:()=>J,G6:()=>bs,L:()=>xe,LL:()=>Ce,P0:()=>Ye,Pz:()=>ce,Sg:()=>pe,UG:()=>Je,US:()=>we,ZB:()=>re,ZR:()=>fe,aH:()=>K,b$:()=>ar,eu:()=>ie,hl:()=>ne,jU:()=>Xe,m9:()=>bi,ne:()=>$t,pd:()=>_t,q4:()=>We,r3:()=>Xt,ru:()=>Rt,tV:()=>V,uI:()=>Z,vZ:()=>mr,w1:()=>Ji,xO:()=>ji,xb:()=>Hr,z$:()=>Me,zI:()=>le,zd:()=>at});const oe=function(B){const L=[];let N=0;for(let R=0;R<B.length;R++){let x=B.charCodeAt(R);x<128?L[N++]=x:x<2048?(L[N++]=x>>6|192,L[N++]=63&x|128):55296==(64512&x)&&R+1<B.length&&56320==(64512&B.charCodeAt(R+1))?(x=65536+((1023&x)<<10)+(1023&B.charCodeAt(++R)),L[N++]=x>>18|240,L[N++]=x>>12&63|128,L[N++]=x>>6&63|128,L[N++]=63&x|128):(L[N++]=x>>12|224,L[N++]=x>>6&63|128,L[N++]=63&x|128)}return L},we={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(B,L){if(!Array.isArray(B))throw Error("encodeByteArray takes an array as a parameter");this.init_();const N=L?this.byteToCharMapWebSafe_:this.byteToCharMap_,R=[];for(let x=0;x<B.length;x+=3){const G=B[x],de=x+1<B.length,ke=de?B[x+1]:0,ht=x+2<B.length,ze=ht?B[x+2]:0;let en=(15&ke)<<2|ze>>6,St=63&ze;ht||(St=64,de||(en=64)),R.push(N[G>>2],N[(3&G)<<4|ke>>4],N[en],N[St])}return R.join("")},encodeString(B,L){return this.HAS_NATIVE_SUPPORT&&!L?btoa(B):this.encodeByteArray(oe(B),L)},decodeString(B,L){return this.HAS_NATIVE_SUPPORT&&!L?atob(B):function(B){const L=[];let N=0,R=0;for(;N<B.length;){const x=B[N++];if(x<128)L[R++]=String.fromCharCode(x);else if(x>191&&x<224){const G=B[N++];L[R++]=String.fromCharCode((31&x)<<6|63&G)}else if(x>239&&x<365){const ht=((7&x)<<18|(63&B[N++])<<12|(63&B[N++])<<6|63&B[N++])-65536;L[R++]=String.fromCharCode(55296+(ht>>10)),L[R++]=String.fromCharCode(56320+(1023&ht))}else{const G=B[N++],de=B[N++];L[R++]=String.fromCharCode((15&x)<<12|(63&G)<<6|63&de)}}return L.join("")}(this.decodeStringToByteArray(B,L))},decodeStringToByteArray(B,L){this.init_();const N=L?this.charToByteMapWebSafe_:this.charToByteMap_,R=[];for(let x=0;x<B.length;){const G=N[B.charAt(x++)],ke=x<B.length?N[B.charAt(x)]:0;++x;const ze=x<B.length?N[B.charAt(x)]:64;++x;const ft=x<B.length?N[B.charAt(x)]:64;if(++x,null==G||null==ke||null==ze||null==ft)throw new Re;R.push(G<<2|ke>>4),64!==ze&&(R.push(ke<<4&240|ze>>2),64!==ft&&R.push(ze<<6&192|ft))}return R},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let B=0;B<this.ENCODED_VALS.length;B++)this.byteToCharMap_[B]=this.ENCODED_VALS.charAt(B),this.charToByteMap_[this.byteToCharMap_[B]]=B,this.byteToCharMapWebSafe_[B]=this.ENCODED_VALS_WEBSAFE.charAt(B),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[B]]=B,B>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(B)]=B,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(B)]=B)}}};class Re extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const xe=function(B){return function(B){const L=oe(B);return we.encodeByteArray(L,!0)}(B).replace(/\./g,"")},V=function(B){try{return we.decodeString(B,!0)}catch(L){console.error("base64Decode failed: ",L)}return null};function re(B,L){if(!(L instanceof Object))return L;switch(L.constructor){case Date:return new Date(L.getTime());case Object:void 0===B&&(B={});break;case Array:B=[];break;default:return L}for(const N in L)!L.hasOwnProperty(N)||!Ve(N)||(B[N]=re(B[N],L[N]));return B}function Ve(B){return"__proto__"!==B}const Pe=()=>{try{return function De(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__||(()=>{if(typeof process>"u"||typeof process.env>"u")return;const B=process.env.__FIREBASE_DEFAULTS__;return B?JSON.parse(B):void 0})()||(()=>{if(typeof document>"u")return;let B;try{B=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const L=B&&V(B[1]);return L&&JSON.parse(L)})()}catch(B){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${B}`)}},We=B=>{var L,N;return null===(N=null===(L=Pe())||void 0===L?void 0:L.emulatorHosts)||void 0===N?void 0:N[B]},Ye=B=>{const L=We(B);if(!L)return;const N=L.lastIndexOf(":");if(N<=0||N+1===L.length)throw new Error(`Invalid host ${L} with no separate hostname and port!`);const R=parseInt(L.substring(N+1),10);return"["===L[0]?[L.substring(1,N-1),R]:[L.substring(0,N),R]},K=()=>{var B;return null===(B=Pe())||void 0===B?void 0:B.config},ce=B=>{var L;return null===(L=Pe())||void 0===L?void 0:L[`_${B}`]};class J{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((L,N)=>{this.resolve=L,this.reject=N})}wrapCallback(L){return(N,R)=>{N?this.reject(N):this.resolve(R),"function"==typeof L&&(this.promise.catch(()=>{}),1===L.length?L(N):L(N,R))}}}function pe(B,L){if(B.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const R=L||"demo-project",x=B.iat||0,G=B.sub||B.user_id;if(!G)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const de=Object.assign({iss:`https://securetoken.google.com/${R}`,aud:R,iat:x,exp:x+3600,auth_time:x,sub:G,user_id:G,firebase:{sign_in_provider:"custom",identities:{}}},B);return[xe(JSON.stringify({alg:"none",type:"JWT"})),xe(JSON.stringify(de)),""].join(".")}function Me(){return typeof navigator<"u"&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function Z(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Me())}function Je(){var B;const L=null===(B=Pe())||void 0===B?void 0:B.forceEnvironment;if("node"===L)return!0;if("browser"===L)return!1;try{return"[object process]"===Object.prototype.toString.call(global.process)}catch{return!1}}function Xe(){return"object"==typeof self&&self.self===self}function Rt(){const B="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof B&&void 0!==B.id}function ar(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function Ji(){const B=Me();return B.indexOf("MSIE ")>=0||B.indexOf("Trident/")>=0}function bs(){return!Je()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function ne(){try{return"object"==typeof indexedDB}catch{return!1}}function ie(){return new Promise((B,L)=>{try{let N=!0;const R="validate-browser-context-for-indexeddb-analytics-module",x=self.indexedDB.open(R);x.onsuccess=()=>{x.result.close(),N||self.indexedDB.deleteDatabase(R),B(!0)},x.onupgradeneeded=()=>{N=!1},x.onerror=()=>{var G;L((null===(G=x.error)||void 0===G?void 0:G.message)||"")}}catch(N){L(N)}})}function le(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}class fe extends Error{constructor(L,N,R){super(N),this.code=L,this.customData=R,this.name="FirebaseError",Object.setPrototypeOf(this,fe.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Ce.prototype.create)}}class Ce{constructor(L,N,R){this.service=L,this.serviceName=N,this.errors=R}create(L,...N){const R=N[0]||{},x=`${this.service}/${L}`,G=this.errors[L],de=G?function Ze(B,L){return B.replace(Le,(N,R)=>{const x=L[R];return null!=x?String(x):`<${R}?>`})}(G,R):"Error";return new fe(x,`${this.serviceName}: ${de} (${x}).`,R)}}const Le=/\{\$([^}]+)}/g;function Xt(B,L){return Object.prototype.hasOwnProperty.call(B,L)}function Hr(B){for(const L in B)if(Object.prototype.hasOwnProperty.call(B,L))return!1;return!0}function mr(B,L){if(B===L)return!0;const N=Object.keys(B),R=Object.keys(L);for(const x of N){if(!R.includes(x))return!1;const G=B[x],de=L[x];if(In(G)&&In(de)){if(!mr(G,de))return!1}else if(G!==de)return!1}for(const x of R)if(!N.includes(x))return!1;return!0}function In(B){return null!==B&&"object"==typeof B}function ji(B){const L=[];for(const[N,R]of Object.entries(B))Array.isArray(R)?R.forEach(x=>{L.push(encodeURIComponent(N)+"="+encodeURIComponent(x))}):L.push(encodeURIComponent(N)+"="+encodeURIComponent(R));return L.length?"&"+L.join("&"):""}function at(B){const L={};return B.replace(/^\?/,"").split("&").forEach(R=>{if(R){const[x,G]=R.split("=");L[decodeURIComponent(x)]=decodeURIComponent(G)}}),L}function _t(B){const L=B.indexOf("?");if(!L)return"";const N=B.indexOf("#",L);return B.substring(L,N>0?N:void 0)}function $t(B,L){const N=new _r(B,L);return N.subscribe.bind(N)}class _r{constructor(L,N){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=N,this.task.then(()=>{L(this)}).catch(R=>{this.error(R)})}next(L){this.forEachObserver(N=>{N.next(L)})}error(L){this.forEachObserver(N=>{N.error(L)}),this.close(L)}complete(){this.forEachObserver(L=>{L.complete()}),this.close()}subscribe(L,N,R){let x;if(void 0===L&&void 0===N&&void 0===R)throw new Error("Missing Observer.");x=function At(B,L){if("object"!=typeof B||null===B)return!1;for(const N of L)if(N in B&&"function"==typeof B[N])return!0;return!1}(L,["next","error","complete"])?L:{next:L,error:N,complete:R},void 0===x.next&&(x.next=En),void 0===x.error&&(x.error=En),void 0===x.complete&&(x.complete=En);const G=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?x.error(this.finalError):x.complete()}catch{}}),this.observers.push(x),G}unsubscribeOne(L){void 0===this.observers||void 0===this.observers[L]||(delete this.observers[L],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(L){if(!this.finalized)for(let N=0;N<this.observers.length;N++)this.sendOne(N,L)}sendOne(L,N){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[L])try{N(this.observers[L])}catch(R){typeof console<"u"&&console.error&&console.error(R)}})}close(L){this.finalized||(this.finalized=!0,void 0!==L&&(this.finalError=L),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function En(){}const jn=1e3,$n=2,Yn=144e5,Rr=.5;function hn(B,L=jn,N=$n){const R=L*Math.pow(N,B),x=Math.round(Rr*R*(Math.random()-.5)*2);return Math.min(Yn,R+x)}function bi(B){return B&&B._delegate?B._delegate:B}},8497:(ct,Te,O)=>{var E=O(7989);let F=null;function k(){return F}class me{}const we=new E.OlP("DocumentToken");var J=function(t){return t[t.Decimal=0]="Decimal",t[t.Percent=1]="Percent",t[t.Currency=2]="Currency",t[t.Scientific=3]="Scientific",t}(J||{}),Xe=function(t){return t[t.Decimal=0]="Decimal",t[t.Group=1]="Group",t[t.List=2]="List",t[t.PercentSign=3]="PercentSign",t[t.PlusSign=4]="PlusSign",t[t.MinusSign=5]="MinusSign",t[t.Exponential=6]="Exponential",t[t.SuperscriptingExponent=7]="SuperscriptingExponent",t[t.PerMille=8]="PerMille",t[t.Infinity=9]="Infinity",t[t.NaN=10]="NaN",t[t.TimeSeparator=11]="TimeSeparator",t[t.CurrencyDecimal=12]="CurrencyDecimal",t[t.CurrencyGroup=13]="CurrencyGroup",t}(Xe||{});function fe(t,e){const n=(0,E.cg1)(t),r=n[E.wAp.NumberSymbols][e];if(typeof r>"u"){if(e===Xe.CurrencyDecimal)return n[E.wAp.NumberSymbols][Xe.Decimal];if(e===Xe.CurrencyGroup)return n[E.wAp.NumberSymbols][Xe.Group]}return r}const x=/^(\d+)?\.((\d+)(-(\d+))?)?$/;function Tt(t){const e=parseInt(t);if(isNaN(e))throw new Error("Invalid integer literal when parsing "+t);return e}let Wu=(()=>{var t;class e{constructor(r,o){this._viewContainer=r,this._context=new cy,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=o}set ngIf(r){this._context.$implicit=this._context.ngIf=r,this._updateView()}set ngIfThen(r){ed("ngIfThen",r),this._thenTemplateRef=r,this._thenViewRef=null,this._updateView()}set ngIfElse(r){ed("ngIfElse",r),this._elseTemplateRef=r,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(r,o){return!0}}return(t=e).\u0275fac=function(r){return new(r||t)(E.Y36(E.s_b),E.Y36(E.Rgc))},t.\u0275dir=E.lG2({type:t,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0}),e})();class cy{constructor(){this.$implicit=null,this.ngIf=null}}function ed(t,e){if(e&&!e.createEmbeddedView)throw new Error(`${t} must be a TemplateRef, but received '${(0,E.AaK)(e)}'.`)}let Oe=(()=>{var t;class e{constructor(r){this._locale=r}transform(r,o,c){if(!function Kr(t){return!(null==t||""===t||t!=t)}(r))return null;c=c||this._locale;try{return function se(t,e,n){return function St(t,e,n,r,o,c,d=!1){let g="",v=!1;if(isFinite(t)){let D=function qe(t){let r,o,c,d,g,e=Math.abs(t)+"",n=0;for((o=e.indexOf("."))>-1&&(e=e.replace(".","")),(c=e.search(/e/i))>0?(o<0&&(o=c),o+=+e.slice(c+1),e=e.substring(0,c)):o<0&&(o=e.length),c=0;"0"===e.charAt(c);c++);if(c===(g=e.length))r=[0],o=1;else{for(g--;"0"===e.charAt(g);)g--;for(o-=c,r=[],d=0;c<=g;c++,d++)r[d]=Number(e.charAt(c))}return o>22&&(r=r.splice(0,21),n=o-1,o=1),{digits:r,exponent:n,integerLen:o}}(t);d&&(D=function Ie(t){if(0===t.digits[0])return t;const e=t.digits.length-t.integerLen;return t.exponent?t.exponent+=2:(0===e?t.digits.push(0,0):1===e&&t.digits.push(0),t.integerLen+=2),t}(D));let T=e.minInt,A=e.minFrac,U=e.maxFrac;if(c){const ot=c.match(x);if(null===ot)throw new Error(`${c} is not a valid digit info`);const ut=ot[1],yt=ot[3],Nt=ot[5];null!=ut&&(T=Tt(ut)),null!=yt&&(A=Tt(yt)),null!=Nt?U=Tt(Nt):null!=yt&&A>U&&(U=A)}!function Ue(t,e,n){if(e>n)throw new Error(`The minimum number of digits after fraction (${e}) is higher than the maximum (${n}).`);let r=t.digits,o=r.length-t.integerLen;const c=Math.min(Math.max(e,o),n);let d=c+t.integerLen,g=r[d];if(d>0){r.splice(Math.max(t.integerLen,d));for(let A=d;A<r.length;A++)r[A]=0}else{o=Math.max(0,o),t.integerLen=1,r.length=Math.max(1,d=c+1),r[0]=0;for(let A=1;A<d;A++)r[A]=0}if(g>=5)if(d-1<0){for(let A=0;A>d;A--)r.unshift(0),t.integerLen++;r.unshift(1),t.integerLen++}else r[d-1]++;for(;o<Math.max(0,c);o++)r.push(0);let v=0!==c;const D=e+t.integerLen,T=r.reduceRight(function(A,U,q,he){return he[q]=(U+=A)<10?U:U-10,v&&(0===he[q]&&q>=D?he.pop():v=!1),U>=10?1:0},0);T&&(r.unshift(T),t.integerLen++)}(D,A,U);let q=D.digits,he=D.integerLen;const Se=D.exponent;let Ae=[];for(v=q.every(ot=>!ot);he<T;he++)q.unshift(0);for(;he<0;he++)q.unshift(0);he>0?Ae=q.splice(he,q.length):(Ae=q,q=[0]);const Qe=[];for(q.length>=e.lgSize&&Qe.unshift(q.splice(-e.lgSize,q.length).join(""));q.length>e.gSize;)Qe.unshift(q.splice(-e.gSize,q.length).join(""));q.length&&Qe.unshift(q.join("")),g=Qe.join(fe(n,r)),Ae.length&&(g+=fe(n,o)+Ae.join("")),Se&&(g+=fe(n,Xe.Exponential)+"+"+Se)}else g=fe(n,Xe.Infinity);return g=t<0&&!v?e.negPre+g+e.negSuf:e.posPre+g+e.posSuf,g}(t,function Y(t,e="-"){const n={minInt:1,minFrac:0,maxFrac:0,posPre:"",posSuf:"",negPre:"",negSuf:"",gSize:0,lgSize:0},r=t.split(";"),o=r[0],c=r[1],d=-1!==o.indexOf(".")?o.split("."):[o.substring(0,o.lastIndexOf("0")+1),o.substring(o.lastIndexOf("0")+1)],g=d[0],v=d[1]||"";n.posPre=g.substring(0,g.indexOf("#"));for(let T=0;T<v.length;T++){const A=v.charAt(T);"0"===A?n.minFrac=n.maxFrac=T+1:"#"===A?n.maxFrac=T+1:n.posSuf+=A}const D=g.split(",");if(n.gSize=D[1]?D[1].length:0,n.lgSize=D[2]||D[1]?(D[2]||D[1]).length:0,c){const T=o.length-n.posPre.length-n.posSuf.length,A=c.indexOf("#");n.negPre=c.substring(0,A).replace(/'/g,""),n.negSuf=c.slice(A+T).replace(/'/g,"")}else n.negPre=e+n.posPre,n.negSuf=n.posSuf;return n}(function Ce(t,e){return(0,E.cg1)(t)[E.wAp.NumberFormats][e]}(e,J.Decimal),fe(e,Xe.MinusSign)),e,Xe.Group,Xe.Decimal,n)}(function is(t){if("string"==typeof t&&!isNaN(Number(t)-parseFloat(t)))return Number(t);if("number"!=typeof t)throw new Error(`${t} is not a number`);return t}(r),c,o)}catch(d){throw function qr(t,e){return new E.vHH(2100,!1)}()}}}return(t=e).\u0275fac=function(r){return new(r||t)(E.Y36(E.soG,16))},t.\u0275pipe=E.Yjl({name:"number",type:t,pure:!0,standalone:!0}),e})();let Dn=(()=>{var t;class e{}return(t=e).\u0275fac=function(r){return new(r||t)},t.\u0275mod=E.oAB({type:t}),t.\u0275inj=E.cJS({}),e})();function Zr(t){return"server"===t}class ap extends me{constructor(){super(...arguments),this.supportsDOMEvents=!0}}class oc extends ap{static makeCurrent(){!function oe(t){F||(F=t)}(new oc)}onAndCancel(e,n,r){return e.addEventListener(n,r),()=>{e.removeEventListener(n,r)}}dispatchEvent(e,n){e.dispatchEvent(n)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,n){return(n=n||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,n){return"window"===n?window:"document"===n?e:"body"===n?e.body:null}getBaseHref(e){const n=function Id(){return Fa=Fa||document.querySelector("base"),Fa?Fa.getAttribute("href"):null}();return null==n?null:function cs(t){Ed=Ed||document.createElement("a"),Ed.setAttribute("href",t);const e=Ed.pathname;return"/"===e.charAt(0)?e:`/${e}`}(n)}resetBaseElement(){Fa=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return function ts(t,e){e=encodeURIComponent(e);for(const n of t.split(";")){const r=n.indexOf("="),[o,c]=-1==r?[n,""]:[n.slice(0,r),n.slice(r+1)];if(o.trim()===e)return decodeURIComponent(c)}return null}(document.cookie,e)}}let Ed,Fa=null,cp=(()=>{var t;class e{build(){return new XMLHttpRequest}}return(t=e).\u0275fac=function(r){return new(r||t)},t.\u0275prov=E.Yz7({token:t,factory:t.\u0275fac}),e})();const tn=new E.OlP("EventManagerPlugins");let Ay=(()=>{var t;class e{constructor(r,o){this._zone=o,this._eventNameToPlugin=new Map,r.forEach(c=>{c.manager=this}),this._plugins=r.slice().reverse()}addEventListener(r,o,c){return this._findPluginFor(o).addEventListener(r,o,c)}getZone(){return this._zone}_findPluginFor(r){let o=this._eventNameToPlugin.get(r);if(o)return o;if(o=this._plugins.find(d=>d.supports(r)),!o)throw new E.vHH(5101,!1);return this._eventNameToPlugin.set(r,o),o}}return(t=e).\u0275fac=function(r){return new(r||t)(E.LFG(tn),E.LFG(E.R0b))},t.\u0275prov=E.Yz7({token:t,factory:t.\u0275fac}),e})();class ac{constructor(e){this._doc=e}}const Tr="ng-app-id";let xy=(()=>{var t;class e{constructor(r,o,c,d={}){this.doc=r,this.appId=o,this.nonce=c,this.platformId=d,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=Zr(d),this.resetHostNodes()}addStyles(r){for(const o of r)1===this.changeUsageCount(o,1)&&this.onStyleAdded(o)}removeStyles(r){for(const o of r)this.changeUsageCount(o,-1)<=0&&this.onStyleRemoved(o)}ngOnDestroy(){const r=this.styleNodesInDOM;r&&(r.forEach(o=>o.remove()),r.clear());for(const o of this.getAllStyles())this.onStyleRemoved(o);this.resetHostNodes()}addHost(r){this.hostNodes.add(r);for(const o of this.getAllStyles())this.addStyleToHost(r,o)}removeHost(r){this.hostNodes.delete(r)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(r){for(const o of this.hostNodes)this.addStyleToHost(o,r)}onStyleRemoved(r){const o=this.styleRef;o.get(r)?.elements?.forEach(c=>c.remove()),o.delete(r)}collectServerRenderedStyles(){const r=this.doc.head?.querySelectorAll(`style[${Tr}="${this.appId}"]`);if(r?.length){const o=new Map;return r.forEach(c=>{null!=c.textContent&&o.set(c.textContent,c)}),o}return null}changeUsageCount(r,o){const c=this.styleRef;if(c.has(r)){const d=c.get(r);return d.usage+=o,d.usage}return c.set(r,{usage:o,elements:[]}),o}getStyleElement(r,o){const c=this.styleNodesInDOM,d=c?.get(o);if(d?.parentNode===r)return c.delete(o),d.removeAttribute(Tr),d;{const g=this.doc.createElement("style");return this.nonce&&g.setAttribute("nonce",this.nonce),g.textContent=o,this.platformIsServer&&g.setAttribute(Tr,this.appId),g}}addStyleToHost(r,o){const c=this.getStyleElement(r,o);r.appendChild(c);const d=this.styleRef,g=d.get(o)?.elements;g?g.push(c):d.set(o,{elements:[c],usage:1})}resetHostNodes(){const r=this.hostNodes;r.clear(),r.add(this.doc.head)}}return(t=e).\u0275fac=function(r){return new(r||t)(E.LFG(we),E.LFG(E.AFp),E.LFG(E.Ojb,8),E.LFG(E.Lbi))},t.\u0275prov=E.Yz7({token:t,factory:t.\u0275fac}),e})();const Vo={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},Lr=/%COMP%/g,ao=new E.OlP("RemoveStylesOnCompDestroy",{providedIn:"root",factory:()=>!1});function Va(t,e){return e.map(n=>n.replace(Lr,t))}let Ba=(()=>{var t;class e{constructor(r,o,c,d,g,v,D,T=null){this.eventManager=r,this.sharedStylesHost=o,this.appId=c,this.removeStylesOnCompDestroy=d,this.doc=g,this.platformId=v,this.ngZone=D,this.nonce=T,this.rendererByCompId=new Map,this.platformIsServer=Zr(v),this.defaultRenderer=new uc(r,g,D,this.platformIsServer)}createRenderer(r,o){if(!r||!o)return this.defaultRenderer;this.platformIsServer&&o.encapsulation===E.ifc.ShadowDom&&(o={...o,encapsulation:E.ifc.Emulated});const c=this.getOrCreateRenderer(r,o);return c instanceof ky?c.applyToHost(r):c instanceof Dd&&c.applyStyles(),c}getOrCreateRenderer(r,o){const c=this.rendererByCompId;let d=c.get(o.id);if(!d){const g=this.doc,v=this.ngZone,D=this.eventManager,T=this.sharedStylesHost,A=this.removeStylesOnCompDestroy,U=this.platformIsServer;switch(o.encapsulation){case E.ifc.Emulated:d=new ky(D,T,o,this.appId,A,g,v,U);break;case E.ifc.ShadowDom:return new Z0(D,T,r,o,g,v,this.nonce,U);default:d=new Dd(D,T,o,A,g,v,U)}c.set(o.id,d)}return d}ngOnDestroy(){this.rendererByCompId.clear()}}return(t=e).\u0275fac=function(r){return new(r||t)(E.LFG(Ay),E.LFG(xy),E.LFG(E.AFp),E.LFG(ao),E.LFG(we),E.LFG(E.Lbi),E.LFG(E.R0b),E.LFG(E.Ojb))},t.\u0275prov=E.Yz7({token:t,factory:t.\u0275fac}),e})();class uc{constructor(e,n,r,o){this.eventManager=e,this.doc=n,this.ngZone=r,this.platformIsServer=o,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(e,n){return n?this.doc.createElementNS(Vo[n]||n,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,n){(wd(e)?e.content:e).appendChild(n)}insertBefore(e,n,r){e&&(wd(e)?e.content:e).insertBefore(n,r)}removeChild(e,n){e&&e.removeChild(n)}selectRootElement(e,n){let r="string"==typeof e?this.doc.querySelector(e):e;if(!r)throw new E.vHH(-5104,!1);return n||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,n,r,o){if(o){n=o+":"+n;const c=Vo[o];c?e.setAttributeNS(c,n,r):e.setAttribute(n,r)}else e.setAttribute(n,r)}removeAttribute(e,n,r){if(r){const o=Vo[r];o?e.removeAttributeNS(o,n):e.removeAttribute(`${r}:${n}`)}else e.removeAttribute(n)}addClass(e,n){e.classList.add(n)}removeClass(e,n){e.classList.remove(n)}setStyle(e,n,r,o){o&(E.JOm.DashCase|E.JOm.Important)?e.style.setProperty(n,r,o&E.JOm.Important?"important":""):e.style[n]=r}removeStyle(e,n,r){r&E.JOm.DashCase?e.style.removeProperty(n):e.style[n]=""}setProperty(e,n,r){e[n]=r}setValue(e,n){e.nodeValue=n}listen(e,n,r){if("string"==typeof e&&!(e=k().getGlobalEventTarget(this.doc,e)))throw new Error(`Unsupported event target ${e} for event ${n}`);return this.eventManager.addEventListener(e,n,this.decoratePreventDefault(r))}decoratePreventDefault(e){return n=>{if("__ngUnwrap__"===n)return e;!1===(this.platformIsServer?this.ngZone.runGuarded(()=>e(n)):e(n))&&n.preventDefault()}}}function wd(t){return"TEMPLATE"===t.tagName&&void 0!==t.content}class Z0 extends uc{constructor(e,n,r,o,c,d,g,v){super(e,c,d,v),this.sharedStylesHost=n,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const D=Va(o.id,o.styles);for(const T of D){const A=document.createElement("style");g&&A.setAttribute("nonce",g),A.textContent=T,this.shadowRoot.appendChild(A)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,n){return super.appendChild(this.nodeOrShadowRoot(e),n)}insertBefore(e,n,r){return super.insertBefore(this.nodeOrShadowRoot(e),n,r)}removeChild(e,n){return super.removeChild(this.nodeOrShadowRoot(e),n)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}}class Dd extends uc{constructor(e,n,r,o,c,d,g,v){super(e,c,d,g),this.sharedStylesHost=n,this.removeStylesOnCompDestroy=o,this.styles=v?Va(v,r.styles):r.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}}class ky extends Dd{constructor(e,n,r,o,c,d,g,v){const D=o+"-"+r.id;super(e,n,r,c,d,g,v,D),this.contentAttr=function lp(t){return"_ngcontent-%COMP%".replace(Lr,t)}(D),this.hostAttr=function Py(t){return"_nghost-%COMP%".replace(Lr,t)}(D)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,n){const r=super.createElement(e,n);return super.setAttribute(r,this.contentAttr,""),r}}let dp=(()=>{var t;class e extends ac{constructor(r){super(r)}supports(r){return!0}addEventListener(r,o,c){return r.addEventListener(o,c,!1),()=>this.removeEventListener(r,o,c)}removeEventListener(r,o,c){return r.removeEventListener(o,c)}}return(t=e).\u0275fac=function(r){return new(r||t)(E.LFG(we))},t.\u0275prov=E.Yz7({token:t,factory:t.\u0275fac}),e})();const hp=["alt","control","meta","shift"],Ms={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},Oy={alt:t=>t.altKey,control:t=>t.ctrlKey,meta:t=>t.metaKey,shift:t=>t.shiftKey};let Ly=(()=>{var t;class e extends ac{constructor(r){super(r)}supports(r){return null!=e.parseEventName(r)}addEventListener(r,o,c){const d=e.parseEventName(o),g=e.eventCallback(d.fullKey,c,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>k().onAndCancel(r,d.domEventName,g))}static parseEventName(r){const o=r.toLowerCase().split("."),c=o.shift();if(0===o.length||"keydown"!==c&&"keyup"!==c)return null;const d=e._normalizeKey(o.pop());let g="",v=o.indexOf("code");if(v>-1&&(o.splice(v,1),g="code."),hp.forEach(T=>{const A=o.indexOf(T);A>-1&&(o.splice(A,1),g+=T+".")}),g+=d,0!=o.length||0===d.length)return null;const D={};return D.domEventName=c,D.fullKey=g,D}static matchEventFullKeyCode(r,o){let c=Ms[r.key]||r.key,d="";return o.indexOf("code.")>-1&&(c=r.code,d="code."),!(null==c||!c)&&(c=c.toLowerCase()," "===c?c="space":"."===c&&(c="dot"),hp.forEach(g=>{g!==c&&(0,Oy[g])(r)&&(d+=g+".")}),d+=c,d===o)}static eventCallback(r,o,c){return d=>{e.matchEventFullKeyCode(d,r)&&c.runGuarded(()=>o(d))}}static _normalizeKey(r){return"esc"===r?"escape":r}}return(t=e).\u0275fac=function(r){return new(r||t)(E.LFG(we))},t.\u0275prov=E.Yz7({token:t,factory:t.\u0275fac}),e})();const pp=(0,E.eFA)(E._c5,"browser",[{provide:E.Lbi,useValue:"browser"},{provide:E.g9A,useValue:function Lt(){oc.makeCurrent()},multi:!0},{provide:we,useFactory:function dc(){return(0,E.RDi)(document),document},deps:[]}]),Bo=new E.OlP(""),Ci=[{provide:E.rWj,useClass:class up{addToWindow(e){E.dqk.getAngularTestability=(r,o=!0)=>{const c=e.findTestabilityInTree(r,o);if(null==c)throw new E.vHH(5103,!1);return c},E.dqk.getAllAngularTestabilities=()=>e.getAllTestabilities(),E.dqk.getAllAngularRootElements=()=>e.getAllRootElements(),E.dqk.frameworkStabilizers||(E.dqk.frameworkStabilizers=[]),E.dqk.frameworkStabilizers.push(r=>{const o=E.dqk.getAllAngularTestabilities();let c=o.length,d=!1;const g=function(v){d=d||v,c--,0==c&&r(d)};o.forEach(v=>{v.whenStable(g)})})}findTestabilityInTree(e,n,r){return null==n?null:e.getTestability(n)??(r?k().isShadowRoot(n)?this.findTestabilityInTree(e,n.host,!0):this.findTestabilityInTree(e,n.parentElement,!0):null)}},deps:[]},{provide:E.lri,useClass:E.dDg,deps:[E.R0b,E.eoX,E.rWj]},{provide:E.dDg,useClass:E.dDg,deps:[E.R0b,E.eoX,E.rWj]}],uo=[{provide:E.zSh,useValue:"root"},{provide:E.qLn,useFactory:function fp(){return new E.qLn},deps:[]},{provide:tn,useClass:dp,multi:!0,deps:[we,E.R0b,E.Lbi]},{provide:tn,useClass:Ly,multi:!0,deps:[we]},Ba,xy,Ay,{provide:E.FYo,useExisting:Ba},{provide:class os{},useClass:cp,deps:[]},[]];let Ua=(()=>{var t;class e{constructor(r){}static withServerTransition(r){return{ngModule:e,providers:[{provide:E.AFp,useValue:r.appId}]}}}return(t=e).\u0275fac=function(r){return new(r||t)(E.LFG(Bo,12))},t.\u0275mod=E.oAB({type:t}),t.\u0275inj=E.cJS({providers:[...uo,...Ci],imports:[Dn,E.hGG]}),e})();typeof window<"u"&&window;class Ha{constructor(){this._available=0,this._currentNumber=0,this._maximumNumber=0}get available(){return this._available}set available(e){this._available=e}get currentNumber(){return this._currentNumber}set currentNumber(e){this._currentNumber=e}get maximumNumber(){return this._maximumNumber}set maximumNumber(e){this._maximumNumber=e}toJSON(){return{available:this.available,currentNumber:this.currentNumber,maximumNumber:this.maximumNumber}}}class Ad{constructor(){this._orbit=0,this._ground=0,this._workers=new Ha,this._soldiers=new Ha,this._resources=[]}get location(){return this._location}set location(e){this._location=e}get name(){return this._name}set name(e){this._name=e}get resources(){return this._resources}set resources(e){this._resources=e}get ground(){return this._ground}set ground(e){this._ground=e}get orbit(){return this._orbit}set orbit(e){this._orbit=e}get workers(){return this._workers}set workers(e){this._workers=e}get soldiers(){return this._soldiers}set soldiers(e){this._soldiers=e}}class jo{constructor(){this._abundance=0,this._production=0,this._stored=0}get name(){return this._name}set name(e){this._name=e}get stored(){return this._stored}set stored(e){this._stored=e}get abundance(){return this._abundance}set abundance(e){this._abundance=e}get production(){return this._production}set production(e){this._production=e}toJSON(){return{name:this.name,abundance:this.abundance,production:this.production,stored:this.stored}}}let pc=(()=>{var t;class e{constructor(){this.document=(0,E.f3M)(we)}extract(){let r=[];return this.document.querySelectorAll("#planetList > #planetList").forEach(o=>{let c=new Ad,d=o.querySelectorAll(".resourceLine .left > span"),g=[];d.forEach(D=>{let T=D.textContent.split(/\s+/),A=new jo;A.name=D.parentElement.className.split(/\s+/)[2],A.stored=parseInt(T[0].replace(/,/g,"")),A.production=parseInt(T[1].substring(1,T[1].length-1).replace(/,/g,"")),A.abundance=parseInt(T[2].replace(/,/g,"")),g.push(A)}),c.resources=g;let v=o.querySelectorAll(".planetHeadSection .resource span")[4].innerHTML.split(/\s+/)[0];c.workers.available=parseInt(v.substring(1,v.length).replace(/,/g,"")),c.workers.currentNumber=parseInt(o.querySelectorAll(".planetHeadSection .resource span")[3].innerHTML.split(/\//g)[0].replace(/,/g,"")),c.workers.maximumNumber=parseInt(o.querySelectorAll(".planetHeadSection .resource span")[3].innerHTML.split(/\//g)[1].replace(/,/g,"")),c.soldiers.currentNumber=parseInt(o.querySelectorAll(".planetHeadSection .resource span")[2].innerHTML.replace(/,/g,"")),c.name=o.querySelectorAll(".planetName > a")[0].innerHTML,c.location=o.querySelectorAll(".coords > span")[0].innerHTML.split(/\./),c.orbit=parseInt(o.querySelectorAll(".planetHeadSection .resource span")[0].innerHTML),c.ground=parseInt(o.querySelectorAll(".planetHeadSection .resource span")[1].innerHTML),r.push(c)}),r}}return(t=e).\u0275fac=function(r){return new(r||t)},t.\u0275prov=E.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),e})();class Gi{constructor(){this._resources=[],this._ground=0,this._orbit=0,this._workers=new Ha,this._soldiers=0,this._structures=[],this._fleets=[]}get owner(){return this._owner}set owner(e){this._owner=e}get turn(){return this._turn}set turn(e){this._turn=e}get location(){return this._location}set location(e){this._location=e}get resources(){return this._resources}set resources(e){this._resources=e}get ground(){return this._ground}set ground(e){this._ground=e}get orbit(){return this._orbit}set orbit(e){this._orbit=e}get workers(){return this._workers}set workers(e){this._workers=e}get soldiers(){return this._soldiers}set soldiers(e){this._soldiers=e}get structures(){return this._structures}set structures(e){this._structures=e}get fleets(){return this._fleets}set fleets(e){this._fleets=e}toJSON(){return{resources:this.resources,ground:this.ground,orbit:this.orbit,workers:this.workers,soldiers:this.soldiers,structures:this.structures,fleets:this.fleets,location:this.location,turn:this.turn,owner:this.owner}}}var Ai=function(t){return t[t.UNKNOWN=-1]="UNKNOWN",t[t.RESOURCE=0]="RESOURCE",t[t.SURFACE=1]="SURFACE",t[t.FLEET=2]="FLEET",t}(Ai||{});class $o{constructor(e,n){this._planetScan=e,this._type=n}get planetScan(){return this._planetScan}set planetScan(e){this._planetScan=e}get type(){return this._type}set type(e){this._type=e}}class co{constructor(e,n){this._quantity=0,this._name=e,this._quantity=n}get name(){return this._name}set name(e){this._name=e}get quantity(){return this._quantity}set quantity(e){this._quantity=e}toJSON(){return{name:this.name,quantity:this.quantity}}}var Tn=function(t){return t.UNKNOWN="unknown",t.OUTPOST="outpost",t.METAL_MINE="metal mine",t.MINERAL_EXTRACTOR="mineral extractor",t.FARM="farm",t.SOLAR_GENERATOR="solar generator",t.CORE_METAL_MINE="core metal mine",t.CORE_MINERAL_EXTRACTOR="core mineral extractor",t.HYDROPONICS_LAB="hydroponics lab",t.SOLAR_ARRAY="solar array",t.STRIP_METAL_MINE="strip metal mine",t.STRIP_MINERAL_EXTRACTOR="strip mineral extractor",t.HYDROPONICS_DOME="hydroponics dome",t.SOLAR_STATION="solar station",t.JUMP_GATE="jump gate",t.HYPERSPACE_BEACON="hyperspace beacon",t.SPACE_TETHER="space tether",t}(Tn||{});class xd{constructor(e,n){this._name=e,this._alliance=n}get name(){return this._name}set name(e){this._name=e}get alliance(){return this._alliance}set alliance(e){this._alliance=e}toJSON(){return{name:this.name,alliance:this.alliance}}}let gc=(()=>{var t;class e{constructor(){this.document=(0,E.f3M)(we)}extract(){if(this.document.querySelectorAll("#contentBox #planetHeader").length<=1)return null;let c,r=new Gi,o=this.document.querySelectorAll("#contentBox #planetHeader")[1];switch(o.querySelectorAll(".planetHeadSection .resource > span").length){case 5:c=Ai.SURFACE;break;case 2:c=Ai.RESOURCE;break;case 0:c=Ai.FLEET;break;default:c=Ai.UNKNOWN}let d=new $o(r,c);if(c!==Ai.UNKNOWN){d.planetScan.turn=parseInt(document.querySelector("#turnNumber").textContent.trim().replace(/,/g,""));let g=o.querySelectorAll(".planetHeadSection .opacBackground>.left>span")[1]?o.querySelectorAll(".planetHeadSection .opacBackground>.left>span")[1].textContent.trim():"[-]";d.planetScan.owner=new xd(o.querySelectorAll(".planetHeadSection .opacBackground>.left>span")[0].textContent.trim().split("Owner:")[1].trim(),g.substring(1,g.length-1))}if((c===Ai.RESOURCE||c===Ai.SURFACE)&&(d.planetScan.orbit=parseInt(o.querySelectorAll(".planetHeadSection .resource > span")[0].textContent.trim()),d.planetScan.ground=parseInt(o.querySelectorAll(".planetHeadSection .resource > span")[1].textContent.trim()),d.planetScan.location=o.querySelectorAll(".planetHeadSection .coords")[0].textContent.trim().replace(/\s+/,"")),c===Ai.RESOURCE&&(o.querySelectorAll(".planetHeadSection .resourceRow:nth-child(1) > .data:not(:first-child)").forEach(g=>{let v=new jo;v.name=g.textContent.trim().toLowerCase(),d.planetScan.resources.push(v)}),o.querySelectorAll(".planetHeadSection .resourceRow:nth-child(2) > .data:not(:first-child)").forEach((g,v)=>{d.planetScan.resources[v].abundance=parseInt(g.textContent.trim())})),c===Ai.SURFACE){o.querySelectorAll(".planetHeadSection .resourceRow:nth-child(1) > .data:not(:first-child)").forEach(v=>{let D=new jo;D.name=v.textContent.trim().toLowerCase(),d.planetScan.resources.push(D)}),o.querySelectorAll(".planetHeadSection .resourceRow:nth-child(2) > .data:not(:first-child)").forEach((v,D)=>{d.planetScan.resources[D].stored=parseInt(v.textContent.trim().replace(/,/g,""))}),o.querySelectorAll(".planetHeadSection .resourceRow:nth-child(3) > .data:not(:first-child)").forEach((v,D)=>{d.planetScan.resources[D].abundance=parseInt(v.textContent.trim())});let g=o.querySelectorAll(".planetHeadSection .resource > span")[4].textContent.trim().split(/\s+/)[0];d.planetScan.workers.currentNumber=parseInt(o.querySelectorAll(".planetHeadSection .resource > span")[3].textContent.trim().split(/\//g)[0].replace(/,/g,"")),d.planetScan.workers.maximumNumber=parseInt(o.querySelectorAll(".planetHeadSection .resource > span")[3].textContent.trim().split(/\//g)[1].replace(/,/g,"")),d.planetScan.workers.available=parseInt(g.substring(1,g.length).replace(/,/g,"")),d.planetScan.soldiers=parseInt(o.querySelectorAll(".planetHeadSection .resource > span")[2].textContent.trim().replace(/,/g,"")),o.parentElement.querySelectorAll("div.entry > .left:not(.structureImageSmall)").forEach(v=>{d.planetScan.structures.push(new co(v.textContent.split(/x\s+/)[1].trim().replace(/_/g," ").toLowerCase(),parseInt(v.textContent.split(/x\s+/)[0].trim())))}),d.planetScan.structures.forEach(v=>{switch(v.name){case Tn.OUTPOST:d.planetScan.resources[0].production+=300,d.planetScan.resources[1].production+=200,d.planetScan.resources[2].production+=100;break;case Tn.METAL_MINE:d.planetScan.resources[0].production+=300*v.quantity;break;case Tn.MINERAL_EXTRACTOR:d.planetScan.resources[1].production+=200*v.quantity;break;case Tn.FARM:d.planetScan.resources[2].production+=300*v.quantity;break;case Tn.SOLAR_GENERATOR:d.planetScan.resources[3].production+=100*v.quantity;break;case Tn.CORE_METAL_MINE:d.planetScan.resources[0].production+=900*v.quantity;break;case Tn.CORE_MINERAL_EXTRACTOR:d.planetScan.resources[1].production+=600*v.quantity;break;case Tn.HYDROPONICS_LAB:d.planetScan.resources[2].production+=900*v.quantity;break;case Tn.SOLAR_ARRAY:d.planetScan.resources[3].production+=300*v.quantity;break;case Tn.STRIP_METAL_MINE:d.planetScan.resources[0].production+=9e3*v.quantity;break;case Tn.STRIP_MINERAL_EXTRACTOR:d.planetScan.resources[1].production+=6e3*v.quantity;break;case Tn.HYDROPONICS_DOME:d.planetScan.resources[2].production+=9e3*v.quantity;break;case Tn.SOLAR_STATION:d.planetScan.resources[3].production+=3e3*v.quantity}})}return d.planetScan.resources.forEach(g=>{g.production=Math.ceil(g.production*g.abundance/100)}),d}}return(t=e).\u0275fac=function(r){return new(r||t)},t.\u0275prov=E.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),e})(),Ep=(()=>{var t;class e{constructor(){this.document=(0,E.f3M)(we)}extract(){let r=[];return this.document.querySelectorAll("div.navigation div.planets").forEach(o=>{let c=new Ad;c.location=o.querySelector(".coords>span").textContent.trim().split(/\./),r.push(c)}),r}}return(t=e).\u0275fac=function(r){return new(r||t)},t.\u0275prov=E.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),e})(),Ns=(()=>{var t;class e{constructor(){this.planetListExtractor=(0,E.f3M)(pc),this.planetScanExtractor=(0,E.f3M)(gc),this.navigationSystemPlanetsExtractor=(0,E.f3M)(Ep)}planetsSummaries(){return this.planetListExtractor.extract()}planetScan(){return this.planetScanExtractor.extract()}navigationSystemPlanets(){return this.navigationSystemPlanetsExtractor.extract()}}return(t=e).\u0275fac=function(r){return new(r||t)},t.\u0275prov=E.Yz7({token:t,factory:t.\u0275fac,providedIn:"platform"}),e})();var Rs=O(7394);class za extends Rs.w0{constructor(e,n){super()}schedule(e,n=0){return this}}const mc={setInterval(t,e,...n){const{delegate:r}=mc;return r?.setInterval?r.setInterval(t,e,...n):setInterval(t,e,...n)},clearInterval(t){const{delegate:e}=mc;return(e?.clearInterval||clearInterval)(t)},delegate:void 0};var nE=O(9039);class Ho extends za{constructor(e,n){super(e,n),this.scheduler=e,this.work=n,this.pending=!1}schedule(e,n=0){var r;if(this.closed)return this;this.state=e;const o=this.id,c=this.scheduler;return null!=o&&(this.id=this.recycleAsyncId(c,o,n)),this.pending=!0,this.delay=n,this.id=null!==(r=this.id)&&void 0!==r?r:this.requestAsyncId(c,this.id,n),this}requestAsyncId(e,n,r=0){return mc.setInterval(e.flush.bind(e,this),r)}recycleAsyncId(e,n,r=0){if(null!=r&&this.delay===r&&!1===this.pending)return n;null!=n&&mc.clearInterval(n)}execute(e,n){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const r=this._execute(e,n);if(r)return r;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,n){let o,r=!1;try{this.work(e)}catch(c){r=!0,o=c||new Error("Scheduled action threw falsy error")}if(r)return this.unsubscribe(),o}unsubscribe(){if(!this.closed){const{id:e,scheduler:n}=this,{actions:r}=n;this.work=this.state=this.scheduler=null,this.pending=!1,(0,nE.P)(r,this),null!=e&&(this.id=this.recycleAsyncId(n,e,null)),this.delay=null,super.unsubscribe()}}}const Md={now:()=>(Md.delegate||Date).now(),delegate:void 0};class Ga{constructor(e,n=Ga.now){this.schedulerActionCtor=e,this.now=n}schedule(e,n=0,r){return new this.schedulerActionCtor(this,e).schedule(r,n)}}Ga.now=Md.now;class wp extends Ga{constructor(e,n=Ga.now){super(e,n),this.actions=[],this._active=!1}flush(e){const{actions:n}=this;if(this._active)return void n.push(e);let r;this._active=!0;do{if(r=e.execute(e.state,e.delay))break}while(e=n.shift());if(this._active=!1,r){for(;e=n.shift();)e.unsubscribe();throw r}}}const Nd=new wp(Ho);var xi=O(3018),Mi=O(2459),Ps=O(2096),Ct=O(534);(0,Ct.registerVersion)("firebase","9.23.0","app");var z=O(5861),tt=O(9058),Vr=O(4537),Jr=O(7879);const hi=(t,e)=>e.some(n=>t instanceof n);let Dp,zo;const Wa=new WeakMap,qa=new WeakMap,_c=new WeakMap,vc=new WeakMap,Ic=new WeakMap;let kd={get(t,e,n){if(t instanceof IDBTransaction){if("done"===e)return qa.get(t);if("objectStoreNames"===e)return t.objectStoreNames||_c.get(t);if("store"===e)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Ni(t[e])},set:(t,e,n)=>(t[e]=n,!0),has:(t,e)=>t instanceof IDBTransaction&&("done"===e||"store"===e)||e in t};function Od(t){return"function"==typeof t?function lo(t){return t!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function Pd(){return zo||(zo=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(t)?function(...e){return t.apply(Wo(this),e),Ni(Wa.get(this))}:function(...e){return Ni(t.apply(Wo(this),e))}:function(e,...n){const r=t.call(Wo(this),e,...n);return _c.set(r,e.sort?e.sort():[e]),Ni(r)}}(t):(t instanceof IDBTransaction&&function bp(t){if(qa.has(t))return;const e=new Promise((n,r)=>{const o=()=>{t.removeEventListener("complete",c),t.removeEventListener("error",d),t.removeEventListener("abort",d)},c=()=>{n(),o()},d=()=>{r(t.error||new DOMException("AbortError","AbortError")),o()};t.addEventListener("complete",c),t.addEventListener("error",d),t.addEventListener("abort",d)});qa.set(t,e)}(t),hi(t,function yc(){return Dp||(Dp=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(t,kd):t)}function Ni(t){if(t instanceof IDBRequest)return function Ec(t){const e=new Promise((n,r)=>{const o=()=>{t.removeEventListener("success",c),t.removeEventListener("error",d)},c=()=>{n(Ni(t.result)),o()},d=()=>{r(t.error),o()};t.addEventListener("success",c),t.addEventListener("error",d)});return e.then(n=>{n instanceof IDBCursor&&Wa.set(n,t)}).catch(()=>{}),Ic.set(e,t),e}(t);if(vc.has(t))return vc.get(t);const e=Od(t);return e!==t&&(vc.set(t,e),Ic.set(e,t)),e}const Wo=t=>Ic.get(t),Cr=["get","getKey","getAll","getAllKeys","count"],Cp=["put","add","delete","clear"],wc=new Map;function Ka(t,e){if(!(t instanceof IDBDatabase)||e in t||"string"!=typeof e)return;if(wc.get(e))return wc.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,o=Cp.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!o&&!Cr.includes(n))return;const c=function(){var d=(0,z.Z)(function*(g,...v){const D=this.transaction(g,o?"readwrite":"readonly");let T=D.store;return r&&(T=T.index(v.shift())),(yield Promise.all([T[n](...v),o&&D.done]))[0]});return function(v){return d.apply(this,arguments)}}();return wc.set(e,c),c}!function Go(t){kd=t(kd)}(t=>({...t,get:(e,n,r)=>Ka(e,n)||t.get(e,n,r),has:(e,n)=>!!Ka(e,n)||t.has(e,n)}));const Sp="@firebase/installations",Za="0.6.4",Ko=1e4,ho=`w:${Za}`,fo="FIS_v2",Zo="https://firebaseinstallations.googleapis.com/v1",Dc=36e5,ls=new tt.LL("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function bc(t){return t instanceof tt.ZR&&t.code.includes("request-failed")}function Ap({projectId:t}){return`${Zo}/projects/${t}/installations`}function Hy(t){return{token:t.token,requestStatus:2,expiresIn:Cn(t.expiresIn),creationTime:Date.now()}}function xp(t,e){return Mp.apply(this,arguments)}function Mp(){return(Mp=(0,z.Z)(function*(t,e){const r=(yield e.json()).error;return ls.create("request-failed",{requestName:t,serverCode:r.code,serverMessage:r.message,serverStatus:r.status})})).apply(this,arguments)}function zy({apiKey:t}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":t})}function Fd(t){return Vd.apply(this,arguments)}function Vd(){return(Vd=(0,z.Z)(function*(t){const e=yield t();return e.status>=500&&e.status<600?t():e})).apply(this,arguments)}function Cn(t){return Number(t.replace("s","000"))}function Bd(){return(Bd=(0,z.Z)(function*({appConfig:t,heartbeatServiceProvider:e},{fid:n}){const r=Ap(t),o=zy(t),c=e.getImmediate({optional:!0});if(c){const D=yield c.getHeartbeatsHeader();D&&o.append("x-firebase-client",D)}const g={method:"POST",headers:o,body:JSON.stringify({fid:n,authVersion:fo,appId:t.appId,sdkVersion:ho})},v=yield Fd(()=>fetch(r,g));if(v.ok){const D=yield v.json();return{fid:D.fid||n,registrationStatus:2,refreshToken:D.refreshToken,authToken:Hy(D.authToken)}}throw yield xp("Create Installation",v)})).apply(this,arguments)}function Xr(t){return new Promise(e=>{setTimeout(e,t)})}const Ud=/^[cdef][\w-]{21}$/,Jo="";function Qa(){try{const t=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(t),t[0]=112+t[0]%16;const n=function Wy(t){return function Qo(t){return btoa(String.fromCharCode(...t)).replace(/\+/g,"-").replace(/\//g,"_")}(t).substr(0,22)}(t);return Ud.test(n)?n:Jo}catch{return Jo}}function Ja(t){return`${t.appName}!${t.appId}`}const Xo=new Map;function jd(t,e){const n=Ja(t);ds(n,e),function rE(t,e){const n=function Np(){return!hs&&"BroadcastChannel"in self&&(hs=new BroadcastChannel("[Firebase] FID Change"),hs.onmessage=t=>{ds(t.data.key,t.data.fid)}),hs}();n&&n.postMessage({key:t,fid:e}),function Tc(){0===Xo.size&&hs&&(hs.close(),hs=null)}()}(n,e)}function ds(t,e){const n=Xo.get(t);if(n)for(const r of n)r(e)}let hs=null;const qy="firebase-installations-database",iE=1,fs="firebase-installations-store";let Cc=null;function Os(){return Cc||(Cc=function qo(t,e,{blocked:n,upgrade:r,blocking:o,terminated:c}={}){const d=indexedDB.open(t,e),g=Ni(d);return r&&d.addEventListener("upgradeneeded",v=>{r(Ni(d.result),v.oldVersion,v.newVersion,Ni(d.transaction))}),n&&d.addEventListener("blocked",()=>n()),g.then(v=>{c&&v.addEventListener("close",()=>c()),o&&v.addEventListener("versionchange",()=>o())}).catch(()=>{}),g}(qy,iE,{upgrade:(t,e)=>{0===e&&t.createObjectStore(fs)}})),Cc}function Ls(t,e){return Sc.apply(this,arguments)}function Sc(){return(Sc=(0,z.Z)(function*(t,e){const n=Ja(t),o=(yield Os()).transaction(fs,"readwrite"),c=o.objectStore(fs),d=yield c.get(n);return yield c.put(e,n),yield o.done,(!d||d.fid!==e.fid)&&jd(t,e.fid),e})).apply(this,arguments)}function ea(t){return Hd.apply(this,arguments)}function Hd(){return(Hd=(0,z.Z)(function*(t){const e=Ja(t),r=(yield Os()).transaction(fs,"readwrite");yield r.objectStore(fs).delete(e),yield r.done})).apply(this,arguments)}function go(t,e){return zd.apply(this,arguments)}function zd(){return(zd=(0,z.Z)(function*(t,e){const n=Ja(t),o=(yield Os()).transaction(fs,"readwrite"),c=o.objectStore(fs),d=yield c.get(n),g=e(d);return void 0===g?yield c.delete(n):yield c.put(g,n),yield o.done,g&&(!d||d.fid!==g.fid)&&jd(t,g.fid),g})).apply(this,arguments)}function Ac(t){return ta.apply(this,arguments)}function ta(){return ta=(0,z.Z)(function*(t){let e;const n=yield go(t.appConfig,r=>{const o=function xc(t){return M(t||{fid:Qa(),registrationStatus:0})}(r),c=function Rp(t,e){if(0===e.registrationStatus){if(!navigator.onLine)return{installationEntry:e,registrationPromise:Promise.reject(ls.create("app-offline"))};const n={fid:e.fid,registrationStatus:1,registrationTime:Date.now()},r=function _(t,e){return f.apply(this,arguments)}(t,n);return{installationEntry:n,registrationPromise:r}}return 1===e.registrationStatus?{installationEntry:e,registrationPromise:p(t)}:{installationEntry:e}}(t,o);return e=c.registrationPromise,c.installationEntry});return n.fid===Jo?{installationEntry:yield e}:{installationEntry:n,registrationPromise:e}}),ta.apply(this,arguments)}function f(){return f=(0,z.Z)(function*(t,e){try{const n=yield function Ya(t,e){return Bd.apply(this,arguments)}(t,e);return Ls(t.appConfig,n)}catch(n){throw bc(n)&&409===n.customData.serverCode?yield ea(t.appConfig):yield Ls(t.appConfig,{fid:e.fid,registrationStatus:0}),n}}),f.apply(this,arguments)}function p(t){return I.apply(this,arguments)}function I(){return(I=(0,z.Z)(function*(t){let e=yield C(t.appConfig);for(;1===e.registrationStatus;)yield Xr(100),e=yield C(t.appConfig);if(0===e.registrationStatus){const{installationEntry:n,registrationPromise:r}=yield Ac(t);return r||n}return e})).apply(this,arguments)}function C(t){return go(t,e=>{if(!e)throw ls.create("installation-not-found");return M(e)})}function M(t){return function H(t){return 1===t.registrationStatus&&t.registrationTime+Ko<Date.now()}(t)?{fid:t.fid,registrationStatus:0}:t}function Ne(){return(Ne=(0,z.Z)(function*({appConfig:t,heartbeatServiceProvider:e},n){const r=function je(t,{fid:e}){return`${Ap(t)}/${e}/authTokens:generate`}(t,n),o=function po(t,{refreshToken:e}){const n=zy(t);return n.append("Authorization",function Gy(t){return`${fo} ${t}`}(e)),n}(t,n),c=e.getImmediate({optional:!0});if(c){const D=yield c.getHeartbeatsHeader();D&&o.append("x-firebase-client",D)}const g={method:"POST",headers:o,body:JSON.stringify({installation:{sdkVersion:ho,appId:t.appId}})},v=yield Fd(()=>fetch(r,g));if(v.ok)return Hy(yield v.json());throw yield xp("Generate Auth Token",v)})).apply(this,arguments)}function et(t){return Mt.apply(this,arguments)}function Mt(){return Mt=(0,z.Z)(function*(t,e=!1){let n;const r=yield go(t.appConfig,c=>{if(!Nc(c))throw ls.create("not-registered");const d=c.authToken;if(!e&&function Ky(t){return 2===t.requestStatus&&!function Wd(t){const e=Date.now();return e<t.creationTime||t.creationTime+t.expiresIn<e+Dc}(t)}(d))return c;if(1===d.requestStatus)return n=function er(t,e){return Ri.apply(this,arguments)}(t,e),c;{if(!navigator.onLine)throw ls.create("app-offline");const g=function Pp(t){const e={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},t),{authToken:e})}(c);return n=function Gd(t,e){return Mc.apply(this,arguments)}(t,g),g}});return n?yield n:r.authToken}),Mt.apply(this,arguments)}function Ri(){return(Ri=(0,z.Z)(function*(t,e){let n=yield Xa(t.appConfig);for(;1===n.authToken.requestStatus;)yield Xr(100),n=yield Xa(t.appConfig);const r=n.authToken;return 0===r.requestStatus?et(t,e):r})).apply(this,arguments)}function Xa(t){return go(t,e=>{if(!Nc(e))throw ls.create("not-registered");return function Rc(t){return 1===t.requestStatus&&t.requestTime+Ko<Date.now()}(e.authToken)?Object.assign(Object.assign({},e),{authToken:{requestStatus:0}}):e})}function Mc(){return Mc=(0,z.Z)(function*(t,e){try{const n=yield function te(t,e){return Ne.apply(this,arguments)}(t,e),r=Object.assign(Object.assign({},e),{authToken:n});return yield Ls(t.appConfig,r),n}catch(n){if(!bc(n)||401!==n.customData.serverCode&&404!==n.customData.serverCode){const r=Object.assign(Object.assign({},e),{authToken:{requestStatus:0}});yield Ls(t.appConfig,r)}else yield ea(t.appConfig);throw n}}),Mc.apply(this,arguments)}function Nc(t){return void 0!==t&&2===t.registrationStatus}function qd(){return(qd=(0,z.Z)(function*(t){const e=t,{installationEntry:n,registrationPromise:r}=yield Ac(e);return r?r.catch(console.error):et(e).catch(console.error),n.fid})).apply(this,arguments)}function Pc(){return Pc=(0,z.Z)(function*(t,e=!1){const n=t;return yield function sE(t){return oE.apply(this,arguments)}(n),(yield et(n,e)).token}),Pc.apply(this,arguments)}function oE(){return(oE=(0,z.Z)(function*(t){const{registrationPromise:e}=yield Ac(t);e&&(yield e)})).apply(this,arguments)}function na(t){return ls.create("missing-app-config-values",{valueName:t})}const Yy="installations",Op=t=>{const e=t.getProvider("app").getImmediate(),n=function uE(t){if(!t||!t.options)throw na("App Configuration");if(!t.name)throw na("App Name");const e=["projectId","apiKey","appId"];for(const n of e)if(!t.options[n])throw na(n);return{appName:t.name,projectId:t.options.projectId,apiKey:t.options.apiKey,appId:t.options.appId}}(e);return{app:e,appConfig:n,heartbeatServiceProvider:(0,Ct._getProvider)(e,"heartbeat"),_delete:()=>Promise.resolve()}},Lp=t=>{const e=t.getProvider("app").getImmediate(),n=(0,Ct._getProvider)(e,Yy).getImmediate();return{getId:()=>function kp(t){return qd.apply(this,arguments)}(n),getToken:o=>function Kd(t){return Pc.apply(this,arguments)}(n,o)}};(function Fp(){(0,Ct._registerComponent)(new Vr.wA(Yy,Op,"PUBLIC")),(0,Ct._registerComponent)(new Vr.wA("installations-internal",Lp,"PRIVATE"))})(),(0,Ct.registerVersion)(Sp,Za),(0,Ct.registerVersion)(Sp,Za,"esm2017");const Qy="@firebase/remote-config",fi=new tt.LL("remoteconfig","Remote Config",{"registration-window":"Undefined window object. This SDK only supports usage in a browser environment.","registration-project-id":"Undefined project identifier. Check Firebase app initialization.","registration-api-key":"Undefined API key. Check Firebase app initialization.","registration-app-id":"Undefined app identifier. Check Firebase app initialization.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.","fetch-client-network":"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-timeout":'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',"fetch-throttle":'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',"fetch-client-parse":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","indexed-db-unavailable":"Indexed DB is not supported by current browser"});class ZT{constructor(e,n,r,o){this.client=e,this.storage=n,this.storageCache=r,this.logger=o}isCachedDataFresh(e,n){if(!n)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;const r=Date.now()-n,o=r<=e;return this.logger.debug(`Config fetch cache check. Cache age millis: ${r}. Cache max age millis (minimumFetchIntervalMillis setting): ${e}. Is cache hit: ${o}.`),o}fetch(e){var n=this;return(0,z.Z)(function*(){const[r,o]=yield Promise.all([n.storage.getLastSuccessfulFetchTimestampMillis(),n.storage.getLastSuccessfulFetchResponse()]);if(o&&n.isCachedDataFresh(e.cacheMaxAgeMillis,r))return o;e.eTag=o&&o.eTag;const c=yield n.client.fetch(e),d=[n.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())];return 200===c.status&&d.push(n.storage.setLastSuccessfulFetchResponse(c)),yield Promise.all(d),c})()}}function YT(t=navigator){return t.languages&&t.languages[0]||t.language}class e_{constructor(e,n,r,o,c,d){this.firebaseInstallations=e,this.sdkVersion=n,this.namespace=r,this.projectId=o,this.apiKey=c,this.appId=d}fetch(e){var n=this;return(0,z.Z)(function*(){const[r,o]=yield Promise.all([n.firebaseInstallations.getId(),n.firebaseInstallations.getToken()]),d=`${window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com"}/v1/projects/${n.projectId}/namespaces/${n.namespace}:fetch?key=${n.apiKey}`,g={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":e.eTag||"*"},v={sdk_version:n.sdkVersion,app_instance_id:r,app_instance_id_token:o,app_id:n.appId,language_code:YT()},D={method:"POST",headers:g,body:JSON.stringify(v)},T=fetch(d,D),A=new Promise((Qe,ot)=>{e.signal.addEventListener(()=>{const ut=new Error("The operation was aborted.");ut.name="AbortError",ot(ut)})});let U;try{yield Promise.race([T,A]),U=yield T}catch(Qe){let ot="fetch-client-network";throw"AbortError"===Qe?.name&&(ot="fetch-timeout"),fi.create(ot,{originalErrorMessage:Qe?.message})}let q=U.status;const he=U.headers.get("ETag")||void 0;let Se,Ae;if(200===U.status){let Qe;try{Qe=yield U.json()}catch(ot){throw fi.create("fetch-client-parse",{originalErrorMessage:ot?.message})}Se=Qe.entries,Ae=Qe.state}if("INSTANCE_STATE_UNSPECIFIED"===Ae?q=500:"NO_CHANGE"===Ae?q=304:("NO_TEMPLATE"===Ae||"EMPTY_CONFIG"===Ae)&&(Se={}),304!==q&&200!==q)throw fi.create("fetch-status",{httpStatus:q});return{status:q,eTag:he,config:Se}})()}}class Jd{constructor(e,n){this.client=e,this.storage=n}fetch(e){var n=this;return(0,z.Z)(function*(){const r=(yield n.storage.getThrottleMetadata())||{backoffCount:0,throttleEndTimeMillis:Date.now()};return n.attemptFetch(e,r)})()}attemptFetch(e,{throttleEndTimeMillis:n,backoffCount:r}){var o=this;return(0,z.Z)(function*(){yield function t_(t,e){return new Promise((n,r)=>{const o=Math.max(e-Date.now(),0),c=setTimeout(n,o);t.addEventListener(()=>{clearTimeout(c),r(fi.create("fetch-throttle",{throttleEndTimeMillis:e}))})})}(e.signal,n);try{const c=yield o.client.fetch(e);return yield o.storage.deleteThrottleMetadata(),c}catch(c){if(!function QT(t){if(!(t instanceof tt.ZR&&t.customData))return!1;const e=Number(t.customData.httpStatus);return 429===e||500===e||503===e||504===e}(c))throw c;const d={throttleEndTimeMillis:Date.now()+(0,tt.$s)(r),backoffCount:r+1};return yield o.storage.setThrottleMetadata(d),o.attemptFetch(e,d)}})()}}class mE{constructor(e,n,r,o,c){this.app=e,this._client=n,this._storageCache=r,this._storage=o,this._logger=c,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}get fetchTimeMillis(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}get lastFetchStatus(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}}function Xd(t,e){const n=t.target.error||void 0;return fi.create(e,{originalErrorMessage:n&&n?.message})}const ra="app_namespace_store";class n_{constructor(e,n,r,o=function yE(){return new Promise((t,e)=>{try{const n=indexedDB.open("firebase_remote_config",1);n.onerror=r=>{e(Xd(r,"storage-open"))},n.onsuccess=r=>{t(r.target.result)},n.onupgradeneeded=r=>{0===r.oldVersion&&r.target.result.createObjectStore(ra,{keyPath:"compositeKey"})}}catch(n){e(fi.create("storage-open",{originalErrorMessage:n?.message}))}})}()){this.appId=e,this.appName=n,this.namespace=r,this.openDbPromise=o}getLastFetchStatus(){return this.get("last_fetch_status")}setLastFetchStatus(e){return this.set("last_fetch_status",e)}getLastSuccessfulFetchTimestampMillis(){return this.get("last_successful_fetch_timestamp_millis")}setLastSuccessfulFetchTimestampMillis(e){return this.set("last_successful_fetch_timestamp_millis",e)}getLastSuccessfulFetchResponse(){return this.get("last_successful_fetch_response")}setLastSuccessfulFetchResponse(e){return this.set("last_successful_fetch_response",e)}getActiveConfig(){return this.get("active_config")}setActiveConfig(e){return this.set("active_config",e)}getActiveConfigEtag(){return this.get("active_config_etag")}setActiveConfigEtag(e){return this.set("active_config_etag",e)}getThrottleMetadata(){return this.get("throttle_metadata")}setThrottleMetadata(e){return this.set("throttle_metadata",e)}deleteThrottleMetadata(){return this.delete("throttle_metadata")}get(e){var n=this;return(0,z.Z)(function*(){const r=yield n.openDbPromise;return new Promise((o,c)=>{const g=r.transaction([ra],"readonly").objectStore(ra),v=n.createCompositeKey(e);try{const D=g.get(v);D.onerror=T=>{c(Xd(T,"storage-get"))},D.onsuccess=T=>{const A=T.target.result;o(A?A.value:void 0)}}catch(D){c(fi.create("storage-get",{originalErrorMessage:D?.message}))}})})()}set(e,n){var r=this;return(0,z.Z)(function*(){const o=yield r.openDbPromise;return new Promise((c,d)=>{const v=o.transaction([ra],"readwrite").objectStore(ra),D=r.createCompositeKey(e);try{const T=v.put({compositeKey:D,value:n});T.onerror=A=>{d(Xd(A,"storage-set"))},T.onsuccess=()=>{c()}}catch(T){d(fi.create("storage-set",{originalErrorMessage:T?.message}))}})})()}delete(e){var n=this;return(0,z.Z)(function*(){const r=yield n.openDbPromise;return new Promise((o,c)=>{const g=r.transaction([ra],"readwrite").objectStore(ra),v=n.createCompositeKey(e);try{const D=g.delete(v);D.onerror=T=>{c(Xd(T,"storage-delete"))},D.onsuccess=()=>{o()}}catch(D){c(fi.create("storage-delete",{originalErrorMessage:D?.message}))}})})()}createCompositeKey(e){return[this.appId,this.appName,this.namespace,e].join()}}class Up{constructor(e){this.storage=e}getLastFetchStatus(){return this.lastFetchStatus}getLastSuccessfulFetchTimestampMillis(){return this.lastSuccessfulFetchTimestampMillis}getActiveConfig(){return this.activeConfig}loadFromStorage(){var e=this;return(0,z.Z)(function*(){const n=e.storage.getLastFetchStatus(),r=e.storage.getLastSuccessfulFetchTimestampMillis(),o=e.storage.getActiveConfig(),c=yield n;c&&(e.lastFetchStatus=c);const d=yield r;d&&(e.lastSuccessfulFetchTimestampMillis=d);const g=yield o;g&&(e.activeConfig=g)})()}setLastFetchStatus(e){return this.lastFetchStatus=e,this.storage.setLastFetchStatus(e)}setLastSuccessfulFetchTimestampMillis(e){return this.lastSuccessfulFetchTimestampMillis=e,this.storage.setLastSuccessfulFetchTimestampMillis(e)}setActiveConfig(e){return this.activeConfig=e,this.storage.setActiveConfig(e)}}function tC(){return i_.apply(this,arguments)}function i_(){return(i_=(0,z.Z)(function*(){if(!(0,tt.hl)())return!1;try{return yield(0,tt.eu)()}catch{return!1}})).apply(this,arguments)}!function eC(){(0,Ct._registerComponent)(new Vr.wA("remote-config",function t(e,{instanceIdentifier:n}){const r=e.getProvider("app").getImmediate(),o=e.getProvider("installations-internal").getImmediate();if(typeof window>"u")throw fi.create("registration-window");if(!(0,tt.hl)())throw fi.create("indexed-db-unavailable");const{projectId:c,apiKey:d,appId:g}=r.options;if(!c)throw fi.create("registration-project-id");if(!d)throw fi.create("registration-api-key");if(!g)throw fi.create("registration-app-id");const v=new n_(g,r.name,n=n||"firebase"),D=new Up(v),T=new Jr.Yd(Qy);T.logLevel=Jr.in.ERROR;const A=new e_(o,Ct.SDK_VERSION,n,c,d,g),U=new Jd(A,v),q=new ZT(U,v,D,T),he=new mE(r,q,D,v,T);return function Ur(t){const e=(0,tt.m9)(t);e._initializePromise||(e._initializePromise=e._storageCache.loadFromStorage().then(()=>{e._isInitializationComplete=!0}))}(he),he},"PUBLIC").setMultipleInstances(!0)),(0,Ct.registerVersion)(Qy,"0.4.4"),(0,Ct.registerVersion)(Qy,"0.4.4","esm2017")}();const nC=(t,e)=>e.some(n=>t instanceof n);let s_,eh;const _E=new WeakMap,u_=new WeakMap,jp=new WeakMap,$p=new WeakMap,mo=new WeakMap;let c_={get(t,e,n){if(t instanceof IDBTransaction){if("done"===e)return u_.get(t);if("objectStoreNames"===e)return t.objectStoreNames||jp.get(t);if("store"===e)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Fs(t[e])},set:(t,e,n)=>(t[e]=n,!0),has:(t,e)=>t instanceof IDBTransaction&&("done"===e||"store"===e)||e in t};function rC(t){return"function"==typeof t?function Hp(t){return t!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function a_(){return eh||(eh=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(t)?function(...e){return t.apply(zp(this),e),Fs(_E.get(this))}:function(...e){return Fs(t.apply(zp(this),e))}:function(e,...n){const r=t.call(zp(this),e,...n);return jp.set(r,e.sort?e.sort():[e]),Fs(r)}}(t):(t instanceof IDBTransaction&&function IE(t){if(u_.has(t))return;const e=new Promise((n,r)=>{const o=()=>{t.removeEventListener("complete",c),t.removeEventListener("error",d),t.removeEventListener("abort",d)},c=()=>{n(),o()},d=()=>{r(t.error||new DOMException("AbortError","AbortError")),o()};t.addEventListener("complete",c),t.addEventListener("error",d),t.addEventListener("abort",d)});u_.set(t,e)}(t),nC(t,function o_(){return s_||(s_=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(t,c_):t)}function Fs(t){if(t instanceof IDBRequest)return function vE(t){const e=new Promise((n,r)=>{const o=()=>{t.removeEventListener("success",c),t.removeEventListener("error",d)},c=()=>{n(Fs(t.result)),o()},d=()=>{r(t.error),o()};t.addEventListener("success",c),t.addEventListener("error",d)});return e.then(n=>{n instanceof IDBCursor&&_E.set(n,t)}).catch(()=>{}),mo.set(e,t),e}(t);if($p.has(t))return $p.get(t);const e=rC(t);return e!==t&&($p.set(t,e),mo.set(e,t)),e}const zp=t=>mo.get(t);function l_(t,e,{blocked:n,upgrade:r,blocking:o,terminated:c}={}){const d=indexedDB.open(t,e),g=Fs(d);return r&&d.addEventListener("upgradeneeded",v=>{r(Fs(d.result),v.oldVersion,v.newVersion,Fs(d.transaction))}),n&&d.addEventListener("blocked",()=>n()),g.then(v=>{c&&v.addEventListener("close",()=>c()),o&&v.addEventListener("versionchange",()=>o())}).catch(()=>{}),g}function th(t,{blocked:e}={}){const n=indexedDB.deleteDatabase(t);return e&&n.addEventListener("blocked",()=>e()),Fs(n).then(()=>{})}const EE=["get","getKey","getAll","getAllKeys","count"],Gp=["put","add","delete","clear"],eu=new Map;function d_(t,e){if(!(t instanceof IDBDatabase)||e in t||"string"!=typeof e)return;if(eu.get(e))return eu.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,o=Gp.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!o&&!EE.includes(n))return;const c=function(){var d=(0,z.Z)(function*(g,...v){const D=this.transaction(g,o?"readwrite":"readonly");let T=D.store;return r&&(T=T.index(v.shift())),(yield Promise.all([T[n](...v),o&&D.done]))[0]});return function(v){return d.apply(this,arguments)}}();return eu.set(e,c),c}!function Jx(t){c_=t(c_)}(t=>({...t,get:(e,n,r)=>d_(e,n)||t.get(e,n,r),has:(e,n)=>!!d_(e,n)||t.has(e,n)}));const h_="/firebase-messaging-sw.js",Wp="/firebase-cloud-messaging-push-scope",f_="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",p_="https://fcmregistrations.googleapis.com/v1",Lc="google.c.a.c_id",iC="google.c.a.c_l",wE="google.c.a.ts";var qp=function(t){return t.PUSH_RECEIVED="push-received",t.NOTIFICATION_CLICKED="notification-clicked",t}(qp||{});function Vs(t){const e=new Uint8Array(t);return btoa(String.fromCharCode(...e)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function DE(t){const n=(t+"=".repeat((4-t.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),r=atob(n),o=new Uint8Array(r.length);for(let c=0;c<r.length;++c)o[c]=r.charCodeAt(c);return o}const Fc="fcm_token_details_db",g_=5,tu="fcm_token_object_Store";function m_(){return m_=(0,z.Z)(function*(t){if("databases"in indexedDB&&!(yield indexedDB.databases()).map(c=>c.name).includes(Fc))return null;let e=null;return(yield l_(Fc,g_,{upgrade:(r=(0,z.Z)(function*(o,c,d,g){var v;if(c<2||!o.objectStoreNames.contains(tu))return;const D=g.objectStore(tu),T=yield D.index("fcmSenderId").get(t);if(yield D.clear(),T)if(2===c){const A=T;if(!A.auth||!A.p256dh||!A.endpoint)return;e={token:A.fcmToken,createTime:null!==(v=A.createTime)&&void 0!==v?v:Date.now(),subscriptionOptions:{auth:A.auth,p256dh:A.p256dh,endpoint:A.endpoint,swScope:A.swScope,vapidKey:"string"==typeof A.vapidKey?A.vapidKey:Vs(A.vapidKey)}}}else if(3===c){const A=T;e={token:A.fcmToken,createTime:A.createTime,subscriptionOptions:{auth:Vs(A.auth),p256dh:Vs(A.p256dh),endpoint:A.endpoint,swScope:A.swScope,vapidKey:Vs(A.vapidKey)}}}else if(4===c){const A=T;e={token:A.fcmToken,createTime:A.createTime,subscriptionOptions:{auth:Vs(A.auth),p256dh:Vs(A.p256dh),endpoint:A.endpoint,swScope:A.swScope,vapidKey:Vs(A.vapidKey)}}}}),function(c,d,g,v){return r.apply(this,arguments)})})).close(),yield th(Fc),yield th("fcm_vapid_details_db"),yield th("undefined"),function Xx(t){if(!t||!t.subscriptionOptions)return!1;const{subscriptionOptions:e}=t;return"number"==typeof t.createTime&&t.createTime>0&&"string"==typeof t.token&&t.token.length>0&&"string"==typeof e.auth&&e.auth.length>0&&"string"==typeof e.p256dh&&e.p256dh.length>0&&"string"==typeof e.endpoint&&e.endpoint.length>0&&"string"==typeof e.swScope&&e.swScope.length>0&&"string"==typeof e.vapidKey&&e.vapidKey.length>0}(e)?e:null;var r}),m_.apply(this,arguments)}const uC="firebase-messaging-database",y_=1,nu="firebase-messaging-store";let ia=null;function Vc(){return ia||(ia=l_(uC,y_,{upgrade:(t,e)=>{0===e&&t.createObjectStore(nu)}})),ia}function Kp(t){return Zp.apply(this,arguments)}function Zp(){return Zp=(0,z.Z)(function*(t){const e=v_(t),r=yield(yield Vc()).transaction(nu).objectStore(nu).get(e);if(r)return r;{const o=yield function aC(t){return m_.apply(this,arguments)}(t.appConfig.senderId);if(o)return yield Yp(t,o),o}}),Zp.apply(this,arguments)}function Yp(t,e){return Qp.apply(this,arguments)}function Qp(){return(Qp=(0,z.Z)(function*(t,e){const n=v_(t),o=(yield Vc()).transaction(nu,"readwrite");return yield o.objectStore(nu).put(e,n),yield o.done,e})).apply(this,arguments)}function __(){return(__=(0,z.Z)(function*(t){const e=v_(t),r=(yield Vc()).transaction(nu,"readwrite");yield r.objectStore(nu).delete(e),yield r.done})).apply(this,arguments)}function v_({appConfig:t}){return t.appId}const Ar=new tt.LL("messaging","Messaging",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."});function lC(t,e){return Bs.apply(this,arguments)}function Bs(){return(Bs=(0,z.Z)(function*(t,e){const n=yield SE(t),r=E_(e),o={method:"POST",headers:n,body:JSON.stringify(r)};let c;try{c=yield(yield fetch(CE(t.appConfig),o)).json()}catch(d){throw Ar.create("token-subscribe-failed",{errorInfo:d?.toString()})}if(c.error)throw Ar.create("token-subscribe-failed",{errorInfo:c.error.message});if(!c.token)throw Ar.create("token-subscribe-no-token");return c.token})).apply(this,arguments)}function I_(){return(I_=(0,z.Z)(function*(t,e){const n=yield SE(t),r=E_(e.subscriptionOptions),o={method:"PATCH",headers:n,body:JSON.stringify(r)};let c;try{c=yield(yield fetch(`${CE(t.appConfig)}/${e.token}`,o)).json()}catch(d){throw Ar.create("token-update-failed",{errorInfo:d?.toString()})}if(c.error)throw Ar.create("token-update-failed",{errorInfo:c.error.message});if(!c.token)throw Ar.create("token-update-no-token");return c.token})).apply(this,arguments)}function dC(t,e){return TE.apply(this,arguments)}function TE(){return(TE=(0,z.Z)(function*(t,e){const r={method:"DELETE",headers:yield SE(t)};try{const c=yield(yield fetch(`${CE(t.appConfig)}/${e}`,r)).json();if(c.error)throw Ar.create("token-unsubscribe-failed",{errorInfo:c.error.message})}catch(o){throw Ar.create("token-unsubscribe-failed",{errorInfo:o?.toString()})}})).apply(this,arguments)}function CE({projectId:t}){return`${p_}/projects/${t}/registrations`}function SE(t){return AE.apply(this,arguments)}function AE(){return(AE=(0,z.Z)(function*({appConfig:t,installations:e}){const n=yield e.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":t.apiKey,"x-goog-firebase-installations-auth":`FIS ${n}`})})).apply(this,arguments)}function E_({p256dh:t,auth:e,endpoint:n,vapidKey:r}){const o={web:{endpoint:n,auth:e,p256dh:t}};return r!==f_&&(o.web.applicationPubKey=r),o}const hC=6048e5;function w_(){return w_=(0,z.Z)(function*(t){const e=yield function ME(t,e){return NE.apply(this,arguments)}(t.swRegistration,t.vapidKey),n={vapidKey:t.vapidKey,swScope:t.swRegistration.scope,endpoint:e.endpoint,auth:Vs(e.getKey("auth")),p256dh:Vs(e.getKey("p256dh"))},r=yield Kp(t.firebaseDependencies);if(r){if(function eM(t,e){return e.vapidKey===t.vapidKey&&e.endpoint===t.endpoint&&e.auth===t.auth&&e.p256dh===t.p256dh}(r.subscriptionOptions,n))return Date.now()>=r.createTime+hC?function yo(t,e){return ru.apply(this,arguments)}(t,{token:r.token,createTime:Date.now(),subscriptionOptions:n}):r.token;try{yield dC(t.firebaseDependencies,r.token)}catch(o){console.warn(o)}return D_(t.firebaseDependencies,n)}return D_(t.firebaseDependencies,n)}),w_.apply(this,arguments)}function rh(){return rh=(0,z.Z)(function*(t){const e=yield Kp(t.firebaseDependencies);e&&(yield dC(t.firebaseDependencies,e.token),yield function bE(t){return __.apply(this,arguments)}(t.firebaseDependencies));const n=yield t.swRegistration.pushManager.getSubscription();return!n||n.unsubscribe()}),rh.apply(this,arguments)}function ru(){return ru=(0,z.Z)(function*(t,e){try{const n=yield function nh(t,e){return I_.apply(this,arguments)}(t.firebaseDependencies,e),r=Object.assign(Object.assign({},e),{token:n,createTime:Date.now()});return yield Yp(t.firebaseDependencies,r),n}catch(n){throw yield function xE(t){return rh.apply(this,arguments)}(t),n}}),ru.apply(this,arguments)}function D_(t,e){return Jp.apply(this,arguments)}function Jp(){return(Jp=(0,z.Z)(function*(t,e){const r={token:yield lC(t,e),createTime:Date.now(),subscriptionOptions:e};return yield Yp(t,r),r.token})).apply(this,arguments)}function NE(){return(NE=(0,z.Z)(function*(t,e){return(yield t.pushManager.getSubscription())||t.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:DE(e)})})).apply(this,arguments)}function pC(t){const e={from:t.from,collapseKey:t.collapse_key,messageId:t.fcmMessageId};return function b_(t,e){if(!e.notification)return;t.notification={};const n=e.notification.title;n&&(t.notification.title=n);const r=e.notification.body;r&&(t.notification.body=r);const o=e.notification.image;o&&(t.notification.image=o);const c=e.notification.icon;c&&(t.notification.icon=c)}(e,t),function T_(t,e){e.data&&(t.data=e.data)}(e,t),function tM(t,e){var n,r,o,c,d;if(!(e.fcmOptions||null!==(n=e.notification)&&void 0!==n&&n.click_action))return;t.fcmOptions={};const g=null!==(o=null===(r=e.fcmOptions)||void 0===r?void 0:r.link)&&void 0!==o?o:null===(c=e.notification)||void 0===c?void 0:c.click_action;g&&(t.fcmOptions.link=g);const v=null===(d=e.fcmOptions)||void 0===d?void 0:d.analytics_label;v&&(t.fcmOptions.analyticsLabel=v)}(e,t),e}function C_(t,e){const n=[];for(let r=0;r<t.length;r++)n.push(t.charAt(r)),r<e.length&&n.push(e.charAt(r));return n.join("")}function S_(t){return Ar.create("missing-app-config-values",{valueName:t})}C_("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),C_("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");class mC{constructor(e,n,r){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const o=function gC(t){if(!t||!t.options)throw S_("App Configuration Object");if(!t.name)throw S_("App Name");const e=["projectId","apiKey","appId","messagingSenderId"],{options:n}=t;for(const r of e)if(!n[r])throw S_(r);return{appName:t.name,projectId:n.projectId,apiKey:n.apiKey,appId:n.appId,senderId:n.messagingSenderId}}(e);this.firebaseDependencies={app:e,appConfig:o,installations:n,analyticsProvider:r}}_delete(){return Promise.resolve()}}function Xp(){return(Xp=(0,z.Z)(function*(t){try{t.swRegistration=yield navigator.serviceWorker.register(h_,{scope:Wp}),t.swRegistration.update().catch(()=>{})}catch(e){throw Ar.create("failed-service-worker-registration",{browserErrorMessage:e?.message})}})).apply(this,arguments)}function A_(){return(A_=(0,z.Z)(function*(t,e){if(!e&&!t.swRegistration&&(yield function RE(t){return Xp.apply(this,arguments)}(t)),e||!t.swRegistration){if(!(e instanceof ServiceWorkerRegistration))throw Ar.create("invalid-sw-registration");t.swRegistration=e}})).apply(this,arguments)}function M_(){return(M_=(0,z.Z)(function*(t,e){e?t.vapidKey=e:t.vapidKey||(t.vapidKey=f_)})).apply(this,arguments)}function N_(){return N_=(0,z.Z)(function*(t,e){if(!navigator)throw Ar.create("only-available-in-window");if("default"===Notification.permission&&(yield Notification.requestPermission()),"granted"!==Notification.permission)throw Ar.create("permission-blocked");return yield function x_(t,e){return M_.apply(this,arguments)}(t,e?.vapidKey),yield function eg(t,e){return A_.apply(this,arguments)}(t,e?.serviceWorkerRegistration),function fC(t){return w_.apply(this,arguments)}(t)}),N_.apply(this,arguments)}function tg(){return(tg=(0,z.Z)(function*(t,e,n){const r=function PE(t){switch(t){case qp.NOTIFICATION_CLICKED:return"notification_open";case qp.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}(e);(yield t.firebaseDependencies.analyticsProvider.get()).logEvent(r,{message_id:n[Lc],message_name:n[iC],message_time:n[wE],message_device_time:Math.floor(Date.now()/1e3)})})).apply(this,arguments)}function R_(){return R_=(0,z.Z)(function*(t,e){const n=e.data;if(!n.isFirebaseMessaging)return;t.onMessageHandler&&n.messageType===qp.PUSH_RECEIVED&&("function"==typeof t.onMessageHandler?t.onMessageHandler(pC(n)):t.onMessageHandler.next(pC(n)));const r=n.data;(function nM(t){return"object"==typeof t&&!!t&&Lc in t})(r)&&"1"===r["google.c.a.e"]&&(yield function yC(t,e,n){return tg.apply(this,arguments)}(t,n.messageType,r))}),R_.apply(this,arguments)}const kE="@firebase/messaging",vC=t=>{const e=new mC(t.getProvider("app").getImmediate(),t.getProvider("installations-internal").getImmediate(),t.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",n=>function _C(t,e){return R_.apply(this,arguments)}(e,n)),e},rM=t=>{const e=t.getProvider("messaging").getImmediate();return{getToken:r=>function iu(t,e){return N_.apply(this,arguments)}(e,r)}};function Bc(){return Wt.apply(this,arguments)}function Wt(){return(Wt=(0,z.Z)(function*(){try{yield(0,tt.eu)()}catch{return!1}return typeof window<"u"&&(0,tt.hl)()&&(0,tt.zI)()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")})).apply(this,arguments)}!function iM(){(0,Ct._registerComponent)(new Vr.wA("messaging",vC,"PUBLIC")),(0,Ct._registerComponent)(new Vr.wA("messaging-internal",rM,"PRIVATE")),(0,Ct.registerVersion)(kE,"0.12.4"),(0,Ct.registerVersion)(kE,"0.12.4","esm2017")}();const su="analytics",sM="firebase_id",k_="origin",DC=6e4,O_="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",ig="https://www.googletagmanager.com/gtag/js",tr=new Jr.Yd("@firebase/analytics"),ei=new tt.LL("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."});function L_(t){if(!t.startsWith(ig)){const e=ei.create("invalid-gtag-resource",{gtagURL:t});return tr.warn(e.message),""}return t}function ih(t){return Promise.all(t.map(e=>e.catch(n=>n)))}function Uc(){return(Uc=(0,z.Z)(function*(t,e,n,r,o,c){const d=r[o];try{if(d)yield e[d];else{const v=(yield ih(n)).find(D=>D.measurementId===o);v&&(yield e[v.appId])}}catch(g){tr.error(g)}t("config",o,c)})).apply(this,arguments)}function B_(){return(B_=(0,z.Z)(function*(t,e,n,r,o){try{let c=[];if(o&&o.send_to){let d=o.send_to;Array.isArray(d)||(d=[d]);const g=yield ih(n);for(const v of d){const D=g.find(A=>A.measurementId===v),T=D&&e[D.appId];if(!T){c=[];break}c.push(T)}}0===c.length&&(c=Object.values(e)),yield Promise.all(c),t("event",r,o||{})}catch(c){tr.error(c)}})).apply(this,arguments)}const CC=30,og=new class AC{constructor(e={},n=1e3){this.throttleMetadata=e,this.intervalMillis=n}getThrottleMetadata(e){return this.throttleMetadata[e]}setThrottleMetadata(e,n){this.throttleMetadata[e]=n}deleteThrottleMetadata(e){delete this.throttleMetadata[e]}};function BE(t){return new Headers({Accept:"application/json","x-goog-api-key":t})}function ag(){return(ag=(0,z.Z)(function*(t){var e;const{appId:n,apiKey:r}=t,o={method:"GET",headers:BE(r)},c=O_.replace("{app-id}",n),d=yield fetch(c,o);if(200!==d.status&&304!==d.status){let g="";try{const v=yield d.json();null!==(e=v.error)&&void 0!==e&&e.message&&(g=v.error.message)}catch{}throw ei.create("config-fetch-failed",{httpStatus:d.status,responseMessage:g})}return d.json()})).apply(this,arguments)}function UE(){return(UE=(0,z.Z)(function*(t,e=og,n){const{appId:r,apiKey:o,measurementId:c}=t.options;if(!r)throw ei.create("no-app-id");if(!o){if(c)return{measurementId:c,appId:r};throw ei.create("no-api-key")}const d=e.getThrottleMetadata(r)||{backoffCount:0,throttleEndTimeMillis:Date.now()},g=new aM;return setTimeout((0,z.Z)(function*(){g.abort()}),void 0!==n?n:DC),MC({appId:r,apiKey:o,measurementId:c},d,g,e)})).apply(this,arguments)}function MC(t,e,n){return j_.apply(this,arguments)}function j_(){return j_=(0,z.Z)(function*(t,{throttleEndTimeMillis:e,backoffCount:n},r,o=og){var c;const{appId:d,measurementId:g}=t;try{yield function NC(t,e){return new Promise((n,r)=>{const o=Math.max(e-Date.now(),0),c=setTimeout(n,o);t.addEventListener(()=>{clearTimeout(c),r(ei.create("fetch-throttle",{throttleEndTimeMillis:e}))})})}(r,e)}catch(v){if(g)return tr.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${g} provided in the "measurementId" field in the local Firebase config. [${v?.message}]`),{appId:d,measurementId:g};throw v}try{const v=yield function xC(t){return ag.apply(this,arguments)}(t);return o.deleteThrottleMetadata(d),v}catch(v){const D=v;if(!function oM(t){if(!(t instanceof tt.ZR&&t.customData))return!1;const e=Number(t.customData.httpStatus);return 429===e||500===e||503===e||504===e}(D)){if(o.deleteThrottleMetadata(d),g)return tr.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${g} provided in the "measurementId" field in the local Firebase config. [${D?.message}]`),{appId:d,measurementId:g};throw v}const T=503===Number(null===(c=D?.customData)||void 0===c?void 0:c.httpStatus)?(0,tt.$s)(n,o.intervalMillis,CC):(0,tt.$s)(n,o.intervalMillis),A={throttleEndTimeMillis:Date.now()+T,backoffCount:n+1};return o.setThrottleMetadata(d,A),tr.debug(`Calling attemptFetch again in ${T} millis`),MC(t,A,r,o)}}),j_.apply(this,arguments)}class aM{constructor(){this.listeners=[]}addEventListener(e){this.listeners.push(e)}abort(){this.listeners.forEach(e=>e())}}let $c,jE;function sh(){return(sh=(0,z.Z)(function*(t,e,n,r,o){if(o&&o.global)t("event",n,r);else{const c=yield e;t("event",n,Object.assign(Object.assign({},r),{send_to:c}))}})).apply(this,arguments)}function lg(){return(lg=(0,z.Z)(function*(){if(!(0,tt.hl)())return tr.warn(ei.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{yield(0,tt.eu)()}catch(t){return tr.warn(ei.create("indexeddb-unavailable",{errorInfo:t?.toString()}).message),!1}return!0})).apply(this,arguments)}function G_(){return G_=(0,z.Z)(function*(t,e,n,r,o,c,d){var g;const v=function U_(t){return UE.apply(this,arguments)}(t);v.then(q=>{n[q.measurementId]=q.appId,t.options.measurementId&&q.measurementId!==t.options.measurementId&&tr.warn(`The measurement ID in the local Firebase config (${t.options.measurementId}) does not match the measurement ID fetched from the server (${q.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(q=>tr.error(q)),e.push(v);const D=function PC(){return lg.apply(this,arguments)}().then(q=>{if(q)return r.getId()}),[T,A]=yield Promise.all([v,D]);(function jc(t){const e=window.document.getElementsByTagName("script");for(const n of Object.values(e))if(n.src&&n.src.includes(ig)&&n.src.includes(t))return n;return null})(c)||function F_(t,e){const n=function bC(t,e){let n;return window.trustedTypes&&(n=window.trustedTypes.createPolicy(t,e)),n}("firebase-js-sdk-policy",{createScriptURL:L_}),r=document.createElement("script"),o=`${ig}?l=${t}&id=${e}`;r.src=n?n?.createScriptURL(o):o,r.async=!0,document.head.appendChild(r)}(c,T.measurementId),jE&&(o("consent","default",jE),function cg(t){jE=t}(void 0)),o("js",new Date);const U=null!==(g=d?.config)&&void 0!==g?g:{};return U[k_]="firebase",U.update=!0,null!=A&&(U[sM]=A),o("config",T.measurementId,U),$c&&(o("set",$c),function Gc(t){$c=t}(void 0)),T.measurementId}),G_.apply(this,arguments)}class W_{constructor(e){this.app=e}_delete(){return delete ps[this.app.options.appId],Promise.resolve()}}let ps={},$E=[];const HE={};let ch,Wi,q_="dataLayer",K_=!1;function dg(t,e,n){!function Z_(){const t=[];if((0,tt.ru)()&&t.push("This is a browser extension environment."),(0,tt.zI)()||t.push("Cookies are not available."),t.length>0){const e=t.map((r,o)=>`(${o+1}) ${r}`).join(" "),n=ei.create("invalid-analytics-context",{errorInfo:e});tr.warn(n.message)}}();const r=t.options.appId;if(!r)throw ei.create("no-app-id");if(!t.options.apiKey){if(!t.options.measurementId)throw ei.create("no-api-key");tr.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${t.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=ps[r])throw ei.create("already-exists",{id:r});if(!K_){!function sg(t){let e=[];Array.isArray(window[t])?e=window[t]:window[t]=e}(q_);const{wrappedGtag:c,gtagCore:d}=function VE(t,e,n,r,o){let c=function(...d){window[r].push(arguments)};return window[o]&&"function"==typeof window[o]&&(c=window[o]),window[o]=function TC(t,e,n,r){function c(){return c=(0,z.Z)(function*(d,...g){try{if("event"===d){const[v,D]=g;yield function V_(t,e,n,r,o){return B_.apply(this,arguments)}(t,e,n,v,D)}else if("config"===d){const[v,D]=g;yield function _o(t,e,n,r,o,c){return Uc.apply(this,arguments)}(t,e,n,r,v,D)}else if("consent"===d){const[v]=g;t("consent","update",v)}else if("get"===d){const[v,D,T]=g;t("get",v,D,T)}else if("set"===d){const[v]=g;t("set",v)}else t(d,...g)}catch(v){tr.error(v)}}),c.apply(this,arguments)}return function o(d){return c.apply(this,arguments)}}(c,t,e,n),{gtagCore:c,wrappedGtag:window[o]}}(ps,$E,HE,q_,"gtag");Wi=c,ch=d,K_=!0}return ps[r]=function kC(t,e,n,r,o,c,d){return G_.apply(this,arguments)}(t,$E,HE,e,ch,q_,n),new W_(t)}function LC(){return hg.apply(this,arguments)}function hg(){return(hg=(0,z.Z)(function*(){if((0,tt.ru)()||!(0,tt.zI)()||!(0,tt.hl)())return!1;try{return yield(0,tt.eu)()}catch{return!1}})).apply(this,arguments)}const qE="@firebase/analytics";!function ZE(){(0,Ct._registerComponent)(new Vr.wA(su,(e,{options:n})=>dg(e.getProvider("app").getImmediate(),e.getProvider("installations-internal").getImmediate(),n),"PUBLIC")),(0,Ct._registerComponent)(new Vr.wA("analytics-internal",function t(e){try{const n=e.getProvider(su).getImmediate();return{logEvent:(r,o,c)=>function WE(t,e,n,r){t=(0,tt.m9)(t),function RC(t,e,n,r,o){return sh.apply(this,arguments)}(Wi,ps[t.app.options.appId],e,n,r).catch(o=>tr.error(o))}(n,r,o,c)}}catch(n){throw ei.create("interop-component-reg-failed",{reason:n})}},"PRIVATE")),(0,Ct.registerVersion)(qE,"0.10.0"),(0,Ct.registerVersion)(qE,"0.10.0","esm2017")}();const fM=new class Y_ extends wp{}(class YE extends Ho{constructor(e,n){super(e,n),this.scheduler=e,this.work=n}schedule(e,n=0){return n>0?super.schedule(e,n):(this.delay=n,this.state=e,this.scheduler.flush(this),this)}execute(e,n){return n>0||this.closed?super.execute(e,n):this._execute(e,n)}requestAsyncId(e,n,r=0){return null!=r&&r>0||null==r&&this.delay>0?super.requestAsyncId(e,n,r):(e.flush(this),0)}});var Q_=O(4674),oa=O(9360),au=O(8251),J_=O(2737),qc=O(5137),Kc=O(3093);const pg=new E.GfV("7.6.1"),JE="__angularfire_symbol__analyticsIsSupportedValue",gg="__angularfire_symbol__analyticsIsSupported",mg="__angularfire_symbol__remoteConfigIsSupportedValue",Pi="__angularfire_symbol__remoteConfigIsSupported",dh="__angularfire_symbol__messagingIsSupportedValue",X_="__angularfire_symbol__messagingIsSupported";function aa(t,e,n){if(e){if(1===e.length)return e[0];const c=e.filter(d=>d.app===n);if(1===c.length)return c[0]}return n.container.getProvider(t).getImmediate({optional:!0})}globalThis[gg]||(globalThis[gg]=LC().then(t=>globalThis[JE]=t).catch(()=>globalThis[JE]=!1)),globalThis[X_]||(globalThis[X_]=Bc().then(t=>globalThis[dh]=t).catch(()=>globalThis[dh]=!1)),globalThis[Pi]||(globalThis[Pi]=tC().then(t=>globalThis[mg]=t).catch(()=>globalThis[mg]=!1));const gs=(t,e)=>{const n=e?[e]:(0,Ct.getApps)(),r=[];return n.forEach(o=>{o.container.getProvider(t).instances.forEach(d=>{r.includes(d)||r.push(d)})}),r};function ms(){}class ew{constructor(e,n=fM){this.zone=e,this.delegate=n}now(){return this.delegate.now()}schedule(e,n,r){const o=this.zone;return this.delegate.schedule(function(d){o.runGuarded(()=>{e.apply(this,[d])})},n,r)}}class BC{constructor(e){this.zone=e,this.task=null}call(e,n){const r=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",ms,{},ms,ms)),n.pipe(function FC(t,e,n){const r=(0,Q_.m)(t)||e||n?{next:t,error:e,complete:n}:t;return r?(0,oa.e)((o,c)=>{var d;null===(d=r.subscribe)||void 0===d||d.call(r);let g=!0;o.subscribe((0,au.x)(c,v=>{var D;null===(D=r.next)||void 0===D||D.call(r,v),c.next(v)},()=>{var v;g=!1,null===(v=r.complete)||void 0===v||v.call(r),c.complete()},v=>{var D;g=!1,null===(D=r.error)||void 0===D||D.call(r,v),c.error(v)},()=>{var v,D;g&&(null===(v=r.unsubscribe)||void 0===v||v.call(r)),null===(D=r.finalize)||void 0===D||D.call(r)}))}):J_.y}({next:r,complete:r,error:r})).subscribe(e).add(r)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let Zc=(()=>{class t{constructor(n){this.ngZone=n,this.outsideAngular=n.runOutsideAngular(()=>new ew(Zone.current)),this.insideAngular=n.run(()=>new ew(Zone.current,Nd)),globalThis.\u0275AngularFireScheduler||(globalThis.\u0275AngularFireScheduler=this)}}return t.\u0275fac=function(n){return new(n||t)(E.LFG(E.R0b))},t.\u0275prov=E.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();function vo(){const t=globalThis.\u0275AngularFireScheduler;if(!t)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return t}function ua(t){return vo().ngZone.run(()=>t())}function dr(t){return vo(),function yg(t){return function(n){return(n=n.lift(new BC(t.ngZone))).pipe((0,qc.R)(t.outsideAngular),(0,Kc.Q)(t.insideAngular))}}(vo())(t)}const nw=(t,e)=>function(){const r=arguments;return e&&setTimeout(()=>{"scheduled"===e.state&&e.invoke()},10),ua(()=>t.apply(void 0,r))},qi=(t,e)=>function(){let n;const r=arguments;for(let c=0;c<arguments.length;c++)"function"==typeof r[c]&&(e&&(n||(n=ua(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",ms,{},ms,ms)))),r[c]=nw(r[c],n));const o=function hh(t){return vo().ngZone.runOutsideAngular(()=>t())}(()=>t.apply(this,r));if(!e){if(o instanceof xi.y){const c=vo();return o.pipe((0,qc.R)(c.outsideAngular),(0,Kc.Q)(c.insideAngular))}return ua(()=>o)}return o instanceof xi.y?o.pipe(dr):o instanceof Promise?ua(()=>new Promise((c,d)=>o.then(g=>ua(()=>c(g)),g=>ua(()=>d(g))))):"function"==typeof o&&n?function(){return setTimeout(()=>{n&&"scheduled"===n.state&&n.invoke()},10),o.apply(this,arguments)}:ua(()=>o)};var UC=O(2372),rw=O(4564);function iw(...t){return function jC(){return(0,UC.J)(1)}()((0,Mi.D)(t,(0,rw.yG)(t)))}function _g(...t){const e=(0,rw.yG)(t);return(0,oa.e)((n,r)=>{(e?iw(t,n,e):iw(t,n)).subscribe(r)})}function sw(){return(0,oa.e)((t,e)=>{let n,r=!1;t.subscribe((0,au.x)(e,o=>{const c=n;n=o,r&&e.next([c,o]),r=!0}))})}var ti=O(7398);function ow(t,e){return(0,oa.e)(function mM(t,e,n,r,o){return(c,d)=>{let g=n,v=e,D=0;c.subscribe((0,au.x)(d,T=>{const A=D++;v=g?t(v,T,A):(g=!0,T),r&&d.next(v)},o&&(()=>{g&&d.next(v),d.complete()})))}}(t,e,arguments.length>=2,!0))}var aw=O(3997);function fh(t,e){return(0,oa.e)((n,r)=>{let o=0;n.subscribe((0,au.x)(r,c=>t.call(e,c,o++)&&r.next(c)))})}var Ge,Us=O(6304),vg=(O(6365),O(3106)),uw=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Ki={},It=It||{},Et=uw||self;function ph(t){var e=typeof t;return"array"==(e="object"!=e?e:t?Array.isArray(t)?"array":e:"null")||"object"==e&&"number"==typeof t.length}function js(t){var e=typeof t;return"object"==e&&null!=t||"function"==e}var ev="closure_uid_"+(1e9*Math.random()>>>0),Ig=0;function Yc(t,e,n){return t.call.apply(t.bind,arguments)}function tv(t,e,n){if(!t)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var o=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(o,r),t.apply(e,o)}}return function(){return t.apply(e,arguments)}}function zn(t,e,n){return(zn=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?Yc:tv).apply(null,arguments)}function gh(t,e){var n=Array.prototype.slice.call(arguments,1);return function(){var r=n.slice();return r.push.apply(r,arguments),t.apply(this,r)}}function Gn(t,e){function n(){}n.prototype=e.prototype,t.$=e.prototype,t.prototype=new n,t.prototype.constructor=t,t.ac=function(r,o,c){for(var d=Array(arguments.length-2),g=2;g<arguments.length;g++)d[g-2]=arguments[g];return e.prototype[o].apply(r,d)}}function $s(){this.s=this.s,this.o=this.o}$s.prototype.s=!1,$s.prototype.sa=function(){!this.s&&(this.s=!0,this.N(),0)&&function HC(t){Object.prototype.hasOwnProperty.call(t,ev)&&t[ev]||(t[ev]=++Ig)}(this)},$s.prototype.N=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const rv=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if("string"==typeof t)return"string"!=typeof e||1!=e.length?-1:t.indexOf(e,0);for(let n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1};function mh(t){const e=t.length;if(0<e){const n=Array(e);for(let r=0;r<e;r++)n[r]=t[r];return n}return[]}function cw(t,e){for(let n=1;n<arguments.length;n++){const r=arguments[n];if(ph(r)){const o=t.length||0,c=r.length||0;t.length=o+c;for(let d=0;d<c;d++)t[o+d]=r[d]}else t.push(r)}}function jr(t,e){this.type=t,this.g=this.target=e,this.defaultPrevented=!1}jr.prototype.h=function(){this.defaultPrevented=!0};var zC=function(){if(!Et.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{Et.addEventListener("test",()=>{},e),Et.removeEventListener("test",()=>{},e)}catch{}return t}();function Qc(t){return/^[\s\xa0]*$/.test(t)}function Eg(){var t=Et.navigator;return t&&(t=t.userAgent)?t:""}function Hs(t){return-1!=Eg().indexOf(t)}function iv(t){return iv[" "](t),t}iv[" "]=function(){};var fw,t,lw=Hs("Opera"),uu=Hs("Trident")||Hs("MSIE"),dw=Hs("Edge"),sv=dw||uu,pi=Hs("Gecko")&&!(-1!=Eg().toLowerCase().indexOf("webkit")&&!Hs("Edge"))&&!(Hs("Trident")||Hs("MSIE"))&&!Hs("Edge"),WC=-1!=Eg().toLowerCase().indexOf("webkit")&&!Hs("Edge");function hw(){var t=Et.document;return t?t.documentMode:void 0}e:{var yh="",wg=(t=Eg(),pi?/rv:([^\);]+)(\)|;)/.exec(t):dw?/Edge\/([\d\.]+)/.exec(t):uu?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(t):WC?/WebKit\/(\S+)/.exec(t):lw?/(?:Version)[ \/]?(\S+)/.exec(t):void 0);if(wg&&(yh=wg?wg[1]:""),uu){var ov=hw();if(null!=ov&&ov>parseFloat(yh)){fw=String(ov);break e}}fw=yh}var gw=Et.document&&uu&&(hw()||parseInt(fw,10))||void 0;function _h(t,e){if(jr.call(this,t?t.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,t){var n=this.type=t.type,r=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.g=e,e=t.relatedTarget){if(pi){e:{try{iv(e.nodeName);var o=!0;break e}catch{}o=!1}o||(e=null)}}else"mouseover"==n?e=t.fromElement:"mouseout"==n&&(e=t.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==t.clientX?t.clientX:t.pageX,this.clientY=void 0!==t.clientY?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType="string"==typeof t.pointerType?t.pointerType:qC[t.pointerType]||"",this.state=t.state,this.i=t,t.defaultPrevented&&_h.$.h.call(this)}}Gn(_h,jr);var qC={2:"touch",3:"pen",4:"mouse"};_h.prototype.h=function(){_h.$.h.call(this);var t=this.i;t.preventDefault?t.preventDefault():t.returnValue=!1};var cu="closure_listenable_"+(1e6*Math.random()|0),KC=0;function ZC(t,e,n,r,o){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!r,this.la=o,this.key=++KC,this.fa=this.ia=!1}function Dg(t){t.fa=!0,t.listener=null,t.proxy=null,t.src=null,t.la=null}function uv(t,e,n){for(const r in t)e.call(n,t[r],r,t)}function ys(t){const e={};for(const n in t)e[n]=t[n];return e}const bg="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function mw(t,e){let n,r;for(let o=1;o<arguments.length;o++){for(n in r=arguments[o],r)t[n]=r[n];for(let c=0;c<bg.length;c++)n=bg[c],Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}}function vh(t){this.src=t,this.g={},this.h=0}function cv(t,e){var n=e.type;if(n in t.g){var c,r=t.g[n],o=rv(r,e);(c=0<=o)&&Array.prototype.splice.call(r,o,1),c&&(Dg(e),0==t.g[n].length&&(delete t.g[n],t.h--))}}function Tg(t,e,n,r){for(var o=0;o<t.length;++o){var c=t[o];if(!c.fa&&c.listener==e&&c.capture==!!n&&c.la==r)return o}return-1}vh.prototype.add=function(t,e,n,r,o){var c=t.toString();(t=this.g[c])||(t=this.g[c]=[],this.h++);var d=Tg(t,e,r,o);return-1<d?(e=t[d],n||(e.ia=!1)):((e=new ZC(e,this.src,c,!!r,o)).ia=n,t.push(e)),e};var Cg="closure_lm_"+(1e6*Math.random()|0),Jc={};function Sg(t,e,n,r,o){if(r&&r.once)return lv(t,e,n,r,o);if(Array.isArray(e)){for(var c=0;c<e.length;c++)Sg(t,e[c],n,r,o);return null}return n=Ih(n),t&&t[cu]?t.O(e,n,js(r)?!!r.capture:!!r,o):QC(t,e,n,!1,r,o)}function QC(t,e,n,r,o,c){if(!e)throw Error("Invalid event type");var d=js(o)?!!o.capture:!!o,g=hv(t);if(g||(t[Cg]=g=new vh(t)),(n=g.add(e,n,r,d,c)).proxy)return n;if(r=function yw(){const e=Io;return function t(n){return e.call(t.src,t.listener,n)}}(),n.proxy=r,r.src=t,r.listener=n,t.addEventListener)zC||(o=d),void 0===o&&(o=!1),t.addEventListener(e.toString(),r,o);else if(t.attachEvent)t.attachEvent(xg(e.toString()),r);else{if(!t.addListener||!t.removeListener)throw Error("addEventListener and attachEvent are unavailable.");t.addListener(r)}return n}function lv(t,e,n,r,o){if(Array.isArray(e)){for(var c=0;c<e.length;c++)lv(t,e[c],n,r,o);return null}return n=Ih(n),t&&t[cu]?t.P(e,n,js(r)?!!r.capture:!!r,o):QC(t,e,n,!0,r,o)}function dv(t,e,n,r,o){if(Array.isArray(e))for(var c=0;c<e.length;c++)dv(t,e[c],n,r,o);else r=js(r)?!!r.capture:!!r,n=Ih(n),t&&t[cu]?(t=t.i,(e=String(e).toString())in t.g&&-1<(n=Tg(c=t.g[e],n,r,o))&&(Dg(c[n]),Array.prototype.splice.call(c,n,1),0==c.length&&(delete t.g[e],t.h--))):t&&(t=hv(t))&&(e=t.g[e.toString()],t=-1,e&&(t=Tg(e,n,r,o)),(n=-1<t?e[t]:null)&&Ag(n))}function Ag(t){if("number"!=typeof t&&t&&!t.fa){var e=t.src;if(e&&e[cu])cv(e.i,t);else{var n=t.type,r=t.proxy;e.removeEventListener?e.removeEventListener(n,r,t.capture):e.detachEvent?e.detachEvent(xg(n),r):e.addListener&&e.removeListener&&e.removeListener(r),(n=hv(e))?(cv(n,t),0==n.h&&(n.src=null,e[Cg]=null)):Dg(t)}}}function xg(t){return t in Jc?Jc[t]:Jc[t]="on"+t}function Io(t,e){if(t.fa)t=!0;else{e=new _h(e,this);var n=t.listener,r=t.la||t.src;t.ia&&Ag(t),t=n.call(r,e)}return t}function hv(t){return(t=t[Cg])instanceof vh?t:null}var fv="__closure_events_fn_"+(1e9*Math.random()>>>0);function Ih(t){return"function"==typeof t?t:(t[fv]||(t[fv]=function(e){return t.handleEvent(e)}),t[fv])}function hr(){$s.call(this),this.i=new vh(this),this.S=this,this.J=null}function fr(t,e){var n,r=t.J;if(r)for(n=[];r;r=r.J)n.push(r);if(t=t.S,r=e.type||e,"string"==typeof e)e=new jr(e,t);else if(e instanceof jr)e.target=e.target||t;else{var o=e;mw(e=new jr(r,t),o)}if(o=!0,n)for(var c=n.length-1;0<=c;c--){var d=e.g=n[c];o=Mg(d,r,!0,e)&&o}if(o=Mg(d=e.g=t,r,!0,e)&&o,o=Mg(d,r,!1,e)&&o,n)for(c=0;c<n.length;c++)o=Mg(d=e.g=n[c],r,!1,e)&&o}function Mg(t,e,n,r){if(!(e=t.i.g[String(e)]))return!0;e=e.concat();for(var o=!0,c=0;c<e.length;++c){var d=e[c];if(d&&!d.fa&&d.capture==n){var g=d.listener,v=d.la||d.src;d.ia&&cv(t.i,d),o=!1!==g.call(v,r)&&o}}return o&&!r.defaultPrevented}Gn(hr,$s),hr.prototype[cu]=!0,hr.prototype.removeEventListener=function(t,e,n,r){dv(this,t,e,n,r)},hr.prototype.N=function(){if(hr.$.N.call(this),this.i){var e,t=this.i;for(e in t.g){for(var n=t.g[e],r=0;r<n.length;r++)Dg(n[r]);delete t.g[e],t.h--}}this.J=null},hr.prototype.O=function(t,e,n,r){return this.i.add(String(t),e,!1,n,r)},hr.prototype.P=function(t,e,n,r){return this.i.add(String(t),e,!0,n,r)};var Xc=Et.JSON.stringify;function Ng(){var t=Rg;let e=null;return t.g&&(e=t.g,t.g=t.g.next,t.g||(t.h=null),e.next=null),e}var _w=new class Eh{constructor(e,n){this.i=e,this.j=n,this.h=0,this.g=null}get(){let e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}(()=>new vw,t=>t.reset());class vw{constructor(){this.next=this.g=this.h=null}set(e,n){this.h=e,this.g=n,this.next=null}reset(){this.next=this.g=this.h=null}}function Iw(t){var e=1;t=t.split(":");const n=[];for(;0<e&&t.length;)n.push(t.shift()),e--;return t.length&&n.push(t.join(":")),n}function JC(t){Et.setTimeout(()=>{throw t},0)}let wh,el=!1,Rg=new class yM{constructor(){this.h=this.g=null}add(e,n){const r=_w.get();r.set(e,n),this.h?this.h.next=r:this.g=r,this.h=r}},tl=()=>{const t=Et.Promise.resolve(void 0);wh=()=>{t.then(XC)}};var XC=()=>{for(var t;t=Ng();){try{t.h.call(t.g)}catch(n){JC(n)}var e=_w;e.j(t),100>e.h&&(e.h++,t.next=e.g,e.g=t)}el=!1};function Dh(t,e){hr.call(this),this.h=t||1,this.g=e||Et,this.j=zn(this.qb,this),this.l=Date.now()}function Pg(t){t.ga=!1,t.T&&(t.g.clearTimeout(t.T),t.T=null)}function pv(t,e,n){if("function"==typeof t)n&&(t=zn(t,n));else{if(!t||"function"!=typeof t.handleEvent)throw Error("Invalid listener argument");t=zn(t.handleEvent,t)}return 2147483647<Number(e)?-1:Et.setTimeout(t,e||0)}function Ew(t){t.g=pv(()=>{t.g=null,t.i&&(t.i=!1,Ew(t))},t.j);const e=t.h;t.h=null,t.m.apply(null,e)}Gn(Dh,hr),(Ge=Dh.prototype).ga=!1,Ge.T=null,Ge.qb=function(){if(this.ga){var t=Date.now()-this.l;0<t&&t<.8*this.h?this.T=this.g.setTimeout(this.j,this.h-t):(this.T&&(this.g.clearTimeout(this.T),this.T=null),fr(this,"tick"),this.ga&&(Pg(this),this.start()))}},Ge.start=function(){this.ga=!0,this.T||(this.T=this.g.setTimeout(this.j,this.h),this.l=Date.now())},Ge.N=function(){Dh.$.N.call(this),Pg(this),delete this.g};class bh extends $s{constructor(e,n){super(),this.m=e,this.j=n,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:Ew(this)}N(){super.N(),this.g&&(Et.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Th(t){$s.call(this),this.h=t,this.g={}}Gn(Th,$s);var ww=[];function Dw(t,e,n,r){Array.isArray(n)||(n&&(ww[0]=n.toString()),n=ww);for(var o=0;o<n.length;o++){var c=Sg(e,n[o],r||t.handleEvent,!1,t.h||t);if(!c)break;t.g[c.key]=c}}function bw(t){uv(t.g,function(e,n){this.g.hasOwnProperty(n)&&Ag(e)},t),t.g={}}function kg(){this.g=!0}function nl(t,e,n,r){t.info(function(){return"XMLHTTP TEXT ("+e+"): "+function Cw(t,e){if(!t.g)return e;if(!e)return null;try{var n=JSON.parse(e);if(n)for(t=0;t<n.length;t++)if(Array.isArray(n[t])){var r=n[t];if(!(2>r.length)){var o=r[1];if(Array.isArray(o)&&!(1>o.length)){var c=o[0];if("noop"!=c&&"stop"!=c&&"close"!=c)for(var d=1;d<o.length;d++)o[d]=""}}}return Xc(n)}catch{return e}}(t,n)+(r?" "+r:"")})}Th.prototype.N=function(){Th.$.N.call(this),bw(this)},Th.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},kg.prototype.Ea=function(){this.g=!1},kg.prototype.info=function(){};var lu={},Ch=null;function Og(){return Ch=Ch||new hr}function Sw(t){jr.call(this,lu.Ta,t)}function Sh(t){const e=Og();fr(e,new Sw(e))}function Aw(t,e){jr.call(this,lu.STAT_EVENT,t),this.stat=e}function ni(t){const e=Og();fr(e,new Aw(e,t))}function xw(t,e){jr.call(this,lu.Ua,t),this.size=e}function Ah(t,e){if("function"!=typeof t)throw Error("Fn must not be null and must be a function");return Et.setTimeout(function(){t()},e)}lu.Ta="serverreachability",Gn(Sw,jr),lu.STAT_EVENT="statevent",Gn(Aw,jr),lu.Ua="timingevent",Gn(xw,jr);var xh={NO_ERROR:0,rb:1,Eb:2,Db:3,yb:4,Cb:5,Fb:6,Qa:7,TIMEOUT:8,Ib:9},gv={wb:"complete",Sb:"success",Ra:"error",Qa:"abort",Kb:"ready",Lb:"readystatechange",TIMEOUT:"timeout",Gb:"incrementaldata",Jb:"progress",zb:"downloadprogress",$b:"uploadprogress"};function mv(){}function yv(){}mv.prototype.h=null;var _v,Mh={OPEN:"a",vb:"b",Ra:"c",Hb:"d"};function Mw(){jr.call(this,"d")}function rl(){jr.call(this,"c")}function Lg(){}function du(t,e,n,r){this.l=t,this.j=e,this.m=n,this.W=r||1,this.U=new Th(this),this.P=zs,this.V=new Dh(t=sv?125:void 0),this.I=null,this.i=!1,this.s=this.A=this.v=this.L=this.G=this.Y=this.B=null,this.F=[],this.g=null,this.C=0,this.o=this.u=null,this.ca=-1,this.J=!1,this.O=0,this.M=null,this.ba=this.K=this.aa=this.S=!1,this.h=new Nw}function Nw(){this.i=null,this.g="",this.h=!1}Gn(Mw,jr),Gn(rl,jr),Gn(Lg,mv),Lg.prototype.g=function(){return new XMLHttpRequest},Lg.prototype.i=function(){return{}},_v=new Lg;var zs=45e3,hu={},nr={};function Eo(t,e,n){t.L=1,t.v=al(qs(e)),t.s=n,t.S=!0,Nh(t,null)}function Nh(t,e){t.G=Date.now(),Gs(t),t.A=qs(t.v);var n=t.A,r=t.W;Array.isArray(r)||(r=[String(r)]),ul(n.i,"t",r),t.C=0,n=t.l.J,t.h=new Nw,t.g=Vv(t.l,n?e:null,!t.s),0<t.O&&(t.M=new bh(zn(t.Pa,t,t.g),t.O)),Dw(t.U,t.g,"readystatechange",t.nb),e=t.I?ys(t.I):{},t.s?(t.u||(t.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",t.g.ha(t.A,t.u,t.s,e)):(t.u="GET",t.g.ha(t.A,t.u,null,e)),Sh(),function eS(t,e,n,r,o,c){t.info(function(){if(t.g)if(c)for(var d="",g=c.split("&"),v=0;v<g.length;v++){var D=g[v].split("=");if(1<D.length){var T=D[0];D=D[1];var A=T.split("_");d=2<=A.length&&"type"==A[1]?d+(T+"=")+D+"&":d+(T+"=redacted&")}}else d=null;else d=c;return"XMLHTTP REQ ("+r+") [attempt "+o+"]: "+e+"\n"+n+"\n"+d})}(t.j,t.u,t.A,t.m,t.W,t.s)}function ki(t){return!!t.g&&"GET"==t.u&&2!=t.L&&t.l.Ha}function vv(t,e,n){let o,r=!0;for(;!t.J&&t.C<n.length;){if(o=il(t,n),o==nr){4==e&&(t.o=4,ni(14),r=!1),nl(t.j,t.m,null,"[Incomplete Response]");break}if(o==hu){t.o=4,ni(15),nl(t.j,t.m,n,"[Invalid Chunk]"),r=!1;break}nl(t.j,t.m,o,null),ca(t,o)}ki(t)&&o!=nr&&o!=hu&&(t.h.g="",t.C=0),4!=e||0!=n.length||t.h.h||(t.o=1,ni(16),r=!1),t.i=t.i&&r,r?0<n.length&&!t.ba&&(t.ba=!0,(e=t.l).g==t&&e.ca&&!e.M&&(e.l.info("Great, no buffering proxy detected. Bytes received: "+n.length),kv(e),e.M=!0,ni(11))):(nl(t.j,t.m,n,"[Invalid Chunked Response]"),Zi(t),Ws(t))}function il(t,e){var n=t.C,r=e.indexOf("\n",n);return-1==r?nr:(n=Number(e.substring(n,r)),isNaN(n)?hu:(r+=1)+n>e.length?nr:(e=e.slice(r,r+n),t.C=r+n,e))}function Gs(t){t.Y=Date.now()+t.P,fu(t,t.P)}function fu(t,e){if(null!=t.B)throw Error("WatchDog timer not null");t.B=Ah(zn(t.lb,t),e)}function wo(t){t.B&&(Et.clearTimeout(t.B),t.B=null)}function Ws(t){0==t.l.H||t.J||Lv(t.l,t)}function Zi(t){wo(t);var e=t.M;e&&"function"==typeof e.sa&&e.sa(),t.M=null,Pg(t.V),bw(t.U),t.g&&(e=t.g,t.g=null,e.abort(),e.sa())}function ca(t,e){try{var n=t.l;if(0!=n.H&&(n.g==t||Dv(n.i,t)))if(!t.K&&Dv(n.i,t)&&3==n.H){try{var r=n.Ja.g.parse(e)}catch{r=null}if(Array.isArray(r)&&3==r.length){var o=r;if(0==o[0]){e:if(!n.u){if(n.g){if(!(n.g.G+3e3<t.G))break e;Hh(n),$h(n)}Yg(n),ni(18)}}else n.Fa=o[1],0<n.Fa-n.V&&37500>o[2]&&n.G&&0==n.A&&!n.v&&(n.v=Ah(zn(n.ib,n),6e3));if(1>=ll(n.i)&&n.oa){try{n.oa()}catch{}n.oa=void 0}}else gu(n,11)}else if((t.K||n.g==t)&&Hh(n),!Qc(e))for(o=n.Ja.g.parse(e),e=0;e<o.length;e++){let D=o[e];if(n.V=D[0],D=D[1],2==n.H)if("c"==D[0]){n.K=D[1],n.pa=D[2];const T=D[3];null!=T&&(n.ra=T,n.l.info("VER="+n.ra));const A=D[4];null!=A&&(n.Ga=A,n.l.info("SVER="+n.Ga));const U=D[5];null!=U&&"number"==typeof U&&0<U&&(n.L=r=1.5*U,n.l.info("backChannelRequestTimeoutMs_="+r)),r=n;const q=t.g;if(q){const he=q.g?q.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(he){var c=r.i;c.g||-1==he.indexOf("spdy")&&-1==he.indexOf("quic")&&-1==he.indexOf("h2")||(c.j=c.l,c.g=new Set,c.h&&(bv(c,c.h),c.h=null))}if(r.F){const Se=q.g?q.g.getResponseHeader("X-HTTP-Session-Id"):null;Se&&(r.Da=Se,sn(r.I,r.F,Se))}}n.H=3,n.h&&n.h.Ba(),n.ca&&(n.S=Date.now()-t.G,n.l.info("Handshake RTT: "+n.S+"ms"));var d=t;if((r=n).wa=zw(r,r.J?r.pa:null,r.Y),d.K){Vw(r.i,d);var g=d,v=r.L;v&&g.setTimeout(v),g.B&&(wo(g),Gs(g)),r.g=d}else Zg(r);0<n.j.length&&Kg(n)}else"stop"!=D[0]&&"close"!=D[0]||gu(n,7);else 3==n.H&&("stop"==D[0]||"close"==D[0]?"stop"==D[0]?gu(n,7):jh(n):"noop"!=D[0]&&n.h&&n.h.Aa(D),n.A=0)}Sh()}catch{}}function Iv(t,e){if(t.forEach&&"function"==typeof t.forEach)t.forEach(e,void 0);else if(ph(t)||"string"==typeof t)Array.prototype.forEach.call(t,e,void 0);else for(var n=function ol(t){if(t.ta&&"function"==typeof t.ta)return t.ta();if(!t.Z||"function"!=typeof t.Z){if(typeof Map<"u"&&t instanceof Map)return Array.from(t.keys());if(!(typeof Set<"u"&&t instanceof Set)){if(ph(t)||"string"==typeof t){var e=[];t=t.length;for(var n=0;n<t;n++)e.push(n);return e}e=[],n=0;for(const r in t)e[n++]=r;return e}}}(t),r=function sl(t){if(t.Z&&"function"==typeof t.Z)return t.Z();if(typeof Map<"u"&&t instanceof Map||typeof Set<"u"&&t instanceof Set)return Array.from(t.values());if("string"==typeof t)return t.split("");if(ph(t)){for(var e=[],n=t.length,r=0;r<n;r++)e.push(t[r]);return e}for(r in e=[],n=0,t)e[n++]=t[r];return e}(t),o=r.length,c=0;c<o;c++)e.call(void 0,r[c],n&&n[c],t)}(Ge=du.prototype).setTimeout=function(t){this.P=t},Ge.nb=function(t){t=t.target;const e=this.M;e&&3==Oi(t)?e.l():this.Pa(t)},Ge.Pa=function(t){try{if(t==this.g)e:{const T=Oi(this.g);var e=this.g.Ia();if(this.g.da(),!(3>T)&&(3!=T||sv||this.g&&(this.h.h||this.g.ja()||Wg(this.g)))){this.J||4!=T||7==e||Sh(),wo(this);var n=this.g.da();this.ca=n;t:if(ki(this)){var r=Wg(this.g);t="";var o=r.length,c=4==Oi(this.g);if(!this.h.i){if(typeof TextDecoder>"u"){Zi(this),Ws(this);var d="";break t}this.h.i=new Et.TextDecoder}for(e=0;e<o;e++)this.h.h=!0,t+=this.h.i.decode(r[e],{stream:c&&e==o-1});r.splice(0,o),this.h.g+=t,this.C=0,d=this.h.g}else d=this.g.ja();if(this.i=200==n,function tS(t,e,n,r,o,c,d){t.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+o+"]: "+e+"\n"+n+"\n"+c+" "+d})}(this.j,this.u,this.A,this.m,this.W,T,n),this.i){if(this.aa&&!this.K){t:{if(this.g){var g,v=this.g;if((g=v.g?v.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Qc(g)){var D=g;break t}}D=null}if(!(n=D)){this.i=!1,this.o=3,ni(12),Zi(this),Ws(this);break e}nl(this.j,this.m,n,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,ca(this,n)}this.S?(vv(this,T,d),sv&&this.i&&3==T&&(Dw(this.U,this.V,"tick",this.mb),this.V.start())):(nl(this.j,this.m,d,null),ca(this,d)),4==T&&Zi(this),this.i&&!this.J&&(4==T?Lv(this.l,this):(this.i=!1,Gs(this)))}else(function jw(t){const e={};t=(t.g&&2<=Oi(t)&&t.g.getAllResponseHeaders()||"").split("\r\n");for(let r=0;r<t.length;r++){if(Qc(t[r]))continue;var n=Iw(t[r]);const o=n[0];if("string"!=typeof(n=n[1]))continue;n=n.trim();const c=e[o]||[];e[o]=c,c.push(n)}!function YC(t,e){for(const n in t)e.call(void 0,t[n],n,t)}(e,function(r){return r.join(", ")})})(this.g),400==n&&0<d.indexOf("Unknown SID")?(this.o=3,ni(12)):(this.o=0,ni(13)),Zi(this),Ws(this)}}}catch{}},Ge.mb=function(){if(this.g){var t=Oi(this.g),e=this.g.ja();this.C<e.length&&(wo(this),vv(this,t,e),this.i&&4!=t&&Gs(this))}},Ge.cancel=function(){this.J=!0,Zi(this)},Ge.lb=function(){this.B=null;const t=Date.now();0<=t-this.Y?(function Tw(t,e){t.info(function(){return"TIMEOUT: "+e})}(this.j,this.A),2!=this.L&&(Sh(),ni(17)),Zi(this),this.o=2,Ws(this)):fu(this,this.Y-t)};var Ev=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function la(t){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,t instanceof la){this.h=t.h,Rh(this,t.j),this.s=t.s,this.g=t.g,Ph(this,t.m),this.l=t.l;var e=t.i,n=new Oh;n.i=e.i,e.g&&(n.g=new Map(e.g),n.h=e.h),wv(this,n),this.o=t.o}else t&&(e=String(t).match(Ev))?(this.h=!1,Rh(this,e[1]||"",!0),this.s=kh(e[2]||""),this.g=kh(e[3]||"",!0),Ph(this,e[4]),this.l=kh(e[5]||"",!0),wv(this,e[6]||"",!0),this.o=kh(e[7]||"")):(this.h=!1,this.i=new Oh(null,this.h))}function qs(t){return new la(t)}function Rh(t,e,n){t.j=n?kh(e,!0):e,t.j&&(t.j=t.j.replace(/:$/,""))}function Ph(t,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);t.m=e}else t.m=null}function wv(t,e,n){e instanceof Oh?(t.i=e,function Bg(t,e){e&&!t.j&&(da(t),t.i=null,t.g.forEach(function(n,r){var o=r.toLowerCase();r!=o&&(kw(this,r),ul(this,o,n))},t)),t.j=e}(t.i,t.h)):(n||(e=Fg(e,iS)),t.i=new Oh(e,t.h))}function sn(t,e,n){t.i.set(e,n)}function al(t){return sn(t,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),t}function kh(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function Fg(t,e,n){return"string"==typeof t?(t=encodeURI(t).replace(e,_M),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function _M(t){return"%"+((t=t.charCodeAt(0))>>4&15).toString(16)+(15&t).toString(16)}la.prototype.toString=function(){var t=[],e=this.j;e&&t.push(Fg(e,Pw,!0),":");var n=this.g;return(n||"file"==e)&&(t.push("//"),(e=this.s)&&t.push(Fg(e,Pw,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.m)&&t.push(":",String(n))),(n=this.l)&&(this.g&&"/"!=n.charAt(0)&&t.push("/"),t.push(Fg(n,"/"==n.charAt(0)?vM:rS,!0))),(n=this.i.toString())&&t.push("?",n),(n=this.o)&&t.push("#",Fg(n,IM)),t.join("")};var Pw=/[#\/\?@]/g,rS=/[#\?:]/g,vM=/[#\?]/g,iS=/[#\?@]/g,IM=/#/g;function Oh(t,e){this.h=this.g=null,this.i=t||null,this.j=!!e}function da(t){t.g||(t.g=new Map,t.h=0,t.i&&function Rw(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var r=t[n].indexOf("="),o=null;if(0<=r){var c=t[n].substring(0,r);o=t[n].substring(r+1)}else c=t[n];e(c,o?decodeURIComponent(o.replace(/\+/g," ")):"")}}}(t.i,function(e,n){t.add(decodeURIComponent(e.replace(/\+/g," ")),n)}))}function kw(t,e){da(t),e=ha(t,e),t.g.has(e)&&(t.i=null,t.h-=t.g.get(e).length,t.g.delete(e))}function Vg(t,e){return da(t),e=ha(t,e),t.g.has(e)}function ul(t,e,n){kw(t,e),0<n.length&&(t.i=null,t.g.set(ha(t,e),mh(n)),t.h+=n.length)}function ha(t,e){return e=String(e),t.j&&(e=e.toLowerCase()),e}function cl(t){this.l=t||Lw,t=Et.PerformanceNavigationTiming?0<(t=Et.performance.getEntriesByType("navigation")).length&&("hq"==t[0].nextHopProtocol||"h2"==t[0].nextHopProtocol):!!(Et.g&&Et.g.Ka&&Et.g.Ka()&&Et.g.Ka().ec),this.j=t?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(Ge=Oh.prototype).add=function(t,e){da(this),this.i=null,t=ha(this,t);var n=this.g.get(t);return n||this.g.set(t,n=[]),n.push(e),this.h+=1,this},Ge.forEach=function(t,e){da(this),this.g.forEach(function(n,r){n.forEach(function(o){t.call(e,o,r,this)},this)},this)},Ge.ta=function(){da(this);const t=Array.from(this.g.values()),e=Array.from(this.g.keys()),n=[];for(let r=0;r<e.length;r++){const o=t[r];for(let c=0;c<o.length;c++)n.push(e[r])}return n},Ge.Z=function(t){da(this);let e=[];if("string"==typeof t)Vg(this,t)&&(e=e.concat(this.g.get(ha(this,t))));else{t=Array.from(this.g.values());for(let n=0;n<t.length;n++)e=e.concat(t[n])}return e},Ge.set=function(t,e){return da(this),this.i=null,Vg(this,t=ha(this,t))&&(this.h-=this.g.get(t).length),this.g.set(t,[e]),this.h+=1,this},Ge.get=function(t,e){return t&&0<(t=this.Z(t)).length?String(t[0]):e},Ge.toString=function(){if(this.i)return this.i;if(!this.g)return"";const t=[],e=Array.from(this.g.keys());for(var n=0;n<e.length;n++){var r=e[n];const c=encodeURIComponent(String(r)),d=this.Z(r);for(r=0;r<d.length;r++){var o=c;""!==d[r]&&(o+="="+encodeURIComponent(String(d[r]))),t.push(o)}}return this.i=t.join("&")};var Lw=10;function Fw(t){return!!t.h||!!t.g&&t.g.size>=t.j}function ll(t){return t.h?1:t.g?t.g.size:0}function Dv(t,e){return t.h?t.h==e:!!t.g&&t.g.has(e)}function bv(t,e){t.g?t.g.add(e):t.h=e}function Vw(t,e){t.h&&t.h==e?t.h=null:t.g&&t.g.has(e)&&t.g.delete(e)}function Bw(t){if(null!=t.h)return t.i.concat(t.h.F);if(null!=t.g&&0!==t.g.size){let e=t.i;for(const n of t.g.values())e=e.concat(n.F);return e}return mh(t.i)}cl.prototype.cancel=function(){if(this.i=Bw(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const t of this.g.values())t.cancel();this.g.clear()}};var Tv=class{stringify(t){return Et.JSON.stringify(t,void 0)}parse(t){return Et.JSON.parse(t,void 0)}};function Ug(){this.g=new Tv}function jg(t,e,n){const r=n||"";try{Iv(t,function(o,c){let d=o;js(o)&&(d=Xc(o)),e.push(r+c+"="+encodeURIComponent(d))})}catch(o){throw e.push(r+"type="+encodeURIComponent("_badmap")),o}}function $g(t,e,n,r,o){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,o(r)}catch{}}function Lh(t){this.l=t.fc||null,this.j=t.ob||!1}function dl(t,e){hr.call(this),this.F=t,this.u=e,this.m=void 0,this.readyState=Cv,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}Gn(Lh,mv),Lh.prototype.g=function(){return new dl(this.l,this.j)},Lh.prototype.i=function(t){return function(){return t}}({}),Gn(dl,hr);var Cv=0;function Sv(t){t.j.read().then(t.Xa.bind(t)).catch(t.ka.bind(t))}function Fh(t){t.readyState=4,t.l=null,t.j=null,t.A=null,Vh(t)}function Vh(t){t.onreadystatechange&&t.onreadystatechange.call(t)}(Ge=dl.prototype).open=function(t,e){if(this.readyState!=Cv)throw this.abort(),Error("Error reopening a connection");this.C=t,this.B=e,this.readyState=1,Vh(this)},Ge.send=function(t){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};t&&(e.body=t),(this.F||Et).fetch(new Request(this.B,e)).then(this.$a.bind(this),this.ka.bind(this))},Ge.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,Fh(this)),this.readyState=Cv},Ge.$a=function(t){if(this.g&&(this.l=t,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=t.headers,this.readyState=2,Vh(this)),this.g&&(this.readyState=3,Vh(this),this.g)))if("arraybuffer"===this.responseType)t.arrayBuffer().then(this.Ya.bind(this),this.ka.bind(this));else if(typeof Et.ReadableStream<"u"&&"body"in t){if(this.j=t.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;Sv(this)}else t.text().then(this.Za.bind(this),this.ka.bind(this))},Ge.Xa=function(t){if(this.g){if(this.u&&t.value)this.response.push(t.value);else if(!this.u){var e=t.value?t.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!t.done}))&&(this.response=this.responseText+=e)}t.done?Fh(this):Vh(this),3==this.readyState&&Sv(this)}},Ge.Za=function(t){this.g&&(this.response=this.responseText=t,Fh(this))},Ge.Ya=function(t){this.g&&(this.response=t,Fh(this))},Ge.ka=function(){this.g&&Fh(this)},Ge.setRequestHeader=function(t,e){this.v.append(t,e)},Ge.getResponseHeader=function(t){return this.h&&this.h.get(t.toLowerCase())||""},Ge.getAllResponseHeaders=function(){if(!this.h)return"";const t=[],e=this.h.entries();for(var n=e.next();!n.done;)t.push((n=n.value)[0]+": "+n[1]),n=e.next();return t.join("\r\n")},Object.defineProperty(dl.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(t){this.m=t?"include":"same-origin"}});var Uw=Et.JSON.parse;function Sn(t){hr.call(this),this.headers=new Map,this.u=t||null,this.h=!1,this.C=this.g=null,this.I="",this.m=0,this.j="",this.l=this.G=this.v=this.F=!1,this.B=0,this.A=null,this.K=Av,this.L=this.M=!1}Gn(Sn,hr);var Av="",sS=/^https?$/i,oS=["POST","PUT"];function xv(t,e){t.h=!1,t.g&&(t.l=!0,t.g.abort(),t.l=!1),t.j=e,t.m=5,Hg(t),Gg(t)}function Hg(t){t.F||(t.F=!0,fr(t,"complete"),fr(t,"error"))}function zg(t){if(t.h&&typeof It<"u"&&(!t.C[1]||4!=Oi(t)||2!=t.da()))if(t.v&&4==Oi(t))pv(t.La,0,t);else if(fr(t,"readystatechange"),4==Oi(t)){t.h=!1;try{const d=t.da();e:switch(d){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var n;if(!(n=e)){var r;if(r=0===d){var o=String(t.I).match(Ev)[1]||null;!o&&Et.self&&Et.self.location&&(o=Et.self.location.protocol.slice(0,-1)),r=!sS.test(o?o.toLowerCase():"")}n=r}if(n)fr(t,"complete"),fr(t,"success");else{t.m=6;try{var c=2<Oi(t)?t.g.statusText:""}catch{c=""}t.j=c+" ["+t.da()+"]",Hg(t)}}finally{Gg(t)}}}function Gg(t,e){if(t.g){Bh(t);const n=t.g,r=t.C[0]?()=>{}:null;t.g=null,t.C=null,e||fr(t,"ready");try{n.onreadystatechange=r}catch{}}}function Bh(t){t.g&&t.L&&(t.g.ontimeout=null),t.A&&(Et.clearTimeout(t.A),t.A=null)}function Oi(t){return t.g?t.g.readyState:0}function Wg(t){try{if(!t.g)return null;if("response"in t.g)return t.g.response;switch(t.K){case Av:case"text":return t.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in t.g)return t.g.mozResponseArrayBuffer}return null}catch{return null}}function $w(t){let e="";return uv(t,function(n,r){e+=r,e+=":",e+=n,e+="\r\n"}),e}function Mv(t,e,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=$w(n),"string"==typeof t?null!=n&&encodeURIComponent(String(n)):sn(t,e,n))}function Uh(t,e,n){return n&&n.internalChannelParams&&n.internalChannelParams[t]||e}function qg(t){this.Ga=0,this.j=[],this.l=new kg,this.pa=this.wa=this.I=this.Y=this.g=this.Da=this.F=this.na=this.o=this.U=this.s=null,this.fb=this.W=0,this.cb=Uh("failFast",!1,t),this.G=this.v=this.u=this.m=this.h=null,this.aa=!0,this.Fa=this.V=-1,this.ba=this.A=this.C=0,this.ab=Uh("baseRetryDelayMs",5e3,t),this.hb=Uh("retryDelaySeedMs",1e4,t),this.eb=Uh("forwardChannelMaxRetries",2,t),this.xa=Uh("forwardChannelRequestTimeoutMs",2e4,t),this.va=t&&t.xmlHttpFactory||void 0,this.Ha=t&&t.dc||!1,this.L=void 0,this.J=t&&t.supportsCrossDomainXhr||!1,this.K="",this.i=new cl(t&&t.concurrentRequestLimit),this.Ja=new Ug,this.P=t&&t.fastHandshake||!1,this.O=t&&t.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.bb=t&&t.bc||!1,t&&t.Ea&&this.l.Ea(),t&&t.forceLongPolling&&(this.aa=!1),this.ca=!this.P&&this.aa&&t&&t.detectBufferingProxy||!1,this.qa=void 0,t&&t.longPollingTimeout&&0<t.longPollingTimeout&&(this.qa=t.longPollingTimeout),this.oa=void 0,this.S=0,this.M=!1,this.ma=this.B=null}function jh(t){if(Nv(t),3==t.H){var e=t.W++,n=qs(t.I);if(sn(n,"SID",t.K),sn(n,"RID",e),sn(n,"TYPE","terminate"),pu(t,n),(e=new du(t,t.l,e)).L=2,e.v=al(qs(n)),n=!1,Et.navigator&&Et.navigator.sendBeacon)try{n=Et.navigator.sendBeacon(e.v.toString(),"")}catch{}!n&&Et.Image&&((new Image).src=e.v,n=!0),n||(e.g=Vv(e.l,null),e.g.ha(e.v)),e.G=Date.now(),Gs(e)}Hw(t)}function $h(t){t.g&&(kv(t),t.g.cancel(),t.g=null)}function Nv(t){$h(t),t.u&&(Et.clearTimeout(t.u),t.u=null),Hh(t),t.i.cancel(),t.m&&("number"==typeof t.m&&Et.clearTimeout(t.m),t.m=null)}function Kg(t){if(!Fw(t.i)&&!t.m){t.m=!0;var e=t.Na;wh||tl(),el||(wh(),el=!0),Rg.add(e,t),t.C=0}}function Rv(t,e){var n;n=e?e.m:t.W++;const r=qs(t.I);sn(r,"SID",t.K),sn(r,"RID",n),sn(r,"AID",t.V),pu(t,r),t.o&&t.s&&Mv(r,t.o,t.s),n=new du(t,t.l,n,t.C+1),null===t.o&&(n.I=t.s),e&&(t.j=e.F.concat(t.j)),e=Pv(t,n,1e3),n.setTimeout(Math.round(.5*t.xa)+Math.round(.5*t.xa*Math.random())),bv(t.i,n),Eo(n,r,e)}function pu(t,e){t.na&&uv(t.na,function(n,r){sn(e,r,n)}),t.h&&Iv({},function(n,r){sn(e,r,n)})}function Pv(t,e,n){n=Math.min(t.j.length,n);var r=t.h?zn(t.h.Va,t.h,t):null;e:{var o=t.j;let c=-1;for(;;){const d=["count="+n];-1==c?0<n?(c=o[0].g,d.push("ofs="+c)):c=0:d.push("ofs="+c);let g=!0;for(let v=0;v<n;v++){let D=o[v].g;const T=o[v].map;if(D-=c,0>D)c=Math.max(0,o[v].g-100),g=!1;else try{jg(T,d,"req"+D+"_")}catch{r&&r(T)}}if(g){r=d.join("&");break e}}}return t=t.j.splice(0,n),e.F=t,r}function Zg(t){if(!t.g&&!t.u){t.ba=1;var e=t.Ma;wh||tl(),el||(wh(),el=!0),Rg.add(e,t),t.A=0}}function Yg(t){return!(t.g||t.u||3<=t.A||(t.ba++,t.u=Ah(zn(t.Ma,t),Fv(t,t.A)),t.A++,0))}function kv(t){null!=t.B&&(Et.clearTimeout(t.B),t.B=null)}function Ov(t){t.g=new du(t,t.l,"rpc",t.ba),null===t.o&&(t.g.I=t.s),t.g.O=0;var e=qs(t.wa);sn(e,"RID","rpc"),sn(e,"SID",t.K),sn(e,"AID",t.V),sn(e,"CI",t.G?"0":"1"),!t.G&&t.qa&&sn(e,"TO",t.qa),sn(e,"TYPE","xmlhttp"),pu(t,e),t.o&&t.s&&Mv(e,t.o,t.s),t.L&&t.g.setTimeout(t.L);var n=t.g;t=t.pa,n.L=1,n.v=al(qs(e)),n.s=null,n.S=!0,Nh(n,t)}function Hh(t){null!=t.v&&(Et.clearTimeout(t.v),t.v=null)}function Lv(t,e){var n=null;if(t.g==e){Hh(t),kv(t),t.g=null;var r=2}else{if(!Dv(t.i,e))return;n=e.F,Vw(t.i,e),r=1}if(0!=t.H)if(e.i)if(1==r){n=e.s?e.s.length:0,e=Date.now()-e.G;var o=t.C;fr(r=Og(),new xw(r,n)),Kg(t)}else Zg(t);else if(3==(o=e.o)||0==o&&0<e.ca||!(1==r&&function uS(t,e){return!(ll(t.i)>=t.i.j-(t.m?1:0)||(t.m?(t.j=e.F.concat(t.j),0):1==t.H||2==t.H||t.C>=(t.cb?0:t.eb)||(t.m=Ah(zn(t.Na,t,e),Fv(t,t.C)),t.C++,0)))}(t,e)||2==r&&Yg(t)))switch(n&&0<n.length&&(e=t.i,e.i=e.i.concat(n)),o){case 1:gu(t,5);break;case 4:gu(t,10);break;case 3:gu(t,6);break;default:gu(t,2)}}function Fv(t,e){let n=t.ab+Math.floor(Math.random()*t.hb);return t.isActive()||(n*=2),n*e}function gu(t,e){if(t.l.info("Error code "+e),2==e){var n=null;t.h&&(n=null);var r=zn(t.pb,t);n||(n=new la("//www.google.com/images/cleardot.gif"),Et.location&&"http"==Et.location.protocol||Rh(n,"https"),al(n)),function EM(t,e){const n=new kg;if(Et.Image){const r=new Image;r.onload=gh($g,n,r,"TestLoadImage: loaded",!0,e),r.onerror=gh($g,n,r,"TestLoadImage: error",!1,e),r.onabort=gh($g,n,r,"TestLoadImage: abort",!1,e),r.ontimeout=gh($g,n,r,"TestLoadImage: timeout",!1,e),Et.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=t}else e(!1)}(n.toString(),r)}else ni(2);t.H=0,t.h&&t.h.za(e),Hw(t),Nv(t)}function Hw(t){if(t.H=0,t.ma=[],t.h){const e=Bw(t.i);(0!=e.length||0!=t.j.length)&&(cw(t.ma,e),cw(t.ma,t.j),t.i.i.length=0,mh(t.j),t.j.length=0),t.h.ya()}}function zw(t,e,n){var r=n instanceof la?qs(n):new la(n);if(""!=r.g)e&&(r.g=e+"."+r.g),Ph(r,r.m);else{var o=Et.location;r=o.protocol,e=e?e+"."+o.hostname:o.hostname,o=+o.port;var c=new la(null);r&&Rh(c,r),e&&(c.g=e),o&&Ph(c,o),n&&(c.l=n),r=c}return e=t.Da,(n=t.F)&&e&&sn(r,n,e),sn(r,"VER",t.ra),pu(t,r),r}function Vv(t,e,n){if(e&&!t.J)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new Sn(n&&t.Ha&&!t.va?new Lh({ob:!0}):t.va)).Oa(t.J),e}function Qg(){}function zh(){if(uu&&!(10<=Number(gw)))throw Error("Environmental error: no available transport.")}function gi(t,e){hr.call(this),this.g=new qg(e),this.l=t,this.h=e&&e.messageUrlParams||null,t=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(t?t["X-Client-Protocol"]="webchannel":t={"X-Client-Protocol":"webchannel"}),this.g.s=t,t=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(t?t["X-WebChannel-Content-Type"]=e.messageContentType:t={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.Ca&&(t?t["X-WebChannel-Client-Profile"]=e.Ca:t={"X-WebChannel-Client-Profile":e.Ca}),this.g.U=t,(t=e&&e.cc)&&!Qc(t)&&(this.g.o=t),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!Qc(e)&&(this.g.F=e,null!==(t=this.h)&&e in t&&e in(t=this.h)&&delete t[e]),this.j=new mu(this)}function Bv(t){Mw.call(this),t.__headers__&&(this.headers=t.__headers__,this.statusCode=t.__status__,delete t.__headers__,delete t.__status__);var e=t.__sm__;if(e){e:{for(const n in e){t=n;break e}t=void 0}(this.i=t)&&(t=this.i,e=null!==e&&t in e?e[t]:void 0),this.data=e}else this.data=t}function Uv(){rl.call(this),this.status=1}function mu(t){this.g=t}function Yi(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.m=Array(this.blockSize),this.i=this.h=0,this.reset()}function Jg(t,e,n){n||(n=0);var r=Array(16);if("string"==typeof e)for(var o=0;16>o;++o)r[o]=e.charCodeAt(n++)|e.charCodeAt(n++)<<8|e.charCodeAt(n++)<<16|e.charCodeAt(n++)<<24;else for(o=0;16>o;++o)r[o]=e[n++]|e[n++]<<8|e[n++]<<16|e[n++]<<24;var c=t.g[3],d=(e=t.g[0])+(c^(n=t.g[1])&((o=t.g[2])^c))+r[0]+3614090360&4294967295;d=(n=(o=(c=(e=(n=(o=(c=(e=(n=(o=(c=(e=(n=(o=(c=(e=(n=(o=(c=(e=(n=(o=(c=(e=(n=(o=(c=(e=(n=(o=(c=(e=(n=(o=(c=(e=(n=(o=(c=(e=(n=(o=(c=(e=(n=(o=(c=(e=(n=(o=(c=(e=(n=(o=(c=(e=(n=(o=(c=(e=n+(d<<7&4294967295|d>>>25))+((d=c+(o^e&(n^o))+r[1]+3905402710&4294967295)<<12&4294967295|d>>>20))+((d=o+(n^c&(e^n))+r[2]+606105819&4294967295)<<17&4294967295|d>>>15))+((d=n+(e^o&(c^e))+r[3]+3250441966&4294967295)<<22&4294967295|d>>>10))+((d=e+(c^n&(o^c))+r[4]+4118548399&4294967295)<<7&4294967295|d>>>25))+((d=c+(o^e&(n^o))+r[5]+1200080426&4294967295)<<12&4294967295|d>>>20))+((d=o+(n^c&(e^n))+r[6]+2821735955&4294967295)<<17&4294967295|d>>>15))+((d=n+(e^o&(c^e))+r[7]+4249261313&4294967295)<<22&4294967295|d>>>10))+((d=e+(c^n&(o^c))+r[8]+1770035416&4294967295)<<7&4294967295|d>>>25))+((d=c+(o^e&(n^o))+r[9]+2336552879&4294967295)<<12&4294967295|d>>>20))+((d=o+(n^c&(e^n))+r[10]+4294925233&4294967295)<<17&4294967295|d>>>15))+((d=n+(e^o&(c^e))+r[11]+2304563134&4294967295)<<22&4294967295|d>>>10))+((d=e+(c^n&(o^c))+r[12]+1804603682&4294967295)<<7&4294967295|d>>>25))+((d=c+(o^e&(n^o))+r[13]+4254626195&4294967295)<<12&4294967295|d>>>20))+((d=o+(n^c&(e^n))+r[14]+2792965006&4294967295)<<17&4294967295|d>>>15))+((d=n+(e^o&(c^e))+r[15]+1236535329&4294967295)<<22&4294967295|d>>>10))+((d=e+(o^c&(n^o))+r[1]+4129170786&4294967295)<<5&4294967295|d>>>27))+((d=c+(n^o&(e^n))+r[6]+3225465664&4294967295)<<9&4294967295|d>>>23))+((d=o+(e^n&(c^e))+r[11]+643717713&4294967295)<<14&4294967295|d>>>18))+((d=n+(c^e&(o^c))+r[0]+3921069994&4294967295)<<20&4294967295|d>>>12))+((d=e+(o^c&(n^o))+r[5]+3593408605&4294967295)<<5&4294967295|d>>>27))+((d=c+(n^o&(e^n))+r[10]+38016083&4294967295)<<9&4294967295|d>>>23))+((d=o+(e^n&(c^e))+r[15]+3634488961&4294967295)<<14&4294967295|d>>>18))+((d=n+(c^e&(o^c))+r[4]+3889429448&4294967295)<<20&4294967295|d>>>12))+((d=e+(o^c&(n^o))+r[9]+568446438&4294967295)<<5&4294967295|d>>>27))+((d=c+(n^o&(e^n))+r[14]+3275163606&4294967295)<<9&4294967295|d>>>23))+((d=o+(e^n&(c^e))+r[3]+4107603335&4294967295)<<14&4294967295|d>>>18))+((d=n+(c^e&(o^c))+r[8]+1163531501&4294967295)<<20&4294967295|d>>>12))+((d=e+(o^c&(n^o))+r[13]+2850285829&4294967295)<<5&4294967295|d>>>27))+((d=c+(n^o&(e^n))+r[2]+4243563512&4294967295)<<9&4294967295|d>>>23))+((d=o+(e^n&(c^e))+r[7]+1735328473&4294967295)<<14&4294967295|d>>>18))+((d=n+(c^e&(o^c))+r[12]+2368359562&4294967295)<<20&4294967295|d>>>12))+((d=e+(n^o^c)+r[5]+4294588738&4294967295)<<4&4294967295|d>>>28))+((d=c+(e^n^o)+r[8]+2272392833&4294967295)<<11&4294967295|d>>>21))+((d=o+(c^e^n)+r[11]+1839030562&4294967295)<<16&4294967295|d>>>16))+((d=n+(o^c^e)+r[14]+4259657740&4294967295)<<23&4294967295|d>>>9))+((d=e+(n^o^c)+r[1]+2763975236&4294967295)<<4&4294967295|d>>>28))+((d=c+(e^n^o)+r[4]+1272893353&4294967295)<<11&4294967295|d>>>21))+((d=o+(c^e^n)+r[7]+4139469664&4294967295)<<16&4294967295|d>>>16))+((d=n+(o^c^e)+r[10]+3200236656&4294967295)<<23&4294967295|d>>>9))+((d=e+(n^o^c)+r[13]+681279174&4294967295)<<4&4294967295|d>>>28))+((d=c+(e^n^o)+r[0]+3936430074&4294967295)<<11&4294967295|d>>>21))+((d=o+(c^e^n)+r[3]+3572445317&4294967295)<<16&4294967295|d>>>16))+((d=n+(o^c^e)+r[6]+76029189&4294967295)<<23&4294967295|d>>>9))+((d=e+(n^o^c)+r[9]+3654602809&4294967295)<<4&4294967295|d>>>28))+((d=c+(e^n^o)+r[12]+3873151461&4294967295)<<11&4294967295|d>>>21))+((d=o+(c^e^n)+r[15]+530742520&4294967295)<<16&4294967295|d>>>16))+((d=n+(o^c^e)+r[2]+3299628645&4294967295)<<23&4294967295|d>>>9))+((d=e+(o^(n|~c))+r[0]+4096336452&4294967295)<<6&4294967295|d>>>26))+((d=c+(n^(e|~o))+r[7]+1126891415&4294967295)<<10&4294967295|d>>>22))+((d=o+(e^(c|~n))+r[14]+2878612391&4294967295)<<15&4294967295|d>>>17))+((d=n+(c^(o|~e))+r[5]+4237533241&4294967295)<<21&4294967295|d>>>11))+((d=e+(o^(n|~c))+r[12]+1700485571&4294967295)<<6&4294967295|d>>>26))+((d=c+(n^(e|~o))+r[3]+2399980690&4294967295)<<10&4294967295|d>>>22))+((d=o+(e^(c|~n))+r[10]+4293915773&4294967295)<<15&4294967295|d>>>17))+((d=n+(c^(o|~e))+r[1]+2240044497&4294967295)<<21&4294967295|d>>>11))+((d=e+(o^(n|~c))+r[8]+1873313359&4294967295)<<6&4294967295|d>>>26))+((d=c+(n^(e|~o))+r[15]+4264355552&4294967295)<<10&4294967295|d>>>22))+((d=o+(e^(c|~n))+r[6]+2734768916&4294967295)<<15&4294967295|d>>>17))+((d=n+(c^(o|~e))+r[13]+1309151649&4294967295)<<21&4294967295|d>>>11))+((c=(e=n+((d=e+(o^(n|~c))+r[4]+4149444226&4294967295)<<6&4294967295|d>>>26))+((d=c+(n^(e|~o))+r[11]+3174756917&4294967295)<<10&4294967295|d>>>22))^((o=c+((d=o+(e^(c|~n))+r[2]+718787259&4294967295)<<15&4294967295|d>>>17))|~e))+r[9]+3951481745&4294967295,t.g[0]=t.g[0]+e&4294967295,t.g[1]=t.g[1]+(o+(d<<21&4294967295|d>>>11))&4294967295,t.g[2]=t.g[2]+o&4294967295,t.g[3]=t.g[3]+c&4294967295}function Kt(t,e){this.h=e;for(var n=[],r=!0,o=t.length-1;0<=o;o--){var c=0|t[o];r&&c==e||(n[o]=c,r=!1)}this.g=n}(Ge=Sn.prototype).Oa=function(t){this.M=t},Ge.ha=function(t,e,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.I+"; newUri="+t);e=e?e.toUpperCase():"GET",this.I=t,this.j="",this.m=0,this.F=!1,this.h=!0,this.g=this.u?this.u.g():_v.g(),this.C=function nS(t){return t.h||(t.h=t.i())}(this.u?this.u:_v),this.g.onreadystatechange=zn(this.La,this);try{this.G=!0,this.g.open(e,String(t),!0),this.G=!1}catch(c){return void xv(this,c)}if(t=n||"",n=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var o in r)n.set(o,r[o]);else{if("function"!=typeof r.keys||"function"!=typeof r.get)throw Error("Unknown input type for opt_headers: "+String(r));for(const c of r.keys())n.set(c,r.get(c))}r=Array.from(n.keys()).find(c=>"content-type"==c.toLowerCase()),o=Et.FormData&&t instanceof Et.FormData,!(0<=rv(oS,e))||r||o||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[c,d]of n)this.g.setRequestHeader(c,d);this.K&&(this.g.responseType=this.K),"withCredentials"in this.g&&this.g.withCredentials!==this.M&&(this.g.withCredentials=this.M);try{Bh(this),0<this.B&&((this.L=function aS(t){return uu&&"number"==typeof t.timeout&&void 0!==t.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=zn(this.ua,this)):this.A=pv(this.ua,this.B,this)),this.v=!0,this.g.send(t),this.v=!1}catch(c){xv(this,c)}},Ge.ua=function(){typeof It<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,fr(this,"timeout"),this.abort(8))},Ge.abort=function(t){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=t||7,fr(this,"complete"),fr(this,"abort"),Gg(this))},Ge.N=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),Gg(this,!0)),Sn.$.N.call(this)},Ge.La=function(){this.s||(this.G||this.v||this.l?zg(this):this.kb())},Ge.kb=function(){zg(this)},Ge.isActive=function(){return!!this.g},Ge.da=function(){try{return 2<Oi(this)?this.g.status:-1}catch{return-1}},Ge.ja=function(){try{return this.g?this.g.responseText:""}catch{return""}},Ge.Wa=function(t){if(this.g){var e=this.g.responseText;return t&&0==e.indexOf(t)&&(e=e.substring(t.length)),Uw(e)}},Ge.Ia=function(){return this.m},Ge.Sa=function(){return"string"==typeof this.j?this.j:String(this.j)},(Ge=qg.prototype).ra=8,Ge.H=1,Ge.Na=function(t){if(this.m)if(this.m=null,1==this.H){if(!t){this.W=Math.floor(1e5*Math.random()),t=this.W++;const o=new du(this,this.l,t);let c=this.s;if(this.U&&(c?(c=ys(c),mw(c,this.U)):c=this.U),null!==this.o||this.O||(o.I=c,c=null),this.P)e:{for(var e=0,n=0;n<this.j.length;n++){var r=this.j[n];if(void 0===(r="__data__"in r.map&&"string"==typeof(r=r.map.__data__)?r.length:void 0))break;if(4096<(e+=r)){e=n;break e}if(4096===e||n===this.j.length-1){e=n+1;break e}}e=1e3}else e=1e3;e=Pv(this,o,e),sn(n=qs(this.I),"RID",t),sn(n,"CVER",22),this.F&&sn(n,"X-HTTP-Session-Id",this.F),pu(this,n),c&&(this.O?e="headers="+encodeURIComponent(String($w(c)))+"&"+e:this.o&&Mv(n,this.o,c)),bv(this.i,o),this.bb&&sn(n,"TYPE","init"),this.P?(sn(n,"$req",e),sn(n,"SID","null"),o.aa=!0,Eo(o,n,null)):Eo(o,n,e),this.H=2}}else 3==this.H&&(t?Rv(this,t):0==this.j.length||Fw(this.i)||Rv(this))},Ge.Ma=function(){if(this.u=null,Ov(this),this.ca&&!(this.M||null==this.g||0>=this.S)){var t=2*this.S;this.l.info("BP detection timer enabled: "+t),this.B=Ah(zn(this.jb,this),t)}},Ge.jb=function(){this.B&&(this.B=null,this.l.info("BP detection timeout reached."),this.l.info("Buffering proxy detected and switch to long-polling!"),this.G=!1,this.M=!0,ni(10),$h(this),Ov(this))},Ge.ib=function(){null!=this.v&&(this.v=null,$h(this),Yg(this),ni(19))},Ge.pb=function(t){t?(this.l.info("Successfully pinged google.com"),ni(2)):(this.l.info("Failed to ping google.com"),ni(1))},Ge.isActive=function(){return!!this.h&&this.h.isActive(this)},(Ge=Qg.prototype).Ba=function(){},Ge.Aa=function(){},Ge.za=function(){},Ge.ya=function(){},Ge.isActive=function(){return!0},Ge.Va=function(){},zh.prototype.g=function(t,e){return new gi(t,e)},Gn(gi,hr),gi.prototype.m=function(){this.g.h=this.j,this.A&&(this.g.J=!0);var t=this.g,e=this.l,n=this.h||void 0;ni(0),t.Y=e,t.na=n||{},t.G=t.aa,t.I=zw(t,null,t.Y),Kg(t)},gi.prototype.close=function(){jh(this.g)},gi.prototype.u=function(t){var e=this.g;if("string"==typeof t){var n={};n.__data__=t,t=n}else this.v&&((n={}).__data__=Xc(t),t=n);e.j.push(new class{constructor(t,e){this.g=t,this.map=e}}(e.fb++,t)),3==e.H&&Kg(e)},gi.prototype.N=function(){this.g.h=null,delete this.j,jh(this.g),delete this.g,gi.$.N.call(this)},Gn(Bv,Mw),Gn(Uv,rl),Gn(mu,Qg),mu.prototype.Ba=function(){fr(this.g,"a")},mu.prototype.Aa=function(t){fr(this.g,new Bv(t))},mu.prototype.za=function(t){fr(this.g,new Uv)},mu.prototype.ya=function(){fr(this.g,"b")},Gn(Yi,function Gw(){this.blockSize=-1}),Yi.prototype.reset=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.i=this.h=0},Yi.prototype.j=function(t,e){void 0===e&&(e=t.length);for(var n=e-this.blockSize,r=this.m,o=this.h,c=0;c<e;){if(0==o)for(;c<=n;)Jg(this,t,c),c+=this.blockSize;if("string"==typeof t){for(;c<e;)if(r[o++]=t.charCodeAt(c++),o==this.blockSize){Jg(this,r),o=0;break}}else for(;c<e;)if(r[o++]=t[c++],o==this.blockSize){Jg(this,r),o=0;break}}this.h=o,this.i+=e},Yi.prototype.l=function(){var t=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);t[0]=128;for(var e=1;e<t.length-8;++e)t[e]=0;var n=8*this.i;for(e=t.length-8;e<t.length;++e)t[e]=255&n,n/=256;for(this.j(t),t=Array(16),e=n=0;4>e;++e)for(var r=0;32>r;r+=8)t[n++]=this.g[e]>>>r&255;return t};var fa={};function jv(t){return-128<=t&&128>t?function GC(t,e){var n=fa;return Object.prototype.hasOwnProperty.call(n,t)?n[t]:n[t]=e(t)}(t,function(e){return new Kt([0|e],0>e?-1:0)}):new Kt([0|t],0>t?-1:0)}function Ks(t){if(isNaN(t)||!isFinite(t))return pa;if(0>t)return xr(Ks(-t));for(var e=[],n=1,r=0;t>=n;r++)e[r]=t/n|0,n*=Do;return new Kt(e,0)}var Do=4294967296,pa=jv(0),$v=jv(1),em=jv(16777216);function ga(t){if(0!=t.h)return!1;for(var e=0;e<t.g.length;e++)if(0!=t.g[e])return!1;return!0}function _s(t){return-1==t.h}function xr(t){for(var e=t.g.length,n=[],r=0;r<e;r++)n[r]=~t.g[r];return new Kt(n,~t.h).add($v)}function tm(t,e){return t.add(xr(e))}function Gh(t,e){for(;(65535&t[e])!=t[e];)t[e+1]+=t[e]>>>16,t[e]&=65535,e++}function Wh(t,e){this.g=t,this.h=e}function On(t,e){if(ga(e))throw Error("division by zero");if(ga(t))return new Wh(pa,pa);if(_s(t))return e=On(xr(t),e),new Wh(xr(e.g),xr(e.h));if(_s(e))return e=On(t,xr(e)),new Wh(xr(e.g),e.h);if(30<t.g.length){if(_s(t)||_s(e))throw Error("slowDivide_ only works with positive integers.");for(var n=$v,r=e;0>=r.X(t);)n=Hv(n),r=Hv(r);var o=hl(n,1),c=hl(r,1);for(r=hl(r,2),n=hl(n,2);!ga(r);){var d=c.add(r);0>=d.X(t)&&(o=o.add(n),c=d),r=hl(r,1),n=hl(n,1)}return e=tm(t,o.R(e)),new Wh(o,e)}for(o=pa;0<=t.X(e);){for(n=Math.max(1,Math.floor(t.ea()/e.ea())),r=48>=(r=Math.ceil(Math.log(n)/Math.LN2))?1:Math.pow(2,r-48),d=(c=Ks(n)).R(e);_s(d)||0<d.X(t);)d=(c=Ks(n-=r)).R(e);ga(c)&&(c=$v),o=o.add(c),t=tm(t,d)}return new Wh(o,t)}function Hv(t){for(var e=t.g.length+1,n=[],r=0;r<e;r++)n[r]=t.D(r)<<1|t.D(r-1)>>>31;return new Kt(n,t.h)}function hl(t,e){var n=e>>5;e%=32;for(var r=t.g.length-n,o=[],c=0;c<r;c++)o[c]=0<e?t.D(c+n)>>>e|t.D(c+n+1)<<32-e:t.D(c+n);return new Kt(o,t.h)}(Ge=Kt.prototype).ea=function(){if(_s(this))return-xr(this).ea();for(var t=0,e=1,n=0;n<this.g.length;n++){var r=this.D(n);t+=(0<=r?r:Do+r)*e,e*=Do}return t},Ge.toString=function(t){if(2>(t=t||10)||36<t)throw Error("radix out of range: "+t);if(ga(this))return"0";if(_s(this))return"-"+xr(this).toString(t);for(var e=Ks(Math.pow(t,6)),n=this,r="";;){var o=On(n,e).g,c=((0<(n=tm(n,o.R(e))).g.length?n.g[0]:n.h)>>>0).toString(t);if(ga(n=o))return c+r;for(;6>c.length;)c="0"+c;r=c+r}},Ge.D=function(t){return 0>t?0:t<this.g.length?this.g[t]:this.h},Ge.X=function(t){return _s(t=tm(this,t))?-1:ga(t)?0:1},Ge.abs=function(){return _s(this)?xr(this):this},Ge.add=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0,o=0;o<=e;o++){var c=r+(65535&this.D(o))+(65535&t.D(o)),d=(c>>>16)+(this.D(o)>>>16)+(t.D(o)>>>16);r=d>>>16,n[o]=(d&=65535)<<16|(c&=65535)}return new Kt(n,-2147483648&n[n.length-1]?-1:0)},Ge.R=function(t){if(ga(this)||ga(t))return pa;if(_s(this))return _s(t)?xr(this).R(xr(t)):xr(xr(this).R(t));if(_s(t))return xr(this.R(xr(t)));if(0>this.X(em)&&0>t.X(em))return Ks(this.ea()*t.ea());for(var e=this.g.length+t.g.length,n=[],r=0;r<2*e;r++)n[r]=0;for(r=0;r<this.g.length;r++)for(var o=0;o<t.g.length;o++){var c=this.D(r)>>>16,d=65535&this.D(r),g=t.D(o)>>>16,v=65535&t.D(o);n[2*r+2*o]+=d*v,Gh(n,2*r+2*o),n[2*r+2*o+1]+=c*v,Gh(n,2*r+2*o+1),n[2*r+2*o+1]+=d*g,Gh(n,2*r+2*o+1),n[2*r+2*o+2]+=c*g,Gh(n,2*r+2*o+2)}for(r=0;r<e;r++)n[r]=n[2*r+1]<<16|n[2*r];for(r=e;r<2*e;r++)n[r]=0;return new Kt(n,0)},Ge.gb=function(t){return On(this,t).h},Ge.and=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0;r<e;r++)n[r]=this.D(r)&t.D(r);return new Kt(n,this.h&t.h)},Ge.or=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0;r<e;r++)n[r]=this.D(r)|t.D(r);return new Kt(n,this.h|t.h)},Ge.xor=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0;r<e;r++)n[r]=this.D(r)^t.D(r);return new Kt(n,this.h^t.h)},zh.prototype.createWebChannel=zh.prototype.g,gi.prototype.send=gi.prototype.u,gi.prototype.open=gi.prototype.m,gi.prototype.close=gi.prototype.close,xh.NO_ERROR=0,xh.TIMEOUT=8,xh.HTTP_ERROR=6,gv.COMPLETE="complete",yv.EventType=Mh,Mh.OPEN="a",Mh.CLOSE="b",Mh.ERROR="c",Mh.MESSAGE="d",hr.prototype.listen=hr.prototype.O,Sn.prototype.listenOnce=Sn.prototype.P,Sn.prototype.getLastError=Sn.prototype.Sa,Sn.prototype.getLastErrorCode=Sn.prototype.Ia,Sn.prototype.getStatus=Sn.prototype.da,Sn.prototype.getResponseJson=Sn.prototype.Wa,Sn.prototype.getResponseText=Sn.prototype.ja,Sn.prototype.send=Sn.prototype.ha,Sn.prototype.setWithCredentials=Sn.prototype.Oa,Yi.prototype.digest=Yi.prototype.l,Yi.prototype.reset=Yi.prototype.reset,Yi.prototype.update=Yi.prototype.j,Kt.prototype.add=Kt.prototype.add,Kt.prototype.multiply=Kt.prototype.R,Kt.prototype.modulo=Kt.prototype.gb,Kt.prototype.compare=Kt.prototype.X,Kt.prototype.toNumber=Kt.prototype.ea,Kt.prototype.toString=Kt.prototype.toString,Kt.prototype.getBits=Kt.prototype.D,Kt.fromNumber=Ks,Kt.fromString=function Xg(t,e){if(0==t.length)throw Error("number format error: empty string");if(2>(e=e||10)||36<e)throw Error("radix out of range: "+e);if("-"==t.charAt(0))return xr(Xg(t.substring(1),e));if(0<=t.indexOf("-"))throw Error('number format error: interior "-" character');for(var n=Ks(Math.pow(e,8)),r=pa,o=0;o<t.length;o+=8){var c=Math.min(8,t.length-o),d=parseInt(t.substring(o,o+c),e);8>c?(c=Ks(Math.pow(e,c)),r=r.R(c).add(Ks(d))):r=(r=r.R(n)).add(Ks(d))}return r};var cS=Ki.createWebChannelTransport=function(){return new zh},Ww=Ki.getStatEventTarget=function(){return Og()},zv=Ki.ErrorCode=xh,qw=Ki.EventType=gv,Kw=Ki.Event=lu,yu=Ki.Stat={xb:0,Ab:1,Bb:2,Ub:3,Zb:4,Wb:5,Xb:6,Vb:7,Tb:8,Yb:9,PROXY:10,NOPROXY:11,Rb:12,Nb:13,Ob:14,Mb:15,Pb:16,Qb:17,tb:18,sb:19,ub:20},lS=Ki.FetchXmlHttpFactory=Lh,nm=Ki.WebChannel=yv,Zw=Ki.XhrIo=Sn,dS=Ki.Md5=Yi,_u=Ki.Integer=Kt;const hS="@firebase/firestore";class rr{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}rr.UNAUTHENTICATED=new rr(null),rr.GOOGLE_CREDENTIALS=new rr("google-credentials-uid"),rr.FIRST_PARTY=new rr("first-party-uid"),rr.MOCK_USER=new rr("mock-user");let vu="9.23.0";const Mr=new Jr.Yd("@firebase/firestore");function Gv(){return Mr.logLevel}function ve(t,...e){if(Mr.logLevel<=Jr.in.DEBUG){const n=e.map(rm);Mr.debug(`Firestore (${vu}): ${t}`,...n)}}function Yt(t,...e){if(Mr.logLevel<=Jr.in.ERROR){const n=e.map(rm);Mr.error(`Firestore (${vu}): ${t}`,...n)}}function Ln(t,...e){if(Mr.logLevel<=Jr.in.WARN){const n=e.map(rm);Mr.warn(`Firestore (${vu}): ${t}`,...n)}}function rm(t){if("string"==typeof t)return t;try{return JSON.stringify(t)}catch{return t}}function Ke(t="Unexpected state"){const e=`FIRESTORE (${vu}) INTERNAL ASSERTION FAILED: `+t;throw Yt(e),new Error(e)}function rt(t,e){t||Ke()}function $e(t,e){return t}const ee={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ge extends tt.ZR{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class An{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}class Yw{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class Qw{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(rr.UNAUTHENTICATED))}shutdown(){}}class gS{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class mS{constructor(e){this.t=e,this.currentUser=rr.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){var r=this;let o=this.i;const c=D=>this.i!==o?(o=this.i,n(D)):Promise.resolve();let d=new An;this.o=()=>{this.i++,this.currentUser=this.u(),d.resolve(),d=new An,e.enqueueRetryable(()=>c(this.currentUser))};const g=()=>{const D=d;e.enqueueRetryable((0,z.Z)(function*(){yield D.promise,yield c(r.currentUser)}))},v=D=>{ve("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=D,this.auth.addAuthTokenListener(this.o),g()};this.t.onInit(D=>v(D)),setTimeout(()=>{if(!this.auth){const D=this.t.getImmediate({optional:!0});D?v(D):(ve("FirebaseAuthCredentialsProvider","Auth not yet detected"),d.resolve(),d=new An)}},0),g()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(ve("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(rt("string"==typeof r.accessToken),new Yw(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return rt(null===e||"string"==typeof e),new rr(e)}}class Jw{constructor(e,n,r){this.h=e,this.l=n,this.m=r,this.type="FirstParty",this.user=rr.FIRST_PARTY,this.g=new Map}p(){return this.m?this.m():null}get headers(){this.g.set("X-Goog-AuthUser",this.h);const e=this.p();return e&&this.g.set("Authorization",e),this.l&&this.g.set("X-Goog-Iam-Authorization-Token",this.l),this.g}}class Xw{constructor(e,n,r){this.h=e,this.l=n,this.m=r}getToken(){return Promise.resolve(new Jw(this.h,this.l,this.m))}start(e,n){e.enqueueRetryable(()=>n(rr.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class qh{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class yS{constructor(e){this.I=e,this.forceRefresh=!1,this.appCheck=null,this.T=null}start(e,n){const r=c=>{null!=c.error&&ve("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${c.error.message}`);const d=c.token!==this.T;return this.T=c.token,ve("FirebaseAppCheckTokenProvider",`Received ${d?"new":"existing"} token.`),d?n(c.token):Promise.resolve()};this.o=c=>{e.enqueueRetryable(()=>r(c))};const o=c=>{ve("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=c,this.appCheck.addTokenListener(this.o)};this.I.onInit(c=>o(c)),setTimeout(()=>{if(!this.appCheck){const c=this.I.getImmediate({optional:!0});c?o(c):ve("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(rt("string"==typeof n.token),this.T=n.token,new qh(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function eD(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}class Wv{static A(){const n=62*Math.floor(256/62);let r="";for(;r.length<20;){const o=eD(40);for(let c=0;c<o.length;++c)r.length<20&&o[c]<n&&(r+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".charAt(o[c]%62))}return r}}function wt(t,e){return t<e?-1:t>e?1:0}function fl(t,e,n){return t.length===e.length&&t.every((r,o)=>n(r,e[o]))}function qv(t){return t+"\0"}class on{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new ge(ee.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new ge(ee.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new ge(ee.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new ge(ee.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return on.fromMillis(Date.now())}static fromDate(e){return on.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*n));return new on(n,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?wt(this.nanoseconds,e.nanoseconds):wt(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class it{constructor(e){this.timestamp=e}static fromTimestamp(e){return new it(e)}static min(){return new it(new on(0,0))}static max(){return new it(new on(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class pl{constructor(e,n,r){void 0===n?n=0:n>e.length&&Ke(),void 0===r?r=e.length-n:r>e.length-n&&Ke(),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return 0===pl.comparator(this,e)}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof pl?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let o=0;o<r;o++){const c=e.get(o),d=n.get(o);if(c<d)return-1;if(c>d)return 1}return e.length<n.length?-1:e.length>n.length?1:0}}class Ut extends pl{construct(e,n,r){return new Ut(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new ge(ee.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(o=>o.length>0))}return new Ut(n)}static emptyPath(){return new Ut([])}}const tD=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class xn extends pl{construct(e,n,r){return new xn(e,n,r)}static isValidIdentifier(e){return tD.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),xn.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new xn(["__name__"])}static fromServerFormat(e){const n=[];let r="",o=0;const c=()=>{if(0===r.length)throw new ge(ee.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let d=!1;for(;o<e.length;){const g=e[o];if("\\"===g){if(o+1===e.length)throw new ge(ee.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const v=e[o+1];if("\\"!==v&&"."!==v&&"`"!==v)throw new ge(ee.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=v,o+=2}else"`"===g?(d=!d,o++):"."!==g||d?(r+=g,o++):(c(),o++)}if(c(),d)throw new ge(ee.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new xn(n)}static emptyPath(){return new xn([])}}class Be{constructor(e){this.path=e}static fromPath(e){return new Be(Ut.fromString(e))}static fromName(e){return new Be(Ut.fromString(e).popFirst(5))}static empty(){return new Be(Ut.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===Ut.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,n){return Ut.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Be(new Ut(e.slice()))}}class Kh{constructor(e,n,r,o){this.indexId=e,this.collectionGroup=n,this.fields=r,this.indexState=o}}function im(t){return t.fields.find(e=>2===e.kind)}function Iu(t){return t.fields.filter(e=>2!==e.kind)}Kh.UNKNOWN_ID=-1;class sm{constructor(e,n){this.fieldPath=e,this.kind=n}}class Zh{constructor(e,n){this.sequenceNumber=e,this.offset=n}static empty(){return new Zh(0,Li.min())}}function nD(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,o=it.fromTimestamp(1e9===r?new on(n+1,0):new on(n,r));return new Li(o,Be.empty(),e)}function rD(t){return new Li(t.readTime,t.key,-1)}class Li{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new Li(it.min(),Be.empty(),-1)}static max(){return new Li(it.max(),Be.empty(),-1)}}function Kv(t,e){let n=t.readTime.compareTo(e.readTime);return 0!==n?n:(n=Be.comparator(t.documentKey,e.documentKey),0!==n?n:wt(t.largestBatchId,e.largestBatchId))}const iD="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class sD{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}function ma(t){return Zv.apply(this,arguments)}function Zv(){return Zv=(0,z.Z)(function*(t){if(t.code!==ee.FAILED_PRECONDITION||t.message!==iD)throw t;ve("LocalStore","Unexpectedly lost primary lease")}),Zv.apply(this,arguments)}class Q{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&Ke(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new Q((r,o)=>{this.nextCallback=c=>{this.wrapSuccess(e,c).next(r,o)},this.catchCallback=c=>{this.wrapFailure(n,c).next(r,o)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof Q?n:Q.resolve(n)}catch(n){return Q.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):Q.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):Q.reject(n)}static resolve(e){return new Q((n,r)=>{n(e)})}static reject(e){return new Q((n,r)=>{r(e)})}static waitFor(e){return new Q((n,r)=>{let o=0,c=0,d=!1;e.forEach(g=>{++o,g.next(()=>{++c,d&&c===o&&n()},v=>r(v))}),d=!0,c===o&&n()})}static or(e){let n=Q.resolve(!1);for(const r of e)n=n.next(o=>o?Q.resolve(o):r());return n}static forEach(e,n){const r=[];return e.forEach((o,c)=>{r.push(n.call(this,o,c))}),this.waitFor(r)}static mapArray(e,n){return new Q((r,o)=>{const c=e.length,d=new Array(c);let g=0;for(let v=0;v<c;v++){const D=v;n(e[D]).next(T=>{d[D]=T,++g,g===c&&r(d)},T=>o(T))}})}static doWhile(e,n){return new Q((r,o)=>{const c=()=>{!0===e()?n().next(()=>{c()},o):r()};c()})}}class om{constructor(e,n){this.action=e,this.transaction=n,this.aborted=!1,this.v=new An,this.transaction.oncomplete=()=>{this.v.resolve()},this.transaction.onabort=()=>{n.error?this.v.reject(new Yh(e,n.error)):this.v.resolve()},this.transaction.onerror=r=>{const o=am(r.target.error);this.v.reject(new Yh(e,o))}}static open(e,n,r,o){try{return new om(n,e.transaction(o,r))}catch(c){throw new Yh(n,c)}}get R(){return this.v.promise}abort(e){e&&this.v.reject(e),this.aborted||(ve("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}P(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const n=this.transaction.objectStore(e);return new oD(n)}}class vs{constructor(e,n,r){this.name=e,this.version=n,this.V=r,12.2===vs.S((0,tt.z$)())&&Yt("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return ve("SimpleDb","Removing database:",e),ya(window.indexedDB.deleteDatabase(e)).toPromise()}static D(){if(!(0,tt.hl)())return!1;if(vs.C())return!0;const e=(0,tt.z$)(),n=vs.S(e),r=0<n&&n<10,o=vs.N(e),c=0<o&&o<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||c)}static C(){var e;return typeof process<"u"&&"YES"===(null===(e=process.env)||void 0===e?void 0:e.k)}static M(e,n){return e.store(n)}static S(e){const n=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=n?n[1].split("_").slice(0,2).join("."):"-1";return Number(r)}static N(e){const n=e.match(/Android ([\d.]+)/i),r=n?n[1].split(".").slice(0,2).join("."):"-1";return Number(r)}$(e){var n=this;return(0,z.Z)(function*(){return n.db||(ve("SimpleDb","Opening database:",n.name),n.db=yield new Promise((r,o)=>{const c=indexedDB.open(n.name,n.version);c.onsuccess=d=>{r(d.target.result)},c.onblocked=()=>{o(new Yh(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},c.onerror=d=>{const g=d.target.error;o("VersionError"===g.name?new ge(ee.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===g.name?new ge(ee.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+g):new Yh(e,g))},c.onupgradeneeded=d=>{ve("SimpleDb",'Database "'+n.name+'" requires upgrade from version:',d.oldVersion),n.V.O(d.target.result,c.transaction,d.oldVersion,n.version).next(()=>{ve("SimpleDb","Database upgrade to version "+n.version+" complete")})}})),n.F&&(n.db.onversionchange=r=>n.F(r)),n.db})()}B(e){this.F=e,this.db&&(this.db.onversionchange=n=>e(n))}runTransaction(e,n,r,o){var c=this;return(0,z.Z)(function*(){const d="readonly"===n;let g=0;for(;;){++g;try{c.db=yield c.$(e);const v=om.open(c.db,e,d?"readonly":"readwrite",r),D=o(v).next(T=>(v.P(),T)).catch(T=>(v.abort(T),Q.reject(T))).toPromise();return D.catch(()=>{}),yield v.R,D}catch(v){const D=v,T="FirebaseError"!==D.name&&g<3;if(ve("SimpleDb","Transaction failed with error:",D.message,"Retrying:",T),c.close(),!T)return Promise.reject(D)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}class ES{constructor(e){this.L=e,this.q=!1,this.U=null}get isDone(){return this.q}get K(){return this.U}set cursor(e){this.L=e}done(){this.q=!0}G(e){this.U=e}delete(){return ya(this.L.delete())}}class Yh extends ge{constructor(e,n){super(ee.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${n}`),this.name="IndexedDbTransactionError"}}function bo(t){return"IndexedDbTransactionError"===t.name}class oD{constructor(e){this.store=e}put(e,n){let r;return void 0!==n?(ve("SimpleDb","PUT",this.store.name,e,n),r=this.store.put(n,e)):(ve("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),ya(r)}add(e){return ve("SimpleDb","ADD",this.store.name,e,e),ya(this.store.add(e))}get(e){return ya(this.store.get(e)).next(n=>(void 0===n&&(n=null),ve("SimpleDb","GET",this.store.name,e,n),n))}delete(e){return ve("SimpleDb","DELETE",this.store.name,e),ya(this.store.delete(e))}count(){return ve("SimpleDb","COUNT",this.store.name),ya(this.store.count())}j(e,n){const r=this.options(e,n);if(r.index||"function"!=typeof this.store.getAll){const o=this.cursor(r),c=[];return this.W(o,(d,g)=>{c.push(g)}).next(()=>c)}{const o=this.store.getAll(r.range);return new Q((c,d)=>{o.onerror=g=>{d(g.target.error)},o.onsuccess=g=>{c(g.target.result)}})}}H(e,n){const r=this.store.getAll(e,null===n?void 0:n);return new Q((o,c)=>{r.onerror=d=>{c(d.target.error)},r.onsuccess=d=>{o(d.target.result)}})}J(e,n){ve("SimpleDb","DELETE ALL",this.store.name);const r=this.options(e,n);r.Y=!1;const o=this.cursor(r);return this.W(o,(c,d,g)=>g.delete())}X(e,n){let r;n?r=e:(r={},n=e);const o=this.cursor(r);return this.W(o,n)}Z(e){const n=this.cursor({});return new Q((r,o)=>{n.onerror=c=>{const d=am(c.target.error);o(d)},n.onsuccess=c=>{const d=c.target.result;d?e(d.primaryKey,d.value).next(g=>{g?d.continue():r()}):r()}})}W(e,n){const r=[];return new Q((o,c)=>{e.onerror=d=>{c(d.target.error)},e.onsuccess=d=>{const g=d.target.result;if(!g)return void o();const v=new ES(g),D=n(g.primaryKey,g.value,v);if(D instanceof Q){const T=D.catch(A=>(v.done(),Q.reject(A)));r.push(T)}v.isDone?o():null===v.K?g.continue():g.continue(v.K)}}).next(()=>Q.waitFor(r))}options(e,n){let r;return void 0!==e&&("string"==typeof e?r=e:n=e),{index:r,range:n}}cursor(e){let n="next";if(e.reverse&&(n="prev"),e.index){const r=this.store.index(e.index);return e.Y?r.openKeyCursor(e.range,n):r.openCursor(e.range,n)}return this.store.openCursor(e.range,n)}}function ya(t){return new Q((e,n)=>{t.onsuccess=r=>{e(r.target.result)},t.onerror=r=>{const o=am(r.target.error);n(o)}})}let Yv=!1;function am(t){const e=vs.S((0,tt.z$)());if(e>=12.2&&e<13){const n="An internal error was encountered in the Indexed Database server";if(t.message.indexOf(n)>=0){const r=new ge("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${n}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return Yv||(Yv=!0,setTimeout(()=>{throw r},0)),r}}return t}class aD{constructor(e,n){this.asyncQueue=e,this.tt=n,this.task=null}start(){this.et(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return null!==this.task}et(e){var n=this;ve("IndexBackiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(0,z.Z)(function*(){n.task=null;try{ve("IndexBackiller",`Documents written: ${yield n.tt.nt()}`)}catch(r){bo(r)?ve("IndexBackiller","Ignoring IndexedDB error during index backfill: ",r):yield ma(r)}yield n.et(6e4)}))}}class uD{constructor(e,n){this.localStore=e,this.persistence=n}nt(e=50){var n=this;return(0,z.Z)(function*(){return n.persistence.runTransaction("Backfill Indexes","readwrite-primary",r=>n.st(r,e))})()}st(e,n){const r=new Set;let o=n,c=!0;return Q.doWhile(()=>!0===c&&o>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(d=>{if(null!==d&&!r.has(d))return ve("IndexBackiller",`Processing collection: ${d}`),this.it(e,d,o).next(g=>{o-=g,r.add(d)});c=!1})).next(()=>n-o)}it(e,n,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,n).next(o=>this.localStore.localDocuments.getNextDocuments(e,n,o,r).next(c=>{const d=c.changes;return this.localStore.indexManager.updateIndexEntries(e,d).next(()=>this.rt(o,c)).next(g=>(ve("IndexBackiller",`Updating offset: ${g}`),this.localStore.indexManager.updateCollectionGroup(e,n,g))).next(()=>d.size)}))}rt(e,n){let r=e;return n.changes.forEach((o,c)=>{const d=rD(c);Kv(d,r)>0&&(r=d)}),new Li(r.readTime,r.documentKey,Math.max(n.batchId,e.largestBatchId))}}let mi=(()=>{class t{constructor(n,r){this.previousValue=n,r&&(r.sequenceNumberHandler=o=>this.ot(o),this.ut=o=>r.writeSequenceNumber(o))}ot(n){return this.previousValue=Math.max(n,this.previousValue),this.previousValue}next(){const n=++this.previousValue;return this.ut&&this.ut(n),n}}return t.ct=-1,t})();function gl(t){return null==t}function ml(t){return 0===t&&1/t==-1/0}function Qv(t){return"number"==typeof t&&Number.isInteger(t)&&!ml(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}function Fn(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=cD(e)),e=wS(t.get(n),e);return cD(e)}function wS(t,e){let n=e;const r=t.length;for(let o=0;o<r;o++){const c=t.charAt(o);switch(c){case"\0":n+="\x01\x10";break;case"\x01":n+="\x01\x11";break;default:n+=c}}return n}function cD(t){return t+"\x01\x01"}function ri(t){const e=t.length;if(rt(e>=2),2===e)return rt("\x01"===t.charAt(0)&&"\x01"===t.charAt(1)),Ut.emptyPath();const n=e-2,r=[];let o="";for(let c=0;c<e;){const d=t.indexOf("\x01",c);switch((d<0||d>n)&&Ke(),t.charAt(d+1)){case"\x01":const g=t.substring(c,d);let v;0===o.length?v=g:(o+=g,v=o,o=""),r.push(v);break;case"\x10":o+=t.substring(c,d),o+="\0";break;case"\x11":o+=t.substring(c,d+1);break;default:Ke()}c=d+2}return new Ut(r)}const DS=["userId","batchId"];function yl(t,e){return[t,Fn(e)]}function bS(t,e,n){return[t,Fn(e),n]}const lD={},dD=["prefixPath","collectionGroup","readTime","documentId"],wM=["prefixPath","collectionGroup","documentId"],_l=["collectionGroup","readTime","prefixPath","documentId"],TS=["canonicalId","targetId"],CS=["targetId","path"],SS=["path","targetId"],vl=["collectionId","parent"],AS=["indexId","uid"],um=["uid","sequenceNumber"],cm=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],yi=["indexId","uid","orderedDocumentKey"],DM=["userId","collectionPath","documentId"],hD=["userId","collectionPath","largestBatchId"],fD=["userId","collectionGroup","largestBatchId"],pD=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],gD=[...pD,"documentOverlays"],Jv=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],Xv=Jv,mD=[...Xv,"indexConfiguration","indexState","indexEntries"];class eI extends sD{constructor(e,n){super(),this.ht=e,this.currentSequenceNumber=n}}function pr(t,e){const n=$e(t);return vs.M(n.ht,e)}function yD(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Qi(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function _D(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}class an{constructor(e,n){this.comparator=e,this.root=n||Wn.EMPTY}insert(e,n){return new an(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Wn.BLACK,null,null))}remove(e){return new an(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Wn.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(0===r)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const o=this.comparator(e,r.key);if(0===o)return n+r.left.size;o<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new lm(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new lm(this.root,e,this.comparator,!1)}getReverseIterator(){return new lm(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new lm(this.root,e,this.comparator,!0)}}class lm{constructor(e,n,r,o){this.isReverse=o,this.nodeStack=[];let c=1;for(;!e.isEmpty();)if(c=n?r(e.key,n):1,n&&o&&(c*=-1),c<0)e=this.isReverse?e.left:e.right;else{if(0===c){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Wn{constructor(e,n,r,o,c){this.key=e,this.value=n,this.color=r??Wn.RED,this.left=o??Wn.EMPTY,this.right=c??Wn.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,o,c){return new Wn(e??this.key,n??this.value,r??this.color,o??this.left,c??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let o=this;const c=r(e,o.key);return o=c<0?o.copy(null,null,null,o.left.insert(e,n,r),null):0===c?o.copy(null,n,null,null,null):o.copy(null,null,null,null,o.right.insert(e,n,r)),o.fixUp()}removeMin(){if(this.left.isEmpty())return Wn.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,o=this;if(n(e,o.key)<0)o.left.isEmpty()||o.left.isRed()||o.left.left.isRed()||(o=o.moveRedLeft()),o=o.copy(null,null,null,o.left.remove(e,n),null);else{if(o.left.isRed()&&(o=o.rotateRight()),o.right.isEmpty()||o.right.isRed()||o.right.left.isRed()||(o=o.moveRedRight()),0===n(e,o.key)){if(o.right.isEmpty())return Wn.EMPTY;r=o.right.min(),o=o.copy(r.key,r.value,null,null,o.right.removeMin())}o=o.copy(null,null,null,null,o.right.remove(e,n))}return o.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Wn.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Wn.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw Ke();const e=this.left.check();if(e!==this.right.check())throw Ke();return e+(this.isRed()?0:1)}}Wn.EMPTY=null,Wn.RED=!0,Wn.BLACK=!1,Wn.EMPTY=new class{constructor(){this.size=0}get key(){throw Ke()}get value(){throw Ke()}get color(){throw Ke()}get left(){throw Ke()}get right(){throw Ke()}copy(t,e,n,r,o){return this}insert(t,e,n){return new Wn(t,e)}remove(t,e){return this}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class un{constructor(e){this.comparator=e,this.data=new an(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const o=r.getNext();if(this.comparator(o.key,e[1])>=0)return;n(o.key)}}forEachWhile(e,n){let r;for(r=void 0!==n?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new tI(this.data.getIterator())}getIteratorFrom(e){return new tI(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof un)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const o=n.getNext().key,c=r.getNext().key;if(0!==this.comparator(o,c))return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new un(this.comparator);return n.data=e,n}}class tI{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function Eu(t){return t.hasNext()?t.getNext():void 0}class _i{constructor(e){this.fields=e,e.sort(xn.comparator)}static empty(){return new _i([])}unionWith(e){let n=new un(xn.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new _i(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return fl(this.fields,e.fields,(n,r)=>n.isEqual(r))}}class Il extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class ir{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(r){try{return atob(r)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new Il("Invalid base64 string: "+o):o}}(e);return new ir(n)}static fromUint8Array(e){const n=function(r){let o="";for(let c=0;c<r.length;++c)o+=String.fromCharCode(r[c]);return o}(e);return new ir(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(e){const n=new Uint8Array(e.length);for(let r=0;r<e.length;r++)n[r]=e.charCodeAt(r);return n}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return wt(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}ir.EMPTY_BYTE_STRING=new ir("");const xS=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function _a(t){if(rt(!!t),"string"==typeof t){let e=0;const n=xS.exec(t);if(rt(!!n),n[1]){let o=n[1];o=(o+"000000000").substr(0,9),e=Number(o)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Mn(t.seconds),nanos:Mn(t.nanos)}}function Mn(t){return"number"==typeof t?t:"string"==typeof t?Number(t):0}function Zs(t){return"string"==typeof t?ir.fromBase64String(t):ir.fromUint8Array(t)}function Jh(t){var e,n;return"server_timestamp"===(null===(n=((null===(e=t?.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function dm(t){const e=t.mapValue.fields.__previous_value__;return Jh(e)?dm(e):e}function El(t){const e=_a(t.mapValue.fields.__local_write_time__.timestampValue);return new on(e.seconds,e.nanos)}class MS{constructor(e,n,r,o,c,d,g,v,D){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=o,this.ssl=c,this.forceLongPolling=d,this.autoDetectLongPolling=g,this.longPollingOptions=v,this.useFetchStreams=D}}class va{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new va("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof va&&e.projectId===this.projectId&&e.database===this.database}}const wu={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},nI={nullValue:"NULL_VALUE"};function Du(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Jh(t)?4:ED(t)?9007199254740991:10:Ke()}function To(t,e){if(t===e)return!0;const n=Du(t);if(n!==Du(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return El(t).isEqual(El(e));case 3:return function(r,o){if("string"==typeof r.timestampValue&&"string"==typeof o.timestampValue&&r.timestampValue.length===o.timestampValue.length)return r.timestampValue===o.timestampValue;const c=_a(r.timestampValue),d=_a(o.timestampValue);return c.seconds===d.seconds&&c.nanos===d.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return o=e,Zs(t.bytesValue).isEqual(Zs(o.bytesValue));case 7:return t.referenceValue===e.referenceValue;case 8:return function(r,o){return Mn(r.geoPointValue.latitude)===Mn(o.geoPointValue.latitude)&&Mn(r.geoPointValue.longitude)===Mn(o.geoPointValue.longitude)}(t,e);case 2:return function(r,o){if("integerValue"in r&&"integerValue"in o)return Mn(r.integerValue)===Mn(o.integerValue);if("doubleValue"in r&&"doubleValue"in o){const c=Mn(r.doubleValue),d=Mn(o.doubleValue);return c===d?ml(c)===ml(d):isNaN(c)&&isNaN(d)}return!1}(t,e);case 9:return fl(t.arrayValue.values||[],e.arrayValue.values||[],To);case 10:return function(r,o){const c=r.mapValue.fields||{},d=o.mapValue.fields||{};if(yD(c)!==yD(d))return!1;for(const g in c)if(c.hasOwnProperty(g)&&(void 0===d[g]||!To(c[g],d[g])))return!1;return!0}(t,e);default:return Ke()}var o}function wl(t,e){return void 0!==(t.values||[]).find(n=>To(n,e))}function Is(t,e){if(t===e)return 0;const n=Du(t),r=Du(e);if(n!==r)return wt(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return wt(t.booleanValue,e.booleanValue);case 2:return function(o,c){const d=Mn(o.integerValue||o.doubleValue),g=Mn(c.integerValue||c.doubleValue);return d<g?-1:d>g?1:d===g?0:isNaN(d)?isNaN(g)?0:-1:1}(t,e);case 3:return vD(t.timestampValue,e.timestampValue);case 4:return vD(El(t),El(e));case 5:return wt(t.stringValue,e.stringValue);case 6:return function(o,c){const d=Zs(o),g=Zs(c);return d.compareTo(g)}(t.bytesValue,e.bytesValue);case 7:return function(o,c){const d=o.split("/"),g=c.split("/");for(let v=0;v<d.length&&v<g.length;v++){const D=wt(d[v],g[v]);if(0!==D)return D}return wt(d.length,g.length)}(t.referenceValue,e.referenceValue);case 8:return function(o,c){const d=wt(Mn(o.latitude),Mn(c.latitude));return 0!==d?d:wt(Mn(o.longitude),Mn(c.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return function(o,c){const d=o.values||[],g=c.values||[];for(let v=0;v<d.length&&v<g.length;++v){const D=Is(d[v],g[v]);if(D)return D}return wt(d.length,g.length)}(t.arrayValue,e.arrayValue);case 10:return function(o,c){if(o===wu.mapValue&&c===wu.mapValue)return 0;if(o===wu.mapValue)return 1;if(c===wu.mapValue)return-1;const d=o.fields||{},g=Object.keys(d),v=c.fields||{},D=Object.keys(v);g.sort(),D.sort();for(let T=0;T<g.length&&T<D.length;++T){const A=wt(g[T],D[T]);if(0!==A)return A;const U=Is(d[g[T]],v[D[T]]);if(0!==U)return U}return wt(g.length,D.length)}(t.mapValue,e.mapValue);default:throw Ke()}}function vD(t,e){if("string"==typeof t&&"string"==typeof e&&t.length===e.length)return wt(t,e);const n=_a(t),r=_a(e),o=wt(n.seconds,r.seconds);return 0!==o?o:wt(n.nanos,r.nanos)}function Dl(t){return hm(t)}function hm(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(r){const o=_a(r);return`time(${o.seconds},${o.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?Zs(t.bytesValue).toBase64():"referenceValue"in t?Be.fromName(t.referenceValue).toString():"geoPointValue"in t?`geo(${(e=t.geoPointValue).latitude},${e.longitude})`:"arrayValue"in t?function(r){let o="[",c=!0;for(const d of r.values||[])c?c=!1:o+=",",o+=hm(d);return o+"]"}(t.arrayValue):"mapValue"in t?function(r){const o=Object.keys(r.fields||{}).sort();let c="{",d=!0;for(const g of o)d?d=!1:c+=",",c+=`${g}:${hm(r.fields[g])}`;return c+"}"}(t.mapValue):Ke();var e}function bu(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function rI(t){return!!t&&"integerValue"in t}function Xh(t){return!!t&&"arrayValue"in t}function ID(t){return!!t&&"nullValue"in t}function NS(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function fm(t){return!!t&&"mapValue"in t}function bl(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&"object"==typeof t.timestampValue)return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return Qi(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=bl(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=bl(t.arrayValue.values[n]);return e}return Object.assign({},t)}function ED(t){return"__max__"===(((t.mapValue||{}).fields||{}).__type__||{}).stringValue}function RS(t){return"nullValue"in t?nI:"booleanValue"in t?{booleanValue:!1}:"integerValue"in t||"doubleValue"in t?{doubleValue:NaN}:"timestampValue"in t?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in t?{stringValue:""}:"bytesValue"in t?{bytesValue:""}:"referenceValue"in t?bu(va.empty(),Be.empty()):"geoPointValue"in t?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in t?{arrayValue:{}}:"mapValue"in t?{mapValue:{}}:Ke()}function ef(t){return"nullValue"in t?{booleanValue:!1}:"booleanValue"in t?{doubleValue:NaN}:"integerValue"in t||"doubleValue"in t?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in t?{stringValue:""}:"stringValue"in t?{bytesValue:""}:"bytesValue"in t?bu(va.empty(),Be.empty()):"referenceValue"in t?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in t?{arrayValue:{}}:"arrayValue"in t?{mapValue:{}}:"mapValue"in t?wu:Ke()}function wD(t,e){const n=Is(t.value,e.value);return 0!==n?n:t.inclusive&&!e.inclusive?-1:!t.inclusive&&e.inclusive?1:0}function iI(t,e){const n=Is(t.value,e.value);return 0!==n?n:t.inclusive&&!e.inclusive?1:!t.inclusive&&e.inclusive?-1:0}class Nr{constructor(e){this.value=e}static empty(){return new Nr({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!fm(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=bl(n)}setAll(e){let n=xn.emptyPath(),r={},o=[];e.forEach((d,g)=>{if(!n.isImmediateParentOf(g)){const v=this.getFieldsMap(n);this.applyChanges(v,r,o),r={},o=[],n=g.popLast()}d?r[g.lastSegment()]=bl(d):o.push(g.lastSegment())});const c=this.getFieldsMap(n);this.applyChanges(c,r,o)}delete(e){const n=this.field(e.popLast());fm(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return To(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let o=n.mapValue.fields[e.get(r)];fm(o)&&o.mapValue.fields||(o={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=o),n=o}return n.mapValue.fields}applyChanges(e,n,r){Qi(n,(o,c)=>e[o]=c);for(const o of r)delete e[o]}clone(){return new Nr(bl(this.value))}}function sI(t){const e=[];return Qi(t.fields,(n,r)=>{const o=new xn([n]);if(fm(r)){const c=sI(r.mapValue).fields;if(0===c.length)e.push(o);else for(const d of c)e.push(o.child(d))}else e.push(o)}),new _i(e)}class dn{constructor(e,n,r,o,c,d,g){this.key=e,this.documentType=n,this.version=r,this.readTime=o,this.createTime=c,this.data=d,this.documentState=g}static newInvalidDocument(e){return new dn(e,0,it.min(),it.min(),it.min(),Nr.empty(),0)}static newFoundDocument(e,n,r,o){return new dn(e,1,n,it.min(),r,o,0)}static newNoDocument(e,n){return new dn(e,2,n,it.min(),it.min(),Nr.empty(),0)}static newUnknownDocument(e,n){return new dn(e,3,n,it.min(),it.min(),Nr.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(it.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Nr.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Nr.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=it.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof dn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new dn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class Co{constructor(e,n){this.position=e,this.inclusive=n}}function DD(t,e,n){let r=0;for(let o=0;o<t.position.length;o++){const c=e[o],d=t.position[o];if(r=c.field.isKeyField()?Be.comparator(Be.fromName(d.referenceValue),n.key):Is(d,n.data.field(c.field)),"desc"===c.dir&&(r*=-1),0!==r)break}return r}function pm(t,e){if(null===t)return null===e;if(null===e||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!To(t.position[n],e.position[n]))return!1;return!0}class Tl{constructor(e,n="asc"){this.field=e,this.dir=n}}function bD(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}class oI{}class Vt extends oI{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?"in"===n||"not-in"===n?this.createKeyFieldInFilter(e,n,r):new PS(e,n,r):"array-contains"===n?new xD(e,r):"in"===n?new lI(e,r):"not-in"===n?new LS(e,r):"array-contains-any"===n?new FS(e,r):new Vt(e,n,r)}static createKeyFieldInFilter(e,n,r){return"in"===n?new kS(e,r):new OS(e,r)}matches(e){const n=e.data.field(this.field);return"!="===this.op?null!==n&&this.matchesComparison(Is(n,this.value)):null!==n&&Du(this.value)===Du(n)&&this.matchesComparison(Is(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return Ke()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}getFirstInequalityField(){return this.isInequality()?this.field:null}}class nn extends oI{constructor(e,n){super(),this.filters=e,this.op=n,this.lt=null}static create(e,n){return new nn(e,n)}matches(e){return Cl(this)?void 0===this.filters.find(n=>!n.matches(e)):void 0!==this.filters.find(n=>n.matches(e))}getFlattenedFilters(){return null!==this.lt||(this.lt=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.lt}getFilters(){return Object.assign([],this.filters)}getFirstInequalityField(){const e=this.ft(n=>n.isInequality());return null!==e?e.field:null}ft(e){for(const n of this.getFlattenedFilters())if(e(n))return n;return null}}function Cl(t){return"and"===t.op}function tf(t){return"or"===t.op}function aI(t){return uI(t)&&Cl(t)}function uI(t){for(const e of t.filters)if(e instanceof nn)return!1;return!0}function cI(t){if(t instanceof Vt)return t.field.canonicalString()+t.op.toString()+Dl(t.value);if(aI(t))return t.filters.map(e=>cI(e)).join(",");{const e=t.filters.map(n=>cI(n)).join(",");return`${t.op}(${e})`}}function TD(t,e){return t instanceof Vt?(n=t,(r=e)instanceof Vt&&n.op===r.op&&n.field.isEqual(r.field)&&To(n.value,r.value)):t instanceof nn?function(n,r){return r instanceof nn&&n.op===r.op&&n.filters.length===r.filters.length&&n.filters.reduce((o,c,d)=>o&&TD(c,r.filters[d]),!0)}(t,e):void Ke();var n,r}function CD(t,e){const n=t.filters.concat(e);return nn.create(n,t.op)}function SD(t){return t instanceof Vt?`${(e=t).field.canonicalString()} ${e.op} ${Dl(e.value)}`:t instanceof nn?function(e){return e.op.toString()+" {"+e.getFilters().map(SD).join(" ,")+"}"}(t):"Filter";var e}class PS extends Vt{constructor(e,n,r){super(e,n,r),this.key=Be.fromName(r.referenceValue)}matches(e){const n=Be.comparator(e.key,this.key);return this.matchesComparison(n)}}class kS extends Vt{constructor(e,n){super(e,"in",n),this.keys=AD(0,n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class OS extends Vt{constructor(e,n){super(e,"not-in",n),this.keys=AD(0,n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function AD(t,e){var n;return((null===(n=e.arrayValue)||void 0===n?void 0:n.values)||[]).map(r=>Be.fromName(r.referenceValue))}class xD extends Vt{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return Xh(n)&&wl(n.arrayValue,this.value)}}class lI extends Vt{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return null!==n&&wl(this.value.arrayValue,n)}}class LS extends Vt{constructor(e,n){super(e,"not-in",n)}matches(e){if(wl(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return null!==n&&!wl(this.value.arrayValue,n)}}class FS extends Vt{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!Xh(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>wl(this.value.arrayValue,r))}}class MD{constructor(e,n=null,r=[],o=[],c=null,d=null,g=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=o,this.limit=c,this.startAt=d,this.endAt=g,this.dt=null}}function dI(t,e=null,n=[],r=[],o=null,c=null,d=null){return new MD(t,e,n,r,o,c,d)}function Tu(t){const e=$e(t);if(null===e.dt){let n=e.path.canonicalString();null!==e.collectionGroup&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>cI(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>{return(o=r).field.canonicalString()+o.dir;var o}).join(","),gl(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>Dl(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>Dl(r)).join(",")),e.dt=n}return e.dt}function nf(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!bD(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!TD(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!pm(t.startAt,e.startAt)&&pm(t.endAt,e.endAt)}function gm(t){return Be.isDocumentKey(t.path)&&null===t.collectionGroup&&0===t.filters.length}function Sl(t,e){return t.filters.filter(n=>n instanceof Vt&&n.field.isEqual(e))}function mm(t,e,n){let r=nI,o=!0;for(const c of Sl(t,e)){let d=nI,g=!0;switch(c.op){case"<":case"<=":d=RS(c.value);break;case"==":case"in":case">=":d=c.value;break;case">":d=c.value,g=!1;break;case"!=":case"not-in":d=nI}wD({value:r,inclusive:o},{value:d,inclusive:g})<0&&(r=d,o=g)}if(null!==n)for(let c=0;c<t.orderBy.length;++c)if(t.orderBy[c].field.isEqual(e)){const d=n.position[c];wD({value:r,inclusive:o},{value:d,inclusive:n.inclusive})<0&&(r=d,o=n.inclusive);break}return{value:r,inclusive:o}}function hI(t,e,n){let r=wu,o=!0;for(const c of Sl(t,e)){let d=wu,g=!0;switch(c.op){case">=":case">":d=ef(c.value),g=!1;break;case"==":case"in":case"<=":d=c.value;break;case"<":d=c.value,g=!1;break;case"!=":case"not-in":d=wu}iI({value:r,inclusive:o},{value:d,inclusive:g})>0&&(r=d,o=g)}if(null!==n)for(let c=0;c<t.orderBy.length;++c)if(t.orderBy[c].field.isEqual(e)){const d=n.position[c];iI({value:r,inclusive:o},{value:d,inclusive:n.inclusive})>0&&(r=d,o=n.inclusive);break}return{value:r,inclusive:o}}class Es{constructor(e,n=null,r=[],o=[],c=null,d="F",g=null,v=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=o,this.limit=c,this.limitType=d,this.startAt=g,this.endAt=v,this.wt=null,this._t=null}}function ND(t,e,n,r,o,c,d,g){return new Es(t,e,n,r,o,c,d,g)}function Al(t){return new Es(t)}function ym(t){return 0===t.filters.length&&null===t.limit&&null==t.startAt&&null==t.endAt&&(0===t.explicitOrderBy.length||1===t.explicitOrderBy.length&&t.explicitOrderBy[0].field.isKeyField())}function fI(t){return t.explicitOrderBy.length>0?t.explicitOrderBy[0].field:null}function _m(t){for(const e of t.filters){const n=e.getFirstInequalityField();if(null!==n)return n}return null}function So(t){return null!==t.collectionGroup}function Cu(t){const e=$e(t);if(null===e.wt){e.wt=[];const n=_m(e),r=fI(e);if(null!==n&&null===r)n.isKeyField()||e.wt.push(new Tl(n)),e.wt.push(new Tl(xn.keyField(),"asc"));else{let o=!1;for(const c of e.explicitOrderBy)e.wt.push(c),c.field.isKeyField()&&(o=!0);if(!o){const c=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.wt.push(new Tl(xn.keyField(),c))}}}return e.wt}function ii(t){const e=$e(t);if(!e._t)if("F"===e.limitType)e._t=dI(e.path,e.collectionGroup,Cu(e),e.filters,e.limit,e.startAt,e.endAt);else{const n=[];for(const c of Cu(e))n.push(new Tl(c.field,"desc"===c.dir?"asc":"desc"));const r=e.endAt?new Co(e.endAt.position,e.endAt.inclusive):null,o=e.startAt?new Co(e.startAt.position,e.startAt.inclusive):null;e._t=dI(e.path,e.collectionGroup,n,e.filters,e.limit,r,o)}return e._t}function RD(t,e){e.getFirstInequalityField(),_m(t);const n=t.filters.concat([e]);return new Es(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function xl(t,e,n){return new Es(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Su(t,e){return nf(ii(t),ii(e))&&t.limitType===e.limitType}function PD(t){return`${Tu(ii(t))}|lt:${t.limitType}`}function vm(t){return`Query(target=${function(e){let n=e.path.canonicalString();return null!==e.collectionGroup&&(n+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(n+=`, filters: [${e.filters.map(r=>SD(r)).join(", ")}]`),gl(e.limit)||(n+=", limit: "+e.limit),e.orderBy.length>0&&(n+=`, orderBy: [${e.orderBy.map(r=>{return`${(o=r).field.canonicalString()} (${o.dir})`;var o}).join(", ")}]`),e.startAt&&(n+=", startAt: ",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>Dl(r)).join(",")),e.endAt&&(n+=", endAt: ",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>Dl(r)).join(",")),`Target(${n})`}(ii(t))}; limitType=${t.limitType})`}function rf(t,e){return e.isFoundDocument()&&function(n,r){const o=r.key.path;return null!==n.collectionGroup?r.key.hasCollectionId(n.collectionGroup)&&n.path.isPrefixOf(o):Be.isDocumentKey(n.path)?n.path.isEqual(o):n.path.isImmediateParentOf(o)}(t,e)&&function(n,r){for(const o of Cu(n))if(!o.field.isKeyField()&&null===r.data.field(o.field))return!1;return!0}(t,e)&&function(n,r){for(const o of n.filters)if(!o.matches(r))return!1;return!0}(t,e)&&(r=e,!((n=t).startAt&&!function(o,c,d){const g=DD(o,c,d);return o.inclusive?g<=0:g<0}(n.startAt,Cu(n),r)||n.endAt&&!function(o,c,d){const g=DD(o,c,d);return o.inclusive?g>=0:g>0}(n.endAt,Cu(n),r)));var n,r}function kD(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function OD(t){return(e,n)=>{let r=!1;for(const o of Cu(t)){const c=pI(o,e,n);if(0!==c)return c;r=r||o.field.isKeyField()}return 0}}function pI(t,e,n){const r=t.field.isKeyField()?Be.comparator(e.key,n.key):function(o,c,d){const g=c.data.field(o),v=d.data.field(o);return null!==g&&null!==v?Is(g,v):Ke()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return Ke()}}class Ys{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(void 0!==r)for(const[o,c]of r)if(this.equalsFn(o,e))return c}has(e){return void 0!==this.get(e)}set(e,n){const r=this.mapKeyFn(e),o=this.inner[r];if(void 0===o)return this.inner[r]=[[e,n]],void this.innerSize++;for(let c=0;c<o.length;c++)if(this.equalsFn(o[c][0],e))return void(o[c]=[e,n]);o.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(void 0===r)return!1;for(let o=0;o<r.length;o++)if(this.equalsFn(r[o][0],e))return 1===r.length?delete this.inner[n]:r.splice(o,1),this.innerSize--,!0;return!1}forEach(e){Qi(this.inner,(n,r)=>{for(const[o,c]of r)e(o,c)})}isEmpty(){return _D(this.inner)}size(){return this.innerSize}}const LD=new an(Be.comparator);function si(){return LD}const gI=new an(Be.comparator);function sf(...t){let e=gI;for(const n of t)e=e.insert(n.key,n);return e}function FD(t){let e=gI;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function Qs(){return Ml()}function VD(){return Ml()}function Ml(){return new Ys(t=>t.toString(),(t,e)=>t.isEqual(e))}const bM=new an(Be.comparator),BD=new un(Be.comparator);function xt(...t){let e=BD;for(const n of t)e=e.add(n);return e}const VS=new un(wt);function UD(){return VS}function jD(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:ml(e)?"-0":e}}function $D(t){return{integerValue:""+t}}function HD(t,e){return Qv(e)?$D(e):jD(t,e)}class Im{constructor(){this._=void 0}}function BS(t,e,n){return t instanceof Nl?function(r,o){const c={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return o&&Jh(o)&&(o=dm(o)),o&&(c.fields.__previous_value__=o),{mapValue:c}}(n,e):t instanceof Au?GD(t,e):t instanceof xu?WD(t,e):function(r,o){const c=zD(r,o),d=mI(c)+mI(r.gt);return rI(c)&&rI(r.gt)?$D(d):jD(r.serializer,d)}(t,e)}function US(t,e,n){return t instanceof Au?GD(t,e):t instanceof xu?WD(t,e):n}function zD(t,e){return t instanceof Js?rI(n=e)||(r=n)&&"doubleValue"in r?e:{integerValue:0}:null;var r,n}class Nl extends Im{}class Au extends Im{constructor(e){super(),this.elements=e}}function GD(t,e){const n=yI(e);for(const r of t.elements)n.some(o=>To(o,r))||n.push(r);return{arrayValue:{values:n}}}class xu extends Im{constructor(e){super(),this.elements=e}}function WD(t,e){let n=yI(e);for(const r of t.elements)n=n.filter(o=>!To(o,r));return{arrayValue:{values:n}}}class Js extends Im{constructor(e,n){super(),this.serializer=e,this.gt=n}}function mI(t){return Mn(t.integerValue||t.doubleValue)}function yI(t){return Xh(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}class Rl{constructor(e,n){this.field=e,this.transform=n}}class KD{constructor(e,n){this.version=e,this.transformResults=n}}class yn{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new yn}static exists(e){return new yn(void 0,e)}static updateTime(e){return new yn(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Em(t,e){return void 0!==t.updateTime?e.isFoundDocument()&&e.version.isEqual(t.updateTime):void 0===t.exists||t.exists===e.isFoundDocument()}class _I{}function jS(t,e){if(!t.hasLocalMutations||e&&0===e.fields.length)return null;if(null===e)return t.isNoDocument()?new kl(t.key,yn.none()):new Pl(t.key,t.data,yn.none());{const n=t.data,r=Nr.empty();let o=new un(xn.comparator);for(let c of e.fields)if(!o.has(c)){let d=n.field(c);null===d&&c.length>1&&(c=c.popLast(),d=n.field(c)),null===d?r.delete(c):r.set(c,d),o=o.add(c)}return new Fi(t.key,r,new _i(o.toArray()),yn.none())}}function $S(t,e,n){t instanceof Pl?function(r,o,c){const d=r.value.clone(),g=wm(r.fieldTransforms,o,c.transformResults);d.setAll(g),o.convertToFoundDocument(c.version,d).setHasCommittedMutations()}(t,e,n):t instanceof Fi?function(r,o,c){if(!Em(r.precondition,o))return void o.convertToUnknownDocument(c.version);const d=wm(r.fieldTransforms,o,c.transformResults),g=o.data;g.setAll(YD(r)),g.setAll(d),o.convertToFoundDocument(c.version,g).setHasCommittedMutations()}(t,e,n):e.convertToNoDocument(n.version).setHasCommittedMutations()}function af(t,e,n,r){return t instanceof Pl?function(o,c,d,g){if(!Em(o.precondition,c))return d;const v=o.value.clone(),D=ws(o.fieldTransforms,g,c);return v.setAll(D),c.convertToFoundDocument(c.version,v).setHasLocalMutations(),null}(t,e,n,r):t instanceof Fi?function(o,c,d,g){if(!Em(o.precondition,c))return d;const v=ws(o.fieldTransforms,g,c),D=c.data;return D.setAll(YD(o)),D.setAll(v),c.convertToFoundDocument(c.version,D).setHasLocalMutations(),null===d?null:d.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map(T=>T.field))}(t,e,n,r):(d=n,Em(t.precondition,c=e)?(c.convertToNoDocument(c.version).setHasLocalMutations(),null):d);var c,d}function HS(t,e){let n=null;for(const r of t.fieldTransforms){const o=e.data.field(r.field),c=zD(r.transform,o||null);null!=c&&(null===n&&(n=Nr.empty()),n.set(r.field,c))}return n||null}function ZD(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&(r=e.fieldTransforms,!!(void 0===(n=t.fieldTransforms)&&void 0===r||n&&r&&fl(n,r,(o,c)=>function qD(t,e){return t.field.isEqual(e.field)&&(r=e.transform,(n=t.transform)instanceof Au&&r instanceof Au||n instanceof xu&&r instanceof xu?fl(n.elements,r.elements,To):n instanceof Js&&r instanceof Js?To(n.gt,r.gt):n instanceof Nl&&r instanceof Nl);var n,r}(o,c))))&&(0===t.type?t.value.isEqual(e.value):1!==t.type||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask));var n,r}class Pl extends _I{constructor(e,n,r,o=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=o,this.type=0}getFieldMask(){return null}}class Fi extends _I{constructor(e,n,r,o,c=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=o,this.fieldTransforms=c,this.type=1}getFieldMask(){return this.fieldMask}}function YD(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function wm(t,e,n){const r=new Map;rt(t.length===n.length);for(let o=0;o<n.length;o++){const c=t[o],d=c.transform,g=e.data.field(c.field);r.set(c.field,US(d,g,n[o]))}return r}function ws(t,e,n){const r=new Map;for(const o of t){const c=o.transform,d=n.data.field(o.field);r.set(o.field,BS(c,d,e))}return r}class kl extends _I{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class uf extends _I{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class vI{constructor(e,n,r,o){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=o}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let o=0;o<this.mutations.length;o++){const c=this.mutations[o];c.key.isEqual(e.key)&&$S(c,e,r[o])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=af(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=af(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=VD();return this.mutations.forEach(o=>{const c=e.get(o.key),d=c.overlayedDocument;let g=this.applyToLocalView(d,c.mutatedFields);g=n.has(o.key)?null:g;const v=jS(d,g);null!==v&&r.set(o.key,v),d.isValidDocument()||d.convertToNoDocument(it.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),xt())}isEqual(e){return this.batchId===e.batchId&&fl(this.mutations,e.mutations,(n,r)=>ZD(n,r))&&fl(this.baseMutations,e.baseMutations,(n,r)=>ZD(n,r))}}class QD{constructor(e,n,r,o){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=o}static from(e,n,r){rt(e.mutations.length===r.length);let o=bM;const c=e.mutations;for(let d=0;d<c.length;d++)o=o.insert(c[d].key,r[d].version);return new QD(e,n,r,o)}}class II{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class cf{constructor(e,n){this.count=e,this.unchangedNames=n}}var qn,zt;function JD(t){switch(t){default:return Ke();case ee.CANCELLED:case ee.UNKNOWN:case ee.DEADLINE_EXCEEDED:case ee.RESOURCE_EXHAUSTED:case ee.INTERNAL:case ee.UNAVAILABLE:case ee.UNAUTHENTICATED:return!1;case ee.INVALID_ARGUMENT:case ee.NOT_FOUND:case ee.ALREADY_EXISTS:case ee.PERMISSION_DENIED:case ee.FAILED_PRECONDITION:case ee.ABORTED:case ee.OUT_OF_RANGE:case ee.UNIMPLEMENTED:case ee.DATA_LOSS:return!0}}function lf(t){if(void 0===t)return Yt("GRPC error has no .code"),ee.UNKNOWN;switch(t){case qn.OK:return ee.OK;case qn.CANCELLED:return ee.CANCELLED;case qn.UNKNOWN:return ee.UNKNOWN;case qn.DEADLINE_EXCEEDED:return ee.DEADLINE_EXCEEDED;case qn.RESOURCE_EXHAUSTED:return ee.RESOURCE_EXHAUSTED;case qn.INTERNAL:return ee.INTERNAL;case qn.UNAVAILABLE:return ee.UNAVAILABLE;case qn.UNAUTHENTICATED:return ee.UNAUTHENTICATED;case qn.INVALID_ARGUMENT:return ee.INVALID_ARGUMENT;case qn.NOT_FOUND:return ee.NOT_FOUND;case qn.ALREADY_EXISTS:return ee.ALREADY_EXISTS;case qn.PERMISSION_DENIED:return ee.PERMISSION_DENIED;case qn.FAILED_PRECONDITION:return ee.FAILED_PRECONDITION;case qn.ABORTED:return ee.ABORTED;case qn.OUT_OF_RANGE:return ee.OUT_OF_RANGE;case qn.UNIMPLEMENTED:return ee.UNIMPLEMENTED;case qn.DATA_LOSS:return ee.DATA_LOSS;default:return Ke()}}(zt=qn||(qn={}))[zt.OK=0]="OK",zt[zt.CANCELLED=1]="CANCELLED",zt[zt.UNKNOWN=2]="UNKNOWN",zt[zt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",zt[zt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",zt[zt.NOT_FOUND=5]="NOT_FOUND",zt[zt.ALREADY_EXISTS=6]="ALREADY_EXISTS",zt[zt.PERMISSION_DENIED=7]="PERMISSION_DENIED",zt[zt.UNAUTHENTICATED=16]="UNAUTHENTICATED",zt[zt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",zt[zt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",zt[zt.ABORTED=10]="ABORTED",zt[zt.OUT_OF_RANGE=11]="OUT_OF_RANGE",zt[zt.UNIMPLEMENTED=12]="UNIMPLEMENTED",zt[zt.INTERNAL=13]="INTERNAL",zt[zt.UNAVAILABLE=14]="UNAVAILABLE",zt[zt.DATA_LOSS=15]="DATA_LOSS";class Dm{constructor(){this.onExistenceFilterMismatchCallbacks=new Map}static get instance(){return bm}static getOrCreateInstance(){return null===bm&&(bm=new Dm),bm}onExistenceFilterMismatch(e){const n=Symbol();return this.onExistenceFilterMismatchCallbacks.set(n,e),()=>this.onExistenceFilterMismatchCallbacks.delete(n)}notifyOnExistenceFilterMismatch(e){this.onExistenceFilterMismatchCallbacks.forEach(n=>n(e))}}let bm=null;function EI(){return new TextEncoder}const Tm=new _u([4294967295,4294967295],0);function XD(t){const e=EI().encode(t),n=new dS;return n.update(e),new Uint8Array(n.digest())}function eb(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),o=e.getUint32(8,!0),c=e.getUint32(12,!0);return[new _u([n,r],0),new _u([o,c],0)]}class Cm{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new df(`Invalid padding: ${n}`);if(r<0)throw new df(`Invalid hash count: ${r}`);if(e.length>0&&0===this.hashCount)throw new df(`Invalid hash count: ${r}`);if(0===e.length&&0!==n)throw new df(`Invalid padding when bitmap length is 0: ${n}`);this.It=8*e.length-n,this.Tt=_u.fromNumber(this.It)}Et(e,n,r){let o=e.add(n.multiply(_u.fromNumber(r)));return 1===o.compare(Tm)&&(o=new _u([o.getBits(0),o.getBits(1)],0)),o.modulo(this.Tt).toNumber()}At(e){return 0!=(this.bitmap[Math.floor(e/8)]&1<<e%8)}vt(e){if(0===this.It)return!1;const n=XD(e),[r,o]=eb(n);for(let c=0;c<this.hashCount;c++){const d=this.Et(r,o,c);if(!this.At(d))return!1}return!0}static create(e,n,r){const o=e%8==0?0:8-e%8,c=new Uint8Array(Math.ceil(e/8)),d=new Cm(c,o,n);return r.forEach(g=>d.insert(g)),d}insert(e){if(0===this.It)return;const n=XD(e),[r,o]=eb(n);for(let c=0;c<this.hashCount;c++){const d=this.Et(r,o,c);this.Rt(d)}}Rt(e){const n=Math.floor(e/8);this.bitmap[n]|=1<<e%8}}class df extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class hf{constructor(e,n,r,o,c){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=o,this.resolvedLimboDocuments=c}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const o=new Map;return o.set(e,Ol.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new hf(it.min(),o,new an(wt),si(),xt())}}class Ol{constructor(e,n,r,o,c){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=o,this.removedDocuments=c}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new Ol(r,n,xt(),xt(),xt())}}class Mu{constructor(e,n,r,o){this.Pt=e,this.removedTargetIds=n,this.key=r,this.bt=o}}class tb{constructor(e,n){this.targetId=e,this.Vt=n}}class nb{constructor(e,n,r=ir.EMPTY_BYTE_STRING,o=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=o}}class wI{constructor(){this.St=0,this.Dt=DI(),this.Ct=ir.EMPTY_BYTE_STRING,this.xt=!1,this.Nt=!0}get current(){return this.xt}get resumeToken(){return this.Ct}get kt(){return 0!==this.St}get Mt(){return this.Nt}$t(e){e.approximateByteSize()>0&&(this.Nt=!0,this.Ct=e)}Ot(){let e=xt(),n=xt(),r=xt();return this.Dt.forEach((o,c)=>{switch(c){case 0:e=e.add(o);break;case 2:n=n.add(o);break;case 1:r=r.add(o);break;default:Ke()}}),new Ol(this.Ct,this.xt,e,n,r)}Ft(){this.Nt=!1,this.Dt=DI()}Bt(e,n){this.Nt=!0,this.Dt=this.Dt.insert(e,n)}Lt(e){this.Nt=!0,this.Dt=this.Dt.remove(e)}qt(){this.St+=1}Ut(){this.St-=1}Kt(){this.Nt=!0,this.xt=!0}}class rb{constructor(e){this.Gt=e,this.Qt=new Map,this.jt=si(),this.zt=Sm(),this.Wt=new an(wt)}Ht(e){for(const n of e.Pt)e.bt&&e.bt.isFoundDocument()?this.Jt(n,e.bt):this.Yt(n,e.key,e.bt);for(const n of e.removedTargetIds)this.Yt(n,e.key,e.bt)}Xt(e){this.forEachTarget(e,n=>{const r=this.Zt(n);switch(e.state){case 0:this.te(n)&&r.$t(e.resumeToken);break;case 1:r.Ut(),r.kt||r.Ft(),r.$t(e.resumeToken);break;case 2:r.Ut(),r.kt||this.removeTarget(n);break;case 3:this.te(n)&&(r.Kt(),r.$t(e.resumeToken));break;case 4:this.te(n)&&(this.ee(n),r.$t(e.resumeToken));break;default:Ke()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Qt.forEach((r,o)=>{this.te(o)&&n(o)})}ne(e){var n;const r=e.targetId,o=e.Vt.count,c=this.se(r);if(c){const d=c.target;if(gm(d))if(0===o){const g=new Be(d.path);this.Yt(r,g,dn.newNoDocument(g,it.min()))}else rt(1===o);else{const g=this.ie(r);if(g!==o){const v=this.re(e,g);0!==v&&(this.ee(r),this.Wt=this.Wt.insert(r,2===v?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch")),null===(n=Dm.instance)||void 0===n||n.notifyOnExistenceFilterMismatch(function(D,T,A){var U,q,he,Se,Ae,Qe;const ot={localCacheCount:T,existenceFilterCount:A.count},ut=A.unchangedNames;return ut&&(ot.bloomFilter={applied:0===D,hashCount:null!==(U=ut?.hashCount)&&void 0!==U?U:0,bitmapLength:null!==(Se=null===(he=null===(q=ut?.bits)||void 0===q?void 0:q.bitmap)||void 0===he?void 0:he.length)&&void 0!==Se?Se:0,padding:null!==(Qe=null===(Ae=ut?.bits)||void 0===Ae?void 0:Ae.padding)&&void 0!==Qe?Qe:0}),ot}(v,g,e.Vt))}}}}re(e,n){const{unchangedNames:r,count:o}=e.Vt;if(!r||!r.bits)return 1;const{bits:{bitmap:c="",padding:d=0},hashCount:g=0}=r;let v,D;try{v=Zs(c).toUint8Array()}catch(T){if(T instanceof Il)return Ln("Decoding the base64 bloom filter in existence filter failed ("+T.message+"); ignoring the bloom filter and falling back to full re-query."),1;throw T}try{D=new Cm(v,d,g)}catch(T){return Ln(T instanceof df?"BloomFilter error: ":"Applying bloom filter failed: ",T),1}return 0===D.It?1:o!==n-this.oe(e.targetId,D)?2:0}oe(e,n){const r=this.Gt.getRemoteKeysForTarget(e);let o=0;return r.forEach(c=>{const d=this.Gt.ue(),g=`projects/${d.projectId}/databases/${d.database}/documents/${c.path.canonicalString()}`;n.vt(g)||(this.Yt(e,c,null),o++)}),o}ce(e){const n=new Map;this.Qt.forEach((c,d)=>{const g=this.se(d);if(g){if(c.current&&gm(g.target)){const v=new Be(g.target.path);null!==this.jt.get(v)||this.ae(d,v)||this.Yt(d,v,dn.newNoDocument(v,e))}c.Mt&&(n.set(d,c.Ot()),c.Ft())}});let r=xt();this.zt.forEach((c,d)=>{let g=!0;d.forEachWhile(v=>{const D=this.se(v);return!D||"TargetPurposeLimboResolution"===D.purpose||(g=!1,!1)}),g&&(r=r.add(c))}),this.jt.forEach((c,d)=>d.setReadTime(e));const o=new hf(e,n,this.Wt,this.jt,r);return this.jt=si(),this.zt=Sm(),this.Wt=new an(wt),o}Jt(e,n){if(!this.te(e))return;const r=this.ae(e,n.key)?2:0;this.Zt(e).Bt(n.key,r),this.jt=this.jt.insert(n.key,n),this.zt=this.zt.insert(n.key,this.he(n.key).add(e))}Yt(e,n,r){if(!this.te(e))return;const o=this.Zt(e);this.ae(e,n)?o.Bt(n,1):o.Lt(n),this.zt=this.zt.insert(n,this.he(n).delete(e)),r&&(this.jt=this.jt.insert(n,r))}removeTarget(e){this.Qt.delete(e)}ie(e){const n=this.Zt(e).Ot();return this.Gt.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}qt(e){this.Zt(e).qt()}Zt(e){let n=this.Qt.get(e);return n||(n=new wI,this.Qt.set(e,n)),n}he(e){let n=this.zt.get(e);return n||(n=new un(wt),this.zt=this.zt.insert(e,n)),n}te(e){const n=null!==this.se(e);return n||ve("WatchChangeAggregator","Detected inactive target",e),n}se(e){const n=this.Qt.get(e);return n&&n.kt?null:this.Gt.le(e)}ee(e){this.Qt.set(e,new wI),this.Gt.getRemoteKeysForTarget(e).forEach(n=>{this.Yt(e,n,null)})}ae(e,n){return this.Gt.getRemoteKeysForTarget(e).has(n)}}function Sm(){return new an(Be.comparator)}function DI(){return new an(Be.comparator)}const zS={asc:"ASCENDING",desc:"DESCENDING"},ib={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},sb={and:"AND",or:"OR"};class GS{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function bI(t,e){return t.useProto3Json||gl(e)?e:{value:e}}function Ea(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function Am(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function ob(t,e){return Ea(t,e.toTimestamp())}function Nn(t){return rt(!!t),it.fromTimestamp(function(e){const n=_a(e);return new on(n.seconds,n.nanos)}(t))}function ff(t,e){return(n=t,new Ut(["projects",n.projectId,"databases",n.database])).child("documents").child(e).canonicalString();var n}function ab(t){const e=Ut.fromString(t);return rt(QS(e)),e}function pf(t,e){return ff(t.databaseId,e.path)}function Xs(t,e){const n=ab(e);if(n.get(1)!==t.databaseId.projectId)throw new ge(ee.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new ge(ee.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new Be(ub(n))}function TI(t,e){return ff(t.databaseId,e)}function CI(t){const e=ab(t);return 4===e.length?Ut.emptyPath():ub(e)}function Nu(t){return new Ut(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function ub(t){return rt(t.length>4&&"documents"===t.get(4)),t.popFirst(5)}function cb(t,e,n){return{name:pf(t,e),fields:n.value.mapValue.fields}}function lb(t,e,n){const r=Xs(t,e.name),o=Nn(e.updateTime),c=e.createTime?Nn(e.createTime):it.min(),d=new Nr({mapValue:{fields:e.fields}}),g=dn.newFoundDocument(r,o,c,d);return n&&g.setHasCommittedMutations(),n?g.setHasCommittedMutations():g}function Ll(t,e){let n;if(e instanceof Pl)n={update:cb(t,e.key,e.value)};else if(e instanceof kl)n={delete:pf(t,e.key)};else if(e instanceof Fi)n={update:cb(t,e.key,e.data),updateMask:AM(e.fieldMask)};else{if(!(e instanceof uf))return Ke();n={verify:pf(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(o,c){const d=c.transform;if(d instanceof Nl)return{fieldPath:c.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(d instanceof Au)return{fieldPath:c.field.canonicalString(),appendMissingElements:{values:d.elements}};if(d instanceof xu)return{fieldPath:c.field.canonicalString(),removeAllFromArray:{values:d.elements}};if(d instanceof Js)return{fieldPath:c.field.canonicalString(),increment:d.gt};throw Ke()}(0,r))),e.precondition.isNone||(n.currentDocument=void 0!==(o=e.precondition).updateTime?{updateTime:ob(t,o.updateTime)}:void 0!==o.exists?{exists:o.exists}:Ke()),n;var o}function xm(t,e){const n=e.currentDocument?void 0!==(o=e.currentDocument).updateTime?yn.updateTime(Nn(o.updateTime)):void 0!==o.exists?yn.exists(o.exists):yn.none():yn.none(),r=e.updateTransforms?e.updateTransforms.map(o=>function(c,d){let g=null;"setToServerValue"in d?(rt("REQUEST_TIME"===d.setToServerValue),g=new Nl):"appendMissingElements"in d?g=new Au(d.appendMissingElements.values||[]):"removeAllFromArray"in d?g=new xu(d.removeAllFromArray.values||[]):"increment"in d?g=new Js(c,d.increment):Ke();const v=xn.fromServerFormat(d.fieldPath);return new Rl(v,g)}(t,o)):[];var o;if(e.update){const o=Xs(t,e.update.name),c=new Nr({mapValue:{fields:e.update.fields}});if(e.updateMask){const d=new _i((e.updateMask.fieldPaths||[]).map(D=>xn.fromServerFormat(D)));return new Fi(o,c,d,n,r)}return new Pl(o,c,n,r)}if(e.delete){const o=Xs(t,e.delete);return new kl(o,n)}if(e.verify){const o=Xs(t,e.verify);return new uf(o,n)}return Ke()}function SI(t,e){return{documents:[TI(t,e.path)]}}function AI(t,e){const n={structuredQuery:{}},r=e.path;null!==e.collectionGroup?(n.parent=TI(t,r),n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(n.parent=TI(t,r.popLast()),n.structuredQuery.from=[{collectionId:r.lastSegment()}]);const o=function(v){if(0!==v.length)return YS(nn.create(v,"and"))}(e.filters);o&&(n.structuredQuery.where=o);const c=function(v){if(0!==v.length)return v.map(D=>{return{field:Ao((T=D).field),direction:ZS(T.dir)};var T})}(e.orderBy);c&&(n.structuredQuery.orderBy=c);const d=bI(t,e.limit);var g,v;return null!==d&&(n.structuredQuery.limit=d),e.startAt&&(n.structuredQuery.startAt={before:(g=e.startAt).inclusive,values:g.position}),e.endAt&&(n.structuredQuery.endAt={before:!(v=e.endAt).inclusive,values:v.position}),n}function $r(t){let e=CI(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let o=null;if(r>0){rt(1===r);const T=n.from[0];T.allDescendants?o=T.collectionId:e=e.child(T.collectionId)}let c=[];n.where&&(c=function(T){const A=db(T);return A instanceof nn&&aI(A)?A.getFilters():[A]}(n.where));let d=[];n.orderBy&&(d=n.orderBy.map(T=>{return new Tl(Ru((A=T).field),function(U){switch(U){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(A.direction));var A}));let g=null;n.limit&&(g=function(T){let A;return A="object"==typeof T?T.value:T,gl(A)?null:A}(n.limit));let v=null;var T;n.startAt&&(v=new Co((T=n.startAt).values||[],!!T.before));let D=null;return n.endAt&&(D=function(T){return new Co(T.values||[],!T.before)}(n.endAt)),ND(e,o,d,c,g,"F",v,D)}function db(t){return void 0!==t.unaryFilter?function(e){switch(e.unaryFilter.op){case"IS_NAN":const n=Ru(e.unaryFilter.field);return Vt.create(n,"==",{doubleValue:NaN});case"IS_NULL":const r=Ru(e.unaryFilter.field);return Vt.create(r,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const o=Ru(e.unaryFilter.field);return Vt.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const c=Ru(e.unaryFilter.field);return Vt.create(c,"!=",{nullValue:"NULL_VALUE"});default:return Ke()}}(t):void 0!==t.fieldFilter?Vt.create(Ru((e=t).fieldFilter.field),function(n){switch(n){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Ke()}}(e.fieldFilter.op),e.fieldFilter.value):void 0!==t.compositeFilter?function(e){return nn.create(e.compositeFilter.filters.map(n=>db(n)),function(n){switch(n){case"AND":return"and";case"OR":return"or";default:return Ke()}}(e.compositeFilter.op))}(t):Ke();var e}function ZS(t){return zS[t]}function CM(t){return ib[t]}function SM(t){return sb[t]}function Ao(t){return{fieldPath:t.canonicalString()}}function Ru(t){return xn.fromServerFormat(t.fieldPath)}function YS(t){return t instanceof Vt?function(e){if("=="===e.op){if(NS(e.value))return{unaryFilter:{field:Ao(e.field),op:"IS_NAN"}};if(ID(e.value))return{unaryFilter:{field:Ao(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(NS(e.value))return{unaryFilter:{field:Ao(e.field),op:"IS_NOT_NAN"}};if(ID(e.value))return{unaryFilter:{field:Ao(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Ao(e.field),op:CM(e.op),value:e.value}}}(t):t instanceof nn?function(e){const n=e.getFilters().map(r=>YS(r));return 1===n.length?n[0]:{compositeFilter:{op:SM(e.op),filters:n}}}(t):Ke()}function AM(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function QS(t){return t.length>=4&&"projects"===t.get(0)&&"databases"===t.get(2)}class Vi{constructor(e,n,r,o,c=it.min(),d=it.min(),g=ir.EMPTY_BYTE_STRING,v=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=o,this.snapshotVersion=c,this.lastLimboFreeSnapshotVersion=d,this.resumeToken=g,this.expectedCount=v}withSequenceNumber(e){return new Vi(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new Vi(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Vi(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Vi(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class hb{constructor(e){this.fe=e}}function fb(t,e){const n=e.key,r={prefixPath:n.getCollectionPath().popLast().toArray(),collectionGroup:n.collectionGroup,documentId:n.path.lastSegment(),readTime:gf(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document={name:pf(o=t.fe,(c=e).key),fields:c.data.value.mapValue.fields,updateTime:Ea(o,c.version.toTimestamp()),createTime:Ea(o,c.createTime.toTimestamp())};else if(e.isNoDocument())r.noDocument={path:n.path.toArray(),readTime:Pu(e.version)};else{if(!e.isUnknownDocument())return Ke();r.unknownDocument={path:n.path.toArray(),version:Pu(e.version)}}var o,c;return r}function gf(t){const e=t.toTimestamp();return[e.seconds,e.nanoseconds]}function Pu(t){const e=t.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function ku(t){const e=new on(t.seconds,t.nanoseconds);return it.fromTimestamp(e)}function Ou(t,e){const n=(e.baseMutations||[]).map(c=>xm(t.fe,c));for(let c=0;c<e.mutations.length-1;++c)c+1<e.mutations.length&&void 0!==e.mutations[c+1].transform&&(e.mutations[c].updateTransforms=e.mutations[c+1].transform.fieldTransforms,e.mutations.splice(c+1,1),++c);const r=e.mutations.map(c=>xm(t.fe,c)),o=on.fromMillis(e.localWriteTimeMs);return new vI(e.batchId,o,n,r)}function Lu(t){const e=ku(t.readTime),n=void 0!==t.lastLimboFreeSnapshotVersion?ku(t.lastLimboFreeSnapshotVersion):it.min();let r;var o;return void 0!==t.query.documents?(rt(1===(o=t.query).documents.length),r=ii(Al(CI(o.documents[0])))):r=ii($r(t.query)),new Vi(r,t.targetId,"TargetPurposeListen",t.lastListenSequenceNumber,e,n,ir.fromBase64String(t.resumeToken))}function MI(t,e){const n=Pu(e.snapshotVersion),r=Pu(e.lastLimboFreeSnapshotVersion);let o;o=gm(e.target)?SI(t.fe,e.target):AI(t.fe,e.target);const c=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:Tu(e.target),readTime:n,resumeToken:c,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:o}}function NI(t){const e=$r({parent:t.parent,structuredQuery:t.structuredQuery});return"LAST"===t.limitType?xl(e,e.limit,"L"):e}function Vl(t,e){return new II(e.largestBatchId,xm(t.fe,e.overlayMutation))}function Mm(t,e){const n=e.path.lastSegment();return[t,Fn(e.path.popLast()),n]}function JS(t,e,n,r){return{indexId:t,uid:e.uid||"",sequenceNumber:n,readTime:Pu(r.readTime),documentKey:Fn(r.documentKey.path),largestBatchId:r.largestBatchId}}class pb{getBundleMetadata(e,n){return gb(e).get(n).next(r=>{if(r)return{id:(o=r).bundleId,createTime:ku(o.createTime),version:o.version};var o})}saveBundleMetadata(e,n){return gb(e).put({bundleId:(r=n).id,createTime:Pu(Nn(r.createTime)),version:r.version});var r}getNamedQuery(e,n){return RI(e).get(n).next(r=>{if(r)return{name:(o=r).name,query:NI(o.bundledQuery),readTime:ku(o.readTime)};var o})}saveNamedQuery(e,n){return RI(e).put({name:(r=n).name,readTime:Pu(Nn(r.readTime)),bundledQuery:r.bundledQuery});var r}}function gb(t){return pr(t,"bundles")}function RI(t){return pr(t,"namedQueries")}class xo{constructor(e,n){this.serializer=e,this.userId=n}static de(e,n){return new xo(e,n.uid||"")}getOverlay(e,n){return mf(e).get(Mm(this.userId,n)).next(r=>r?Vl(this.serializer,r):null)}getOverlays(e,n){const r=Qs();return Q.forEach(n,o=>this.getOverlay(e,o).next(c=>{null!==c&&r.set(o,c)})).next(()=>r)}saveOverlays(e,n,r){const o=[];return r.forEach((c,d)=>{const g=new II(n,d);o.push(this.we(e,g))}),Q.waitFor(o)}removeOverlaysForBatchId(e,n,r){const o=new Set;n.forEach(d=>o.add(Fn(d.getCollectionPath())));const c=[];return o.forEach(d=>{const g=IDBKeyRange.bound([this.userId,d,r],[this.userId,d,r+1],!1,!0);c.push(mf(e).J("collectionPathOverlayIndex",g))}),Q.waitFor(c)}getOverlaysForCollection(e,n,r){const o=Qs(),c=Fn(n),d=IDBKeyRange.bound([this.userId,c,r],[this.userId,c,Number.POSITIVE_INFINITY],!0);return mf(e).j("collectionPathOverlayIndex",d).next(g=>{for(const v of g){const D=Vl(this.serializer,v);o.set(D.getKey(),D)}return o})}getOverlaysForCollectionGroup(e,n,r,o){const c=Qs();let d;const g=IDBKeyRange.bound([this.userId,n,r],[this.userId,n,Number.POSITIVE_INFINITY],!0);return mf(e).X({index:"collectionGroupOverlayIndex",range:g},(v,D,T)=>{const A=Vl(this.serializer,D);c.size()<o||A.largestBatchId===d?(c.set(A.getKey(),A),d=A.largestBatchId):T.done()}).next(()=>c)}we(e,n){return mf(e).put(function(r,o,c){const[d,g,v]=Mm(o,c.mutation.key);return{userId:o,collectionPath:g,documentId:v,collectionGroup:c.mutation.key.getCollectionGroup(),largestBatchId:c.largestBatchId,overlayMutation:Ll(r.fe,c.mutation)}}(this.serializer,this.userId,n))}}function mf(t){return pr(t,"documentOverlays")}class wa{constructor(){}_e(e,n){this.me(e,n),n.ge()}me(e,n){if("nullValue"in e)this.ye(n,5);else if("booleanValue"in e)this.ye(n,10),n.pe(e.booleanValue?1:0);else if("integerValue"in e)this.ye(n,15),n.pe(Mn(e.integerValue));else if("doubleValue"in e){const r=Mn(e.doubleValue);isNaN(r)?this.ye(n,13):(this.ye(n,15),ml(r)?n.pe(0):n.pe(r))}else if("timestampValue"in e){const r=e.timestampValue;this.ye(n,20),"string"==typeof r?n.Ie(r):(n.Ie(`${r.seconds||""}`),n.pe(r.nanos||0))}else if("stringValue"in e)this.Te(e.stringValue,n),this.Ee(n);else if("bytesValue"in e)this.ye(n,30),n.Ae(Zs(e.bytesValue)),this.Ee(n);else if("referenceValue"in e)this.ve(e.referenceValue,n);else if("geoPointValue"in e){const r=e.geoPointValue;this.ye(n,45),n.pe(r.latitude||0),n.pe(r.longitude||0)}else"mapValue"in e?ED(e)?this.ye(n,Number.MAX_SAFE_INTEGER):(this.Re(e.mapValue,n),this.Ee(n)):"arrayValue"in e?(this.Pe(e.arrayValue,n),this.Ee(n)):Ke()}Te(e,n){this.ye(n,25),this.be(e,n)}be(e,n){n.Ie(e)}Re(e,n){const r=e.fields||{};this.ye(n,55);for(const o of Object.keys(r))this.Te(o,n),this.me(r[o],n)}Pe(e,n){const r=e.values||[];this.ye(n,50);for(const o of r)this.me(o,n)}ve(e,n){this.ye(n,37),Be.fromName(e).path.forEach(r=>{this.ye(n,60),this.be(r,n)})}ye(e,n){e.pe(n)}Ee(e){e.pe(2)}}function PI(t){if(0===t)return 8;let e=0;return!(t>>4)&&(e+=4,t<<=4),!(t>>6)&&(e+=2,t<<=2),!(t>>7)&&(e+=1),e}function XS(t){const e=64-function(n){let r=0;for(let o=0;o<8;++o){const c=PI(255&n[o]);if(r+=c,8!==c)break}return r}(t);return Math.ceil(e/8)}wa.Ve=new wa;class eA{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Se(e){const n=e[Symbol.iterator]();let r=n.next();for(;!r.done;)this.De(r.value),r=n.next();this.Ce()}xe(e){const n=e[Symbol.iterator]();let r=n.next();for(;!r.done;)this.Ne(r.value),r=n.next();this.ke()}Me(e){for(const n of e){const r=n.charCodeAt(0);if(r<128)this.De(r);else if(r<2048)this.De(960|r>>>6),this.De(128|63&r);else if(n<"\ud800"||"\udbff"<n)this.De(480|r>>>12),this.De(128|63&r>>>6),this.De(128|63&r);else{const o=n.codePointAt(0);this.De(240|o>>>18),this.De(128|63&o>>>12),this.De(128|63&o>>>6),this.De(128|63&o)}}this.Ce()}$e(e){for(const n of e){const r=n.charCodeAt(0);if(r<128)this.Ne(r);else if(r<2048)this.Ne(960|r>>>6),this.Ne(128|63&r);else if(n<"\ud800"||"\udbff"<n)this.Ne(480|r>>>12),this.Ne(128|63&r>>>6),this.Ne(128|63&r);else{const o=n.codePointAt(0);this.Ne(240|o>>>18),this.Ne(128|63&o>>>12),this.Ne(128|63&o>>>6),this.Ne(128|63&o)}}this.ke()}Oe(e){const n=this.Fe(e),r=XS(n);this.Be(1+r),this.buffer[this.position++]=255&r;for(let o=n.length-r;o<n.length;++o)this.buffer[this.position++]=255&n[o]}Le(e){const n=this.Fe(e),r=XS(n);this.Be(1+r),this.buffer[this.position++]=~(255&r);for(let o=n.length-r;o<n.length;++o)this.buffer[this.position++]=~(255&n[o])}qe(){this.Ue(255),this.Ue(255)}Ke(){this.Ge(255),this.Ge(255)}reset(){this.position=0}seed(e){this.Be(e.length),this.buffer.set(e,this.position),this.position+=e.length}Qe(){return this.buffer.slice(0,this.position)}Fe(e){const n=function(o){const c=new DataView(new ArrayBuffer(8));return c.setFloat64(0,o,!1),new Uint8Array(c.buffer)}(e),r=0!=(128&n[0]);n[0]^=r?255:128;for(let o=1;o<n.length;++o)n[o]^=r?255:0;return n}De(e){const n=255&e;0===n?(this.Ue(0),this.Ue(255)):255===n?(this.Ue(255),this.Ue(0)):this.Ue(n)}Ne(e){const n=255&e;0===n?(this.Ge(0),this.Ge(255)):255===n?(this.Ge(255),this.Ge(0)):this.Ge(e)}Ce(){this.Ue(0),this.Ue(1)}ke(){this.Ge(0),this.Ge(1)}Ue(e){this.Be(1),this.buffer[this.position++]=e}Ge(e){this.Be(1),this.buffer[this.position++]=~e}Be(e){const n=e+this.position;if(n<=this.buffer.length)return;let r=2*this.buffer.length;r<n&&(r=n);const o=new Uint8Array(r);o.set(this.buffer),this.buffer=o}}class xM{constructor(e){this.je=e}Ae(e){this.je.Se(e)}Ie(e){this.je.Me(e)}pe(e){this.je.Oe(e)}ge(){this.je.qe()}}class tA{constructor(e){this.je=e}Ae(e){this.je.xe(e)}Ie(e){this.je.$e(e)}pe(e){this.je.Le(e)}ge(){this.je.Ke()}}class yf{constructor(){this.je=new eA,this.ze=new xM(this.je),this.We=new tA(this.je)}seed(e){this.je.seed(e)}He(e){return 0===e?this.ze:this.We}Qe(){return this.je.Qe()}reset(){this.je.reset()}}class Fu{constructor(e,n,r,o){this.indexId=e,this.documentKey=n,this.arrayValue=r,this.directionalValue=o}Je(){const e=this.directionalValue.length,n=0===e||255===this.directionalValue[e-1]?e+1:e,r=new Uint8Array(n);return r.set(this.directionalValue,0),n!==e?r.set([0],this.directionalValue.length):++r[r.length-1],new Fu(this.indexId,this.documentKey,this.arrayValue,r)}}function Mo(t,e){let n=t.indexId-e.indexId;return 0!==n?n:(n=kI(t.arrayValue,e.arrayValue),0!==n?n:(n=kI(t.directionalValue,e.directionalValue),0!==n?n:Be.comparator(t.documentKey,e.documentKey)))}function kI(t,e){for(let n=0;n<t.length&&n<e.length;++n){const r=t[n]-e[n];if(0!==r)return r}return t.length-e.length}class nA{constructor(e){this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.Ye=e.orderBy,this.Xe=[];for(const n of e.filters){const r=n;r.isInequality()?this.Ze=r:this.Xe.push(r)}}tn(e){rt(e.collectionGroup===this.collectionId);const n=im(e);if(void 0!==n&&!this.en(n))return!1;const r=Iu(e);let o=new Set,c=0,d=0;for(;c<r.length&&this.en(r[c]);++c)o=o.add(r[c].fieldPath.canonicalString());if(c===r.length)return!0;if(void 0!==this.Ze){if(!o.has(this.Ze.field.canonicalString())){const g=r[c];if(!this.nn(this.Ze,g)||!this.sn(this.Ye[d++],g))return!1}++c}for(;c<r.length;++c)if(d>=this.Ye.length||!this.sn(this.Ye[d++],r[c]))return!1;return!0}en(e){for(const n of this.Xe)if(this.nn(n,e))return!0;return!1}nn(e,n){return!(void 0===e||!e.field.isEqual(n.fieldPath))&&2===n.kind==("array-contains"===e.op||"array-contains-any"===e.op)}sn(e,n){return!!e.field.isEqual(n.fieldPath)&&(0===n.kind&&"asc"===e.dir||1===n.kind&&"desc"===e.dir)}}function OI(t){var e,n;if(rt(t instanceof Vt||t instanceof nn),t instanceof Vt){if(t instanceof lI){const o=(null===(n=null===(e=t.value.arrayValue)||void 0===e?void 0:e.values)||void 0===n?void 0:n.map(c=>Vt.create(t.field,"==",c)))||[];return nn.create(o,"or")}return t}const r=t.filters.map(o=>OI(o));return nn.create(r,t.op)}function mb(t){if(0===t.getFilters().length)return[];const e=BI(OI(t));return rt(VI(e)),LI(e)||FI(e)?[e]:e.getFilters()}function LI(t){return t instanceof Vt}function FI(t){return t instanceof nn&&aI(t)}function VI(t){return LI(t)||FI(t)||function(e){if(e instanceof nn&&tf(e)){for(const n of e.getFilters())if(!LI(n)&&!FI(n))return!1;return!0}return!1}(t)}function BI(t){if(rt(t instanceof Vt||t instanceof nn),t instanceof Vt)return t;if(1===t.filters.length)return BI(t.filters[0]);const e=t.filters.map(r=>BI(r));let n=nn.create(e,t.op);return n=_f(n),VI(n)?n:(rt(n instanceof nn),rt(Cl(n)),rt(n.filters.length>1),n.filters.reduce((r,o)=>Nm(r,o)))}function Nm(t,e){let n;return rt(t instanceof Vt||t instanceof nn),rt(e instanceof Vt||e instanceof nn),n=t instanceof Vt?e instanceof Vt?nn.create([t,e],"and"):UI(t,e):e instanceof Vt?UI(e,t):function(r,o){if(rt(r.filters.length>0&&o.filters.length>0),Cl(r)&&Cl(o))return CD(r,o.getFilters());const c=tf(r)?r:o,d=tf(r)?o:r,g=c.filters.map(v=>Nm(v,d));return nn.create(g,"or")}(t,e),_f(n)}function UI(t,e){if(Cl(e))return CD(e,t.getFilters());{const n=e.filters.map(r=>Nm(t,r));return nn.create(n,"or")}}function _f(t){if(rt(t instanceof Vt||t instanceof nn),t instanceof Vt)return t;const e=t.getFilters();if(1===e.length)return _f(e[0]);if(uI(t))return t;const n=e.map(o=>_f(o)),r=[];return n.forEach(o=>{o instanceof Vt?r.push(o):o instanceof nn&&(o.op===t.op?r.push(...o.filters):r.push(o))}),1===r.length?r[0]:nn.create(r,t.op)}class yb{constructor(){this.rn=new jI}addToCollectionParentIndex(e,n){return this.rn.add(n),Q.resolve()}getCollectionParents(e,n){return Q.resolve(this.rn.getEntries(n))}addFieldIndex(e,n){return Q.resolve()}deleteFieldIndex(e,n){return Q.resolve()}getDocumentsMatchingTarget(e,n){return Q.resolve(null)}getIndexType(e,n){return Q.resolve(0)}getFieldIndexes(e,n){return Q.resolve([])}getNextCollectionGroupToUpdate(e){return Q.resolve(null)}getMinOffset(e,n){return Q.resolve(Li.min())}getMinOffsetFromCollectionGroup(e,n){return Q.resolve(Li.min())}updateCollectionGroup(e,n,r){return Q.resolve()}updateIndexEntries(e,n){return Q.resolve()}}class jI{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),o=this.index[n]||new un(Ut.comparator),c=!o.has(r);return this.index[n]=o.add(r),c}has(e){const n=e.lastSegment(),r=e.popLast(),o=this.index[n];return o&&o.has(r)}getEntries(e){return(this.index[e]||new un(Ut.comparator)).toArray()}}const Rm=new Uint8Array(0);class MM{constructor(e,n){this.user=e,this.databaseId=n,this.on=new jI,this.un=new Ys(r=>Tu(r),(r,o)=>nf(r,o)),this.uid=e.uid||""}addToCollectionParentIndex(e,n){if(!this.on.has(n)){const r=n.lastSegment(),o=n.popLast();e.addOnCommittedListener(()=>{this.on.add(n)});const c={collectionId:r,parent:Fn(o)};return $I(e).put(c)}return Q.resolve()}getCollectionParents(e,n){const r=[],o=IDBKeyRange.bound([n,""],[qv(n),""],!1,!0);return $I(e).j(o).next(c=>{for(const d of c){if(d.collectionId!==n)break;r.push(ri(d.parent))}return r})}addFieldIndex(e,n){const r=HI(e),o={indexId:(d=n).indexId,collectionGroup:d.collectionGroup,fields:d.fields.map(g=>[g.fieldPath.canonicalString(),g.kind])};var d;delete o.indexId;const c=r.add(o);if(n.indexState){const d=km(e);return c.next(g=>{d.put(JS(g,this.user,n.indexState.sequenceNumber,n.indexState.offset))})}return c.next()}deleteFieldIndex(e,n){const r=HI(e),o=km(e),c=Pm(e);return r.delete(n.indexId).next(()=>o.delete(IDBKeyRange.bound([n.indexId],[n.indexId+1],!1,!0))).next(()=>c.delete(IDBKeyRange.bound([n.indexId],[n.indexId+1],!1,!0)))}getDocumentsMatchingTarget(e,n){const r=Pm(e);let o=!0;const c=new Map;return Q.forEach(this.cn(n),d=>this.an(e,d).next(g=>{o&&(o=!!g),c.set(d,g)})).next(()=>{if(o){let d=xt();const g=[];return Q.forEach(c,(v,D)=>{var T;ve("IndexedDbIndexManager",`Using index ${T=v,`id=${T.indexId}|cg=${T.collectionGroup}|f=${T.fields.map(ut=>`${ut.fieldPath}:${ut.kind}`).join(",")}`} to execute ${Tu(n)}`);const A=function(ut,yt){const Nt=im(yt);if(void 0===Nt)return null;for(const qt of Sl(ut,Nt.fieldPath))switch(qt.op){case"array-contains-any":return qt.value.arrayValue.values||[];case"array-contains":return[qt.value]}return null}(D,v),U=function(ut,yt){const Nt=new Map;for(const qt of Iu(yt))for(const vi of Sl(ut,qt.fieldPath))switch(vi.op){case"==":case"in":Nt.set(qt.fieldPath.canonicalString(),vi.value);break;case"not-in":case"!=":return Nt.set(qt.fieldPath.canonicalString(),vi.value),Array.from(Nt.values())}return null}(D,v),q=function(ut,yt){const Nt=[];let qt=!0;for(const vi of Iu(yt)){const Hf=0===vi.kind?mm(ut,vi.fieldPath,ut.startAt):hI(ut,vi.fieldPath,ut.startAt);Nt.push(Hf.value),qt&&(qt=Hf.inclusive)}return new Co(Nt,qt)}(D,v),he=function(ut,yt){const Nt=[];let qt=!0;for(const vi of Iu(yt)){const Hf=0===vi.kind?hI(ut,vi.fieldPath,ut.endAt):mm(ut,vi.fieldPath,ut.endAt);Nt.push(Hf.value),qt&&(qt=Hf.inclusive)}return new Co(Nt,qt)}(D,v),Se=this.hn(v,D,q),Ae=this.hn(v,D,he),Qe=this.ln(v,D,U),ot=this.fn(v.indexId,A,Se,q.inclusive,Ae,he.inclusive,Qe);return Q.forEach(ot,ut=>r.H(ut,n.limit).next(yt=>{yt.forEach(Nt=>{const qt=Be.fromSegments(Nt.documentKey);d.has(qt)||(d=d.add(qt),g.push(qt))})}))}).next(()=>g)}return Q.resolve(null)})}cn(e){let n=this.un.get(e);return n||(n=0===e.filters.length?[e]:mb(nn.create(e.filters,"and")).map(r=>dI(e.path,e.collectionGroup,e.orderBy,r.getFilters(),e.limit,e.startAt,e.endAt)),this.un.set(e,n),n)}fn(e,n,r,o,c,d,g){const v=(null!=n?n.length:1)*Math.max(r.length,c.length),D=v/(null!=n?n.length:1),T=[];for(let A=0;A<v;++A){const U=n?this.dn(n[A/D]):Rm,q=this.wn(e,U,r[A%D],o),he=this._n(e,U,c[A%D],d),Se=g.map(Ae=>this.wn(e,U,Ae,!0));T.push(...this.createRange(q,he,Se))}return T}wn(e,n,r,o){const c=new Fu(e,Be.empty(),n,r);return o?c:c.Je()}_n(e,n,r,o){const c=new Fu(e,Be.empty(),n,r);return o?c.Je():c}an(e,n){const r=new nA(n),o=null!=n.collectionGroup?n.collectionGroup:n.path.lastSegment();return this.getFieldIndexes(e,o).next(c=>{let d=null;for(const g of c)r.tn(g)&&(!d||g.fields.length>d.fields.length)&&(d=g);return d})}getIndexType(e,n){let r=2;const o=this.cn(n);return Q.forEach(o,c=>this.an(e,c).next(d=>{d?0!==r&&d.fields.length<function(g){let v=new un(xn.comparator),D=!1;for(const T of g.filters)for(const A of T.getFlattenedFilters())A.field.isKeyField()||("array-contains"===A.op||"array-contains-any"===A.op?D=!0:v=v.add(A.field));for(const T of g.orderBy)T.field.isKeyField()||(v=v.add(T.field));return v.size+(D?1:0)}(c)&&(r=1):r=0})).next(()=>null!==n.limit&&o.length>1&&2===r?1:r)}mn(e,n){const r=new yf;for(const o of Iu(e)){const c=n.data.field(o.fieldPath);if(null==c)return null;const d=r.He(o.kind);wa.Ve._e(c,d)}return r.Qe()}dn(e){const n=new yf;return wa.Ve._e(e,n.He(0)),n.Qe()}gn(e,n){const r=new yf;return wa.Ve._e(bu(this.databaseId,n),r.He(function(o){const c=Iu(o);return 0===c.length?0:c[c.length-1].kind}(e))),r.Qe()}ln(e,n,r){if(null===r)return[];let o=[];o.push(new yf);let c=0;for(const d of Iu(e)){const g=r[c++];for(const v of o)if(this.yn(n,d.fieldPath)&&Xh(g))o=this.pn(o,d,g);else{const D=v.He(d.kind);wa.Ve._e(g,D)}}return this.In(o)}hn(e,n,r){return this.ln(e,n,r.position)}In(e){const n=[];for(let r=0;r<e.length;++r)n[r]=e[r].Qe();return n}pn(e,n,r){const o=[...e],c=[];for(const d of r.arrayValue.values||[])for(const g of o){const v=new yf;v.seed(g.Qe()),wa.Ve._e(d,v.He(n.kind)),c.push(v)}return c}yn(e,n){return!!e.filters.find(r=>r instanceof Vt&&r.field.isEqual(n)&&("in"===r.op||"not-in"===r.op))}getFieldIndexes(e,n){const r=HI(e),o=km(e);return(n?r.j("collectionGroupIndex",IDBKeyRange.bound(n,n)):r.j()).next(c=>{const d=[];return Q.forEach(c,g=>o.get([g.indexId,this.uid]).next(v=>{d.push(function(D,T){const A=T?new Zh(T.sequenceNumber,new Li(ku(T.readTime),new Be(ri(T.documentKey)),T.largestBatchId)):Zh.empty(),U=D.fields.map(([q,he])=>new sm(xn.fromServerFormat(q),he));return new Kh(D.indexId,D.collectionGroup,U,A)}(g,v))})).next(()=>d)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(n=>0===n.length?null:(n.sort((r,o)=>{const c=r.indexState.sequenceNumber-o.indexState.sequenceNumber;return 0!==c?c:wt(r.collectionGroup,o.collectionGroup)}),n[0].collectionGroup))}updateCollectionGroup(e,n,r){const o=HI(e),c=km(e);return this.Tn(e).next(d=>o.j("collectionGroupIndex",IDBKeyRange.bound(n,n)).next(g=>Q.forEach(g,v=>c.put(JS(v.indexId,this.user,d,r)))))}updateIndexEntries(e,n){const r=new Map;return Q.forEach(n,(o,c)=>{const d=r.get(o.collectionGroup);return(d?Q.resolve(d):this.getFieldIndexes(e,o.collectionGroup)).next(g=>(r.set(o.collectionGroup,g),Q.forEach(g,v=>this.En(e,o,v).next(D=>{const T=this.An(c,v);return D.isEqual(T)?Q.resolve():this.vn(e,c,v,D,T)}))))})}Rn(e,n,r,o){return Pm(e).put({indexId:o.indexId,uid:this.uid,arrayValue:o.arrayValue,directionalValue:o.directionalValue,orderedDocumentKey:this.gn(r,n.key),documentKey:n.key.path.toArray()})}Pn(e,n,r,o){return Pm(e).delete([o.indexId,this.uid,o.arrayValue,o.directionalValue,this.gn(r,n.key),n.key.path.toArray()])}En(e,n,r){const o=Pm(e);let c=new un(Mo);return o.X({index:"documentKeyIndex",range:IDBKeyRange.only([r.indexId,this.uid,this.gn(r,n)])},(d,g)=>{c=c.add(new Fu(r.indexId,n,g.arrayValue,g.directionalValue))}).next(()=>c)}An(e,n){let r=new un(Mo);const o=this.mn(n,e);if(null==o)return r;const c=im(n);if(null!=c){const d=e.data.field(c.fieldPath);if(Xh(d))for(const g of d.arrayValue.values||[])r=r.add(new Fu(n.indexId,e.key,this.dn(g),o))}else r=r.add(new Fu(n.indexId,e.key,Rm,o));return r}vn(e,n,r,o,c){ve("IndexedDbIndexManager","Updating index entries for document '%s'",n.key);const d=[];return function(g,v,D,T,A){const U=g.getIterator(),q=v.getIterator();let he=Eu(U),Se=Eu(q);for(;he||Se;){let Ae=!1,Qe=!1;if(he&&Se){const ot=D(he,Se);ot<0?Qe=!0:ot>0&&(Ae=!0)}else null!=he?Qe=!0:Ae=!0;Ae?(T(Se),Se=Eu(q)):Qe?(A(he),he=Eu(U)):(he=Eu(U),Se=Eu(q))}}(o,c,Mo,g=>{d.push(this.Rn(e,n,r,g))},g=>{d.push(this.Pn(e,n,r,g))}),Q.waitFor(d)}Tn(e){let n=1;return km(e).X({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,o,c)=>{c.done(),n=o.sequenceNumber+1}).next(()=>n)}createRange(e,n,r){r=r.sort((d,g)=>Mo(d,g)).filter((d,g,v)=>!g||0!==Mo(d,v[g-1]));const o=[];o.push(e);for(const d of r){const g=Mo(d,e),v=Mo(d,n);if(0===g)o[0]=e.Je();else if(g>0&&v<0)o.push(d),o.push(d.Je());else if(v>0)break}o.push(n);const c=[];for(let d=0;d<o.length;d+=2){if(this.bn(o[d],o[d+1]))return[];c.push(IDBKeyRange.bound([o[d].indexId,this.uid,o[d].arrayValue,o[d].directionalValue,Rm,[]],[o[d+1].indexId,this.uid,o[d+1].arrayValue,o[d+1].directionalValue,Rm,[]]))}return c}bn(e,n){return Mo(e,n)>0}getMinOffsetFromCollectionGroup(e,n){return this.getFieldIndexes(e,n).next(rA)}getMinOffset(e,n){return Q.mapArray(this.cn(n),r=>this.an(e,r).next(o=>o||Ke())).next(rA)}}function $I(t){return pr(t,"collectionParents")}function Pm(t){return pr(t,"indexEntries")}function HI(t){return pr(t,"indexConfiguration")}function km(t){return pr(t,"indexState")}function rA(t){rt(0!==t.length);let e=t[0].indexState.offset,n=e.largestBatchId;for(let r=1;r<t.length;r++){const o=t[r].indexState.offset;Kv(o,e)<0&&(e=o),n<o.largestBatchId&&(n=o.largestBatchId)}return new Li(e.readTime,e.documentKey,n)}const iA={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class oi{constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new oi(e,oi.DEFAULT_COLLECTION_PERCENTILE,oi.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function sA(t,e,n){const r=t.store("mutations"),o=t.store("documentMutations"),c=[],d=IDBKeyRange.only(n.batchId);let g=0;const v=r.X({range:d},(T,A,U)=>(g++,U.delete()));c.push(v.next(()=>{rt(1===g)}));const D=[];for(const T of n.mutations){const A=bS(e,T.key.path,n.batchId);c.push(o.delete(A)),D.push(T.key)}return Q.waitFor(c).next(()=>D)}function zI(t){if(!t)return 0;let e;if(t.document)e=t.document;else if(t.unknownDocument)e=t.unknownDocument;else{if(!t.noDocument)throw Ke();e=t.noDocument}return JSON.stringify(e).length}oi.DEFAULT_COLLECTION_PERCENTILE=10,oi.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,oi.DEFAULT=new oi(41943040,oi.DEFAULT_COLLECTION_PERCENTILE,oi.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),oi.DISABLED=new oi(-1,0,0);class GI{constructor(e,n,r,o){this.userId=e,this.serializer=n,this.indexManager=r,this.referenceDelegate=o,this.Vn={}}static de(e,n,r,o){rt(""!==e.uid);const c=e.isAuthenticated()?e.uid:"";return new GI(c,n,r,o)}checkEmpty(e){let n=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return eo(e).X({index:"userMutationsIndex",range:r},(o,c,d)=>{n=!1,d.done()}).next(()=>n)}addMutationBatch(e,n,r,o){const c=Bl(e),d=eo(e);return d.add({}).next(g=>{rt("number"==typeof g);const v=new vI(g,n,r,o),D=function(U,q,he){const Se=he.baseMutations.map(Qe=>Ll(U.fe,Qe)),Ae=he.mutations.map(Qe=>Ll(U.fe,Qe));return{userId:q,batchId:he.batchId,localWriteTimeMs:he.localWriteTime.toMillis(),baseMutations:Se,mutations:Ae}}(this.serializer,this.userId,v),T=[];let A=new un((U,q)=>wt(U.canonicalString(),q.canonicalString()));for(const U of o){const q=bS(this.userId,U.key.path,g);A=A.add(U.key.path.popLast()),T.push(d.put(D)),T.push(c.put(q,lD))}return A.forEach(U=>{T.push(this.indexManager.addToCollectionParentIndex(e,U))}),e.addOnCommittedListener(()=>{this.Vn[g]=v.keys()}),Q.waitFor(T).next(()=>v)})}lookupMutationBatch(e,n){return eo(e).get(n).next(r=>r?(rt(r.userId===this.userId),Ou(this.serializer,r)):null)}Sn(e,n){return this.Vn[n]?Q.resolve(this.Vn[n]):this.lookupMutationBatch(e,n).next(r=>{if(r){const o=r.keys();return this.Vn[n]=o,o}return null})}getNextMutationBatchAfterBatchId(e,n){const r=n+1,o=IDBKeyRange.lowerBound([this.userId,r]);let c=null;return eo(e).X({index:"userMutationsIndex",range:o},(d,g,v)=>{g.userId===this.userId&&(rt(g.batchId>=r),c=Ou(this.serializer,g)),v.done()}).next(()=>c)}getHighestUnacknowledgedBatchId(e){const n=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=-1;return eo(e).X({index:"userMutationsIndex",range:n,reverse:!0},(o,c,d)=>{r=c.batchId,d.done()}).next(()=>r)}getAllMutationBatches(e){const n=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return eo(e).j("userMutationsIndex",n).next(r=>r.map(o=>Ou(this.serializer,o)))}getAllMutationBatchesAffectingDocumentKey(e,n){const r=yl(this.userId,n.path),o=IDBKeyRange.lowerBound(r),c=[];return Bl(e).X({range:o},(d,g,v)=>{const[D,T,A]=d,U=ri(T);if(D===this.userId&&n.path.isEqual(U))return eo(e).get(A).next(q=>{if(!q)throw Ke();rt(q.userId===this.userId),c.push(Ou(this.serializer,q))});v.done()}).next(()=>c)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new un(wt);const o=[];return n.forEach(c=>{const d=yl(this.userId,c.path),g=IDBKeyRange.lowerBound(d),v=Bl(e).X({range:g},(D,T,A)=>{const[U,q,he]=D,Se=ri(q);U===this.userId&&c.path.isEqual(Se)?r=r.add(he):A.done()});o.push(v)}),Q.waitFor(o).next(()=>this.Dn(e,r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,o=r.length+1,c=yl(this.userId,r),d=IDBKeyRange.lowerBound(c);let g=new un(wt);return Bl(e).X({range:d},(v,D,T)=>{const[A,U,q]=v,he=ri(U);A===this.userId&&r.isPrefixOf(he)?he.length===o&&(g=g.add(q)):T.done()}).next(()=>this.Dn(e,g))}Dn(e,n){const r=[],o=[];return n.forEach(c=>{o.push(eo(e).get(c).next(d=>{if(null===d)throw Ke();rt(d.userId===this.userId),r.push(Ou(this.serializer,d))}))}),Q.waitFor(o).next(()=>r)}removeMutationBatch(e,n){return sA(e.ht,this.userId,n).next(r=>(e.addOnCommittedListener(()=>{this.Cn(n.batchId)}),Q.forEach(r,o=>this.referenceDelegate.markPotentiallyOrphaned(e,o))))}Cn(e){delete this.Vn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(n=>{if(!n)return Q.resolve();const r=IDBKeyRange.lowerBound([this.userId]),o=[];return Bl(e).X({range:r},(c,d,g)=>{if(c[0]===this.userId){const v=ri(c[1]);o.push(v)}else g.done()}).next(()=>{rt(0===o.length)})})}containsKey(e,n){return _b(e,this.userId,n)}xn(e){return vb(e).get(this.userId).next(n=>n||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function _b(t,e,n){const r=yl(e,n.path),o=r[1],c=IDBKeyRange.lowerBound(r);let d=!1;return Bl(t).X({range:c,Y:!0},(g,v,D)=>{const[T,A,U]=g;T===e&&A===o&&(d=!0),D.done()}).next(()=>d)}function eo(t){return pr(t,"mutations")}function Bl(t){return pr(t,"documentMutations")}function vb(t){return pr(t,"mutationQueues")}class to{constructor(e){this.Nn=e}next(){return this.Nn+=2,this.Nn}static kn(){return new to(0)}static Mn(){return new to(-1)}}class oA{constructor(e,n){this.referenceDelegate=e,this.serializer=n}allocateTargetId(e){return this.$n(e).next(n=>{const r=new to(n.highestTargetId);return n.highestTargetId=r.next(),this.On(e,n).next(()=>n.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.$n(e).next(n=>it.fromTimestamp(new on(n.lastRemoteSnapshotVersion.seconds,n.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.$n(e).next(n=>n.highestListenSequenceNumber)}setTargetsMetadata(e,n,r){return this.$n(e).next(o=>(o.highestListenSequenceNumber=n,r&&(o.lastRemoteSnapshotVersion=r.toTimestamp()),n>o.highestListenSequenceNumber&&(o.highestListenSequenceNumber=n),this.On(e,o)))}addTargetData(e,n){return this.Fn(e,n).next(()=>this.$n(e).next(r=>(r.targetCount+=1,this.Bn(n,r),this.On(e,r))))}updateTargetData(e,n){return this.Fn(e,n)}removeTargetData(e,n){return this.removeMatchingKeysForTargetId(e,n.targetId).next(()=>vf(e).delete(n.targetId)).next(()=>this.$n(e)).next(r=>(rt(r.targetCount>0),r.targetCount-=1,this.On(e,r)))}removeTargets(e,n,r){let o=0;const c=[];return vf(e).X((d,g)=>{const v=Lu(g);v.sequenceNumber<=n&&null===r.get(v.targetId)&&(o++,c.push(this.removeTargetData(e,v)))}).next(()=>Q.waitFor(c)).next(()=>o)}forEachTarget(e,n){return vf(e).X((r,o)=>{const c=Lu(o);n(c)})}$n(e){return aA(e).get("targetGlobalKey").next(n=>(rt(null!==n),n))}On(e,n){return aA(e).put("targetGlobalKey",n)}Fn(e,n){return vf(e).put(MI(this.serializer,n))}Bn(e,n){let r=!1;return e.targetId>n.highestTargetId&&(n.highestTargetId=e.targetId,r=!0),e.sequenceNumber>n.highestListenSequenceNumber&&(n.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.$n(e).next(n=>n.targetCount)}getTargetData(e,n){const r=Tu(n),o=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let c=null;return vf(e).X({range:o,index:"queryTargetsIndex"},(d,g,v)=>{const D=Lu(g);nf(n,D.target)&&(c=D,v.done())}).next(()=>c)}addMatchingKeys(e,n,r){const o=[],c=Da(e);return n.forEach(d=>{const g=Fn(d.path);o.push(c.put({targetId:r,path:g})),o.push(this.referenceDelegate.addReference(e,r,d))}),Q.waitFor(o)}removeMatchingKeys(e,n,r){const o=Da(e);return Q.forEach(n,c=>{const d=Fn(c.path);return Q.waitFor([o.delete([r,d]),this.referenceDelegate.removeReference(e,r,c)])})}removeMatchingKeysForTargetId(e,n){const r=Da(e),o=IDBKeyRange.bound([n],[n+1],!1,!0);return r.delete(o)}getMatchingKeysForTargetId(e,n){const r=IDBKeyRange.bound([n],[n+1],!1,!0),o=Da(e);let c=xt();return o.X({range:r,Y:!0},(d,g,v)=>{const D=ri(d[1]),T=new Be(D);c=c.add(T)}).next(()=>c)}containsKey(e,n){const r=Fn(n.path),o=IDBKeyRange.bound([r],[qv(r)],!1,!0);let c=0;return Da(e).X({index:"documentTargetsIndex",Y:!0,range:o},([d,g],v,D)=>{0!==d&&(c++,D.done())}).next(()=>c>0)}le(e,n){return vf(e).get(n).next(r=>r?Lu(r):null)}}function vf(t){return pr(t,"targets")}function aA(t){return pr(t,"targetGlobal")}function Da(t){return pr(t,"targetDocuments")}function Ib([t,e],[n,r]){const o=wt(t,n);return 0===o?wt(e,r):o}class uA{constructor(e){this.Ln=e,this.buffer=new un(Ib),this.qn=0}Un(){return++this.qn}Kn(e){const n=[e,this.Un()];if(this.buffer.size<this.Ln)this.buffer=this.buffer.add(n);else{const r=this.buffer.last();Ib(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}}class cA{constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.Gn=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Qn(6e4)}stop(){this.Gn&&(this.Gn.cancel(),this.Gn=null)}get started(){return null!==this.Gn}Qn(e){var n=this;ve("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.Gn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(0,z.Z)(function*(){n.Gn=null;try{yield n.localStore.collectGarbage(n.garbageCollector)}catch(r){bo(r)?ve("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",r):yield ma(r)}yield n.Qn(3e5)}))}}class lA{constructor(e,n){this.jn=e,this.params=n}calculateTargetCount(e,n){return this.jn.zn(e).next(r=>Math.floor(n/100*r))}nthSequenceNumber(e,n){if(0===n)return Q.resolve(mi.ct);const r=new uA(n);return this.jn.forEachTarget(e,o=>r.Kn(o.sequenceNumber)).next(()=>this.jn.Wn(e,o=>r.Kn(o))).next(()=>r.maxValue)}removeTargets(e,n,r){return this.jn.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.jn.removeOrphanedDocuments(e,n)}collect(e,n){return-1===this.params.cacheSizeCollectionThreshold?(ve("LruGarbageCollector","Garbage collection skipped; disabled"),Q.resolve(iA)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(ve("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),iA):this.Hn(e,n))}getCacheSize(e){return this.jn.getCacheSize(e)}Hn(e,n){let r,o,c,d,g,v,D;const T=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(A=>(A>this.params.maximumSequenceNumbersToCollect?(ve("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${A}`),o=this.params.maximumSequenceNumbersToCollect):o=A,d=Date.now(),this.nthSequenceNumber(e,o))).next(A=>(r=A,g=Date.now(),this.removeTargets(e,r,n))).next(A=>(c=A,v=Date.now(),this.removeOrphanedDocuments(e,r))).next(A=>(D=Date.now(),Gv()<=Jr.in.DEBUG&&ve("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${d-T}ms\n\tDetermined least recently used ${o} in `+(g-d)+`ms\n\tRemoved ${c} targets in `+(v-g)+`ms\n\tRemoved ${A} documents in `+(D-v)+`ms\nTotal Duration: ${D-T}ms`),Q.resolve({didRun:!0,sequenceNumbersCollected:o,targetsRemoved:c,documentsRemoved:A})))}}class hA{constructor(e,n){this.db=e,this.garbageCollector=function dA(t,e){return new lA(t,e)}(this,n)}zn(e){const n=this.Jn(e);return this.db.getTargetCache().getTargetCount(e).next(r=>n.next(o=>r+o))}Jn(e){let n=0;return this.Wn(e,r=>{n++}).next(()=>n)}forEachTarget(e,n){return this.db.getTargetCache().forEachTarget(e,n)}Wn(e,n){return this.Yn(e,(r,o)=>n(o))}addReference(e,n,r){return ba(e,r)}removeReference(e,n,r){return ba(e,r)}removeTargets(e,n,r){return this.db.getTargetCache().removeTargets(e,n,r)}markPotentiallyOrphaned(e,n){return ba(e,n)}Xn(e,n){return function(r,o){let c=!1;return vb(r).Z(d=>_b(r,d,o).next(g=>(g&&(c=!0),Q.resolve(!g)))).next(()=>c)}(e,n)}removeOrphanedDocuments(e,n){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),o=[];let c=0;return this.Yn(e,(d,g)=>{if(g<=n){const v=this.Xn(e,d).next(D=>{if(!D)return c++,r.getEntry(e,d).next(()=>(r.removeEntry(d,it.min()),Da(e).delete([0,Fn(d.path)])))});o.push(v)}}).next(()=>Q.waitFor(o)).next(()=>r.apply(e)).next(()=>c)}removeTarget(e,n){const r=n.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,n){return ba(e,n)}Yn(e,n){const r=Da(e);let o,c=mi.ct;return r.X({index:"documentTargetsIndex"},([d,g],{path:v,sequenceNumber:D})=>{0===d?(c!==mi.ct&&n(new Be(ri(o)),c),c=D,o=v):c=mi.ct}).next(()=>{c!==mi.ct&&n(new Be(ri(o)),c)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function ba(t,e){return Da(t).put((r=t.currentSequenceNumber,{targetId:0,path:Fn(e.path),sequenceNumber:r}));var r}class If{constructor(){this.changes=new Ys(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,dn.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return void 0!==r?Q.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class fA{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,n,r){return Vu(e).put(r)}removeEntry(e,n,r){return Vu(e).delete(function(o,c){const d=o.path.toArray();return[d.slice(0,d.length-2),d[d.length-2],gf(c),d[d.length-1]]}(n,r))}updateMetadata(e,n){return this.getMetadata(e).next(r=>(r.byteSize+=n,this.Zn(e,r)))}getEntry(e,n){let r=dn.newInvalidDocument(n);return Vu(e).X({index:"documentKeyIndex",range:IDBKeyRange.only(Ef(n))},(o,c)=>{r=this.ts(n,c)}).next(()=>r)}es(e,n){let r={size:0,document:dn.newInvalidDocument(n)};return Vu(e).X({index:"documentKeyIndex",range:IDBKeyRange.only(Ef(n))},(o,c)=>{r={document:this.ts(n,c),size:zI(c)}}).next(()=>r)}getEntries(e,n){let r=si();return this.ns(e,n,(o,c)=>{const d=this.ts(o,c);r=r.insert(o,d)}).next(()=>r)}ss(e,n){let r=si(),o=new an(Be.comparator);return this.ns(e,n,(c,d)=>{const g=this.ts(c,d);r=r.insert(c,g),o=o.insert(c,zI(d))}).next(()=>({documents:r,rs:o}))}ns(e,n,r){if(n.isEmpty())return Q.resolve();let o=new un(Db);n.forEach(v=>o=o.add(v));const c=IDBKeyRange.bound(Ef(o.first()),Ef(o.last())),d=o.getIterator();let g=d.getNext();return Vu(e).X({index:"documentKeyIndex",range:c},(v,D,T)=>{const A=Be.fromSegments([...D.prefixPath,D.collectionGroup,D.documentId]);for(;g&&Db(g,A)<0;)r(g,null),g=d.getNext();g&&g.isEqual(A)&&(r(g,D),g=d.hasNext()?d.getNext():null),g?T.G(Ef(g)):T.done()}).next(()=>{for(;g;)r(g,null),g=d.hasNext()?d.getNext():null})}getDocumentsMatchingQuery(e,n,r,o){const c=n.path,d=[c.popLast().toArray(),c.lastSegment(),gf(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],g=[c.popLast().toArray(),c.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Vu(e).j(IDBKeyRange.bound(d,g,!0)).next(v=>{let D=si();for(const T of v){const A=this.ts(Be.fromSegments(T.prefixPath.concat(T.collectionGroup,T.documentId)),T);A.isFoundDocument()&&(rf(n,A)||o.has(A.key))&&(D=D.insert(A.key,A))}return D})}getAllFromCollectionGroup(e,n,r,o){let c=si();const d=Om(n,r),g=Om(n,Li.max());return Vu(e).X({index:"collectionGroupIndex",range:IDBKeyRange.bound(d,g,!0)},(v,D,T)=>{const A=this.ts(Be.fromSegments(D.prefixPath.concat(D.collectionGroup,D.documentId)),D);c=c.insert(A.key,A),c.size===o&&T.done()}).next(()=>c)}newChangeBuffer(e){return new pA(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(n=>n.byteSize)}getMetadata(e){return wb(e).get("remoteDocumentGlobalKey").next(n=>(rt(!!n),n))}Zn(e,n){return wb(e).put("remoteDocumentGlobalKey",n)}ts(e,n){if(n){const r=function xI(t,e){let n;if(e.document)n=lb(t.fe,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=Be.fromSegments(e.noDocument.path),o=ku(e.noDocument.readTime);n=dn.newNoDocument(r,o),e.hasCommittedMutations&&n.setHasCommittedMutations()}else{if(!e.unknownDocument)return Ke();{const r=Be.fromSegments(e.unknownDocument.path),o=ku(e.unknownDocument.version);n=dn.newUnknownDocument(r,o)}}return e.readTime&&n.setReadTime(function(r){const o=new on(r[0],r[1]);return it.fromTimestamp(o)}(e.readTime)),n}(this.serializer,n);if(!r.isNoDocument()||!r.version.isEqual(it.min()))return r}return dn.newInvalidDocument(e)}}function Eb(t){return new fA(t)}class pA extends If{constructor(e,n){super(),this.os=e,this.trackRemovals=n,this.us=new Ys(r=>r.toString(),(r,o)=>r.isEqual(o))}applyChanges(e){const n=[];let r=0,o=new un((c,d)=>wt(c.canonicalString(),d.canonicalString()));return this.changes.forEach((c,d)=>{const g=this.us.get(c);if(n.push(this.os.removeEntry(e,c,g.readTime)),d.isValidDocument()){const v=fb(this.os.serializer,d);o=o.add(c.path.popLast());const D=zI(v);r+=D-g.size,n.push(this.os.addEntry(e,c,v))}else if(r-=g.size,this.trackRemovals){const v=fb(this.os.serializer,d.convertToNoDocument(it.min()));n.push(this.os.addEntry(e,c,v))}}),o.forEach(c=>{n.push(this.os.indexManager.addToCollectionParentIndex(e,c))}),n.push(this.os.updateMetadata(e,r)),Q.waitFor(n)}getFromCache(e,n){return this.os.es(e,n).next(r=>(this.us.set(n,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,n){return this.os.ss(e,n).next(({documents:r,rs:o})=>(o.forEach((c,d)=>{this.us.set(c,{size:d,readTime:r.get(c).readTime})}),r))}}function wb(t){return pr(t,"remoteDocumentGlobal")}function Vu(t){return pr(t,"remoteDocumentsV14")}function Ef(t){const e=t.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function Om(t,e){const n=e.documentKey.path.toArray();return[t,gf(e.readTime),n.slice(0,n.length-2),n.length>0?n[n.length-1]:""]}function Db(t,e){const n=t.path.toArray(),r=e.path.toArray();let o=0;for(let c=0;c<n.length-2&&c<r.length-2;++c)if(o=wt(n[c],r[c]),o)return o;return o=wt(n.length,r.length),o||(o=wt(n[n.length-2],r[r.length-2]),o||wt(n[n.length-1],r[r.length-1]))}class gA{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}class bb{constructor(e,n,r,o){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=o}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(o=>(r=o,this.remoteDocumentCache.getEntry(e,n))).next(o=>(null!==r&&af(r.mutation,o,_i.empty(),on.now()),o))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,xt()).next(()=>r))}getLocalViewOfDocuments(e,n,r=xt()){const o=Qs();return this.populateOverlays(e,o,n).next(()=>this.computeViews(e,n,o,r).next(c=>{let d=sf();return c.forEach((g,v)=>{d=d.insert(g,v.overlayedDocument)}),d}))}getOverlayedDocuments(e,n){const r=Qs();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,xt()))}populateOverlays(e,n,r){const o=[];return r.forEach(c=>{n.has(c)||o.push(c)}),this.documentOverlayCache.getOverlays(e,o).next(c=>{c.forEach((d,g)=>{n.set(d,g)})})}computeViews(e,n,r,o){let c=si();const d=Ml(),g=Ml();return n.forEach((v,D)=>{const T=r.get(D.key);o.has(D.key)&&(void 0===T||T.mutation instanceof Fi)?c=c.insert(D.key,D):void 0!==T?(d.set(D.key,T.mutation.getFieldMask()),af(T.mutation,D,T.mutation.getFieldMask(),on.now())):d.set(D.key,_i.empty())}),this.recalculateAndSaveOverlays(e,c).next(v=>(v.forEach((D,T)=>d.set(D,T)),n.forEach((D,T)=>{var A;return g.set(D,new gA(T,null!==(A=d.get(D))&&void 0!==A?A:null))}),g))}recalculateAndSaveOverlays(e,n){const r=Ml();let o=new an((d,g)=>d-g),c=xt();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(d=>{for(const g of d)g.keys().forEach(v=>{const D=n.get(v);if(null===D)return;let T=r.get(v)||_i.empty();T=g.applyToLocalView(D,T),r.set(v,T);const A=(o.get(g.batchId)||xt()).add(v);o=o.insert(g.batchId,A)})}).next(()=>{const d=[],g=o.getReverseIterator();for(;g.hasNext();){const v=g.getNext(),D=v.key,T=v.value,A=VD();T.forEach(U=>{if(!c.has(U)){const q=jS(n.get(U),r.get(U));null!==q&&A.set(U,q),c=c.add(U)}}),d.push(this.documentOverlayCache.saveOverlays(e,D,A))}return Q.waitFor(d)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r){return Be.isDocumentKey((o=n).path)&&null===o.collectionGroup&&0===o.filters.length?this.getDocumentsMatchingDocumentQuery(e,n.path):So(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r):this.getDocumentsMatchingCollectionQuery(e,n,r);var o}getNextDocuments(e,n,r,o){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,o).next(c=>{const d=o-c.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,o-c.size):Q.resolve(Qs());let g=-1,v=c;return d.next(D=>Q.forEach(D,(T,A)=>(g<A.largestBatchId&&(g=A.largestBatchId),c.get(T)?Q.resolve():this.remoteDocumentCache.getEntry(e,T).next(U=>{v=v.insert(T,U)}))).next(()=>this.populateOverlays(e,D,c)).next(()=>this.computeViews(e,v,D,xt())).next(T=>({batchId:g,changes:FD(T)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new Be(n)).next(r=>{let o=sf();return r.isFoundDocument()&&(o=o.insert(r.key,r)),o})}getDocumentsMatchingCollectionGroupQuery(e,n,r){const o=n.collectionGroup;let c=sf();return this.indexManager.getCollectionParents(e,o).next(d=>Q.forEach(d,g=>{const v=(D=n,T=g.child(o),new Es(T,null,D.explicitOrderBy.slice(),D.filters.slice(),D.limit,D.limitType,D.startAt,D.endAt));var D,T;return this.getDocumentsMatchingCollectionQuery(e,v,r).next(D=>{D.forEach((T,A)=>{c=c.insert(T,A)})})}).next(()=>c))}getDocumentsMatchingCollectionQuery(e,n,r){let o;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(c=>(o=c,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,o))).next(c=>{o.forEach((g,v)=>{const D=v.getKey();null===c.get(D)&&(c=c.insert(D,dn.newInvalidDocument(D)))});let d=sf();return c.forEach((g,v)=>{const D=o.get(g);void 0!==D&&af(D.mutation,v,_i.empty(),on.now()),rf(n,v)&&(d=d.insert(g,v))}),d})}}class mA{constructor(e){this.serializer=e,this.cs=new Map,this.hs=new Map}getBundleMetadata(e,n){return Q.resolve(this.cs.get(n))}saveBundleMetadata(e,n){var r;return this.cs.set(n.id,{id:(r=n).id,version:r.version,createTime:Nn(r.createTime)}),Q.resolve()}getNamedQuery(e,n){return Q.resolve(this.hs.get(n))}saveNamedQuery(e,n){return this.hs.set(n.name,{name:(r=n).name,query:NI(r.bundledQuery),readTime:Nn(r.readTime)}),Q.resolve();var r}}class yA{constructor(){this.overlays=new an(Be.comparator),this.ls=new Map}getOverlay(e,n){return Q.resolve(this.overlays.get(n))}getOverlays(e,n){const r=Qs();return Q.forEach(n,o=>this.getOverlay(e,o).next(c=>{null!==c&&r.set(o,c)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((o,c)=>{this.we(e,n,c)}),Q.resolve()}removeOverlaysForBatchId(e,n,r){const o=this.ls.get(r);return void 0!==o&&(o.forEach(c=>this.overlays=this.overlays.remove(c)),this.ls.delete(r)),Q.resolve()}getOverlaysForCollection(e,n,r){const o=Qs(),c=n.length+1,d=new Be(n.child("")),g=this.overlays.getIteratorFrom(d);for(;g.hasNext();){const v=g.getNext().value,D=v.getKey();if(!n.isPrefixOf(D.path))break;D.path.length===c&&v.largestBatchId>r&&o.set(v.getKey(),v)}return Q.resolve(o)}getOverlaysForCollectionGroup(e,n,r,o){let c=new an((D,T)=>D-T);const d=this.overlays.getIterator();for(;d.hasNext();){const D=d.getNext().value;if(D.getKey().getCollectionGroup()===n&&D.largestBatchId>r){let T=c.get(D.largestBatchId);null===T&&(T=Qs(),c=c.insert(D.largestBatchId,T)),T.set(D.getKey(),D)}}const g=Qs(),v=c.getIterator();for(;v.hasNext()&&(v.getNext().value.forEach((D,T)=>g.set(D,T)),!(g.size()>=o)););return Q.resolve(g)}we(e,n,r){const o=this.overlays.get(r.key);if(null!==o){const d=this.ls.get(o.largestBatchId).delete(r.key);this.ls.set(o.largestBatchId,d)}this.overlays=this.overlays.insert(r.key,new II(n,r));let c=this.ls.get(n);void 0===c&&(c=xt(),this.ls.set(n,c)),this.ls.set(n,c.add(r.key))}}class WI{constructor(){this.fs=new un(gr.ds),this.ws=new un(gr._s)}isEmpty(){return this.fs.isEmpty()}addReference(e,n){const r=new gr(e,n);this.fs=this.fs.add(r),this.ws=this.ws.add(r)}gs(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.ys(new gr(e,n))}ps(e,n){e.forEach(r=>this.removeReference(r,n))}Is(e){const n=new Be(new Ut([])),r=new gr(n,e),o=new gr(n,e+1),c=[];return this.ws.forEachInRange([r,o],d=>{this.ys(d),c.push(d.key)}),c}Ts(){this.fs.forEach(e=>this.ys(e))}ys(e){this.fs=this.fs.delete(e),this.ws=this.ws.delete(e)}Es(e){const n=new Be(new Ut([])),r=new gr(n,e),o=new gr(n,e+1);let c=xt();return this.ws.forEachInRange([r,o],d=>{c=c.add(d.key)}),c}containsKey(e){const n=new gr(e,0),r=this.fs.firstAfterOrEqual(n);return null!==r&&e.isEqual(r.key)}}class gr{constructor(e,n){this.key=e,this.As=n}static ds(e,n){return Be.comparator(e.key,n.key)||wt(e.As,n.As)}static _s(e,n){return wt(e.As,n.As)||Be.comparator(e.key,n.key)}}class _A{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.vs=1,this.Rs=new un(gr.ds)}checkEmpty(e){return Q.resolve(0===this.mutationQueue.length)}addMutationBatch(e,n,r,o){const c=this.vs;this.vs++;const d=new vI(c,n,r,o);this.mutationQueue.push(d);for(const g of o)this.Rs=this.Rs.add(new gr(g.key,c)),this.indexManager.addToCollectionParentIndex(e,g.key.path.popLast());return Q.resolve(d)}lookupMutationBatch(e,n){return Q.resolve(this.Ps(n))}getNextMutationBatchAfterBatchId(e,n){const o=this.bs(n+1),c=o<0?0:o;return Q.resolve(this.mutationQueue.length>c?this.mutationQueue[c]:null)}getHighestUnacknowledgedBatchId(){return Q.resolve(0===this.mutationQueue.length?-1:this.vs-1)}getAllMutationBatches(e){return Q.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new gr(n,0),o=new gr(n,Number.POSITIVE_INFINITY),c=[];return this.Rs.forEachInRange([r,o],d=>{const g=this.Ps(d.As);c.push(g)}),Q.resolve(c)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new un(wt);return n.forEach(o=>{const c=new gr(o,0),d=new gr(o,Number.POSITIVE_INFINITY);this.Rs.forEachInRange([c,d],g=>{r=r.add(g.As)})}),Q.resolve(this.Vs(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,o=r.length+1;let c=r;Be.isDocumentKey(c)||(c=c.child(""));const d=new gr(new Be(c),0);let g=new un(wt);return this.Rs.forEachWhile(v=>{const D=v.key.path;return!!r.isPrefixOf(D)&&(D.length===o&&(g=g.add(v.As)),!0)},d),Q.resolve(this.Vs(g))}Vs(e){const n=[];return e.forEach(r=>{const o=this.Ps(r);null!==o&&n.push(o)}),n}removeMutationBatch(e,n){rt(0===this.Ss(n.batchId,"removed")),this.mutationQueue.shift();let r=this.Rs;return Q.forEach(n.mutations,o=>{const c=new gr(o.key,n.batchId);return r=r.delete(c),this.referenceDelegate.markPotentiallyOrphaned(e,o.key)}).next(()=>{this.Rs=r})}Cn(e){}containsKey(e,n){const r=new gr(n,0),o=this.Rs.firstAfterOrEqual(r);return Q.resolve(n.isEqual(o&&o.key))}performConsistencyCheck(e){return Q.resolve()}Ss(e,n){return this.bs(e)}bs(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}Ps(e){const n=this.bs(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}class vA{constructor(e){this.Ds=e,this.docs=new an(Be.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,o=this.docs.get(r),c=o?o.size:0,d=this.Ds(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:d}),this.size+=d-c,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return Q.resolve(r?r.document.mutableCopy():dn.newInvalidDocument(n))}getEntries(e,n){let r=si();return n.forEach(o=>{const c=this.docs.get(o);r=r.insert(o,c?c.document.mutableCopy():dn.newInvalidDocument(o))}),Q.resolve(r)}getDocumentsMatchingQuery(e,n,r,o){let c=si();const d=n.path,g=new Be(d.child("")),v=this.docs.getIteratorFrom(g);for(;v.hasNext();){const{key:D,value:{document:T}}=v.getNext();if(!d.isPrefixOf(D.path))break;D.path.length>d.length+1||Kv(rD(T),r)<=0||(o.has(T.key)||rf(n,T))&&(c=c.insert(T.key,T.mutableCopy()))}return Q.resolve(c)}getAllFromCollectionGroup(e,n,r,o){Ke()}Cs(e,n){return Q.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new Tb(this)}getSize(e){return Q.resolve(this.size)}}class Tb extends If{constructor(e){super(),this.os=e}applyChanges(e){const n=[];return this.changes.forEach((r,o)=>{o.isValidDocument()?n.push(this.os.addEntry(e,o)):this.os.removeEntry(r)}),Q.waitFor(n)}getFromCache(e,n){return this.os.getEntry(e,n)}getAllFromCache(e,n){return this.os.getEntries(e,n)}}class qI{constructor(e){this.persistence=e,this.xs=new Ys(n=>Tu(n),nf),this.lastRemoteSnapshotVersion=it.min(),this.highestTargetId=0,this.Ns=0,this.ks=new WI,this.targetCount=0,this.Ms=to.kn()}forEachTarget(e,n){return this.xs.forEach((r,o)=>n(o)),Q.resolve()}getLastRemoteSnapshotVersion(e){return Q.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return Q.resolve(this.Ns)}allocateTargetId(e){return this.highestTargetId=this.Ms.next(),Q.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.Ns&&(this.Ns=n),Q.resolve()}Fn(e){this.xs.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.Ms=new to(n),this.highestTargetId=n),e.sequenceNumber>this.Ns&&(this.Ns=e.sequenceNumber)}addTargetData(e,n){return this.Fn(n),this.targetCount+=1,Q.resolve()}updateTargetData(e,n){return this.Fn(n),Q.resolve()}removeTargetData(e,n){return this.xs.delete(n.target),this.ks.Is(n.targetId),this.targetCount-=1,Q.resolve()}removeTargets(e,n,r){let o=0;const c=[];return this.xs.forEach((d,g)=>{g.sequenceNumber<=n&&null===r.get(g.targetId)&&(this.xs.delete(d),c.push(this.removeMatchingKeysForTargetId(e,g.targetId)),o++)}),Q.waitFor(c).next(()=>o)}getTargetCount(e){return Q.resolve(this.targetCount)}getTargetData(e,n){const r=this.xs.get(n)||null;return Q.resolve(r)}addMatchingKeys(e,n,r){return this.ks.gs(n,r),Q.resolve()}removeMatchingKeys(e,n,r){this.ks.ps(n,r);const o=this.persistence.referenceDelegate,c=[];return o&&n.forEach(d=>{c.push(o.markPotentiallyOrphaned(e,d))}),Q.waitFor(c)}removeMatchingKeysForTargetId(e,n){return this.ks.Is(n),Q.resolve()}getMatchingKeysForTargetId(e,n){const r=this.ks.Es(n);return Q.resolve(r)}containsKey(e,n){return Q.resolve(this.ks.containsKey(n))}}class KI{constructor(e,n){this.$s={},this.overlays={},this.Os=new mi(0),this.Fs=!1,this.Fs=!0,this.referenceDelegate=e(this),this.Bs=new qI(this),this.indexManager=new yb,this.remoteDocumentCache=new vA(r=>this.referenceDelegate.Ls(r)),this.serializer=new hb(n),this.qs=new mA(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Fs=!1,Promise.resolve()}get started(){return this.Fs}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new yA,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.$s[e.toKey()];return r||(r=new _A(n,this.referenceDelegate),this.$s[e.toKey()]=r),r}getTargetCache(){return this.Bs}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.qs}runTransaction(e,n,r){ve("MemoryPersistence","Starting transaction:",e);const o=new IA(this.Os.next());return this.referenceDelegate.Us(),r(o).next(c=>this.referenceDelegate.Ks(o).next(()=>c)).toPromise().then(c=>(o.raiseOnCommittedEvent(),c))}Gs(e,n){return Q.or(Object.values(this.$s).map(r=>()=>r.containsKey(e,n)))}}class IA extends sD{constructor(e){super(),this.currentSequenceNumber=e}}class wf{constructor(e){this.persistence=e,this.Qs=new WI,this.js=null}static zs(e){return new wf(e)}get Ws(){if(this.js)return this.js;throw Ke()}addReference(e,n,r){return this.Qs.addReference(r,n),this.Ws.delete(r.toString()),Q.resolve()}removeReference(e,n,r){return this.Qs.removeReference(r,n),this.Ws.add(r.toString()),Q.resolve()}markPotentiallyOrphaned(e,n){return this.Ws.add(n.toString()),Q.resolve()}removeTarget(e,n){this.Qs.Is(n.targetId).forEach(o=>this.Ws.add(o.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(o=>{o.forEach(c=>this.Ws.add(c.toString()))}).next(()=>r.removeTargetData(e,n))}Us(){this.js=new Set}Ks(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Q.forEach(this.Ws,r=>{const o=Be.fromPath(r);return this.Hs(e,o).next(c=>{c||n.removeEntry(o,it.min())})}).next(()=>(this.js=null,n.apply(e)))}updateLimboDocument(e,n){return this.Hs(e,n).next(r=>{r?this.Ws.delete(n.toString()):this.Ws.add(n.toString())})}Ls(e){return 0}Hs(e,n){return Q.or([()=>Q.resolve(this.Qs.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Gs(e,n)])}}class NM{constructor(e){this.serializer=e}O(e,n,r,o){const c=new om("createOrUpgrade",n);var g;r<1&&o>=1&&(e.createObjectStore("owner"),(g=e).createObjectStore("mutationQueues",{keyPath:"userId"}),g.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",DS,{unique:!0}),g.createObjectStore("documentMutations"),ai(e),function(g){g.createObjectStore("remoteDocuments")}(e));let d=Q.resolve();return r<3&&o>=3&&(0!==r&&(function(g){g.deleteObjectStore("targetDocuments"),g.deleteObjectStore("targets"),g.deleteObjectStore("targetGlobal")}(e),ai(e)),d=d.next(()=>function(g){const v=g.store("targetGlobal"),D={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:it.min().toTimestamp(),targetCount:0};return v.put("targetGlobalKey",D)}(c))),r<4&&o>=4&&(0!==r&&(d=d.next(()=>function(g,v){return v.store("mutations").j().next(D=>{g.deleteObjectStore("mutations"),g.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",DS,{unique:!0});const T=v.store("mutations"),A=D.map(U=>T.put(U));return Q.waitFor(A)})}(e,c))),d=d.next(()=>{!function(g){g.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)})),r<5&&o>=5&&(d=d.next(()=>this.Ys(c))),r<6&&o>=6&&(d=d.next(()=>(function(g){g.createObjectStore("remoteDocumentGlobal")}(e),this.Xs(c)))),r<7&&o>=7&&(d=d.next(()=>this.Zs(c))),r<8&&o>=8&&(d=d.next(()=>this.ti(e,c))),r<9&&o>=9&&(d=d.next(()=>{!function(g){g.objectStoreNames.contains("remoteDocumentChanges")&&g.deleteObjectStore("remoteDocumentChanges")}(e)})),r<10&&o>=10&&(d=d.next(()=>this.ei(c))),r<11&&o>=11&&(d=d.next(()=>{(function(g){g.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(g){g.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),r<12&&o>=12&&(d=d.next(()=>{!function(g){const v=g.createObjectStore("documentOverlays",{keyPath:DM});v.createIndex("collectionPathOverlayIndex",hD,{unique:!1}),v.createIndex("collectionGroupOverlayIndex",fD,{unique:!1})}(e)})),r<13&&o>=13&&(d=d.next(()=>function(g){const v=g.createObjectStore("remoteDocumentsV14",{keyPath:dD});v.createIndex("documentKeyIndex",wM),v.createIndex("collectionGroupIndex",_l)}(e)).next(()=>this.ni(e,c)).next(()=>e.deleteObjectStore("remoteDocuments"))),r<14&&o>=14&&(d=d.next(()=>this.si(e,c))),r<15&&o>=15&&(d=d.next(()=>function(g){g.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),g.createObjectStore("indexState",{keyPath:AS}).createIndex("sequenceNumberIndex",um,{unique:!1}),g.createObjectStore("indexEntries",{keyPath:cm}).createIndex("documentKeyIndex",yi,{unique:!1})}(e))),d}Xs(e){let n=0;return e.store("remoteDocuments").X((r,o)=>{n+=zI(o)}).next(()=>{const r={byteSize:n};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",r)})}Ys(e){const n=e.store("mutationQueues"),r=e.store("mutations");return n.j().next(o=>Q.forEach(o,c=>{const d=IDBKeyRange.bound([c.userId,-1],[c.userId,c.lastAcknowledgedBatchId]);return r.j("userMutationsIndex",d).next(g=>Q.forEach(g,v=>{rt(v.userId===c.userId);const D=Ou(this.serializer,v);return sA(e,c.userId,D).next(()=>{})}))}))}Zs(e){const n=e.store("targetDocuments"),r=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(o=>{const c=[];return r.X((d,g)=>{const v=new Ut(d),D=[0,Fn(v)];c.push(n.get(D).next(T=>T?Q.resolve():n.put({targetId:0,path:Fn(v),sequenceNumber:o.highestListenSequenceNumber})))}).next(()=>Q.waitFor(c))})}ti(e,n){e.createObjectStore("collectionParents",{keyPath:vl});const r=n.store("collectionParents"),o=new jI,c=d=>{if(o.add(d)){const g=d.lastSegment(),v=d.popLast();return r.put({collectionId:g,parent:Fn(v)})}};return n.store("remoteDocuments").X({Y:!0},(d,g)=>{const v=new Ut(d);return c(v.popLast())}).next(()=>n.store("documentMutations").X({Y:!0},([d,g,v],D)=>{const T=ri(g);return c(T.popLast())}))}ei(e){const n=e.store("targets");return n.X((r,o)=>{const c=Lu(o),d=MI(this.serializer,c);return n.put(d)})}ni(e,n){const r=n.store("remoteDocuments"),o=[];return r.X((c,d)=>{const g=n.store("remoteDocumentsV14"),v=(D=d,D.document?new Be(Ut.fromString(D.document.name).popFirst(5)):D.noDocument?Be.fromSegments(D.noDocument.path):D.unknownDocument?Be.fromSegments(D.unknownDocument.path):Ke()).path.toArray();var D;const T={prefixPath:v.slice(0,v.length-2),collectionGroup:v[v.length-2],documentId:v[v.length-1],readTime:d.readTime||[0,0],unknownDocument:d.unknownDocument,noDocument:d.noDocument,document:d.document,hasCommittedMutations:!!d.hasCommittedMutations};o.push(g.put(T))}).next(()=>Q.waitFor(o))}si(e,n){const r=n.store("mutations"),o=Eb(this.serializer),c=new KI(wf.zs,this.serializer.fe);return r.j().next(d=>{const g=new Map;return d.forEach(v=>{var D;let T=null!==(D=g.get(v.userId))&&void 0!==D?D:xt();Ou(this.serializer,v).keys().forEach(A=>T=T.add(A)),g.set(v.userId,T)}),Q.forEach(g,(v,D)=>{const T=new rr(D),A=xo.de(this.serializer,T),U=c.getIndexManager(T),q=GI.de(T,this.serializer,U,c.referenceDelegate);return new bb(o,q,A,U).recalculateAndSaveOverlaysForDocumentKeys(new eI(n,mi.ct),v).next()})})}}function ai(t){t.createObjectStore("targetDocuments",{keyPath:CS}).createIndex("documentTargetsIndex",SS,{unique:!0}),t.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",TS,{unique:!0}),t.createObjectStore("targetGlobal")}const Lm="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class ZI{constructor(e,n,r,o,c,d,g,v,D,T,A=15){if(this.allowTabSynchronization=e,this.persistenceKey=n,this.clientId=r,this.ii=c,this.window=d,this.document=g,this.ri=D,this.oi=T,this.ui=A,this.Os=null,this.Fs=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ci=null,this.inForeground=!1,this.ai=null,this.hi=null,this.li=Number.NEGATIVE_INFINITY,this.fi=U=>Promise.resolve(),!ZI.D())throw new ge(ee.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new hA(this,o),this.di=n+"main",this.serializer=new hb(v),this.wi=new vs(this.di,this.ui,new NM(this.serializer)),this.Bs=new oA(this.referenceDelegate,this.serializer),this.remoteDocumentCache=Eb(this.serializer),this.qs=new pb,this.window&&this.window.localStorage?this._i=this.window.localStorage:(this._i=null,!1===T&&Yt("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.mi().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new ge(ee.FAILED_PRECONDITION,Lm);return this.gi(),this.yi(),this.pi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Bs.getHighestSequenceNumber(e))}).then(e=>{this.Os=new mi(e,this.ri)}).then(()=>{this.Fs=!0}).catch(e=>(this.wi&&this.wi.close(),Promise.reject(e)))}Ii(e){var n=this;return this.fi=function(){var r=(0,z.Z)(function*(o){if(n.started)return e(o)});return function(o){return r.apply(this,arguments)}}(),e(this.isPrimary)}setDatabaseDeletedListener(e){this.wi.B(function(){var n=(0,z.Z)(function*(r){null===r.newVersion&&(yield e())});return function(r){return n.apply(this,arguments)}}())}setNetworkEnabled(e){var n=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.ii.enqueueAndForget((0,z.Z)(function*(){n.started&&(yield n.mi())})))}mi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>sr(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.Ti(e).next(n=>{n||(this.isPrimary=!1,this.ii.enqueueRetryable(()=>this.fi(!1)))})}).next(()=>this.Ei(e)).next(n=>this.isPrimary&&!n?this.Ai(e).next(()=>!1):!!n&&this.vi(e).next(()=>!0))).catch(e=>{if(bo(e))return ve("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return ve("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.ii.enqueueRetryable(()=>this.fi(e)),this.isPrimary=e})}Ti(e){return Fm(e).get("owner").next(n=>Q.resolve(this.Ri(n)))}Pi(e){return sr(e).delete(this.clientId)}bi(){var e=this;return(0,z.Z)(function*(){if(e.isPrimary&&!e.Vi(e.li,18e5)){e.li=Date.now();const n=yield e.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",r=>{const o=pr(r,"clientMetadata");return o.j().next(c=>{const d=e.Si(c,18e5),g=c.filter(v=>-1===d.indexOf(v));return Q.forEach(g,v=>o.delete(v.clientId)).next(()=>g)})}).catch(()=>[]);if(e._i)for(const r of n)e._i.removeItem(e.Di(r.clientId))}})()}pi(){this.hi=this.ii.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.mi().then(()=>this.bi()).then(()=>this.pi()))}Ri(e){return!!e&&e.ownerId===this.clientId}Ei(e){return this.oi?Q.resolve(!0):Fm(e).get("owner").next(n=>{if(null!==n&&this.Vi(n.leaseTimestampMs,5e3)&&!this.Ci(n.ownerId)){if(this.Ri(n)&&this.networkEnabled)return!0;if(!this.Ri(n)){if(!n.allowTabSynchronization)throw new ge(ee.FAILED_PRECONDITION,Lm);return!1}}return!(!this.networkEnabled||!this.inForeground)||sr(e).j().next(r=>void 0===this.Si(r,5e3).find(o=>!(this.clientId===o.clientId||!(!this.networkEnabled&&o.networkEnabled||!this.inForeground&&o.inForeground&&this.networkEnabled===o.networkEnabled))))}).next(n=>(this.isPrimary!==n&&ve("IndexedDbPersistence",`Client ${n?"is":"is not"} eligible for a primary lease.`),n))}shutdown(){var e=this;return(0,z.Z)(function*(){e.Fs=!1,e.xi(),e.hi&&(e.hi.cancel(),e.hi=null),e.Ni(),e.ki(),yield e.wi.runTransaction("shutdown","readwrite",["owner","clientMetadata"],n=>{const r=new eI(n,mi.ct);return e.Ai(r).next(()=>e.Pi(r))}),e.wi.close(),e.Mi()})()}Si(e,n){return e.filter(r=>this.Vi(r.updateTimeMs,n)&&!this.Ci(r.clientId))}$i(){return this.runTransaction("getActiveClients","readonly",e=>sr(e).j().next(n=>this.Si(n,18e5).map(r=>r.clientId)))}get started(){return this.Fs}getMutationQueue(e,n){return GI.de(e,this.serializer,n,this.referenceDelegate)}getTargetCache(){return this.Bs}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new MM(e,this.serializer.fe.databaseId)}getDocumentOverlayCache(e){return xo.de(this.serializer,e)}getBundleCache(){return this.qs}runTransaction(e,n,r){ve("IndexedDbPersistence","Starting transaction:",e);const o="readonly"===n?"readonly":"readwrite",c=15===(d=this.ui)?mD:14===d?Xv:13===d?Jv:12===d?gD:11===d?pD:void Ke();var d;let g;return this.wi.runTransaction(e,o,c,v=>(g=new eI(v,this.Os?this.Os.next():mi.ct),"readwrite-primary"===n?this.Ti(g).next(D=>!!D||this.Ei(g)).next(D=>{if(!D)throw Yt(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.ii.enqueueRetryable(()=>this.fi(!1)),new ge(ee.FAILED_PRECONDITION,iD);return r(g)}).next(D=>this.vi(g).next(()=>D)):this.Oi(g).next(()=>r(g)))).then(v=>(g.raiseOnCommittedEvent(),v))}Oi(e){return Fm(e).get("owner").next(n=>{if(null!==n&&this.Vi(n.leaseTimestampMs,5e3)&&!this.Ci(n.ownerId)&&!this.Ri(n)&&!(this.oi||this.allowTabSynchronization&&n.allowTabSynchronization))throw new ge(ee.FAILED_PRECONDITION,Lm)})}vi(e){const n={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return Fm(e).put("owner",n)}static D(){return vs.D()}Ai(e){const n=Fm(e);return n.get("owner").next(r=>this.Ri(r)?(ve("IndexedDbPersistence","Releasing primary lease."),n.delete("owner")):Q.resolve())}Vi(e,n){const r=Date.now();return!(e<r-n||e>r&&(Yt(`Detected an update time that is in the future: ${e} > ${r}`),1))}gi(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.ai=()=>{this.ii.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.mi()))},this.document.addEventListener("visibilitychange",this.ai),this.inForeground="visible"===this.document.visibilityState)}Ni(){this.ai&&(this.document.removeEventListener("visibilitychange",this.ai),this.ai=null)}yi(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.ci=()=>{this.xi();const n=/(?:Version|Mobile)\/1[456]/;(0,tt.G6)()&&(navigator.appVersion.match(n)||navigator.userAgent.match(n))&&this.ii.enterRestrictedMode(!0),this.ii.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.ci))}ki(){this.ci&&(this.window.removeEventListener("pagehide",this.ci),this.ci=null)}Ci(e){var n;try{const r=null!==(null===(n=this._i)||void 0===n?void 0:n.getItem(this.Di(e)));return ve("IndexedDbPersistence",`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return Yt("IndexedDbPersistence","Failed to get zombied client id.",r),!1}}xi(){if(this._i)try{this._i.setItem(this.Di(this.clientId),String(Date.now()))}catch(e){Yt("Failed to set zombie client id.",e)}}Mi(){if(this._i)try{this._i.removeItem(this.Di(this.clientId))}catch{}}Di(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function Fm(t){return pr(t,"owner")}function sr(t){return pr(t,"clientMetadata")}function YI(t,e){let n=t.projectId;return t.isDefaultDatabase||(n+="."+t.database),"firestore/"+e+"/"+n+"/"}class bf{constructor(e,n,r,o){this.targetId=e,this.fromCache=n,this.Fi=r,this.Bi=o}static Li(e,n){let r=xt(),o=xt();for(const c of n.docChanges)switch(c.type){case 0:r=r.add(c.doc.key);break;case 1:o=o.add(c.doc.key)}return new bf(e,n.fromCache,r,o)}}class Cb{constructor(){this.qi=!1}initialize(e,n){this.Ui=e,this.indexManager=n,this.qi=!0}getDocumentsMatchingQuery(e,n,r,o){return this.Ki(e,n).next(c=>c||this.Gi(e,n,o,r)).next(c=>c||this.Qi(e,n))}Ki(e,n){if(ym(n))return Q.resolve(null);let r=ii(n);return this.indexManager.getIndexType(e,r).next(o=>0===o?null:(null!==n.limit&&1===o&&(n=xl(n,null,"F"),r=ii(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(c=>{const d=xt(...c);return this.Ui.getDocuments(e,d).next(g=>this.indexManager.getMinOffset(e,r).next(v=>{const D=this.ji(n,g);return this.zi(n,D,d,v.readTime)?this.Ki(e,xl(n,null,"F")):this.Wi(e,D,n,v)}))})))}Gi(e,n,r,o){return ym(n)||o.isEqual(it.min())?this.Qi(e,n):this.Ui.getDocuments(e,r).next(c=>{const d=this.ji(n,c);return this.zi(n,d,r,o)?this.Qi(e,n):(Gv()<=Jr.in.DEBUG&&ve("QueryEngine","Re-using previous result from %s to execute query: %s",o.toString(),vm(n)),this.Wi(e,d,n,nD(o,-1)))})}ji(e,n){let r=new un(OD(e));return n.forEach((o,c)=>{rf(e,c)&&(r=r.add(c))}),r}zi(e,n,r,o){if(null===e.limit)return!1;if(r.size!==n.size)return!0;const c="F"===e.limitType?n.last():n.first();return!!c&&(c.hasPendingWrites||c.version.compareTo(o)>0)}Qi(e,n){return Gv()<=Jr.in.DEBUG&&ve("QueryEngine","Using full collection scan to execute query:",vm(n)),this.Ui.getDocumentsMatchingQuery(e,n,Li.min())}Wi(e,n,r,o){return this.Ui.getDocumentsMatchingQuery(e,r,o).next(c=>(n.forEach(d=>{c=c.insert(d.key,d)}),c))}}class EA{constructor(e,n,r,o){this.persistence=e,this.Hi=n,this.serializer=o,this.Ji=new an(wt),this.Yi=new Ys(c=>Tu(c),nf),this.Xi=new Map,this.Zi=e.getRemoteDocumentCache(),this.Bs=e.getTargetCache(),this.qs=e.getBundleCache(),this.tr(r)}tr(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new bb(this.Zi,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Zi.setIndexManager(this.indexManager),this.Hi.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.Ji))}}function Vm(t,e,n,r){return new EA(t,e,n,r)}function QI(t,e){return Bm.apply(this,arguments)}function Bm(){return Bm=(0,z.Z)(function*(t,e){const n=$e(t);return yield n.persistence.runTransaction("Handle user change","readonly",r=>{let o;return n.mutationQueue.getAllMutationBatches(r).next(c=>(o=c,n.tr(e),n.mutationQueue.getAllMutationBatches(r))).next(c=>{const d=[],g=[];let v=xt();for(const D of o){d.push(D.batchId);for(const T of D.mutations)v=v.add(T.key)}for(const D of c){g.push(D.batchId);for(const T of D.mutations)v=v.add(T.key)}return n.localDocuments.getDocuments(r,v).next(D=>({er:D,removedBatchIds:d,addedBatchIds:g}))})})}),Bm.apply(this,arguments)}function JI(t){const e=$e(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Bs.getLastRemoteSnapshotVersion(n))}function XI(t,e,n){let r=xt(),o=xt();return n.forEach(c=>r=r.add(c)),e.getEntries(t,r).next(c=>{let d=si();return n.forEach((g,v)=>{const D=c.get(g);v.isFoundDocument()!==D.isFoundDocument()&&(o=o.add(g)),v.isNoDocument()&&v.version.isEqual(it.min())?(e.removeEntry(g,v.readTime),d=d.insert(g,v)):!D.isValidDocument()||v.version.compareTo(D.version)>0||0===v.version.compareTo(D.version)&&D.hasPendingWrites?(e.addEntry(v),d=d.insert(g,v)):ve("LocalStore","Ignoring outdated watch update for ",g,". Current version:",D.version," Watch version:",v.version)}),{nr:d,sr:o}})}function Ab(t,e){const n=$e(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(void 0===e&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function Ul(t,e){const n=$e(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let o;return n.Bs.getTargetData(r,e).next(c=>c?(o=c,Q.resolve(o)):n.Bs.allocateTargetId(r).next(d=>(o=new Vi(e,d,"TargetPurposeListen",r.currentSequenceNumber),n.Bs.addTargetData(r,o).next(()=>o))))}).then(r=>{const o=n.Ji.get(r.targetId);return(null===o||r.snapshotVersion.compareTo(o.snapshotVersion)>0)&&(n.Ji=n.Ji.insert(r.targetId,r),n.Yi.set(e,r.targetId)),r})}function Bu(t,e,n){return e0.apply(this,arguments)}function e0(){return e0=(0,z.Z)(function*(t,e,n){const r=$e(t),o=r.Ji.get(e),c=n?"readwrite":"readwrite-primary";try{n||(yield r.persistence.runTransaction("Release target",c,d=>r.persistence.referenceDelegate.removeTarget(d,o)))}catch(d){if(!bo(d))throw d;ve("LocalStore",`Failed to update sequence numbers for target ${e}: ${d}`)}r.Ji=r.Ji.remove(e),r.Yi.delete(o.target)}),e0.apply(this,arguments)}function jl(t,e,n){const r=$e(t);let o=it.min(),c=xt();return r.persistence.runTransaction("Execute query","readonly",d=>function(g,v,D){const T=$e(g),A=T.Yi.get(D);return void 0!==A?Q.resolve(T.Ji.get(A)):T.Bs.getTargetData(v,D)}(r,d,ii(e)).next(g=>{if(g)return o=g.lastLimboFreeSnapshotVersion,r.Bs.getMatchingKeysForTargetId(d,g.targetId).next(v=>{c=v})}).next(()=>r.Hi.getDocumentsMatchingQuery(d,e,n?o:it.min(),n?c:xt())).next(g=>(Um(r,kD(e),g),{documents:g,ir:c})))}function No(t,e){const n=$e(t),r=$e(n.Bs),o=n.Ji.get(e);return o?Promise.resolve(o.target):n.persistence.runTransaction("Get target data","readonly",c=>r.le(c,e).next(d=>d?d.target:null))}function t0(t,e){const n=$e(t),r=n.Xi.get(e)||it.min();return n.persistence.runTransaction("Get new document changes","readonly",o=>n.Zi.getAllFromCollectionGroup(o,e,nD(r,-1),Number.MAX_SAFE_INTEGER)).then(o=>(Um(n,e,o),o))}function Um(t,e,n){let r=t.Xi.get(e)||it.min();n.forEach((o,c)=>{c.readTime.compareTo(r)>0&&(r=c.readTime)}),t.Xi.set(e,r)}function n0(){return n0=(0,z.Z)(function*(t,e,n,r){const o=$e(t);let c=xt(),d=si();for(const D of n){const T=e.rr(D.metadata.name);D.document&&(c=c.add(T));const A=e.ur(D);A.setReadTime(e.cr(D.metadata.readTime)),d=d.insert(T,A)}const g=o.Zi.newChangeBuffer({trackRemovals:!0}),v=yield Ul(o,(D=r,ii(Al(Ut.fromString(`__bundle__/docs/${D}`)))));var D;return o.persistence.runTransaction("Apply bundle documents","readwrite",D=>XI(D,g,d).next(T=>(g.apply(D),T)).next(T=>o.Bs.removeMatchingKeysForTargetId(D,v.targetId).next(()=>o.Bs.addMatchingKeys(D,c,v.targetId)).next(()=>o.localDocuments.getLocalViewOfDocuments(D,T.nr,T.sr)).next(()=>T.nr)))}),n0.apply(this,arguments)}function RM(t,e){return jm.apply(this,arguments)}function jm(){return jm=(0,z.Z)(function*(t,e,n=xt()){const r=yield Ul(t,ii(NI(e.bundledQuery))),o=$e(t);return o.persistence.runTransaction("Save named query","readwrite",c=>{const d=Nn(e.readTime);if(r.snapshotVersion.compareTo(d)>=0)return o.qs.saveNamedQuery(c,e);const g=r.withResumeToken(ir.EMPTY_BYTE_STRING,d);return o.Ji=o.Ji.insert(g.targetId,g),o.Bs.updateTargetData(c,g).next(()=>o.Bs.removeMatchingKeysForTargetId(c,r.targetId)).next(()=>o.Bs.addMatchingKeys(c,n,r.targetId)).next(()=>o.qs.saveNamedQuery(c,e))})}),jm.apply(this,arguments)}function Mb(t,e){return`firestore_clients_${t}_${e}`}function DA(t,e,n){let r=`firestore_mutations_${t}_${n}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}function r0(t,e){return`firestore_targets_${t}_${e}`}class $m{constructor(e,n,r,o){this.user=e,this.batchId=n,this.state=r,this.error=o}static ar(e,n,r){const o=JSON.parse(r);let c,d="object"==typeof o&&-1!==["pending","acknowledged","rejected"].indexOf(o.state)&&(void 0===o.error||"object"==typeof o.error);return d&&o.error&&(d="string"==typeof o.error.message&&"string"==typeof o.error.code,d&&(c=new ge(o.error.code,o.error.message))),d?new $m(e,n,o.state,c):(Yt("SharedClientState",`Failed to parse mutation state for ID '${n}': ${r}`),null)}hr(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class $l{constructor(e,n,r){this.targetId=e,this.state=n,this.error=r}static ar(e,n){const r=JSON.parse(n);let o,c="object"==typeof r&&-1!==["not-current","current","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error);return c&&r.error&&(c="string"==typeof r.error.message&&"string"==typeof r.error.code,c&&(o=new ge(r.error.code,r.error.message))),c?new $l(e,r.state,o):(Yt("SharedClientState",`Failed to parse target state for ID '${e}': ${n}`),null)}hr(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class s0{constructor(e,n){this.clientId=e,this.activeTargetIds=n}static ar(e,n){const r=JSON.parse(n);let o="object"==typeof r&&r.activeTargetIds instanceof Array,c=UD();for(let d=0;o&&d<r.activeTargetIds.length;++d)o=Qv(r.activeTargetIds[d]),c=c.add(r.activeTargetIds[d]);return o?new s0(e,c):(Yt("SharedClientState",`Failed to parse client data for instance '${e}': ${n}`),null)}}class Hm{constructor(e,n){this.clientId=e,this.onlineState=n}static ar(e){const n=JSON.parse(e);return"object"==typeof n&&-1!==["Unknown","Online","Offline"].indexOf(n.onlineState)&&"string"==typeof n.clientId?new Hm(n.clientId,n.onlineState):(Yt("SharedClientState",`Failed to parse online state: ${e}`),null)}}class o0{constructor(){this.activeTargetIds=UD()}lr(e){this.activeTargetIds=this.activeTargetIds.add(e)}dr(e){this.activeTargetIds=this.activeTargetIds.delete(e)}hr(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class zm{constructor(e,n,r,o,c){this.window=e,this.ii=n,this.persistenceKey=r,this.wr=o,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this._r=this.mr.bind(this),this.gr=new an(wt),this.started=!1,this.yr=[];const d=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=c,this.pr=Mb(this.persistenceKey,this.wr),this.Ir=`firestore_sequence_number_${this.persistenceKey}`,this.gr=this.gr.insert(this.wr,new o0),this.Tr=new RegExp(`^firestore_clients_${d}_([^_]*)$`),this.Er=new RegExp(`^firestore_mutations_${d}_(\\d+)(?:_(.*))?$`),this.Ar=new RegExp(`^firestore_targets_${d}_(\\d+)$`),this.vr=`firestore_online_state_${this.persistenceKey}`,this.Rr=function(g){return`firestore_bundle_loaded_v2_${g}`}(this.persistenceKey),this.window.addEventListener("storage",this._r)}static D(e){return!(!e||!e.localStorage)}start(){var e=this;return(0,z.Z)(function*(){const n=yield e.syncEngine.$i();for(const o of n){if(o===e.wr)continue;const c=e.getItem(Mb(e.persistenceKey,o));if(c){const d=s0.ar(o,c);d&&(e.gr=e.gr.insert(d.clientId,d))}}e.Pr();const r=e.storage.getItem(e.vr);if(r){const o=e.br(r);o&&e.Vr(o)}for(const o of e.yr)e.mr(o);e.yr=[],e.window.addEventListener("pagehide",()=>e.shutdown()),e.started=!0})()}writeSequenceNumber(e){this.setItem(this.Ir,JSON.stringify(e))}getAllActiveQueryTargets(){return this.Sr(this.gr)}isActiveQueryTarget(e){let n=!1;return this.gr.forEach((r,o)=>{o.activeTargetIds.has(e)&&(n=!0)}),n}addPendingMutation(e){this.Dr(e,"pending")}updateMutationState(e,n,r){this.Dr(e,n,r),this.Cr(e)}addLocalQueryTarget(e){let n="not-current";if(this.isActiveQueryTarget(e)){const r=this.storage.getItem(r0(this.persistenceKey,e));if(r){const o=$l.ar(e,r);o&&(n=o.state)}}return this.Nr.lr(e),this.Pr(),n}removeLocalQueryTarget(e){this.Nr.dr(e),this.Pr()}isLocalQueryTarget(e){return this.Nr.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(r0(this.persistenceKey,e))}updateQueryState(e,n,r){this.kr(e,n,r)}handleUserChange(e,n,r){n.forEach(o=>{this.Cr(o)}),this.currentUser=e,r.forEach(o=>{this.addPendingMutation(o)})}setOnlineState(e){this.Mr(e)}notifyBundleLoaded(e){this.$r(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this._r),this.removeItem(this.pr),this.started=!1)}getItem(e){const n=this.storage.getItem(e);return ve("SharedClientState","READ",e,n),n}setItem(e,n){ve("SharedClientState","SET",e,n),this.storage.setItem(e,n)}removeItem(e){ve("SharedClientState","REMOVE",e),this.storage.removeItem(e)}mr(e){var n=this;const r=e;if(r.storageArea===this.storage){if(ve("SharedClientState","EVENT",r.key,r.newValue),r.key===this.pr)return void Yt("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.ii.enqueueRetryable((0,z.Z)(function*(){if(n.started){if(null!==r.key)if(n.Tr.test(r.key)){if(null==r.newValue){const o=n.Or(r.key);return n.Fr(o,null)}{const o=n.Br(r.key,r.newValue);if(o)return n.Fr(o.clientId,o)}}else if(n.Er.test(r.key)){if(null!==r.newValue){const o=n.Lr(r.key,r.newValue);if(o)return n.qr(o)}}else if(n.Ar.test(r.key)){if(null!==r.newValue){const o=n.Ur(r.key,r.newValue);if(o)return n.Kr(o)}}else if(r.key===n.vr){if(null!==r.newValue){const o=n.br(r.newValue);if(o)return n.Vr(o)}}else if(r.key===n.Ir){const o=function(c){let d=mi.ct;if(null!=c)try{const g=JSON.parse(c);rt("number"==typeof g),d=g}catch(g){Yt("SharedClientState","Failed to read sequence number from WebStorage",g)}return d}(r.newValue);o!==mi.ct&&n.sequenceNumberHandler(o)}else if(r.key===n.Rr){const o=n.Gr(r.newValue);yield Promise.all(o.map(c=>n.syncEngine.Qr(c)))}}else n.yr.push(r)}))}}get Nr(){return this.gr.get(this.wr)}Pr(){this.setItem(this.pr,this.Nr.hr())}Dr(e,n,r){const o=new $m(this.currentUser,e,n,r),c=DA(this.persistenceKey,this.currentUser,e);this.setItem(c,o.hr())}Cr(e){const n=DA(this.persistenceKey,this.currentUser,e);this.removeItem(n)}Mr(e){this.storage.setItem(this.vr,JSON.stringify({clientId:this.wr,onlineState:e}))}kr(e,n,r){const o=r0(this.persistenceKey,e),c=new $l(e,n,r);this.setItem(o,c.hr())}$r(e){const n=JSON.stringify(Array.from(e));this.setItem(this.Rr,n)}Or(e){const n=this.Tr.exec(e);return n?n[1]:null}Br(e,n){const r=this.Or(e);return s0.ar(r,n)}Lr(e,n){const r=this.Er.exec(e),o=Number(r[1]);return $m.ar(new rr(void 0!==r[2]?r[2]:null),o,n)}Ur(e,n){const r=this.Ar.exec(e),o=Number(r[1]);return $l.ar(o,n)}br(e){return Hm.ar(e)}Gr(e){return JSON.parse(e)}qr(e){var n=this;return(0,z.Z)(function*(){if(e.user.uid===n.currentUser.uid)return n.syncEngine.jr(e.batchId,e.state,e.error);ve("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})()}Kr(e){return this.syncEngine.zr(e.targetId,e.state,e.error)}Fr(e,n){const r=n?this.gr.insert(e,n):this.gr.remove(e),o=this.Sr(this.gr),c=this.Sr(r),d=[],g=[];return c.forEach(v=>{o.has(v)||d.push(v)}),o.forEach(v=>{c.has(v)||g.push(v)}),this.syncEngine.Wr(d,g).then(()=>{this.gr=r})}Vr(e){this.gr.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}Sr(e){let n=UD();return e.forEach((r,o)=>{n=n.unionWith(o.activeTargetIds)}),n}}class bA{constructor(){this.Hr=new o0,this.Jr={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e){return this.Hr.lr(e),this.Jr[e]||"not-current"}updateQueryState(e,n,r){this.Jr[e]=n}removeLocalQueryTarget(e){this.Hr.dr(e)}isLocalQueryTarget(e){return this.Hr.activeTargetIds.has(e)}clearQueryState(e){delete this.Jr[e]}getAllActiveQueryTargets(){return this.Hr.activeTargetIds}isActiveQueryTarget(e){return this.Hr.activeTargetIds.has(e)}start(){return this.Hr=new o0,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class a0{Yr(e){}shutdown(){}}class u0{constructor(){this.Xr=()=>this.Zr(),this.eo=()=>this.no(),this.so=[],this.io()}Yr(e){this.so.push(e)}shutdown(){window.removeEventListener("online",this.Xr),window.removeEventListener("offline",this.eo)}io(){window.addEventListener("online",this.Xr),window.addEventListener("offline",this.eo)}Zr(){ve("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.so)e(0)}no(){ve("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.so)e(1)}static D(){return typeof window<"u"&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}let Tf=null;function c0(){return null===Tf?Tf=268435456+Math.round(2147483648*Math.random()):Tf++,"0x"+Tf.toString(16)}const Nb={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class Rb{constructor(e){this.ro=e.ro,this.oo=e.oo}uo(e){this.co=e}ao(e){this.ho=e}onMessage(e){this.lo=e}close(){this.oo()}send(e){this.ro(e)}fo(){this.co()}wo(e){this.ho(e)}_o(e){this.lo(e)}}const Kn="WebChannelConnection";class Gm extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId,this.mo=(e.ssl?"https":"http")+"://"+e.host,this.yo="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}get po(){return!1}Io(e,n,r,o,c){const d=c0(),g=this.To(e,n);ve("RestConnection",`Sending RPC '${e}' ${d}:`,g,r);const v={};return this.Eo(v,o,c),this.Ao(e,g,v,r).then(D=>(ve("RestConnection",`Received RPC '${e}' ${d}: `,D),D),D=>{throw Ln("RestConnection",`RPC '${e}' ${d} failed with error: `,D,"url: ",g,"request:",r),D})}vo(e,n,r,o,c,d){return this.Io(e,n,r,o,c)}Eo(e,n,r){e["X-Goog-Api-Client"]="gl-js/ fire/"+vu,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((o,c)=>e[c]=o),r&&r.headers.forEach((o,c)=>e[c]=o)}To(e,n){return`${this.mo}/v1/${n}:${Nb[e]}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Ao(e,n,r,o){const c=c0();return new Promise((d,g)=>{const v=new Zw;v.setWithCredentials(!0),v.listenOnce(qw.COMPLETE,()=>{try{switch(v.getLastErrorCode()){case zv.NO_ERROR:const T=v.getResponseJson();ve(Kn,`XHR for RPC '${e}' ${c} received:`,JSON.stringify(T)),d(T);break;case zv.TIMEOUT:ve(Kn,`RPC '${e}' ${c} timed out`),g(new ge(ee.DEADLINE_EXCEEDED,"Request time out"));break;case zv.HTTP_ERROR:const A=v.getStatus();if(ve(Kn,`RPC '${e}' ${c} failed with status:`,A,"response text:",v.getResponseText()),A>0){let U=v.getResponseJson();Array.isArray(U)&&(U=U[0]);const q=U?.error;if(q&&q.status&&q.message){const he=function(Se){const Ae=Se.toLowerCase().replace(/_/g,"-");return Object.values(ee).indexOf(Ae)>=0?Ae:ee.UNKNOWN}(q.status);g(new ge(he,q.message))}else g(new ge(ee.UNKNOWN,"Server responded with status "+v.getStatus()))}else g(new ge(ee.UNAVAILABLE,"Connection failed."));break;default:Ke()}}finally{ve(Kn,`RPC '${e}' ${c} completed.`)}});const D=JSON.stringify(o);ve(Kn,`RPC '${e}' ${c} sending request:`,o),v.send(n,"POST",D,r,15)})}Ro(e,n,r){const o=c0(),c=[this.mo,"/","google.firestore.v1.Firestore","/",e,"/channel"],d=cS(),g=Ww(),v={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},D=this.longPollingOptions.timeoutSeconds;void 0!==D&&(v.longPollingTimeout=Math.round(1e3*D)),this.useFetchStreams&&(v.xmlHttpFactory=new lS({})),this.Eo(v.initMessageHeaders,n,r),v.encodeInitMessageHeaders=!0;const T=c.join("");ve(Kn,`Creating RPC '${e}' stream ${o}: ${T}`,v);const A=d.createWebChannel(T,v);let U=!1,q=!1;const he=new Rb({ro:Ae=>{q?ve(Kn,`Not sending because RPC '${e}' stream ${o} is closed:`,Ae):(U||(ve(Kn,`Opening RPC '${e}' stream ${o} transport.`),A.open(),U=!0),ve(Kn,`RPC '${e}' stream ${o} sending:`,Ae),A.send(Ae))},oo:()=>A.close()}),Se=(Ae,Qe,ot)=>{Ae.listen(Qe,ut=>{try{ot(ut)}catch(yt){setTimeout(()=>{throw yt},0)}})};return Se(A,nm.EventType.OPEN,()=>{q||ve(Kn,`RPC '${e}' stream ${o} transport opened.`)}),Se(A,nm.EventType.CLOSE,()=>{q||(q=!0,ve(Kn,`RPC '${e}' stream ${o} transport closed`),he.wo())}),Se(A,nm.EventType.ERROR,Ae=>{q||(q=!0,Ln(Kn,`RPC '${e}' stream ${o} transport errored:`,Ae),he.wo(new ge(ee.UNAVAILABLE,"The operation could not be completed")))}),Se(A,nm.EventType.MESSAGE,Ae=>{var Qe;if(!q){const ot=Ae.data[0];rt(!!ot);const yt=ot.error||(null===(Qe=ot[0])||void 0===Qe?void 0:Qe.error);if(yt){ve(Kn,`RPC '${e}' stream ${o} received error:`,yt);const Nt=yt.status;let qt=function(Hf){const V1=qn[Hf];if(void 0!==V1)return lf(V1)}(Nt),vi=yt.message;void 0===qt&&(qt=ee.INTERNAL,vi="Unknown error status: "+Nt+" with message "+yt.message),q=!0,he.wo(new ge(qt,vi)),A.close()}else ve(Kn,`RPC '${e}' stream ${o} received:`,ot),he._o(ot)}}),Se(g,Kw.STAT_EVENT,Ae=>{Ae.stat===yu.PROXY?ve(Kn,`RPC '${e}' stream ${o} detected buffering proxy`):Ae.stat===yu.NOPROXY&&ve(Kn,`RPC '${e}' stream ${o} detected no buffering proxy`)}),setTimeout(()=>{he.fo()},0),he}}function l0(){return typeof window<"u"?window:null}function Cf(){return typeof document<"u"?document:null}function Sf(t){return new GS(t,!0)}class d0{constructor(e,n,r=1e3,o=1.5,c=6e4){this.ii=e,this.timerId=n,this.Po=r,this.bo=o,this.Vo=c,this.So=0,this.Do=null,this.Co=Date.now(),this.reset()}reset(){this.So=0}xo(){this.So=this.Vo}No(e){this.cancel();const n=Math.floor(this.So+this.ko()),r=Math.max(0,Date.now()-this.Co),o=Math.max(0,n-r);o>0&&ve("ExponentialBackoff",`Backing off for ${o} ms (base delay: ${this.So} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.Do=this.ii.enqueueAfterDelay(this.timerId,o,()=>(this.Co=Date.now(),e())),this.So*=this.bo,this.So<this.Po&&(this.So=this.Po),this.So>this.Vo&&(this.So=this.Vo)}Mo(){null!==this.Do&&(this.Do.skipDelay(),this.Do=null)}cancel(){null!==this.Do&&(this.Do.cancel(),this.Do=null)}ko(){return(Math.random()-.5)*this.So}}class TA{constructor(e,n,r,o,c,d,g,v){this.ii=e,this.$o=r,this.Oo=o,this.connection=c,this.authCredentialsProvider=d,this.appCheckCredentialsProvider=g,this.listener=v,this.state=0,this.Fo=0,this.Bo=null,this.Lo=null,this.stream=null,this.qo=new d0(e,n)}Uo(){return 1===this.state||5===this.state||this.Ko()}Ko(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.Go()}stop(){var e=this;return(0,z.Z)(function*(){e.Uo()&&(yield e.close(0))})()}Qo(){this.state=0,this.qo.reset()}jo(){this.Ko()&&null===this.Bo&&(this.Bo=this.ii.enqueueAfterDelay(this.$o,6e4,()=>this.zo()))}Wo(e){this.Ho(),this.stream.send(e)}zo(){var e=this;return(0,z.Z)(function*(){if(e.Ko())return e.close(0)})()}Ho(){this.Bo&&(this.Bo.cancel(),this.Bo=null)}Jo(){this.Lo&&(this.Lo.cancel(),this.Lo=null)}close(e,n){var r=this;return(0,z.Z)(function*(){r.Ho(),r.Jo(),r.qo.cancel(),r.Fo++,4!==e?r.qo.reset():n&&n.code===ee.RESOURCE_EXHAUSTED?(Yt(n.toString()),Yt("Using maximum backoff delay to prevent overloading the backend."),r.qo.xo()):n&&n.code===ee.UNAUTHENTICATED&&3!==r.state&&(r.authCredentialsProvider.invalidateToken(),r.appCheckCredentialsProvider.invalidateToken()),null!==r.stream&&(r.Yo(),r.stream.close(),r.stream=null),r.state=e,yield r.listener.ao(n)})()}Yo(){}auth(){this.state=1;const e=this.Xo(this.Fo),n=this.Fo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,o])=>{this.Fo===n&&this.Zo(r,o)},r=>{e(()=>{const o=new ge(ee.UNKNOWN,"Fetching auth token failed: "+r.message);return this.tu(o)})})}Zo(e,n){const r=this.Xo(this.Fo);this.stream=this.eu(e,n),this.stream.uo(()=>{r(()=>(this.state=2,this.Lo=this.ii.enqueueAfterDelay(this.Oo,1e4,()=>(this.Ko()&&(this.state=3),Promise.resolve())),this.listener.uo()))}),this.stream.ao(o=>{r(()=>this.tu(o))}),this.stream.onMessage(o=>{r(()=>this.onMessage(o))})}Go(){var e=this;this.state=5,this.qo.No((0,z.Z)(function*(){e.state=0,e.start()}))}tu(e){return ve("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}Xo(e){return n=>{this.ii.enqueueAndForget(()=>this.Fo===e?n():(ve("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class Pb extends TA{constructor(e,n,r,o,c,d){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,o,d),this.serializer=c}eu(e,n){return this.connection.Ro("Listen",e,n)}onMessage(e){this.qo.reset();const n=function qS(t,e){let n;if("targetChange"in e){const r="NO_CHANGE"===(v=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===v?1:"REMOVE"===v?2:"CURRENT"===v?3:"RESET"===v?4:Ke(),o=e.targetChange.targetIds||[],c=function(v,D){return v.useProto3Json?(rt(void 0===D||"string"==typeof D),ir.fromBase64String(D||"")):(rt(void 0===D||D instanceof Uint8Array),ir.fromUint8Array(D||new Uint8Array))}(t,e.targetChange.resumeToken),d=e.targetChange.cause,g=d&&function(v){const D=void 0===v.code?ee.UNKNOWN:lf(v.code);return new ge(D,v.message||"")}(d);n=new nb(r,o,c,g||null)}else if("documentChange"in e){const r=e.documentChange,o=Xs(t,r.document.name),c=Nn(r.document.updateTime),d=r.document.createTime?Nn(r.document.createTime):it.min(),g=new Nr({mapValue:{fields:r.document.fields}}),v=dn.newFoundDocument(o,c,d,g);n=new Mu(r.targetIds||[],r.removedTargetIds||[],v.key,v)}else if("documentDelete"in e){const r=e.documentDelete,o=Xs(t,r.document),c=r.readTime?Nn(r.readTime):it.min(),d=dn.newNoDocument(o,c);n=new Mu([],r.removedTargetIds||[],d.key,d)}else if("documentRemove"in e){const r=e.documentRemove,o=Xs(t,r.document);n=new Mu([],r.removedTargetIds||[],o,null)}else{if(!("filter"in e))return Ke();{const r=e.filter,{count:o=0,unchangedNames:c}=r,d=new cf(o,c);n=new tb(r.targetId,d)}}var v;return n}(this.serializer,e),r=function(o){if(!("targetChange"in o))return it.min();const c=o.targetChange;return c.targetIds&&c.targetIds.length?it.min():c.readTime?Nn(c.readTime):it.min()}(e);return this.listener.nu(n,r)}su(e){const n={};n.database=Nu(this.serializer),n.addTarget=function(o,c){let d;const g=c.target;if(d=gm(g)?{documents:SI(o,g)}:{query:AI(o,g)},d.targetId=c.targetId,c.resumeToken.approximateByteSize()>0){d.resumeToken=Am(o,c.resumeToken);const v=bI(o,c.expectedCount);null!==v&&(d.expectedCount=v)}else if(c.snapshotVersion.compareTo(it.min())>0){d.readTime=Ea(o,c.snapshotVersion.toTimestamp());const v=bI(o,c.expectedCount);null!==v&&(d.expectedCount=v)}return d}(this.serializer,e);const r=function Fl(t,e){const n=function(r){switch(r){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Ke()}}(e.purpose);return null==n?null:{"goog-listen-tags":n}}(0,e);r&&(n.labels=r),this.Wo(n)}iu(e){const n={};n.database=Nu(this.serializer),n.removeTarget=e,this.Wo(n)}}class CA extends TA{constructor(e,n,r,o,c,d){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,o,d),this.serializer=c,this.ru=!1}get ou(){return this.ru}start(){this.ru=!1,this.lastStreamToken=void 0,super.start()}Yo(){this.ru&&this.uu([])}eu(e,n){return this.connection.Ro("Write",e,n)}onMessage(e){if(rt(!!e.streamToken),this.lastStreamToken=e.streamToken,this.ru){this.qo.reset();const n=function KS(t,e){return t&&t.length>0?(rt(void 0!==e),t.map(n=>function(r,o){let c=Nn(r.updateTime?r.updateTime:o);return c.isEqual(it.min())&&(c=Nn(o)),new KD(c,r.transformResults||[])}(n,e))):[]}(e.writeResults,e.commitTime),r=Nn(e.commitTime);return this.listener.cu(r,n)}return rt(!e.writeResults||0===e.writeResults.length),this.ru=!0,this.listener.au()}hu(){const e={};e.database=Nu(this.serializer),this.Wo(e)}uu(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>Ll(this.serializer,r))};this.Wo(n)}}class SA extends class{}{constructor(e,n,r,o){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=o,this.lu=!1}fu(){if(this.lu)throw new ge(ee.FAILED_PRECONDITION,"The client has already been terminated.")}Io(e,n,r){return this.fu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,c])=>this.connection.Io(e,n,r,o,c)).catch(o=>{throw"FirebaseError"===o.name?(o.code===ee.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new ge(ee.UNKNOWN,o.toString())})}vo(e,n,r,o){return this.fu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([c,d])=>this.connection.vo(e,n,r,c,d,o)).catch(c=>{throw"FirebaseError"===c.name?(c.code===ee.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),c):new ge(ee.UNKNOWN,c.toString())})}terminate(){this.lu=!0}}class kM{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.wu=0,this._u=null,this.mu=!0}gu(){0===this.wu&&(this.yu("Unknown"),this._u=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._u=null,this.pu("Backend didn't respond within 10 seconds."),this.yu("Offline"),Promise.resolve())))}Iu(e){"Online"===this.state?this.yu("Unknown"):(this.wu++,this.wu>=1&&(this.Tu(),this.pu(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.yu("Offline")))}set(e){this.Tu(),this.wu=0,"Online"===e&&(this.mu=!1),this.yu(e)}yu(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}pu(e){const n=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.mu?(Yt(n),this.mu=!1):ve("OnlineStateTracker",n)}Tu(){null!==this._u&&(this._u.cancel(),this._u=null)}}class Ob{constructor(e,n,r,o,c){var d=this;this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.Eu=[],this.Au=new Map,this.vu=new Set,this.Ru=[],this.Pu=c,this.Pu.Yr(g=>{r.enqueueAndForget((0,z.Z)(function*(){var v;Ta(d)&&(ve("RemoteStore","Restarting streams for network reachability change."),yield(v=(0,z.Z)(function*(D){const T=$e(D);T.vu.add(4),yield Hl(T),T.bu.set("Unknown"),T.vu.delete(4),yield Af(T)}),function(D){return v.apply(this,arguments)})(d))}))}),this.bu=new kM(r,o)}}function Af(t){return h0.apply(this,arguments)}function h0(){return h0=(0,z.Z)(function*(t){if(Ta(t))for(const e of t.Ru)yield e(!0)}),h0.apply(this,arguments)}function Hl(t){return Lb.apply(this,arguments)}function Lb(){return Lb=(0,z.Z)(function*(t){for(const e of t.Ru)yield e(!1)}),Lb.apply(this,arguments)}function f0(t,e){const n=$e(t);n.Au.has(e.targetId)||(n.Au.set(e.targetId,e),zl(n)?p0(n):Wl(n).Ko()&&Fb(n,e))}function Wm(t,e){const n=$e(t),r=Wl(n);n.Au.delete(e),r.Ko()&&AA(n,e),0===n.Au.size&&(r.Ko()?r.jo():Ta(n)&&n.bu.set("Unknown"))}function Fb(t,e){if(t.Vu.qt(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(it.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Wl(t).su(e)}function AA(t,e){t.Vu.qt(e),Wl(t).iu(e)}function p0(t){t.Vu=new rb({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),le:e=>t.Au.get(e)||null,ue:()=>t.datastore.serializer.databaseId}),Wl(t).start(),t.bu.gu()}function zl(t){return Ta(t)&&!Wl(t).Uo()&&t.Au.size>0}function Ta(t){return 0===$e(t).vu.size}function Vb(t){t.Vu=void 0}function Bb(t){return Ro.apply(this,arguments)}function Ro(){return Ro=(0,z.Z)(function*(t){t.Au.forEach((e,n)=>{Fb(t,e)})}),Ro.apply(this,arguments)}function Ub(t,e){return xf.apply(this,arguments)}function xf(){return xf=(0,z.Z)(function*(t,e){Vb(t),zl(t)?(t.bu.Iu(e),p0(t)):t.bu.set("Unknown")}),xf.apply(this,arguments)}function g0(t,e,n){return m0.apply(this,arguments)}function m0(){return m0=(0,z.Z)(function*(t,e,n){if(t.bu.set("Online"),e instanceof nb&&2===e.state&&e.cause)try{yield(r=(0,z.Z)(function*(o,c){const d=c.cause;for(const g of c.targetIds)o.Au.has(g)&&(yield o.remoteSyncer.rejectListen(g,d),o.Au.delete(g),o.Vu.removeTarget(g))}),function(o,c){return r.apply(this,arguments)})(t,e)}catch(r){ve("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield Gl(t,r)}else if(e instanceof Mu?t.Vu.Ht(e):e instanceof tb?t.Vu.ne(e):t.Vu.Xt(e),!n.isEqual(it.min()))try{const r=yield JI(t.localStore);n.compareTo(r)>=0&&(yield function(o,c){const d=o.Vu.ce(c);return d.targetChanges.forEach((g,v)=>{if(g.resumeToken.approximateByteSize()>0){const D=o.Au.get(v);D&&o.Au.set(v,D.withResumeToken(g.resumeToken,c))}}),d.targetMismatches.forEach((g,v)=>{const D=o.Au.get(g);if(!D)return;o.Au.set(g,D.withResumeToken(ir.EMPTY_BYTE_STRING,D.snapshotVersion)),AA(o,g);const T=new Vi(D.target,g,v,D.sequenceNumber);Fb(o,T)}),o.remoteSyncer.applyRemoteEvent(d)}(t,n))}catch(r){ve("RemoteStore","Failed to raise snapshot:",r),yield Gl(t,r)}var r}),m0.apply(this,arguments)}function Gl(t,e,n){return Mf.apply(this,arguments)}function Mf(){return Mf=(0,z.Z)(function*(t,e,n){if(!bo(e))throw e;t.vu.add(1),yield Hl(t),t.bu.set("Offline"),n||(n=()=>JI(t.localStore)),t.asyncQueue.enqueueRetryable((0,z.Z)(function*(){ve("RemoteStore","Retrying IndexedDB access"),yield n(),t.vu.delete(1),yield Af(t)}))}),Mf.apply(this,arguments)}function Nf(t,e){return e().catch(n=>Gl(t,n,e))}function Rf(t){return jb.apply(this,arguments)}function jb(){return jb=(0,z.Z)(function*(t){const e=$e(t),n=Ca(e);let r=e.Eu.length>0?e.Eu[e.Eu.length-1].batchId:-1;for(;OM(e);)try{const o=yield Ab(e.localStore,r);if(null===o){0===e.Eu.length&&n.jo();break}r=o.batchId,$b(e,o)}catch(o){yield Gl(e,o)}Hb(e)&&zb(e)}),jb.apply(this,arguments)}function OM(t){return Ta(t)&&t.Eu.length<10}function $b(t,e){t.Eu.push(e);const n=Ca(t);n.Ko()&&n.ou&&n.uu(e.mutations)}function Hb(t){return Ta(t)&&!Ca(t).Uo()&&t.Eu.length>0}function zb(t){Ca(t).start()}function xA(t){return y0.apply(this,arguments)}function y0(){return y0=(0,z.Z)(function*(t){Ca(t).hu()}),y0.apply(this,arguments)}function Gb(t){return qm.apply(this,arguments)}function qm(){return qm=(0,z.Z)(function*(t){const e=Ca(t);for(const n of t.Eu)e.uu(n.mutations)}),qm.apply(this,arguments)}function Wb(t,e,n){return _0.apply(this,arguments)}function _0(){return _0=(0,z.Z)(function*(t,e,n){const r=t.Eu.shift(),o=QD.from(r,e,n);yield Nf(t,()=>t.remoteSyncer.applySuccessfulWrite(o)),yield Rf(t)}),_0.apply(this,arguments)}function MA(t,e){return Km.apply(this,arguments)}function Km(){return Km=(0,z.Z)(function*(t,e){var n;e&&Ca(t).ou&&(yield(n=(0,z.Z)(function*(r,o){if(JD(c=o.code)&&c!==ee.ABORTED){const d=r.Eu.shift();Ca(r).Qo(),yield Nf(r,()=>r.remoteSyncer.rejectFailedWrite(d.batchId,o)),yield Rf(r)}var c}),function(r,o){return n.apply(this,arguments)})(t,e)),Hb(t)&&zb(t)}),Km.apply(this,arguments)}function Zm(t,e){return qb.apply(this,arguments)}function qb(){return qb=(0,z.Z)(function*(t,e){const n=$e(t);n.asyncQueue.verifyOperationInProgress(),ve("RemoteStore","RemoteStore received new credentials");const r=Ta(n);n.vu.add(3),yield Hl(n),r&&n.bu.set("Unknown"),yield n.remoteSyncer.handleCredentialChange(e),n.vu.delete(3),yield Af(n)}),qb.apply(this,arguments)}function Ym(t,e){return Pf.apply(this,arguments)}function Pf(){return Pf=(0,z.Z)(function*(t,e){const n=$e(t);e?(n.vu.delete(2),yield Af(n)):e||(n.vu.add(2),yield Hl(n),n.bu.set("Unknown"))}),Pf.apply(this,arguments)}function Wl(t){return t.Su||(t.Su=function(e,n,r){const o=$e(e);return o.fu(),new Pb(n,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,r)}(t.datastore,t.asyncQueue,{uo:Bb.bind(null,t),ao:Ub.bind(null,t),nu:g0.bind(null,t)}),t.Ru.push(function(){var e=(0,z.Z)(function*(n){n?(t.Su.Qo(),zl(t)?p0(t):t.bu.set("Unknown")):(yield t.Su.stop(),Vb(t))});return function(n){return e.apply(this,arguments)}}())),t.Su}function Ca(t){return t.Du||(t.Du=function(e,n,r){const o=$e(e);return o.fu(),new CA(n,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,r)}(t.datastore,t.asyncQueue,{uo:xA.bind(null,t),ao:MA.bind(null,t),au:Gb.bind(null,t),cu:Wb.bind(null,t)}),t.Ru.push(function(){var e=(0,z.Z)(function*(n){n?(t.Du.Qo(),yield Rf(t)):(yield t.Du.stop(),t.Eu.length>0&&(ve("RemoteStore",`Stopping write stream with ${t.Eu.length} pending writes`),t.Eu=[]))});return function(n){return e.apply(this,arguments)}}())),t.Du}class Kb{constructor(e,n,r,o,c){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=o,this.removalCallback=c,this.deferred=new An,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(d=>{})}static createAndSchedule(e,n,r,o,c){const d=Date.now()+r,g=new Kb(e,n,d,o,c);return g.start(r),g}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new ge(ee.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function kf(t,e){if(Yt("AsyncQueue",`${e}: ${t}`),bo(t))return new ge(ee.UNAVAILABLE,`${e}: ${t}`);throw t}class ql{constructor(e){this.comparator=e?(n,r)=>e(n,r)||Be.comparator(n.key,r.key):(n,r)=>Be.comparator(n.key,r.key),this.keyedMap=sf(),this.sortedSet=new an(this.comparator)}static emptySet(e){return new ql(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof ql)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const o=n.getNext().key,c=r.getNext().key;if(!o.isEqual(c))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,n){const r=new ql;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}class Zb{constructor(){this.Cu=new an(Be.comparator)}track(e){const n=e.doc.key,r=this.Cu.get(n);r?0!==e.type&&3===r.type?this.Cu=this.Cu.insert(n,e):3===e.type&&1!==r.type?this.Cu=this.Cu.insert(n,{type:r.type,doc:e.doc}):2===e.type&&2===r.type?this.Cu=this.Cu.insert(n,{type:2,doc:e.doc}):2===e.type&&0===r.type?this.Cu=this.Cu.insert(n,{type:0,doc:e.doc}):1===e.type&&0===r.type?this.Cu=this.Cu.remove(n):1===e.type&&2===r.type?this.Cu=this.Cu.insert(n,{type:1,doc:r.doc}):0===e.type&&1===r.type?this.Cu=this.Cu.insert(n,{type:2,doc:e.doc}):Ke():this.Cu=this.Cu.insert(n,e)}xu(){const e=[];return this.Cu.inorderTraversal((n,r)=>{e.push(r)}),e}}class Kl{constructor(e,n,r,o,c,d,g,v,D){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=o,this.mutatedKeys=c,this.fromCache=d,this.syncStateChanged=g,this.excludesMetadataChanges=v,this.hasCachedResults=D}static fromInitialDocuments(e,n,r,o,c){const d=[];return n.forEach(g=>{d.push({type:0,doc:g})}),new Kl(e,n,ql.emptySet(n),d,r,o,!0,!1,c)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Su(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let o=0;o<n.length;o++)if(n[o].type!==r[o].type||!n[o].doc.isEqual(r[o].doc))return!1;return!0}}class NA{constructor(){this.Nu=void 0,this.listeners=[]}}class Yb{constructor(){this.queries=new Ys(e=>PD(e),Su),this.onlineState="Unknown",this.ku=new Set}}function Qm(t,e){return Jm.apply(this,arguments)}function Jm(){return Jm=(0,z.Z)(function*(t,e){const n=$e(t),r=e.query;let o=!1,c=n.queries.get(r);if(c||(o=!0,c=new NA),o)try{c.Nu=yield n.onListen(r)}catch(d){const g=kf(d,`Initialization of query '${vm(e.query)}' failed`);return void e.onError(g)}n.queries.set(r,c),c.listeners.push(e),e.Mu(n.onlineState),c.Nu&&e.$u(c.Nu)&&Xm(n)}),Jm.apply(this,arguments)}function v0(t,e){return Qb.apply(this,arguments)}function Qb(){return Qb=(0,z.Z)(function*(t,e){const n=$e(t),r=e.query;let o=!1;const c=n.queries.get(r);if(c){const d=c.listeners.indexOf(e);d>=0&&(c.listeners.splice(d,1),o=0===c.listeners.length)}if(o)return n.queries.delete(r),n.onUnlisten(r)}),Qb.apply(this,arguments)}function RA(t,e){const n=$e(t);let r=!1;for(const o of e){const d=n.queries.get(o.query);if(d){for(const g of d.listeners)g.$u(o)&&(r=!0);d.Nu=o}}r&&Xm(n)}function I0(t,e,n){const r=$e(t),o=r.queries.get(e);if(o)for(const c of o.listeners)c.onError(n);r.queries.delete(e)}function Xm(t){t.ku.forEach(e=>{e.next()})}class ey{constructor(e,n,r){this.query=e,this.Ou=n,this.Fu=!1,this.Bu=null,this.onlineState="Unknown",this.options=r||{}}$u(e){if(!this.options.includeMetadataChanges){const r=[];for(const o of e.docChanges)3!==o.type&&r.push(o);e=new Kl(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Fu?this.Lu(e)&&(this.Ou.next(e),n=!0):this.qu(e,this.onlineState)&&(this.Uu(e),n=!0),this.Bu=e,n}onError(e){this.Ou.error(e)}Mu(e){this.onlineState=e;let n=!1;return this.Bu&&!this.Fu&&this.qu(this.Bu,e)&&(this.Uu(this.Bu),n=!0),n}qu(e,n){return!e.fromCache||(!this.options.Ku||!("Offline"!==n))&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===n)}Lu(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.Bu&&this.Bu.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}Uu(e){e=Kl.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Fu=!0,this.Ou.next(e)}}class PA{constructor(e,n){this.Gu=e,this.byteLength=n}Qu(){return"metadata"in this.Gu}}class Of{constructor(e){this.serializer=e}rr(e){return Xs(this.serializer,e)}ur(e){return e.metadata.exists?lb(this.serializer,e.document,!1):dn.newNoDocument(this.rr(e.metadata.name),this.cr(e.metadata.readTime))}cr(e){return Nn(e)}}class kA{constructor(e,n,r){this.ju=e,this.localStore=n,this.serializer=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=Jb(e)}zu(e){this.progress.bytesLoaded+=e.byteLength;let n=this.progress.documentsLoaded;if(e.Gu.namedQuery)this.queries.push(e.Gu.namedQuery);else if(e.Gu.documentMetadata){this.documents.push({metadata:e.Gu.documentMetadata}),e.Gu.documentMetadata.exists||++n;const r=Ut.fromString(e.Gu.documentMetadata.name);this.collectionGroups.add(r.get(r.length-2))}else e.Gu.document&&(this.documents[this.documents.length-1].document=e.Gu.document,++n);return n!==this.progress.documentsLoaded?(this.progress.documentsLoaded=n,Object.assign({},this.progress)):null}Wu(e){const n=new Map,r=new Of(this.serializer);for(const o of e)if(o.metadata.queries){const c=r.rr(o.metadata.name);for(const d of o.metadata.queries){const g=(n.get(d)||xt()).add(c);n.set(d,g)}}return n}complete(){var e=this;return(0,z.Z)(function*(){const n=yield function xb(t,e,n,r){return n0.apply(this,arguments)}(e.localStore,new Of(e.serializer),e.documents,e.ju.id),r=e.Wu(e.documents);for(const o of e.queries)yield RM(e.localStore,o,r.get(o.name));return e.progress.taskState="Success",{progress:e.progress,Hu:e.collectionGroups,Ju:n}})()}}function Jb(t){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:t.totalDocuments,totalBytes:t.totalBytes}}class E0{constructor(e){this.key=e}}class w0{constructor(e){this.key=e}}class OA{constructor(e,n){this.query=e,this.Yu=n,this.Xu=null,this.hasCachedResults=!1,this.current=!1,this.Zu=xt(),this.mutatedKeys=xt(),this.tc=OD(e),this.ec=new ql(this.tc)}get nc(){return this.Yu}sc(e,n){const r=n?n.ic:new Zb,o=n?n.ec:this.ec;let c=n?n.mutatedKeys:this.mutatedKeys,d=o,g=!1;const v="F"===this.query.limitType&&o.size===this.query.limit?o.last():null,D="L"===this.query.limitType&&o.size===this.query.limit?o.first():null;if(e.inorderTraversal((T,A)=>{const U=o.get(T),q=rf(this.query,A)?A:null,he=!!U&&this.mutatedKeys.has(U.key),Se=!!q&&(q.hasLocalMutations||this.mutatedKeys.has(q.key)&&q.hasCommittedMutations);let Ae=!1;U&&q?U.data.isEqual(q.data)?he!==Se&&(r.track({type:3,doc:q}),Ae=!0):this.rc(U,q)||(r.track({type:2,doc:q}),Ae=!0,(v&&this.tc(q,v)>0||D&&this.tc(q,D)<0)&&(g=!0)):!U&&q?(r.track({type:0,doc:q}),Ae=!0):U&&!q&&(r.track({type:1,doc:U}),Ae=!0,(v||D)&&(g=!0)),Ae&&(q?(d=d.add(q),c=Se?c.add(T):c.delete(T)):(d=d.delete(T),c=c.delete(T)))}),null!==this.query.limit)for(;d.size>this.query.limit;){const T="F"===this.query.limitType?d.last():d.first();d=d.delete(T.key),c=c.delete(T.key),r.track({type:1,doc:T})}return{ec:d,ic:r,zi:g,mutatedKeys:c}}rc(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r){const o=this.ec;this.ec=e.ec,this.mutatedKeys=e.mutatedKeys;const c=e.ic.xu();c.sort((D,T)=>function(A,U){const q=he=>{switch(he){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Ke()}};return q(A)-q(U)}(D.type,T.type)||this.tc(D.doc,T.doc)),this.oc(r);const d=n?this.uc():[],g=0===this.Zu.size&&this.current?1:0,v=g!==this.Xu;return this.Xu=g,0!==c.length||v?{snapshot:new Kl(this.query,e.ec,o,c,e.mutatedKeys,0===g,v,!1,!!r&&r.resumeToken.approximateByteSize()>0),cc:d}:{cc:d}}Mu(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({ec:this.ec,ic:new Zb,mutatedKeys:this.mutatedKeys,zi:!1},!1)):{cc:[]}}ac(e){return!this.Yu.has(e)&&!!this.ec.has(e)&&!this.ec.get(e).hasLocalMutations}oc(e){e&&(e.addedDocuments.forEach(n=>this.Yu=this.Yu.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Yu=this.Yu.delete(n)),this.current=e.current)}uc(){if(!this.current)return[];const e=this.Zu;this.Zu=xt(),this.ec.forEach(r=>{this.ac(r.key)&&(this.Zu=this.Zu.add(r.key))});const n=[];return e.forEach(r=>{this.Zu.has(r)||n.push(new w0(r))}),this.Zu.forEach(r=>{e.has(r)||n.push(new E0(r))}),n}hc(e){this.Yu=e.ir,this.Zu=xt();const n=this.sc(e.documents);return this.applyChanges(n,!0)}lc(){return Kl.fromInitialDocuments(this.query,this.ec,this.mutatedKeys,0===this.Xu,this.hasCachedResults)}}class LA{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class LM{constructor(e){this.key=e,this.fc=!1}}class FA{constructor(e,n,r,o,c,d){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=o,this.currentUser=c,this.maxConcurrentLimboResolutions=d,this.dc={},this.wc=new Ys(g=>PD(g),Su),this._c=new Map,this.mc=new Set,this.gc=new an(Be.comparator),this.yc=new Map,this.Ic=new WI,this.Tc={},this.Ec=new Map,this.Ac=to.Mn(),this.onlineState="Unknown",this.vc=void 0}get isPrimaryClient(){return!0===this.vc}}function FM(t,e){return Xb.apply(this,arguments)}function Xb(){return Xb=(0,z.Z)(function*(t,e){const n=$A(t);let r,o;const c=n.wc.get(e);if(c)r=c.targetId,n.sharedClientState.addLocalQueryTarget(r),o=c.view.lc();else{const d=yield Ul(n.localStore,ii(e)),g=n.sharedClientState.addLocalQueryTarget(d.targetId);r=d.targetId,o=yield D0(n,e,r,"current"===g,d.resumeToken),n.isPrimaryClient&&f0(n.remoteStore,d)}return o}),Xb.apply(this,arguments)}function D0(t,e,n,r,o){return eT.apply(this,arguments)}function eT(){return eT=(0,z.Z)(function*(t,e,n,r,o){t.Rc=(A,U,q)=>{return(he=(0,z.Z)(function*(Se,Ae,Qe,ot){let ut=Ae.view.sc(Qe);ut.zi&&(ut=yield jl(Se.localStore,Ae.query,!1).then(({documents:qt})=>Ae.view.sc(qt,ut)));const yt=ot&&ot.targetChanges.get(Ae.targetId),Nt=Ae.view.applyChanges(ut,Se.isPrimaryClient,yt);return m(Se,Ae.targetId,Nt.cc),Nt.snapshot}),function(Se,Ae,Qe,ot){return he.apply(this,arguments)})(t,A,U,q);var he};const c=yield jl(t.localStore,e,!0),d=new OA(e,c.ir),g=d.sc(c.documents),v=Ol.createSynthesizedTargetChangeForCurrentChange(n,r&&"Offline"!==t.onlineState,o),D=d.applyChanges(g,t.isPrimaryClient,v);m(t,n,D.cc);const T=new LA(e,n,d);return t.wc.set(e,T),t._c.has(n)?t._c.get(n).push(e):t._c.set(n,[e]),D.snapshot}),eT.apply(this,arguments)}function VM(t,e){return tT.apply(this,arguments)}function tT(){return tT=(0,z.Z)(function*(t,e){const n=$e(t),r=n.wc.get(e),o=n._c.get(r.targetId);if(o.length>1)return n._c.set(r.targetId,o.filter(c=>!Su(c,e))),void n.wc.delete(e);n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(r.targetId),n.sharedClientState.isActiveQueryTarget(r.targetId)||(yield Bu(n.localStore,r.targetId,!1).then(()=>{n.sharedClientState.clearQueryState(r.targetId),Wm(n.remoteStore,r.targetId),l(n,r.targetId)}).catch(ma))):(l(n,r.targetId),yield Bu(n.localStore,r.targetId,!0))}),tT.apply(this,arguments)}function nT(){return nT=(0,z.Z)(function*(t,e,n){const r=HA(t);try{const o=yield function(c,d){const g=$e(c),v=on.now(),D=d.reduce((U,q)=>U.add(q.key),xt());let T,A;return g.persistence.runTransaction("Locally write mutations","readwrite",U=>{let q=si(),he=xt();return g.Zi.getEntries(U,D).next(Se=>{q=Se,q.forEach((Ae,Qe)=>{Qe.isValidDocument()||(he=he.add(Ae))})}).next(()=>g.localDocuments.getOverlayedDocuments(U,q)).next(Se=>{T=Se;const Ae=[];for(const Qe of d){const ot=HS(Qe,T.get(Qe.key).overlayedDocument);null!=ot&&Ae.push(new Fi(Qe.key,ot,sI(ot.value.mapValue),yn.exists(!0)))}return g.mutationQueue.addMutationBatch(U,v,Ae,d)}).next(Se=>{A=Se;const Ae=Se.applyToLocalDocumentSet(T,he);return g.documentOverlayCache.saveOverlays(U,Se.batchId,Ae)})}).then(()=>({batchId:A.batchId,changes:FD(T)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(o.batchId),function(c,d,g){let v=c.Tc[c.currentUser.toKey()];v||(v=new an(wt)),v=v.insert(d,g),c.Tc[c.currentUser.toKey()]=v}(r,o.batchId,n),yield b(r,o.changes),yield Rf(r.remoteStore)}catch(o){const c=kf(o,"Failed to persist write");n.reject(c)}}),nT.apply(this,arguments)}function VA(t,e){return b0.apply(this,arguments)}function b0(){return b0=(0,z.Z)(function*(t,e){const n=$e(t);try{const r=yield function Sb(t,e){const n=$e(t),r=e.snapshotVersion;let o=n.Ji;return n.persistence.runTransaction("Apply remote event","readwrite-primary",c=>{const d=n.Zi.newChangeBuffer({trackRemovals:!0});o=n.Ji;const g=[];e.targetChanges.forEach((T,A)=>{const U=o.get(A);if(!U)return;g.push(n.Bs.removeMatchingKeys(c,T.removedDocuments,A).next(()=>n.Bs.addMatchingKeys(c,T.addedDocuments,A)));let q=U.withSequenceNumber(c.currentSequenceNumber);var he,Se,Ae;null!==e.targetMismatches.get(A)?q=q.withResumeToken(ir.EMPTY_BYTE_STRING,it.min()).withLastLimboFreeSnapshotVersion(it.min()):T.resumeToken.approximateByteSize()>0&&(q=q.withResumeToken(T.resumeToken,r)),o=o.insert(A,q),Se=q,Ae=T,(0===(he=U).resumeToken.approximateByteSize()||Se.snapshotVersion.toMicroseconds()-he.snapshotVersion.toMicroseconds()>=3e8||Ae.addedDocuments.size+Ae.modifiedDocuments.size+Ae.removedDocuments.size>0)&&g.push(n.Bs.updateTargetData(c,q))});let v=si(),D=xt();if(e.documentUpdates.forEach(T=>{e.resolvedLimboDocuments.has(T)&&g.push(n.persistence.referenceDelegate.updateLimboDocument(c,T))}),g.push(XI(c,d,e.documentUpdates).next(T=>{v=T.nr,D=T.sr})),!r.isEqual(it.min())){const T=n.Bs.getLastRemoteSnapshotVersion(c).next(A=>n.Bs.setTargetsMetadata(c,c.currentSequenceNumber,r));g.push(T)}return Q.waitFor(g).next(()=>d.apply(c)).next(()=>n.localDocuments.getLocalViewOfDocuments(c,v,D)).next(()=>v)}).then(c=>(n.Ji=o,c))}(n.localStore,e);e.targetChanges.forEach((o,c)=>{const d=n.yc.get(c);d&&(rt(o.addedDocuments.size+o.modifiedDocuments.size+o.removedDocuments.size<=1),o.addedDocuments.size>0?d.fc=!0:o.modifiedDocuments.size>0?rt(d.fc):o.removedDocuments.size>0&&(rt(d.fc),d.fc=!1))}),yield b(n,r,e)}catch(r){yield ma(r)}}),b0.apply(this,arguments)}function BA(t,e,n){const r=$e(t);if(r.isPrimaryClient&&0===n||!r.isPrimaryClient&&1===n){const o=[];r.wc.forEach((c,d)=>{const g=d.view.Mu(e);g.snapshot&&o.push(g.snapshot)}),function(c,d){const g=$e(c);g.onlineState=d;let v=!1;g.queries.forEach((D,T)=>{for(const A of T.listeners)A.Mu(d)&&(v=!0)}),v&&Xm(g)}(r.eventManager,e),o.length&&r.dc.nu(o),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function UM(t,e,n){return rT.apply(this,arguments)}function rT(){return rT=(0,z.Z)(function*(t,e,n){const r=$e(t);r.sharedClientState.updateQueryState(e,"rejected",n);const o=r.yc.get(e),c=o&&o.key;if(c){let d=new an(Be.comparator);d=d.insert(c,dn.newNoDocument(c,it.min()));const g=xt().add(c),v=new hf(it.min(),new Map,new an(wt),d,g);yield VA(r,v),r.gc=r.gc.remove(c),r.yc.delete(e),w(r)}else yield Bu(r.localStore,e,!1).then(()=>l(r,e,n)).catch(ma)}),rT.apply(this,arguments)}function jM(t,e){return iT.apply(this,arguments)}function iT(){return iT=(0,z.Z)(function*(t,e){const n=$e(t),r=e.batch.batchId;try{const o=yield function wA(t,e){const n=$e(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const o=e.batch.keys(),c=n.Zi.newChangeBuffer({trackRemovals:!0});return function(d,g,v,D){const T=v.batch,A=T.keys();let U=Q.resolve();return A.forEach(q=>{U=U.next(()=>D.getEntry(g,q)).next(he=>{const Se=v.docVersions.get(q);rt(null!==Se),he.version.compareTo(Se)<0&&(T.applyToRemoteDocument(he,v),he.isValidDocument()&&(he.setReadTime(v.commitVersion),D.addEntry(he)))})}),U.next(()=>d.mutationQueue.removeMutationBatch(g,T))}(n,r,e,c).next(()=>c.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,o,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(d){let g=xt();for(let v=0;v<d.mutationResults.length;++v)d.mutationResults[v].transformResults.length>0&&(g=g.add(d.batch.mutations[v].key));return g}(e))).next(()=>n.localDocuments.getDocuments(r,o))})}(n.localStore,e);u(n,r,null),a(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),yield b(n,o)}catch(o){yield ma(o)}}),iT.apply(this,arguments)}function $M(t,e,n){return sT.apply(this,arguments)}function sT(){return sT=(0,z.Z)(function*(t,e,n){const r=$e(t);try{const o=yield function(c,d){const g=$e(c);return g.persistence.runTransaction("Reject batch","readwrite-primary",v=>{let D;return g.mutationQueue.lookupMutationBatch(v,d).next(T=>(rt(null!==T),D=T.keys(),g.mutationQueue.removeMutationBatch(v,T))).next(()=>g.mutationQueue.performConsistencyCheck(v)).next(()=>g.documentOverlayCache.removeOverlaysForBatchId(v,D,d)).next(()=>g.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(v,D)).next(()=>g.localDocuments.getDocuments(v,D))})}(r.localStore,e);u(r,e,n),a(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),yield b(r,o)}catch(o){yield ma(o)}}),sT.apply(this,arguments)}function s(){return s=(0,z.Z)(function*(t,e){const n=$e(t);Ta(n.remoteStore)||ve("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const r=yield function(c){const d=$e(c);return d.persistence.runTransaction("Get highest unacknowledged batch id","readonly",g=>d.mutationQueue.getHighestUnacknowledgedBatchId(g))}(n.localStore);if(-1===r)return void e.resolve();const o=n.Ec.get(r)||[];o.push(e),n.Ec.set(r,o)}catch(r){const o=kf(r,"Initialization of waitForPendingWrites() operation failed");e.reject(o)}}),s.apply(this,arguments)}function a(t,e){(t.Ec.get(e)||[]).forEach(n=>{n.resolve()}),t.Ec.delete(e)}function u(t,e,n){const r=$e(t);let o=r.Tc[r.currentUser.toKey()];if(o){const c=o.get(e);c&&(n?c.reject(n):c.resolve(),o=o.remove(e)),r.Tc[r.currentUser.toKey()]=o}}function l(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t._c.get(e))t.wc.delete(r),n&&t.dc.Pc(r,n);t._c.delete(e),t.isPrimaryClient&&t.Ic.Is(e).forEach(r=>{t.Ic.containsKey(r)||h(t,r)})}function h(t,e){t.mc.delete(e.path.canonicalString());const n=t.gc.get(e);null!==n&&(Wm(t.remoteStore,n),t.gc=t.gc.remove(e),t.yc.delete(n),w(t))}function m(t,e,n){for(const r of n)r instanceof E0?(t.Ic.addReference(r.key,e),y(t,r)):r instanceof w0?(ve("SyncEngine","Document no longer in limbo: "+r.key),t.Ic.removeReference(r.key,e),t.Ic.containsKey(r.key)||h(t,r.key)):Ke()}function y(t,e){const n=e.key,r=n.path.canonicalString();t.gc.get(n)||t.mc.has(r)||(ve("SyncEngine","New document in limbo: "+n),t.mc.add(r),w(t))}function w(t){for(;t.mc.size>0&&t.gc.size<t.maxConcurrentLimboResolutions;){const e=t.mc.values().next().value;t.mc.delete(e);const n=new Be(Ut.fromString(e)),r=t.Ac.next();t.yc.set(r,new LM(n)),t.gc=t.gc.insert(n,r),f0(t.remoteStore,new Vi(ii(Al(n.path)),r,"TargetPurposeLimboResolution",mi.ct))}}function b(t,e,n){return S.apply(this,arguments)}function S(){return S=(0,z.Z)(function*(t,e,n){const r=$e(t),o=[],c=[],d=[];var g;r.wc.isEmpty()||(r.wc.forEach((g,v)=>{d.push(r.Rc(v,e,n).then(D=>{if((D||n)&&r.isPrimaryClient&&r.sharedClientState.updateQueryState(v.targetId,D?.fromCache?"not-current":"current"),D){o.push(D);const T=bf.Li(v.targetId,D);c.push(T)}}))}),yield Promise.all(d),r.dc.nu(o),yield(g=(0,z.Z)(function*(v,D){const T=$e(v);try{yield T.persistence.runTransaction("notifyLocalViewChanges","readwrite",A=>Q.forEach(D,U=>Q.forEach(U.Fi,q=>T.persistence.referenceDelegate.addReference(A,U.targetId,q)).next(()=>Q.forEach(U.Bi,q=>T.persistence.referenceDelegate.removeReference(A,U.targetId,q)))))}catch(A){if(!bo(A))throw A;ve("LocalStore","Failed to update sequence numbers: "+A)}for(const A of D){const U=A.targetId;if(!A.fromCache){const q=T.Ji.get(U),Se=q.withLastLimboFreeSnapshotVersion(q.snapshotVersion);T.Ji=T.Ji.insert(U,Se)}}}),function(v,D){return g.apply(this,arguments)})(r.localStore,c))}),S.apply(this,arguments)}function P(t,e){return $.apply(this,arguments)}function $(){return $=(0,z.Z)(function*(t,e){const n=$e(t);if(!n.currentUser.isEqual(e)){ve("SyncEngine","User change. New user:",e.toKey());const r=yield QI(n.localStore,e);n.currentUser=e,(o=n).Ec.forEach(d=>{d.forEach(g=>{g.reject(new ge(ee.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),o.Ec.clear(),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield b(n,r.er)}var o}),$.apply(this,arguments)}function W(t,e){const n=$e(t),r=n.yc.get(e);if(r&&r.fc)return xt().add(r.key);{let o=xt();const c=n._c.get(e);if(!c)return o;for(const d of c){const g=n.wc.get(d);o=o.unionWith(g.view.nc)}return o}}function ae(t,e){return be.apply(this,arguments)}function be(){return be=(0,z.Z)(function*(t,e){const n=$e(t),r=yield jl(n.localStore,e.query,!0),o=e.view.hc(r);return n.isPrimaryClient&&m(n,e.targetId,o.cc),o}),be.apply(this,arguments)}function He(t,e){return nt.apply(this,arguments)}function nt(){return nt=(0,z.Z)(function*(t,e){const n=$e(t);return t0(n.localStore,e).then(r=>b(n,r))}),nt.apply(this,arguments)}function ye(t,e,n,r){return gt.apply(this,arguments)}function gt(){return gt=(0,z.Z)(function*(t,e,n,r){const o=$e(t),c=yield function(d,g){const v=$e(d),D=$e(v.mutationQueue);return v.persistence.runTransaction("Lookup mutation documents","readonly",T=>D.Sn(T,g).next(A=>A?v.localDocuments.getDocuments(T,A):Q.resolve(null)))}(o.localStore,e);var g;null!==c?("pending"===n?yield Rf(o.remoteStore):"acknowledged"===n||"rejected"===n?(u(o,e,r||null),a(o,e),g=e,$e($e(o.localStore).mutationQueue).Cn(g)):Ke(),yield b(o,c)):ve("SyncEngine","Cannot apply mutation batch with id: "+e)}),gt.apply(this,arguments)}function Qt(){return Qt=(0,z.Z)(function*(t,e){const n=$e(t);if($A(n),HA(n),!0===e&&!0!==n.vc){const r=n.sharedClientState.getAllActiveQueryTargets(),o=yield ui(n,r.toArray());n.vc=!0,yield Ym(n.remoteStore,!0);for(const c of o)f0(n.remoteStore,c)}else if(!1===e&&!1!==n.vc){const r=[];let o=Promise.resolve();n._c.forEach((c,d)=>{n.sharedClientState.isLocalQueryTarget(d)?r.push(d):o=o.then(()=>(l(n,d),Bu(n.localStore,d,!0))),Wm(n.remoteStore,d)}),yield o,yield ui(n,r),function(c){const d=$e(c);d.yc.forEach((g,v)=>{Wm(d.remoteStore,v)}),d.Ic.Ts(),d.yc=new Map,d.gc=new an(Be.comparator)}(n),n.vc=!1,yield Ym(n.remoteStore,!1)}}),Qt.apply(this,arguments)}function ui(t,e,n){return Ds.apply(this,arguments)}function Ds(){return Ds=(0,z.Z)(function*(t,e,n){const r=$e(t),o=[],c=[];for(const d of e){let g;const v=r._c.get(d);if(v&&0!==v.length){g=yield Ul(r.localStore,ii(v[0]));for(const D of v){const T=r.wc.get(D),A=yield ae(r,T);A.snapshot&&c.push(A.snapshot)}}else{const D=yield No(r.localStore,d);g=yield Ul(r.localStore,D),yield D0(r,Uu(D),d,!1,g.resumeToken)}o.push(g)}return r.dc.nu(c),o}),Ds.apply(this,arguments)}function Uu(t){return ND(t.path,t.collectionGroup,t.orderBy,t.filters,t.limit,"F",t.startAt,t.endAt)}function T0(t){const e=$e(t);return $e($e(e.localStore).persistence).$i()}function UA(t,e,n,r){return C0.apply(this,arguments)}function C0(){return C0=(0,z.Z)(function*(t,e,n,r){const o=$e(t);if(o.vc)return void ve("SyncEngine","Ignoring unexpected query state notification.");const c=o._c.get(e);if(c&&c.length>0)switch(n){case"current":case"not-current":{const d=yield t0(o.localStore,kD(c[0])),g=hf.createSynthesizedRemoteEventForCurrentChange(e,"current"===n,ir.EMPTY_BYTE_STRING);yield b(o,d,g);break}case"rejected":yield Bu(o.localStore,e,!0),l(o,e,r);break;default:Ke()}}),C0.apply(this,arguments)}function j1(t,e,n){return jA.apply(this,arguments)}function jA(){return jA=(0,z.Z)(function*(t,e,n){const r=$A(t);if(r.vc){for(const o of e){if(r._c.has(o)){ve("SyncEngine","Adding an already active target "+o);continue}const c=yield No(r.localStore,o),d=yield Ul(r.localStore,c);yield D0(r,Uu(c),d.targetId,!1,d.resumeToken),f0(r.remoteStore,d)}for(const o of n)r._c.has(o)&&(yield Bu(r.localStore,o,!1).then(()=>{Wm(r.remoteStore,o),l(r,o)}).catch(ma))}}),jA.apply(this,arguments)}function $A(t){const e=$e(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=VA.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=W.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=UM.bind(null,e),e.dc.nu=RA.bind(null,e.eventManager),e.dc.Pc=I0.bind(null,e.eventManager),e}function HA(t){const e=$e(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=jM.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=$M.bind(null,e),e}class S0{constructor(){this.synchronizeTabs=!1}initialize(e){var n=this;return(0,z.Z)(function*(){n.serializer=Sf(e.databaseInfo.databaseId),n.sharedClientState=n.createSharedClientState(e),n.persistence=n.createPersistence(e),yield n.persistence.start(),n.localStore=n.createLocalStore(e),n.gcScheduler=n.createGarbageCollectionScheduler(e,n.localStore),n.indexBackfillerScheduler=n.createIndexBackfillerScheduler(e,n.localStore)})()}createGarbageCollectionScheduler(e,n){return null}createIndexBackfillerScheduler(e,n){return null}createLocalStore(e){return Vm(this.persistence,new Cb,e.initialUser,this.serializer)}createPersistence(e){return new KI(wf.zs,this.serializer)}createSharedClientState(e){return new bA}terminate(){var e=this;return(0,z.Z)(function*(){e.gcScheduler&&e.gcScheduler.stop(),yield e.sharedClientState.shutdown(),yield e.persistence.shutdown()})()}}class zA extends S0{constructor(e,n,r){super(),this.Vc=e,this.cacheSizeBytes=n,this.forceOwnership=r,this.synchronizeTabs=!1}initialize(e){var n=()=>super.initialize,r=this;return(0,z.Z)(function*(){yield n().call(r,e),yield r.Vc.initialize(r,e),yield HA(r.Vc.syncEngine),yield Rf(r.Vc.remoteStore),yield r.persistence.Ii(()=>(r.gcScheduler&&!r.gcScheduler.started&&r.gcScheduler.start(),r.indexBackfillerScheduler&&!r.indexBackfillerScheduler.started&&r.indexBackfillerScheduler.start(),Promise.resolve()))})()}createLocalStore(e){return Vm(this.persistence,new Cb,e.initialUser,this.serializer)}createGarbageCollectionScheduler(e,n){return new cA(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue,n)}createIndexBackfillerScheduler(e,n){const r=new uD(n,this.persistence);return new aD(e.asyncQueue,r)}createPersistence(e){const n=YI(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=void 0!==this.cacheSizeBytes?oi.withCacheSize(this.cacheSizeBytes):oi.DEFAULT;return new ZI(this.synchronizeTabs,n,e.clientId,r,e.asyncQueue,l0(),Cf(),this.serializer,this.sharedClientState,!!this.forceOwnership)}createSharedClientState(e){return new bA}}class HM extends zA{constructor(e,n){super(e,n,!1),this.Vc=e,this.cacheSizeBytes=n,this.synchronizeTabs=!0}initialize(e){var n=()=>super.initialize,r=this;return(0,z.Z)(function*(){yield n().call(r,e);const o=r.Vc.syncEngine;r.sharedClientState instanceof zm&&(r.sharedClientState.syncEngine={jr:ye.bind(null,o),zr:UA.bind(null,o),Wr:j1.bind(null,o),$i:T0.bind(null,o),Qr:He.bind(null,o)},yield r.sharedClientState.start()),yield r.persistence.Ii(function(){var c=(0,z.Z)(function*(d){yield function Pt(t,e){return Qt.apply(this,arguments)}(r.Vc.syncEngine,d),r.gcScheduler&&(d&&!r.gcScheduler.started?r.gcScheduler.start():d||r.gcScheduler.stop()),r.indexBackfillerScheduler&&(d&&!r.indexBackfillerScheduler.started?r.indexBackfillerScheduler.start():d||r.indexBackfillerScheduler.stop())});return function(d){return c.apply(this,arguments)}}())})()}createSharedClientState(e){const n=l0();if(!zm.D(n))throw new ge(ee.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=YI(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new zm(n,e.asyncQueue,r,e.clientId,e.initialUser)}}class ty{initialize(e,n){var r=this;return(0,z.Z)(function*(){r.localStore||(r.localStore=e.localStore,r.sharedClientState=e.sharedClientState,r.datastore=r.createDatastore(n),r.remoteStore=r.createRemoteStore(n),r.eventManager=r.createEventManager(n),r.syncEngine=r.createSyncEngine(n,!e.synchronizeTabs),r.sharedClientState.onlineStateHandler=o=>BA(r.syncEngine,o,1),r.remoteStore.remoteSyncer.handleCredentialChange=P.bind(null,r.syncEngine),yield Ym(r.remoteStore,r.syncEngine.isPrimaryClient))})()}createEventManager(e){return new Yb}createDatastore(e){const n=Sf(e.databaseInfo.databaseId),r=new Gm(e.databaseInfo);return new SA(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return n=this.localStore,r=this.datastore,o=e.asyncQueue,c=g=>BA(this.syncEngine,g,0),d=u0.D()?new u0:new a0,new Ob(n,r,o,c,d);var n,r,o,c,d}createSyncEngine(e,n){return function(r,o,c,d,g,v,D){const T=new FA(r,o,c,d,g,v);return D&&(T.vc=!0),T}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}terminate(){return(e=(0,z.Z)(function*(n){const r=$e(n);ve("RemoteStore","RemoteStore shutting down."),r.vu.add(5),yield Hl(r),r.Pu.shutdown(),r.bu.set("Unknown")}),function(n){return e.apply(this,arguments)})(this.remoteStore);var e}}function zM(t,e=10240){let n=0;return{read:()=>(0,z.Z)(function*(){if(n<t.byteLength){const r={value:t.slice(n,n+e),done:!1};return n+=e,r}return{done:!0}})(),cancel:()=>(0,z.Z)(function*(){})(),releaseLock(){},closed:Promise.resolve()}}class oT{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Sc(this.observer.next,e)}error(e){this.observer.error?this.Sc(this.observer.error,e):Yt("Uncaught Error in snapshot listener:",e.toString())}Dc(){this.muted=!0}Sc(e,n){this.muted||setTimeout(()=>{this.muted||e(n)},0)}}class z1{constructor(e,n){this.Cc=e,this.serializer=n,this.metadata=new An,this.buffer=new Uint8Array,this.xc=new TextDecoder("utf-8"),this.Nc().then(r=>{r&&r.Qu()?this.metadata.resolve(r.Gu.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(r?.Gu)}`))},r=>this.metadata.reject(r))}close(){return this.Cc.cancel()}getMetadata(){var e=this;return(0,z.Z)(function*(){return e.metadata.promise})()}bc(){var e=this;return(0,z.Z)(function*(){return yield e.getMetadata(),e.Nc()})()}Nc(){var e=this;return(0,z.Z)(function*(){const n=yield e.kc();if(null===n)return null;const r=e.xc.decode(n),o=Number(r);isNaN(o)&&e.Mc(`length string (${r}) is not valid number`);const c=yield e.$c(o);return new PA(JSON.parse(c),n.length+o)})()}Oc(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}kc(){var e=this;return(0,z.Z)(function*(){for(;e.Oc()<0&&!(yield e.Fc()););if(0===e.buffer.length)return null;const n=e.Oc();n<0&&e.Mc("Reached the end of bundle when a length string is expected.");const r=e.buffer.slice(0,n);return e.buffer=e.buffer.slice(n),r})()}$c(e){var n=this;return(0,z.Z)(function*(){for(;n.buffer.length<e;)(yield n.Fc())&&n.Mc("Reached the end of bundle when more is expected.");const r=n.xc.decode(n.buffer.slice(0,e));return n.buffer=n.buffer.slice(e),r})()}Mc(e){throw this.Cc.cancel(),new Error(`Invalid bundle format: ${e}`)}Fc(){var e=this;return(0,z.Z)(function*(){const n=yield e.Cc.read();if(!n.done){const r=new Uint8Array(e.buffer.length+n.value.length);r.set(e.buffer),r.set(n.value,e.buffer.length),e.buffer=r}return n.done})()}}class G1{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}lookup(e){var n=this;return(0,z.Z)(function*(){if(n.ensureCommitNotCalled(),n.mutations.length>0)throw new ge(ee.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const r=yield(o=(0,z.Z)(function*(c,d){const g=$e(c),v=Nu(g.serializer)+"/documents",D={documents:d.map(q=>pf(g.serializer,q))},T=yield g.vo("BatchGetDocuments",v,D,d.length),A=new Map;T.forEach(q=>{const he=function WS(t,e){return"found"in e?function(n,r){rt(!!r.found);const o=Xs(n,r.found.name),c=Nn(r.found.updateTime),d=r.found.createTime?Nn(r.found.createTime):it.min(),g=new Nr({mapValue:{fields:r.found.fields}});return dn.newFoundDocument(o,c,d,g)}(t,e):"missing"in e?function(n,r){rt(!!r.missing),rt(!!r.readTime);const o=Xs(n,r.missing),c=Nn(r.readTime);return dn.newNoDocument(o,c)}(t,e):Ke()}(g.serializer,q);A.set(he.key.toString(),he)});const U=[];return d.forEach(q=>{const he=A.get(q.toString());rt(!!he),U.push(he)}),U}),function(c,d){return o.apply(this,arguments)})(n.datastore,e);var o;return r.forEach(o=>n.recordVersion(o)),r})()}set(e,n){this.write(n.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,n){try{this.write(n.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastWriteError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new kl(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){var e=this;return(0,z.Z)(function*(){if(e.ensureCommitNotCalled(),e.lastWriteError)throw e.lastWriteError;const n=e.readVersions;var r;e.mutations.forEach(r=>{n.delete(r.key.toString())}),n.forEach((r,o)=>{const c=Be.fromPath(o);e.mutations.push(new uf(c,e.precondition(c)))}),yield(r=(0,z.Z)(function*(o,c){const d=$e(o),g=Nu(d.serializer)+"/documents",v={writes:c.map(D=>Ll(d.serializer,D))};yield d.Io("Commit",g,v)}),function(o,c){return r.apply(this,arguments)})(e.datastore,e.mutations),e.committed=!0})()}recordVersion(e){let n;if(e.isFoundDocument())n=e.version;else{if(!e.isNoDocument())throw Ke();n=it.min()}const r=this.readVersions.get(e.key.toString());if(r){if(!n.isEqual(r))throw new ge(ee.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),n)}precondition(e){const n=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&n?n.isEqual(it.min())?yn.exists(!1):yn.updateTime(n):yn.none()}preconditionForUpdate(e){const n=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&n){if(n.isEqual(it.min()))throw new ge(ee.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return yn.updateTime(n)}return yn.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class W1{constructor(e,n,r,o,c){this.asyncQueue=e,this.datastore=n,this.options=r,this.updateFunction=o,this.deferred=c,this.Bc=r.maxAttempts,this.qo=new d0(this.asyncQueue,"transaction_retry")}run(){this.Bc-=1,this.Lc()}Lc(){var e=this;this.qo.No((0,z.Z)(function*(){const n=new G1(e.datastore),r=e.qc(n);r&&r.then(o=>{e.asyncQueue.enqueueAndForget(()=>n.commit().then(()=>{e.deferred.resolve(o)}).catch(c=>{e.Uc(c)}))}).catch(o=>{e.Uc(o)})}))}qc(e){try{const n=this.updateFunction(e);return!gl(n)&&n.catch&&n.then?n:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(n){return this.deferred.reject(n),null}}Uc(e){this.Bc>0&&this.Kc(e)?(this.Bc-=1,this.asyncQueue.enqueueAndForget(()=>(this.Lc(),Promise.resolve()))):this.deferred.reject(e)}Kc(e){if("FirebaseError"===e.name){const n=e.code;return"aborted"===n||"failed-precondition"===n||"already-exists"===n||!JD(n)}return!1}}class q1{constructor(e,n,r,o){var c=this;this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=o,this.user=rr.UNAUTHENTICATED,this.clientId=Wv.A(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,function(){var d=(0,z.Z)(function*(g){ve("FirestoreClient","Received user=",g.uid),yield c.authCredentialListener(g),c.user=g});return function(g){return d.apply(this,arguments)}}()),this.appCheckCredentials.start(r,d=>(ve("FirestoreClient","Received new app check token=",d),this.appCheckCredentialListener(d,this.user)))}getConfiguration(){var e=this;return(0,z.Z)(function*(){return{asyncQueue:e.asyncQueue,databaseInfo:e.databaseInfo,clientId:e.clientId,authCredentials:e.authCredentials,appCheckCredentials:e.appCheckCredentials,initialUser:e.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new ge(ee.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const n=new An;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,z.Z)(function*(){try{e._onlineComponents&&(yield e._onlineComponents.terminate()),e._offlineComponents&&(yield e._offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),n.resolve()}catch(r){const o=kf(r,"Failed to shutdown persistence");n.reject(o)}})),n.promise}}function aT(t,e){return GA.apply(this,arguments)}function GA(){return GA=(0,z.Z)(function*(t,e){t.asyncQueue.verifyOperationInProgress(),ve("FirestoreClient","Initializing OfflineComponentProvider");const n=yield t.getConfiguration();yield e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(function(){var o=(0,z.Z)(function*(c){r.isEqual(c)||(yield QI(e.localStore,c),r=c)});return function(c){return o.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}),GA.apply(this,arguments)}function WA(t,e){return qA.apply(this,arguments)}function qA(){return qA=(0,z.Z)(function*(t,e){t.asyncQueue.verifyOperationInProgress();const n=yield KA(t);ve("FirestoreClient","Initializing OnlineComponentProvider");const r=yield t.getConfiguration();yield e.initialize(n,r),t.setCredentialChangeListener(o=>Zm(e.remoteStore,o)),t.setAppCheckTokenChangeListener((o,c)=>Zm(e.remoteStore,c)),t._onlineComponents=e}),qA.apply(this,arguments)}function GM(t){return"FirebaseError"===t.name?t.code===ee.FAILED_PRECONDITION||t.code===ee.UNIMPLEMENTED:!(typeof DOMException<"u"&&t instanceof DOMException)||22===t.code||20===t.code||11===t.code}function KA(t){return ZA.apply(this,arguments)}function ZA(){return ZA=(0,z.Z)(function*(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){ve("FirestoreClient","Using user provided OfflineComponentProvider");try{yield aT(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!GM(n))throw n;Ln("Error using user provided cache. Falling back to memory cache: "+n),yield aT(t,new S0)}}else ve("FirestoreClient","Using default OfflineComponentProvider"),yield aT(t,new S0);return t._offlineComponents}),ZA.apply(this,arguments)}function uT(t){return YA.apply(this,arguments)}function YA(){return YA=(0,z.Z)(function*(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(ve("FirestoreClient","Using user provided OnlineComponentProvider"),yield WA(t,t._uninitializedComponentsProvider._online)):(ve("FirestoreClient","Using default OnlineComponentProvider"),yield WA(t,new ty))),t._onlineComponents}),YA.apply(this,arguments)}function WM(t){return KA(t).then(e=>e.persistence)}function cT(t){return KA(t).then(e=>e.localStore)}function qM(t){return uT(t).then(e=>e.remoteStore)}function QA(t){return uT(t).then(e=>e.syncEngine)}function ny(t){return JA.apply(this,arguments)}function JA(){return JA=(0,z.Z)(function*(t){const e=yield uT(t),n=e.eventManager;return n.onListen=FM.bind(null,e.syncEngine),n.onUnlisten=VM.bind(null,e.syncEngine),n}),JA.apply(this,arguments)}function ZM(t,e,n={}){const r=new An;return t.asyncQueue.enqueueAndForget((0,z.Z)(function*(){return function(o,c,d,g,v){const D=new oT({next:A=>{c.enqueueAndForget(()=>v0(o,T));const U=A.docs.has(d);!U&&A.fromCache?v.reject(new ge(ee.UNAVAILABLE,"Failed to get document because the client is offline.")):U&&A.fromCache&&g&&"server"===g.source?v.reject(new ge(ee.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):v.resolve(A)},error:A=>v.reject(A)}),T=new ey(Al(d.path),D,{includeMetadataChanges:!0,Ku:!0});return Qm(o,T)}(yield ny(t),t.asyncQueue,e,n,r)})),r.promise}function YM(t,e,n={}){const r=new An;return t.asyncQueue.enqueueAndForget((0,z.Z)(function*(){return function(o,c,d,g,v){const D=new oT({next:A=>{c.enqueueAndForget(()=>v0(o,T)),A.fromCache&&"server"===g.source?v.reject(new ge(ee.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):v.resolve(A)},error:A=>v.reject(A)}),T=new ey(d,D,{includeMetadataChanges:!0,Ku:!0});return Qm(o,T)}(yield ny(t),t.asyncQueue,e,n,r)})),r.promise}function QM(t){const e={};return void 0!==t.timeoutSeconds&&(e.timeoutSeconds=t.timeoutSeconds),e}const JM=new Map;function XA(t,e,n){if(!n)throw new ge(ee.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function XM(t,e,n,r){if(!0===e&&!0===r)throw new ge(ee.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function eN(t){if(!Be.isDocumentKey(t))throw new ge(ee.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function tN(t){if(Be.isDocumentKey(t))throw new ge(ee.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function lT(t){if(void 0===t)return"undefined";if(null===t)return"null";if("string"==typeof t)return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if("number"==typeof t||"boolean"==typeof t)return""+t;if("object"==typeof t){if(t instanceof Array)return"an array";{const e=(n=t).constructor?n.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var n;return"function"==typeof t?"a function":Ke()}function Gt(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new ge(ee.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=lT(t);throw new ge(ee.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}function nN(t,e){if(e<=0)throw new ge(ee.INVALID_ARGUMENT,`Function ${t}() requires a positive number, but it was: ${e}.`)}class rN{constructor(e){var n,r;if(void 0===e.host){if(void 0!==e.ssl)throw new ge(ee.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(n=e.ssl)||void 0===n||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.cache=e.localCache,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new ge(ee.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}XM("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!(this.experimentalForceLongPolling||void 0!==e.experimentalAutoDetectLongPolling&&!e.experimentalAutoDetectLongPolling),this.experimentalLongPollingOptions=QM(null!==(r=e.experimentalLongPollingOptions)&&void 0!==r?r:{}),function(o){if(void 0!==o.timeoutSeconds){if(isNaN(o.timeoutSeconds))throw new ge(ee.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (must not be NaN)`);if(o.timeoutSeconds<5)throw new ge(ee.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (minimum allowed value is 5)`);if(o.timeoutSeconds>30)throw new ge(ee.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.experimentalLongPollingOptions.timeoutSeconds===e.experimentalLongPollingOptions.timeoutSeconds&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class A0{constructor(e,n,r,o){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=o,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new rN({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new ge(ee.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new ge(ee.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new rN(e),void 0!==e.credentials&&(this._authCredentials=function(n){if(!n)return new Qw;switch(n.type){case"firstParty":return new Xw(n.sessionIndex||"0",n.iamToken||null,n.authTokenFactory||null);case"provider":return n.client;default:throw new ge(ee.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const n=JM.get(e);n&&(ve("ComponentProvider","Removing Datastore"),JM.delete(e),n.terminate())}(this),Promise.resolve()}}function iN(t,e,n,r={}){var o;const c=(t=Gt(t,A0))._getSettings(),d=`${e}:${n}`;if("firestore.googleapis.com"!==c.host&&c.host!==d&&Ln("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},c),{host:d,ssl:!1})),r.mockUserToken){let g,v;if("string"==typeof r.mockUserToken)g=r.mockUserToken,v=rr.MOCK_USER;else{g=(0,tt.Sg)(r.mockUserToken,null===(o=t._app)||void 0===o?void 0:o.options.projectId);const D=r.mockUserToken.sub||r.mockUserToken.user_id;if(!D)throw new ge(ee.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");v=new rr(D)}t._authCredentials=new gS(new Yw(g,v))}}class Rn{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Sa(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Rn(this.firestore,e,this._key)}}class ci{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new ci(this.firestore,e,this._query)}}class Sa extends ci{constructor(e,n,r){super(e,n,Al(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Rn(this.firestore,null,new Be(e))}withConverter(e){return new Sa(this.firestore,e,this._path)}}function ex(t,e,...n){if(t=(0,tt.m9)(t),XA("collection","path",e),t instanceof A0){const r=Ut.fromString(e,...n);return tN(r),new Sa(t,null,r)}{if(!(t instanceof Rn||t instanceof Sa))throw new ge(ee.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Ut.fromString(e,...n));return tN(r),new Sa(t.firestore,null,r)}}function dT(t,e,...n){if(t=(0,tt.m9)(t),1===arguments.length&&(e=Wv.A()),XA("doc","path",e),t instanceof A0){const r=Ut.fromString(e,...n);return eN(r),new Rn(t,null,new Be(r))}{if(!(t instanceof Rn||t instanceof Sa))throw new ge(ee.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Ut.fromString(e,...n));return eN(r),new Rn(t.firestore,t instanceof Sa?t.converter:null,new Be(r))}}function sN(t,e){return t=(0,tt.m9)(t),e=(0,tt.m9)(e),(t instanceof Rn||t instanceof Sa)&&(e instanceof Rn||e instanceof Sa)&&t.firestore===e.firestore&&t.path===e.path&&t.converter===e.converter}function tx(t,e){return t=(0,tt.m9)(t),e=(0,tt.m9)(e),t instanceof ci&&e instanceof ci&&t.firestore===e.firestore&&Su(t._query,e._query)&&t.converter===e.converter}class rR{constructor(){this.Gc=Promise.resolve(),this.Qc=[],this.jc=!1,this.zc=[],this.Wc=null,this.Hc=!1,this.Jc=!1,this.Yc=[],this.qo=new d0(this,"async_queue_retry"),this.Xc=()=>{const n=Cf();n&&ve("AsyncQueue","Visibility state changed to "+n.visibilityState),this.qo.Mo()};const e=Cf();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Xc)}get isShuttingDown(){return this.jc}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Zc(),this.ta(e)}enterRestrictedMode(e){if(!this.jc){this.jc=!0,this.Jc=e||!1;const n=Cf();n&&"function"==typeof n.removeEventListener&&n.removeEventListener("visibilitychange",this.Xc)}}enqueue(e){if(this.Zc(),this.jc)return new Promise(()=>{});const n=new An;return this.ta(()=>this.jc&&this.Jc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Qc.push(e),this.ea()))}ea(){var e=this;return(0,z.Z)(function*(){if(0!==e.Qc.length){try{yield e.Qc[0](),e.Qc.shift(),e.qo.reset()}catch(n){if(!bo(n))throw n;ve("AsyncQueue","Operation failed with retryable error: "+n)}e.Qc.length>0&&e.qo.No(()=>e.ea())}})()}ta(e){const n=this.Gc.then(()=>(this.Hc=!0,e().catch(r=>{throw this.Wc=r,this.Hc=!1,Yt("INTERNAL UNHANDLED ERROR: ",function(c){let d=c.message||"";return c.stack&&(d=c.stack.includes(c.message)?c.stack:c.message+"\n"+c.stack),d}(r)),r}).then(r=>(this.Hc=!1,r))));return this.Gc=n,n}enqueueAfterDelay(e,n,r){this.Zc(),this.Yc.indexOf(e)>-1&&(n=0);const o=Kb.createAndSchedule(this,e,n,r,c=>this.na(c));return this.zc.push(o),o}Zc(){this.Wc&&Ke()}verifyOperationInProgress(){}sa(){var e=this;return(0,z.Z)(function*(){let n;do{n=e.Gc,yield n}while(n!==e.Gc)})()}ia(e){for(const n of this.zc)if(n.timerId===e)return!0;return!1}ra(e){return this.sa().then(()=>{this.zc.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.zc)if(n.skipDelay(),"all"!==e&&n.timerId===e)break;return this.sa()})}oa(e){this.Yc.push(e)}na(e){const n=this.zc.indexOf(e);this.zc.splice(n,1)}}function nx(t){return function(e,n){if("object"!=typeof e||null===e)return!1;const r=e;for(const o of["next","error","complete"])if(o in r&&"function"==typeof r[o])return!0;return!1}(t)}class iR{constructor(){this._progressObserver={},this._taskCompletionResolver=new An,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,n,r){this._progressObserver={next:e,error:n,complete:r}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,n){return this._taskCompletionResolver.promise.then(e,n)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class Pn extends A0{constructor(e,n,r,o){super(e,n,r,o),this.type="firestore",this._queue=new rR,this._persistenceKey=o?.name||"[DEFAULT]"}_terminate(){return this._firestoreClient||oN(this),this._firestoreClient.terminate()}}function oR(t,e){const n="object"==typeof t?t:(0,Ct.getApp)(),r="string"==typeof t?t:e||"(default)",o=(0,Ct._getProvider)(n,"firestore").getImmediate({identifier:r});if(!o._initialized){const c=(0,tt.P0)("firestore");c&&iN(o,...c)}return o}function or(t){return t._firestoreClient||oN(t),t._firestoreClient.verifyNotTerminated(),t._firestoreClient}function oN(t){var e,n,r;const o=t._freezeSettings(),c=(g=(null===(e=t._app)||void 0===e?void 0:e.options.appId)||"",new MS(t._databaseId,g,t._persistenceKey,(D=o).host,D.ssl,D.experimentalForceLongPolling,D.experimentalAutoDetectLongPolling,QM(D.experimentalLongPollingOptions),D.useFetchStreams));var g,D;t._firestoreClient=new q1(t._authCredentials,t._appCheckCredentials,t._queue,c),null!==(n=o.cache)&&void 0!==n&&n._offlineComponentProvider&&null!==(r=o.cache)&&void 0!==r&&r._onlineComponentProvider&&(t._firestoreClient._uninitializedComponentsProvider={_offlineKind:o.cache.kind,_offline:o.cache._offlineComponentProvider,_online:o.cache._onlineComponentProvider})}function aN(t,e,n){const r=new An;return t.asyncQueue.enqueue((0,z.Z)(function*(){try{yield aT(t,n),yield WA(t,e),r.resolve()}catch(o){const c=o;if(!GM(c))throw c;Ln("Error enabling indexeddb cache. Falling back to memory cache: "+c),r.reject(c)}})).then(()=>r.promise)}function uN(t){if(t._initialized||t._terminated)throw new ge(ee.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class Aa{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Aa(ir.fromBase64String(e))}catch(n){throw new ge(ee.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new Aa(ir.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class ju{constructor(...e){for(let n=0;n<e.length;++n)if(0===e[n].length)throw new ge(ee.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new xn(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class Lf{constructor(e){this._methodName=e}}class hT{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new ge(ee.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new ge(ee.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return wt(this._lat,e._lat)||wt(this._long,e._long)}}const mR=/^__.*__$/;class yR{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return null!==this.fieldMask?new Fi(e,this.data,this.fieldMask,n,this.fieldTransforms):new Pl(e,this.data,n,this.fieldTransforms)}}class cN{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new Fi(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function lN(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Ke()}}class fT{constructor(e,n,r,o,c,d){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=o,void 0===c&&this.ua(),this.fieldTransforms=c||[],this.fieldMask=d||[]}get path(){return this.settings.path}get ca(){return this.settings.ca}aa(e){return new fT(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}ha(e){var n;const r=null===(n=this.path)||void 0===n?void 0:n.child(e),o=this.aa({path:r,la:!1});return o.fa(e),o}da(e){var n;const r=null===(n=this.path)||void 0===n?void 0:n.child(e),o=this.aa({path:r,la:!1});return o.ua(),o}wa(e){return this.aa({path:void 0,la:!0})}_a(e){return mT(e,this.settings.methodName,this.settings.ma||!1,this.path,this.settings.ga)}contains(e){return void 0!==this.fieldMask.find(n=>e.isPrefixOf(n))||void 0!==this.fieldTransforms.find(n=>e.isPrefixOf(n.field))}ua(){if(this.path)for(let e=0;e<this.path.length;e++)this.fa(this.path.get(e))}fa(e){if(0===e.length)throw this._a("Document fields must not be empty");if(lN(this.ca)&&mR.test(e))throw this._a('Document fields cannot begin and end with "__"')}}class _R{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||Sf(e)}ya(e,n,r,o=!1){return new fT({ca:e,methodName:n,ga:r,path:xn.emptyPath(),la:!1,ma:o},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Ff(t){const e=t._freezeSettings(),n=Sf(t._databaseId);return new _R(t._databaseId,!!e.ignoreUndefinedProperties,n)}function pT(t,e,n,r,o,c={}){const d=t.ya(c.merge||c.mergeFields?2:0,e,n,o);ox("Data must be an object, but it was:",d,r);const g=fN(r,d);let v,D;if(c.merge)v=new _i(d.fieldMask),D=d.fieldTransforms;else if(c.mergeFields){const T=[];for(const A of c.mergeFields){const U=N0(e,A,n);if(!d.contains(U))throw new ge(ee.INVALID_ARGUMENT,`Field '${U}' is specified in your field mask but missing from your input data.`);gN(T,U)||T.push(U)}v=new _i(T),D=d.fieldTransforms.filter(A=>v.covers(A.field))}else v=null,D=d.fieldTransforms;return new yR(new Nr(g),v,D)}class M0 extends Lf{_toFieldTransform(e){if(2!==e.ca)throw e._a(1===e.ca?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof M0}}function dN(t,e,n){return new fT({ca:3,ga:e.settings.ga,methodName:t._methodName,la:n},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class rx extends Lf{_toFieldTransform(e){return new Rl(e.path,new Nl)}isEqual(e){return e instanceof rx}}class vR extends Lf{constructor(e,n){super(e),this.pa=n}_toFieldTransform(e){const n=dN(this,e,!0),r=this.pa.map(c=>Vf(c,n)),o=new Au(r);return new Rl(e.path,o)}isEqual(e){return this===e}}class IR extends Lf{constructor(e,n){super(e),this.pa=n}_toFieldTransform(e){const n=dN(this,e,!0),r=this.pa.map(c=>Vf(c,n)),o=new xu(r);return new Rl(e.path,o)}isEqual(e){return this===e}}class ER extends Lf{constructor(e,n){super(e),this.Ia=n}_toFieldTransform(e){const n=new Js(e.serializer,HD(e.serializer,this.Ia));return new Rl(e.path,n)}isEqual(e){return this===e}}function ix(t,e,n,r){const o=t.ya(1,e,n);ox("Data must be an object, but it was:",o,r);const c=[],d=Nr.empty();Qi(r,(v,D)=>{const T=gT(e,v,n);D=(0,tt.m9)(D);const A=o.da(T);if(D instanceof M0)c.push(T);else{const U=Vf(D,A);null!=U&&(c.push(T),d.set(T,U))}});const g=new _i(c);return new cN(d,g,o.fieldTransforms)}function sx(t,e,n,r,o,c){const d=t.ya(1,e,n),g=[N0(e,r,n)],v=[o];if(c.length%2!=0)throw new ge(ee.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let U=0;U<c.length;U+=2)g.push(N0(e,c[U])),v.push(c[U+1]);const D=[],T=Nr.empty();for(let U=g.length-1;U>=0;--U)if(!gN(D,g[U])){const q=g[U];let he=v[U];he=(0,tt.m9)(he);const Se=d.da(q);if(he instanceof M0)D.push(q);else{const Ae=Vf(he,Se);null!=Ae&&(D.push(q),T.set(q,Ae))}}const A=new _i(D);return new cN(T,A,d.fieldTransforms)}function hN(t,e,n,r=!1){return Vf(n,t.ya(r?4:3,e))}function Vf(t,e){if(pN(t=(0,tt.m9)(t)))return ox("Unsupported field value:",e,t),fN(t,e);if(t instanceof Lf)return function(n,r){if(!lN(r.ca))throw r._a(`${n._methodName}() can only be used with update() and set()`);if(!r.path)throw r._a(`${n._methodName}() is not currently supported inside arrays`);const o=n._toFieldTransform(r);o&&r.fieldTransforms.push(o)}(t,e),null;if(void 0===t&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.la&&4!==e.ca)throw e._a("Nested arrays are not supported");return function(n,r){const o=[];let c=0;for(const d of n){let g=Vf(d,r.wa(c));null==g&&(g={nullValue:"NULL_VALUE"}),o.push(g),c++}return{arrayValue:{values:o}}}(t,e)}return function(n,r){if(null===(n=(0,tt.m9)(n)))return{nullValue:"NULL_VALUE"};if("number"==typeof n)return HD(r.serializer,n);if("boolean"==typeof n)return{booleanValue:n};if("string"==typeof n)return{stringValue:n};if(n instanceof Date){const o=on.fromDate(n);return{timestampValue:Ea(r.serializer,o)}}if(n instanceof on){const o=new on(n.seconds,1e3*Math.floor(n.nanoseconds/1e3));return{timestampValue:Ea(r.serializer,o)}}if(n instanceof hT)return{geoPointValue:{latitude:n.latitude,longitude:n.longitude}};if(n instanceof Aa)return{bytesValue:Am(r.serializer,n._byteString)};if(n instanceof Rn){const o=r.databaseId,c=n.firestore._databaseId;if(!c.isEqual(o))throw r._a(`Document reference is for database ${c.projectId}/${c.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:ff(n.firestore._databaseId||r.databaseId,n._key.path)}}throw r._a(`Unsupported field value: ${lT(n)}`)}(t,e)}function fN(t,e){const n={};return _D(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Qi(t,(r,o)=>{const c=Vf(o,e.ha(r));null!=c&&(n[r]=c)}),{mapValue:{fields:n}}}function pN(t){return!("object"!=typeof t||null===t||t instanceof Array||t instanceof Date||t instanceof on||t instanceof hT||t instanceof Aa||t instanceof Rn||t instanceof Lf)}function ox(t,e,n){if(!pN(n)||"object"!=typeof(r=n)||null===r||Object.getPrototypeOf(r)!==Object.prototype&&null!==Object.getPrototypeOf(r)){const r=lT(n);throw e._a("an object"===r?t+" a custom object":t+" "+r)}var r}function N0(t,e,n){if((e=(0,tt.m9)(e))instanceof ju)return e._internalPath;if("string"==typeof e)return gT(t,e);throw mT("Field path arguments must be of type string or ",t,!1,void 0,n)}const wR=new RegExp("[~\\*/\\[\\]]");function gT(t,e,n){if(e.search(wR)>=0)throw mT(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new ju(...e.split("."))._internalPath}catch{throw mT(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function mT(t,e,n,r,o){const c=r&&!r.isEmpty(),d=void 0!==o;let g=`Function ${e}() called with invalid data`;n&&(g+=" (via `toFirestore()`)"),g+=". ";let v="";return(c||d)&&(v+=" (found",c&&(v+=` in field ${r}`),d&&(v+=` in document ${o}`),v+=")"),new ge(ee.INVALID_ARGUMENT,g+t+v)}function gN(t,e){return t.some(n=>n.isEqual(e))}class R0{constructor(e,n,r,o,c){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=o,this._converter=c}get id(){return this._key.path.lastSegment()}get ref(){return new Rn(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new DR(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(yT("DocumentSnapshot.get",e));if(null!==n)return this._userDataWriter.convertValue(n)}}}class DR extends R0{data(){return super.data()}}function yT(t,e){return"string"==typeof e?gT(t,e):e instanceof ju?e._internalPath:e._delegate._internalPath}function mN(t){if("L"===t.limitType&&0===t.explicitOrderBy.length)throw new ge(ee.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class ax{}class P0 extends ax{}function $u(t,e,...n){let r=[];e instanceof ax&&r.push(e),r=r.concat(n),function(o){const c=o.filter(g=>g instanceof ry).length,d=o.filter(g=>g instanceof k0).length;if(c>1||c>0&&d>0)throw new ge(ee.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const o of r)t=o._apply(t);return t}class k0 extends P0{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new k0(e,n,r)}_apply(e){const n=this._parse(e);return wN(e._query,n),new ci(e.firestore,e.converter,RD(e._query,n))}_parse(e){const n=Ff(e.firestore);return function(o,c,d,g,v,D,T){let A;if(v.isKeyField()){if("array-contains"===D||"array-contains-any"===D)throw new ge(ee.INVALID_ARGUMENT,`Invalid Query. You can't perform '${D}' queries on documentId().`);if("in"===D||"not-in"===D){EN(T,D);const U=[];for(const q of T)U.push(IN(g,o,q));A={arrayValue:{values:U}}}else A=IN(g,o,T)}else"in"!==D&&"not-in"!==D&&"array-contains-any"!==D||EN(T,D),A=hN(d,"where",T,"in"===D||"not-in"===D);return Vt.create(v,D,A)}(e._query,0,n,e.firestore._databaseId,this._field,this._op,this._value)}}function yN(t,e,n){const r=e,o=yT("where",t);return k0._create(o,r,n)}class ry extends ax{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new ry(e,n)}_parse(e){const n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return 1===n.length?n[0]:nn.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return 0===n.getFilters().length?e:(function(r,o){let c=r;const d=o.getFlattenedFilters();for(const g of d)wN(c,g),c=RD(c,g)}(e._query,n),new ci(e.firestore,e.converter,RD(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return"and"===this.type?"and":"or"}}class ux extends P0{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new ux(e,n)}_apply(e){const n=function(r,o,c){if(null!==r.startAt)throw new ge(ee.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==r.endAt)throw new ge(ee.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const d=new Tl(o,c);return function(g,v){if(null===fI(g)){const D=_m(g);null!==D&&DN(0,D,v.field)}}(r,d),d}(e._query,this._field,this._direction);return new ci(e.firestore,e.converter,function(r,o){const c=r.explicitOrderBy.concat([o]);return new Es(r.path,r.collectionGroup,c,r.filters.slice(),r.limit,r.limitType,r.startAt,r.endAt)}(e._query,n))}}class _T extends P0{constructor(e,n,r){super(),this.type=e,this._limit=n,this._limitType=r}static _create(e,n,r){return new _T(e,n,r)}_apply(e){return new ci(e.firestore,e.converter,xl(e._query,this._limit,this._limitType))}}function _N(t){return nN("limit",t),_T._create("limit",t,"F")}class vT extends P0{constructor(e,n,r){super(),this.type=e,this._docOrFields=n,this._inclusive=r}static _create(e,n,r){return new vT(e,n,r)}_apply(e){const n=vN(e,this.type,this._docOrFields,this._inclusive);return new ci(e.firestore,e.converter,(o=n,new Es((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,o,r.endAt)));var r,o}}class IT extends P0{constructor(e,n,r){super(),this.type=e,this._docOrFields=n,this._inclusive=r}static _create(e,n,r){return new IT(e,n,r)}_apply(e){const n=vN(e,this.type,this._docOrFields,this._inclusive);return new ci(e.firestore,e.converter,(o=n,new Es((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,r.startAt,o)));var r,o}}function vN(t,e,n,r){if(n[0]=(0,tt.m9)(n[0]),n[0]instanceof R0)return function(o,c,d,g,v){if(!g)throw new ge(ee.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${d}().`);const D=[];for(const T of Cu(o))if(T.field.isKeyField())D.push(bu(c,g.key));else{const A=g.data.field(T.field);if(Jh(A))throw new ge(ee.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+T.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===A){const U=T.field.canonicalString();throw new ge(ee.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${U}' (used as the orderBy) does not exist.`)}D.push(A)}return new Co(D,v)}(t._query,t.firestore._databaseId,e,n[0]._document,r);{const o=Ff(t.firestore);return function(c,d,g,v,D,T){const A=c.explicitOrderBy;if(D.length>A.length)throw new ge(ee.INVALID_ARGUMENT,`Too many arguments provided to ${v}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const U=[];for(let q=0;q<D.length;q++){const he=D[q];if(A[q].field.isKeyField()){if("string"!=typeof he)throw new ge(ee.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${v}(), but got a ${typeof he}`);if(!So(c)&&-1!==he.indexOf("/"))throw new ge(ee.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${v}() must be a plain document ID, but '${he}' contains a slash.`);const Se=c.path.child(Ut.fromString(he));if(!Be.isDocumentKey(Se))throw new ge(ee.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${v}() must result in a valid document path, but '${Se}' is not because it contains an odd number of segments.`);const Ae=new Be(Se);U.push(bu(d,Ae))}else{const Se=hN(g,v,he);U.push(Se)}}return new Co(U,T)}(t._query,t.firestore._databaseId,o,e,n,r)}}function IN(t,e,n){if("string"==typeof(n=(0,tt.m9)(n))){if(""===n)throw new ge(ee.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!So(e)&&-1!==n.indexOf("/"))throw new ge(ee.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(Ut.fromString(n));if(!Be.isDocumentKey(r))throw new ge(ee.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return bu(t,new Be(r))}if(n instanceof Rn)return bu(t,n._key);throw new ge(ee.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${lT(n)}.`)}function EN(t,e){if(!Array.isArray(t)||0===t.length)throw new ge(ee.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function wN(t,e){if(e.isInequality()){const r=_m(t),o=e.field;if(null!==r&&!r.isEqual(o))throw new ge(ee.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${r.toString()}' and '${o.toString()}'`);const c=fI(t);null!==c&&DN(0,o,c)}const n=function(r,o){for(const c of r)for(const d of c.getFlattenedFilters())if(o.indexOf(d.op)>=0)return d.op;return null}(t.filters,function(r){switch(r){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(null!==n)throw new ge(ee.INVALID_ARGUMENT,n===e.op?`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`:`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}function DN(t,e,n){if(!n.isEqual(e))throw new ge(ee.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${e.toString()}' and so you must also use '${e.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${n.toString()}' instead.`)}class cx{convertValue(e,n="none"){switch(Du(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Mn(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Zs(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 10:return this.convertObject(e.mapValue,n);default:throw Ke()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return Qi(e,(o,c)=>{r[o]=this.convertValue(c,n)}),r}convertGeoPoint(e){return new hT(Mn(e.latitude),Mn(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=dm(e);return null==r?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(El(e));default:return null}}convertTimestamp(e){const n=_a(e);return new on(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=Ut.fromString(e);rt(QS(r));const o=new va(r.get(1),r.get(3)),c=new Be(r.popFirst(5));return o.isEqual(n)||Yt(`Document ${c} contains a document reference within a different database (${o.projectId}/${o.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),c}}function ET(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}class MR extends cx{constructor(e){super(),this.firestore=e}convertBytes(e){return new Aa(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Rn(this.firestore,null,n)}}class Bf{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Hu extends R0{constructor(e,n,r,o,c,d){super(e,n,r,o,d),this._firestore=e,this._firestoreImpl=e,this.metadata=c}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new O0(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(yT("DocumentSnapshot.get",e));if(null!==r)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}}class O0 extends Hu{data(e={}){return super.data(e)}}class Zl{constructor(e,n,r,o){this._firestore=e,this._userDataWriter=n,this._snapshot=o,this.metadata=new Bf(o.hasPendingWrites,o.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new O0(this._firestore,this._userDataWriter,r.key,r,new Bf(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new ge(ee.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(r,o){if(r._snapshot.oldDocs.isEmpty()){let c=0;return r._snapshot.docChanges.map(d=>({type:"added",doc:new O0(r._firestore,r._userDataWriter,d.doc.key,d.doc,new Bf(r._snapshot.mutatedKeys.has(d.doc.key),r._snapshot.fromCache),r.query.converter),oldIndex:-1,newIndex:c++}))}{let c=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(d=>o||3!==d.type).map(d=>{const g=new O0(r._firestore,r._userDataWriter,d.doc.key,d.doc,new Bf(r._snapshot.mutatedKeys.has(d.doc.key),r._snapshot.fromCache),r.query.converter);let v=-1,D=-1;return 0!==d.type&&(v=c.indexOf(d.doc.key),c=c.delete(d.doc.key)),1!==d.type&&(c=c.add(d.doc),D=c.indexOf(d.doc.key)),{type:RR(d.type),doc:g,oldIndex:v,newIndex:D}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function RR(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Ke()}}function TN(t,e){return t instanceof Hu&&e instanceof Hu?t._firestore===e._firestore&&t._key.isEqual(e._key)&&(null===t._document?null===e._document:t._document.isEqual(e._document))&&t._converter===e._converter:t instanceof Zl&&e instanceof Zl&&t._firestore===e._firestore&&tx(t.query,e.query)&&t.metadata.isEqual(e.metadata)&&t._snapshot.isEqual(e._snapshot)}class Yl extends cx{constructor(e){super(),this.firestore=e}convertBytes(e){return new Aa(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Rn(this.firestore,null,n)}}function CN(t,e,n){t=Gt(t,Rn);const r=Gt(t.firestore,Pn),o=ET(t.converter,e,n);return iy(r,[pT(Ff(r),"setDoc",t._key,o,null!==t.converter,n).toMutation(t._key,yn.none())])}function SN(t,e,n,...r){t=Gt(t,Rn);const o=Gt(t.firestore,Pn),c=Ff(o);let d;return d="string"==typeof(e=(0,tt.m9)(e))||e instanceof ju?sx(c,"updateDoc",t._key,e,n,r):ix(c,"updateDoc",t._key,e),iy(o,[d.toMutation(t._key,yn.exists(!0))])}function lx(t,...e){var n,r,o;t=(0,tt.m9)(t);let c={includeMetadataChanges:!1},d=0;"object"!=typeof e[d]||nx(e[d])||(c=e[d],d++);const g={includeMetadataChanges:c.includeMetadataChanges};if(nx(e[d])){const A=e[d];e[d]=null===(n=A.next)||void 0===n?void 0:n.bind(A),e[d+1]=null===(r=A.error)||void 0===r?void 0:r.bind(A),e[d+2]=null===(o=A.complete)||void 0===o?void 0:o.bind(A)}let v,D,T;if(t instanceof Rn)D=Gt(t.firestore,Pn),T=Al(t._key.path),v={next:A=>{e[d]&&e[d](dx(D,t,A))},error:e[d+1],complete:e[d+2]};else{const A=Gt(t,ci);D=Gt(A.firestore,Pn),T=A._query;const U=new Yl(D);v={next:q=>{e[d]&&e[d](new Zl(D,U,A,q))},error:e[d+1],complete:e[d+2]},mN(t._query)}return function(A,U,q,he){const Se=new oT(he),Ae=new ey(U,Se,q);return A.asyncQueue.enqueueAndForget((0,z.Z)(function*(){return Qm(yield ny(A),Ae)})),()=>{Se.Dc(),A.asyncQueue.enqueueAndForget((0,z.Z)(function*(){return v0(yield ny(A),Ae)}))}}(or(D),T,g,v)}function iy(t,e){return function(n,r){const o=new An;return n.asyncQueue.enqueueAndForget((0,z.Z)(function*(){return function BM(t,e,n){return nT.apply(this,arguments)}(yield QA(n),r,o)})),o.promise}(or(t),e)}function dx(t,e,n){const r=n.docs.get(e._key),o=new Yl(t);return new Hu(t,o,e._key,r,new Bf(n.hasPendingWrites,n.fromCache),e.converter)}const YR={maxAttempts:5};class AN{constructor(e,n){this._firestore=e,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=Ff(e)}set(e,n,r){this._verifyNotCommitted();const o=Ql(e,this._firestore),c=ET(o.converter,n,r),d=pT(this._dataReader,"WriteBatch.set",o._key,c,null!==o.converter,r);return this._mutations.push(d.toMutation(o._key,yn.none())),this}update(e,n,r,...o){this._verifyNotCommitted();const c=Ql(e,this._firestore);let d;return d="string"==typeof(n=(0,tt.m9)(n))||n instanceof ju?sx(this._dataReader,"WriteBatch.update",c._key,n,r,o):ix(this._dataReader,"WriteBatch.update",c._key,n),this._mutations.push(d.toMutation(c._key,yn.exists(!0))),this}delete(e){this._verifyNotCommitted();const n=Ql(e,this._firestore);return this._mutations=this._mutations.concat(new kl(n._key,yn.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new ge(ee.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function Ql(t,e){if((t=(0,tt.m9)(t)).firestore!==e)throw new ge(ee.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}class QR extends class{constructor(e,n){this._firestore=e,this._transaction=n,this._dataReader=Ff(e)}get(e){const n=Ql(e,this._firestore),r=new MR(this._firestore);return this._transaction.lookup([n._key]).then(o=>{if(!o||1!==o.length)return Ke();const c=o[0];if(c.isFoundDocument())return new R0(this._firestore,r,c.key,c,n.converter);if(c.isNoDocument())return new R0(this._firestore,r,n._key,null,n.converter);throw Ke()})}set(e,n,r){const o=Ql(e,this._firestore),c=ET(o.converter,n,r),d=pT(this._dataReader,"Transaction.set",o._key,c,null!==o.converter,r);return this._transaction.set(o._key,d),this}update(e,n,r,...o){const c=Ql(e,this._firestore);let d;return d="string"==typeof(n=(0,tt.m9)(n))||n instanceof ju?sx(this._dataReader,"Transaction.update",c._key,n,r,o):ix(this._dataReader,"Transaction.update",c._key,n),this._transaction.update(c._key,d),this}delete(e){const n=Ql(e,this._firestore);return this._transaction.delete(n._key),this}}{constructor(e,n){super(e,n),this._firestore=e}get(e){const n=Ql(e,this._firestore),r=new Yl(this._firestore);return super.get(e).then(o=>new Hu(this._firestore,r,n._key,o._document,new Bf(!1,!1),n.converter))}}function hx(t,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new ge("invalid-argument",`Invalid options passed to function ${t}(): You cannot specify both "merge" and "mergeFields".`);return e}function MN(){if(typeof Uint8Array>"u")throw new ge("unimplemented","Uint8Arrays are not available in this environment.")}function NN(){if(!function Qh(){return typeof atob<"u"}())throw new ge("unimplemented","Blobs are unavailable in Firestore in this environment.")}!function(t,e=!0){vu=Ct.SDK_VERSION,(0,Ct._registerComponent)(new Vr.wA("firestore",(n,{instanceIdentifier:r,options:o})=>{const c=n.getProvider("app").getImmediate(),d=new Pn(new mS(n.getProvider("auth-internal")),new yS(n.getProvider("app-check-internal")),function(g,v){if(!Object.prototype.hasOwnProperty.apply(g.options,["projectId"]))throw new ge(ee.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new va(g.options.projectId,v)}(c,r),c);return o=Object.assign({useFetchStreams:e},o),d._setSettings(o),d},"PUBLIC").setMultipleInstances(!0)),(0,Ct.registerVersion)(hS,"3.13.0",t),(0,Ct.registerVersion)(hS,"3.13.0","esm2017")}();class L0{constructor(e){this._delegate=e}static fromBase64String(e){return NN(),new L0(Aa.fromBase64String(e))}static fromUint8Array(e){return MN(),new L0(Aa.fromUint8Array(e))}toBase64(){return NN(),this._delegate.toBase64()}toUint8Array(){return MN(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function fx(t){return function oP(t,e){if("object"!=typeof t||null===t)return!1;const n=t;for(const r of e)if(r in n&&"function"==typeof n[r])return!0;return!1}(t,["next","error","complete"])}class aP{enableIndexedDbPersistence(e,n){return function aR(t,e){uN(t=Gt(t,Pn));const n=or(t);if(n._uninitializedComponentsProvider)throw new ge(ee.FAILED_PRECONDITION,"SDK cache is already specified.");Ln("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const r=t._freezeSettings(),o=new ty;return aN(n,o,new zA(o,r.cacheSizeBytes,e?.forceOwnership))}(e._delegate,{forceOwnership:n})}enableMultiTabIndexedDbPersistence(e){return function uR(t){uN(t=Gt(t,Pn));const e=or(t);if(e._uninitializedComponentsProvider)throw new ge(ee.FAILED_PRECONDITION,"SDK cache is already specified.");Ln("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const n=t._freezeSettings(),r=new ty;return aN(e,r,new HM(r,n.cacheSizeBytes))}(e._delegate)}clearIndexedDbPersistence(e){return function cR(t){if(t._initialized&&!t._terminated)throw new ge(ee.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new An;return t._queue.enqueueAndForgetEvenWhileRestricted((0,z.Z)(function*(){try{yield(n=(0,z.Z)(function*(r){if(!vs.D())return Promise.resolve();const o=r+"main";yield vs.delete(o)}),function(r){return n.apply(this,arguments)})(YI(t._databaseId,t._persistenceKey)),e.resolve()}catch(n){e.reject(n)}var n})),e.promise}(e._delegate)}}class RN{constructor(e,n,r){this._delegate=n,this._persistenceProvider=r,this.INTERNAL={delete:()=>this.terminate()},e instanceof va||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const n=this._delegate._getSettings();!e.merge&&n.host!==e.host&&Ln("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},n),e)).merge,this._delegate._setSettings(e)}useEmulator(e,n,r={}){iN(this._delegate,e,n,r)}enableNetwork(){return function dR(t){return function K1(t){return t.asyncQueue.enqueue((0,z.Z)(function*(){const e=yield WM(t),n=yield qM(t);return e.setNetworkEnabled(!0),function(r){const o=$e(r);return o.vu.delete(0),Af(o)}(n)}))}(or(t=Gt(t,Pn)))}(this._delegate)}disableNetwork(){return function hR(t){return function Z1(t){return t.asyncQueue.enqueue((0,z.Z)(function*(){const e=yield WM(t),n=yield qM(t);return e.setNetworkEnabled(!1),(r=(0,z.Z)(function*(o){const c=$e(o);c.vu.add(0),yield Hl(c),c.bu.set("Offline")}),function(o){return r.apply(this,arguments)})(n);var r}))}(or(t=Gt(t,Pn)))}(this._delegate)}enablePersistence(e){let n=!1,r=!1;return e&&(n=!!e.synchronizeTabs,r=!!e.experimentalForceOwningTab,XM("synchronizeTabs",n,"experimentalForceOwningTab",r)),n?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,r)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function lR(t){return function(e){const n=new An;return e.asyncQueue.enqueueAndForget((0,z.Z)(function*(){return function i(t,e){return s.apply(this,arguments)}(yield QA(e),n)})),n.promise}(or(t=Gt(t,Pn)))}(this._delegate)}onSnapshotsInSync(e){return function jR(t,e){return function J1(t,e){const n=new oT(e);return t.asyncQueue.enqueueAndForget((0,z.Z)(function*(){return r=yield ny(t),o=n,$e(r).ku.add(o),void o.next();var r,o})),()=>{n.Dc(),t.asyncQueue.enqueueAndForget((0,z.Z)(function*(){return r=yield ny(t),o=n,void $e(r).ku.delete(o);var r,o}))}}(or(t=Gt(t,Pn)),nx(e)?e:{next:e})}(this._delegate,e)}get app(){if(!this._appCompat)throw new ge("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new sy(this,ex(this._delegate,e))}catch(n){throw Bi(n,"collection()","Firestore.collection()")}}doc(e){try{return new no(this,dT(this._delegate,e))}catch(n){throw Bi(n,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new Ui(this,function nR(t,e){if(t=Gt(t,A0),XA("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new ge(ee.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new ci(t,null,(n=e,new Es(Ut.emptyPath(),n)));var n}(this._delegate,e))}catch(n){throw Bi(n,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function JR(t,e,n){t=Gt(t,Pn);const r=Object.assign(Object.assign({},YR),n);return function(o){if(o.maxAttempts<1)throw new ge(ee.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(o,c,d){const g=new An;return o.asyncQueue.enqueueAndForget((0,z.Z)(function*(){const v=yield function KM(t){return uT(t).then(e=>e.datastore)}(o);new W1(o.asyncQueue,v,d,c,g).run()})),g.promise}(or(t),o=>e(new QR(t,o)),r)}(this._delegate,n=>e(new PN(this,n)))}batch(){return or(this._delegate),new kN(new AN(this._delegate,e=>iy(this._delegate,e)))}loadBundle(e){return function fR(t,e){const n=or(t=Gt(t,Pn)),r=new iR;return function X1(t,e,n,r){const o=function(c,d){let g;return g="string"==typeof c?EI().encode(c):c,v=function(v,D){if(v instanceof Uint8Array)return zM(v,D);if(v instanceof ArrayBuffer)return zM(new Uint8Array(v),D);if(v instanceof ReadableStream)return v.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(g),new z1(v,d);var v}(n,Sf(e));t.asyncQueue.enqueueAndForget((0,z.Z)(function*(){!function $1(t,e,n){const r=$e(t);var o;(o=(0,z.Z)(function*(c,d,g){try{const v=yield d.getMetadata();if(yield function(U,q){const he=$e(U),Se=Nn(q.createTime);return he.persistence.runTransaction("hasNewerBundle","readonly",Ae=>he.qs.getBundleMetadata(Ae,q.id)).then(Ae=>!!Ae&&Ae.createTime.compareTo(Se)>=0)}(c.localStore,v))return yield d.close(),g._completeWith({taskState:"Success",documentsLoaded:(U=v).totalDocuments,bytesLoaded:U.totalBytes,totalDocuments:U.totalDocuments,totalBytes:U.totalBytes}),Promise.resolve(new Set);g._updateProgress(Jb(v));const D=new kA(v,c.localStore,d.serializer);let T=yield d.bc();for(;T;){const U=yield D.zu(T);U&&g._updateProgress(U),T=yield d.bc()}const A=yield D.complete();return yield b(c,A.Ju,void 0),yield function(U,q){const he=$e(U);return he.persistence.runTransaction("Save bundle","readwrite",Se=>he.qs.saveBundleMetadata(Se,q))}(c.localStore,v),g._completeWith(A.progress),Promise.resolve(A.Hu)}catch(v){return Ln("SyncEngine",`Loading bundle failed with ${v}`),g._failWith(v),Promise.resolve(new Set)}var U}),function(c,d,g){return o.apply(this,arguments)})(r,e,n).then(o=>{r.sharedClientState.notifyBundleLoaded(o)})}(yield QA(t),o,r)}))}(n,t._databaseId,e,r),r}(this._delegate,e)}namedQuery(e){return function pR(t,e){return function eR(t,e){return t.asyncQueue.enqueue((0,z.Z)(function*(){return function(n,r){const o=$e(n);return o.persistence.runTransaction("Get named query","readonly",c=>o.qs.getNamedQuery(c,r))}(yield cT(t),e)}))}(or(t=Gt(t,Pn)),e).then(n=>n?new ci(t,null,n.query):null)}(this._delegate,e).then(n=>n?new Ui(this,n):null)}}class wT extends cx{constructor(e){super(),this.firestore=e}convertBytes(e){return new L0(new Aa(e))}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return no.forKey(n,this.firestore,null)}}class PN{constructor(e,n){this._firestore=e,this._delegate=n,this._userDataWriter=new wT(e)}get(e){const n=jf(e);return this._delegate.get(n).then(r=>new F0(this._firestore,new Hu(this._firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,n.converter)))}set(e,n,r){const o=jf(e);return r?(hx("Transaction.set",r),this._delegate.set(o,n,r)):this._delegate.set(o,n),this}update(e,n,r,...o){const c=jf(e);return 2===arguments.length?this._delegate.update(c,n):this._delegate.update(c,n,r,...o),this}delete(e){const n=jf(e);return this._delegate.delete(n),this}}class kN{constructor(e){this._delegate=e}set(e,n,r){const o=jf(e);return r?(hx("WriteBatch.set",r),this._delegate.set(o,n,r)):this._delegate.set(o,n),this}update(e,n,r,...o){const c=jf(e);return 2===arguments.length?this._delegate.update(c,n):this._delegate.update(c,n,r,...o),this}delete(e){const n=jf(e);return this._delegate.delete(n),this}commit(){return this._delegate.commit()}}class Uf{constructor(e,n,r){this._firestore=e,this._userDataWriter=n,this._delegate=r}fromFirestore(e,n){const r=new O0(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new V0(this._firestore,r),n??{})}toFirestore(e,n){return n?this._delegate.toFirestore(e,n):this._delegate.toFirestore(e)}static getInstance(e,n){const r=Uf.INSTANCES;let o=r.get(e);o||(o=new WeakMap,r.set(e,o));let c=o.get(n);return c||(c=new Uf(e,new wT(e),n),o.set(n,c)),c}}Uf.INSTANCES=new WeakMap;class no{constructor(e,n){this.firestore=e,this._delegate=n,this._userDataWriter=new wT(e)}static forPath(e,n,r){if(e.length%2!=0)throw new ge("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new no(n,new Rn(n._delegate,r,new Be(e)))}static forKey(e,n,r){return new no(n,new Rn(n._delegate,r,e))}get id(){return this._delegate.id}get parent(){return new sy(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new sy(this.firestore,ex(this._delegate,e))}catch(n){throw Bi(n,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=(0,tt.m9)(e))instanceof Rn&&sN(this._delegate,e)}set(e,n){n=hx("DocumentReference.set",n);try{return n?CN(this._delegate,e,n):CN(this._delegate,e)}catch(r){throw Bi(r,"setDoc()","DocumentReference.set()")}}update(e,n,...r){try{return 1===arguments.length?SN(this._delegate,e):SN(this._delegate,e,n,...r)}catch(o){throw Bi(o,"updateDoc()","DocumentReference.update()")}}delete(){return function BR(t){return iy(Gt(t.firestore,Pn),[new kl(t._key,yn.none())])}(this._delegate)}onSnapshot(...e){const n=ON(e),r=LN(e,o=>new F0(this.firestore,new Hu(this.firestore._delegate,this._userDataWriter,o._key,o._document,o.metadata,this._delegate.converter)));return lx(this._delegate,n,r)}get(e){let n;return n="cache"===e?.source?function kR(t){t=Gt(t,Rn);const e=Gt(t.firestore,Pn),n=or(e),r=new Yl(e);return function Y1(t,e){const n=new An;return t.asyncQueue.enqueueAndForget((0,z.Z)(function*(){return(r=(0,z.Z)(function*(o,c,d){try{const g=yield function(v,D){const T=$e(v);return T.persistence.runTransaction("read document","readonly",A=>T.localDocuments.getDocument(A,D))}(o,c);g.isFoundDocument()?d.resolve(g):g.isNoDocument()?d.resolve(null):d.reject(new ge(ee.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(g){const v=kf(g,`Failed to get document '${c} from cache`);d.reject(v)}}),function(o,c,d){return r.apply(this,arguments)})(yield cT(t),e,n);var r})),n.promise}(n,t._key).then(o=>new Hu(e,r,t._key,o,new Bf(null!==o&&o.hasLocalMutations,!0),t.converter))}(this._delegate):"server"===e?.source?function OR(t){t=Gt(t,Rn);const e=Gt(t.firestore,Pn);return ZM(or(e),t._key,{source:"server"}).then(n=>dx(e,t,n))}(this._delegate):function PR(t){t=Gt(t,Rn);const e=Gt(t.firestore,Pn);return ZM(or(e),t._key).then(n=>dx(e,t,n))}(this._delegate),n.then(r=>new F0(this.firestore,new Hu(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)))}withConverter(e){return new no(this.firestore,this._delegate.withConverter(e?Uf.getInstance(this.firestore,e):null))}}function Bi(t,e,n){return t.message=t.message.replace(e,n),t}function ON(t){for(const e of t)if("object"==typeof e&&!fx(e))return e;return{}}function LN(t,e){var n,r;let o;return o=fx(t[0])?t[0]:fx(t[1])?t[1]:"function"==typeof t[0]?{next:t[0],error:t[1],complete:t[2]}:{next:t[1],error:t[2],complete:t[3]},{next:c=>{o.next&&o.next(e(c))},error:null===(n=o.error)||void 0===n?void 0:n.bind(o),complete:null===(r=o.complete)||void 0===r?void 0:r.bind(o)}}class F0{constructor(e,n){this._firestore=e,this._delegate=n}get ref(){return new no(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,n){return this._delegate.get(e,n)}isEqual(e){return TN(this._delegate,e._delegate)}}class V0 extends F0{data(e){const n=this._delegate.data(e);return function pS(t,e){t||Ke()}(void 0!==n),n}}class Ui{constructor(e,n){this.firestore=e,this._delegate=n,this._userDataWriter=new wT(e)}where(e,n,r){try{return new Ui(this.firestore,$u(this._delegate,yN(e,n,r)))}catch(o){throw Bi(o,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,n){try{return new Ui(this.firestore,$u(this._delegate,function bR(t,e="asc"){const n=e,r=yT("orderBy",t);return ux._create(r,n)}(e,n)))}catch(r){throw Bi(r,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new Ui(this.firestore,$u(this._delegate,_N(e)))}catch(n){throw Bi(n,"limit()","Query.limit()")}}limitToLast(e){try{return new Ui(this.firestore,$u(this._delegate,function TR(t){return nN("limitToLast",t),_T._create("limitToLast",t,"L")}(e)))}catch(n){throw Bi(n,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new Ui(this.firestore,$u(this._delegate,function CR(...t){return vT._create("startAt",t,!0)}(...e)))}catch(n){throw Bi(n,"startAt()","Query.startAt()")}}startAfter(...e){try{return new Ui(this.firestore,$u(this._delegate,function SR(...t){return vT._create("startAfter",t,!1)}(...e)))}catch(n){throw Bi(n,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new Ui(this.firestore,$u(this._delegate,function AR(...t){return IT._create("endBefore",t,!1)}(...e)))}catch(n){throw Bi(n,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new Ui(this.firestore,$u(this._delegate,function xR(...t){return IT._create("endAt",t,!0)}(...e)))}catch(n){throw Bi(n,"endAt()","Query.endAt()")}}isEqual(e){return tx(this._delegate,e._delegate)}get(e){let n;return n="cache"===e?.source?function FR(t){t=Gt(t,ci);const e=Gt(t.firestore,Pn),n=or(e),r=new Yl(e);return function Q1(t,e){const n=new An;return t.asyncQueue.enqueueAndForget((0,z.Z)(function*(){return(r=(0,z.Z)(function*(o,c,d){try{const g=yield jl(o,c,!0),v=new OA(c,g.ir),D=v.sc(g.documents),T=v.applyChanges(D,!1);d.resolve(T.snapshot)}catch(g){const v=kf(g,`Failed to execute query '${c} against cache`);d.reject(v)}}),function(o,c,d){return r.apply(this,arguments)})(yield cT(t),e,n);var r})),n.promise}(n,t._query).then(o=>new Zl(e,r,t,o))}(this._delegate):"server"===e?.source?function VR(t){t=Gt(t,ci);const e=Gt(t.firestore,Pn),n=or(e),r=new Yl(e);return YM(n,t._query,{source:"server"}).then(o=>new Zl(e,r,t,o))}(this._delegate):function LR(t){t=Gt(t,ci);const e=Gt(t.firestore,Pn),n=or(e),r=new Yl(e);return mN(t._query),YM(n,t._query).then(o=>new Zl(e,r,t,o))}(this._delegate),n.then(r=>new px(this.firestore,new Zl(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)))}onSnapshot(...e){const n=ON(e),r=LN(e,o=>new px(this.firestore,new Zl(this.firestore._delegate,this._userDataWriter,this._delegate,o._snapshot)));return lx(this._delegate,n,r)}withConverter(e){return new Ui(this.firestore,this._delegate.withConverter(e?Uf.getInstance(this.firestore,e):null))}}class cP{constructor(e,n){this._firestore=e,this._delegate=n}get type(){return this._delegate.type}get doc(){return new V0(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class px{constructor(e,n){this._firestore=e,this._delegate=n}get query(){return new Ui(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new V0(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(n=>new cP(this._firestore,n))}forEach(e,n){this._delegate.forEach(r=>{e.call(n,new V0(this._firestore,r))})}isEqual(e){return TN(this._delegate,e._delegate)}}class sy extends Ui{constructor(e,n){super(e,n),this.firestore=e,this._delegate=n}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new no(this.firestore,e):null}doc(e){try{return new no(this.firestore,void 0===e?dT(this._delegate):dT(this._delegate,e))}catch(n){throw Bi(n,"doc()","CollectionReference.doc()")}}add(e){return function UR(t,e){const n=Gt(t.firestore,Pn),r=dT(t),o=ET(t.converter,e);return iy(n,[pT(Ff(t.firestore),"addDoc",r._key,o,null!==t.converter,{}).toMutation(r._key,yn.exists(!1))]).then(()=>r)}(this._delegate,e).then(n=>new no(this.firestore,n))}isEqual(e){return sN(this._delegate,e._delegate)}withConverter(e){return new sy(this.firestore,this._delegate.withConverter(e?Uf.getInstance(this.firestore,e):null))}}function jf(t){return Gt(t,Rn)}class gx{constructor(...e){this._delegate=new ju(...e)}static documentId(){return new gx(xn.keyField().canonicalString())}isEqual(e){return(e=(0,tt.m9)(e))instanceof ju&&this._delegate._internalPath.isEqual(e._internalPath)}}class $f{constructor(e){this._delegate=e}static serverTimestamp(){const e=function eP(){return new rx("serverTimestamp")}();return e._methodName="FieldValue.serverTimestamp",new $f(e)}static delete(){const e=function XR(){return new M0("deleteField")}();return e._methodName="FieldValue.delete",new $f(e)}static arrayUnion(...e){const n=function tP(...t){return new vR("arrayUnion",t)}(...e);return n._methodName="FieldValue.arrayUnion",new $f(n)}static arrayRemove(...e){const n=function nP(...t){return new IR("arrayRemove",t)}(...e);return n._methodName="FieldValue.arrayRemove",new $f(n)}static increment(e){const n=function rP(t){return new ER("increment",t)}(e);return n._methodName="FieldValue.increment",new $f(n)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const lP={Firestore:RN,GeoPoint:hT,Timestamp:on,Blob:L0,Transaction:PN,WriteBatch:kN,DocumentReference:no,DocumentSnapshot:F0,Query:Ui,QueryDocumentSnapshot:V0,QuerySnapshot:px,CollectionReference:sy,FieldPath:gx,FieldValue:$f,setLogLevel:function uP(t){!function fS(t){Mr.setLogLevel(t)}(t)},CACHE_SIZE_UNLIMITED:-1};!function hP(t){(function dP(t,e){t.INTERNAL.registerComponent(new Vr.wA("firestore-compat",n=>{const r=n.getProvider("app-compat").getImmediate(),o=n.getProvider("firestore").getImmediate();return e(r,o)},"PUBLIC").setServiceProps(Object.assign({},lP)))})(t,(e,n)=>new RN(e,n,new aP)),t.registerVersion("@firebase/firestore-compat","0.3.12")}(vg.Z);var FN=O(8645),fP=O(3019),Jl=O(4664);class pP extends FN.x{constructor(e=1/0,n=1/0,r=Md){super(),this._bufferSize=e,this._windowTime=n,this._timestampProvider=r,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=n===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,n)}next(e){const{isStopped:n,_buffer:r,_infiniteTimeWindow:o,_timestampProvider:c,_windowTime:d}=this;n||(r.push(e),!o&&r.push(c.now()+d)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();const n=this._innerSubscribe(e),{_infiniteTimeWindow:r,_buffer:o}=this,c=o.slice();for(let d=0;d<c.length&&!e.closed;d+=r?1:2)e.next(c[d]);return this._checkFinalizedStatuses(e),n}_trimBuffer(){const{_bufferSize:e,_timestampProvider:n,_buffer:r,_infiniteTimeWindow:o}=this,c=(o?1:2)*e;if(e<1/0&&c<r.length&&r.splice(0,r.length-c),!o){const d=n.now();let g=0;for(let v=1;v<r.length&&r[v]<=d;v+=2)g=v;g&&r.splice(0,g+1)}}}var gP=O(3020);function VN(t,e,n){let r,o=!1;return t&&"object"==typeof t?({bufferSize:r=1/0,windowTime:e=1/0,refCount:o=!1,scheduler:n}=t):r=t??1/0,(0,gP.B)({connector:()=>new pP(r,e,n),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:o})}const BN=(0,O(2306).d)(t=>function(){t(this),this.name="EmptyError",this.message="no elements in sequence"});var yP=O(6232);function IP(t=EP){return(0,oa.e)((e,n)=>{let r=!1;e.subscribe((0,au.x)(n,o=>{r=!0,n.next(o)},()=>r?n.complete():n.error(t())))})}function EP(){return new BN}function UN(t,e){return(0,Q_.m)(e)?(0,Jl.w)(()=>t,e):(0,Jl.w)(()=>t)}class oy{constructor(e){return e}}class mx{constructor(){return(0,Ct.getApps)()}}const yx=new E.OlP("angularfire2._apps"),bP={provide:oy,useFactory:function DP(t){return t&&1===t.length?t[0]:new oy((0,Ct.getApp)())},deps:[[new E.FiY,yx]]},TP={provide:mx,deps:[[new E.FiY,yx]]};function CP(t){return(e,n)=>{const r=e.runOutsideAngular(()=>t(n));return new oy(r)}}let SP=(()=>{class t{constructor(n){(0,Ct.registerVersion)("angularfire",pg.full,"core"),(0,Ct.registerVersion)("angularfire",pg.full,"app"),(0,Ct.registerVersion)("angular",E.q4F.full,n.toString())}}return t.\u0275fac=function(n){return new(n||t)(E.LFG(E.Lbi))},t.\u0275mod=E.oAB({type:t}),t.\u0275inj=E.cJS({providers:[bP,TP]}),t})();function jN(t,...e){return{ngModule:SP,providers:[{provide:yx,useFactory:CP(t),multi:!0,deps:[E.R0b,E.zs3,Zc,...e]}]}}const AP=qi(Ct.initializeApp,!0),_x=new Map,$N={activated:!1,tokenObservers:[]},xP={initialized:!1,enabled:!1};function Zn(t){return _x.get(t)||Object.assign({},$N)}function DT(){return xP}const vx="https://content-firebaseappcheck.googleapis.com/v1",PP="exchangeDebugToken",HN={OFFSET_DURATION:3e5,RETRIAL_MIN_WAIT:3e4,RETRIAL_MAX_WAIT:96e4};class OP{constructor(e,n,r,o,c){if(this.operation=e,this.retryPolicy=n,this.getWaitDuration=r,this.lowerBound=o,this.upperBound=c,this.pending=null,this.nextErrorWaitInterval=o,o>c)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){var n=this;return(0,z.Z)(function*(){n.stop();try{n.pending=new tt.BH,yield function LP(t){return new Promise(e=>{setTimeout(e,t)})}(n.getNextRun(e)),n.pending.resolve(),yield n.pending.promise,n.pending=new tt.BH,yield n.operation(),n.pending.resolve(),yield n.pending.promise,n.process(!0).catch(()=>{})}catch(r){n.retryPolicy(r)?n.process(!1).catch(()=>{}):n.stop()}})()}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const n=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),n}}}const li=new tt.LL("appCheck","AppCheck",{"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"});function Ix(t){if(!Zn(t).activated)throw li.create("use-before-activation",{appName:t.name})}function CT(t,e){return wx.apply(this,arguments)}function wx(){return wx=(0,z.Z)(function*({url:t,body:e},n){const r={"Content-Type":"application/json"},o=n.getImmediate({optional:!0});if(o){const A=yield o.getHeartbeatsHeader();A&&(r["X-Firebase-Client"]=A)}const c={method:"POST",body:JSON.stringify(e),headers:r};let d,g;try{d=yield fetch(t,c)}catch(A){throw li.create("fetch-network-error",{originalErrorMessage:A?.message})}if(200!==d.status)throw li.create("fetch-status-error",{httpStatus:d.status});try{g=yield d.json()}catch(A){throw li.create("fetch-parse-error",{originalErrorMessage:A?.message})}const v=g.ttl.match(/^([\d.]+)(s)$/);if(!v||!v[2]||isNaN(Number(v[1])))throw li.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${g.ttl}`});const D=1e3*Number(v[1]),T=Date.now();return{token:g.token,expireTimeMillis:T+D,issuedAtTimeMillis:T}}),wx.apply(this,arguments)}function zN(t,e){const{projectId:n,appId:r,apiKey:o}=t.options;return{url:`${vx}/projects/${n}/apps/${r}:${PP}?key=${o}`,body:{debug_token:e}}}const UP="firebase-app-check-database",jP=1,B0="firebase-app-check-store";let ST=null;function Dx(){return Dx=(0,z.Z)(function*(t,e){const r=(yield function WN(){return ST||(ST=new Promise((t,e)=>{try{const n=indexedDB.open(UP,jP);n.onsuccess=r=>{t(r.target.result)},n.onerror=r=>{var o;e(li.create("storage-open",{originalErrorMessage:null===(o=r.target.error)||void 0===o?void 0:o.message}))},n.onupgradeneeded=r=>{0===r.oldVersion&&r.target.result.createObjectStore(B0,{keyPath:"compositeKey"})}}catch(n){e(li.create("storage-open",{originalErrorMessage:n?.message}))}}),ST)}()).transaction(B0,"readwrite"),c=r.objectStore(B0).put({compositeKey:t,value:e});return new Promise((d,g)=>{c.onsuccess=v=>{d()},r.onerror=v=>{var D;g(li.create("storage-set",{originalErrorMessage:null===(D=v.target.error)||void 0===D?void 0:D.message}))}})}),Dx.apply(this,arguments)}const U0=new Jr.Yd("@firebase/app-check");function Cx(t,e){return(0,tt.hl)()?function HP(t,e){return function qN(t,e){return Dx.apply(this,arguments)}(function ZN(t){return`${t.options.appId}-${t.name}`}(t),e)}(t,e).catch(n=>{U0.warn(`Failed to write token to IndexedDB. Error: ${n}`)}):Promise.resolve()}function Ax(){return DT().enabled}function xx(){return Mx.apply(this,arguments)}function Mx(){return Mx=(0,z.Z)(function*(){const t=DT();if(t.enabled&&t.token)return t.token.promise;throw Error("\n            Can't get debug token in production mode.\n        ")}),Mx.apply(this,arguments)}const ZP={error:"UNKNOWN_ERROR"};function YP(t){return tt.US.encodeString(JSON.stringify(t),!1)}function AT(t){return Nx.apply(this,arguments)}function Nx(){return Nx=(0,z.Z)(function*(t,e=!1){const n=t.app;Ix(n);const r=Zn(n);let c,o=r.token;if(o&&!ay(o)&&(r.token=void 0,o=void 0),!o){const v=yield r.cachedTokenPromise;v&&(ay(v)?o=v:yield Cx(n,void 0))}if(!e&&o&&ay(o))return{token:o.token};let g,d=!1;if(Ax()){r.exchangeTokenPromise||(r.exchangeTokenPromise=CT(zN(n,yield xx()),t.heartbeatServiceProvider).finally(()=>{r.exchangeTokenPromise=void 0}),d=!0);const v=yield r.exchangeTokenPromise;return yield Cx(n,v),r.token=v,{token:v.token}}try{r.exchangeTokenPromise||(r.exchangeTokenPromise=r.provider.getToken().finally(()=>{r.exchangeTokenPromise=void 0}),d=!0),o=yield Zn(n).exchangeTokenPromise}catch(v){"appCheck/throttled"===v.code?U0.warn(v.message):U0.error(v),c=v}return o?c?g=ay(o)?{token:o.token,internalError:c}:XN(c):(g={token:o.token},r.token=o,yield Cx(n,o)):g=XN(c),d&&function JN(t,e){const n=Zn(t).tokenObservers;for(const r of n)try{"EXTERNAL"===r.type&&null!=e.error?r.error(e.error):r.next(e)}catch{}}(n,g),g}),Nx.apply(this,arguments)}function Rx(){return Rx=(0,z.Z)(function*(t){const e=t.app;Ix(e);const{provider:n}=Zn(e);if(Ax()){const r=yield xx(),{token:o}=yield CT(zN(e,r),t.heartbeatServiceProvider);return{token:o}}{const{token:r}=yield n.getToken();return{token:r}}}),Rx.apply(this,arguments)}function kx(t,e){const n=Zn(t),r=n.tokenObservers.filter(o=>o.next!==e);0===r.length&&n.tokenRefresher&&n.tokenRefresher.isRunning()&&n.tokenRefresher.stop(),n.tokenObservers=r}function QN(t){const{app:e}=t,n=Zn(e);let r=n.tokenRefresher;r||(r=function QP(t){const{app:e}=t;return new OP((0,z.Z)(function*(){let r;if(r=Zn(e).token?yield AT(t,!0):yield AT(t),r.error)throw r.error;if(r.internalError)throw r.internalError}),()=>!0,()=>{const n=Zn(e);if(n.token){let r=n.token.issuedAtTimeMillis+.5*(n.token.expireTimeMillis-n.token.issuedAtTimeMillis)+3e5;return r=Math.min(r,n.token.expireTimeMillis-3e5),Math.max(0,r-Date.now())}return 0},HN.RETRIAL_MIN_WAIT,HN.RETRIAL_MAX_WAIT)}(t),n.tokenRefresher=r),!r.isRunning()&&n.isTokenAutoRefreshEnabled&&r.start()}function ay(t){return t.expireTimeMillis-Date.now()>0}function XN(t){return{token:YP(ZP),error:t}}class JP{constructor(e,n){this.app=e,this.heartbeatServiceProvider=n}_delete(){const{tokenObservers:e}=Zn(this.app);for(const n of e)kx(this.app,n.next);return Promise.resolve()}}const a1="app-check-internal";!function hk(){(0,Ct._registerComponent)(new Vr.wA("app-check",t=>function XP(t,e){return new JP(t,e)}(t.getProvider("app").getImmediate(),t.getProvider("heartbeat")),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((t,e,n)=>{t.getProvider(a1).initialize()})),(0,Ct._registerComponent)(new Vr.wA(a1,t=>function ek(t){return{getToken:e=>AT(t,e),getLimitedUseToken:()=>function YN(t){return Rx.apply(this,arguments)}(t),addTokenListener:e=>function Px(t,e,n,r){const{app:o}=t,c=Zn(o);if(c.tokenObservers=[...c.tokenObservers,{next:n,error:r,type:e}],c.token&&ay(c.token)){const g=c.token;Promise.resolve().then(()=>{n({token:g.token}),QN(t)}).catch(()=>{})}c.cachedTokenPromise.then(()=>QN(t))}(t,"INTERNAL",e),removeTokenListener:e=>kx(t.app,e)}}(t.getProvider("app-check").getImmediate()),"PUBLIC").setInstantiationMode("EXPLICIT")),(0,Ct.registerVersion)("@firebase/app-check","0.8.0")}();class j0{constructor(){return gs("app-check")}}typeof window<"u"&&window;var yk=O(7142);const c1=new E.OlP("angularfire2.auth.use-emulator"),l1=new E.OlP("angularfire2.auth.settings"),d1=new E.OlP("angularfire2.auth.tenant-id"),h1=new E.OlP("angularfire2.auth.langugage-code"),f1=new E.OlP("angularfire2.auth.use-device-language"),p1=new E.OlP("angularfire.auth.persistence"),g1=(t,e,n,r,o,c,d,g)=>(0,Us.cc)(`${t.name}.auth`,"AngularFireAuth",t.name,()=>{const v=e.runOutsideAngular(()=>t.auth());if(n&&v.useEmulator(...n),r&&(v.tenantId=r),v.languageCode=o,c&&v.useDeviceLanguage(),d)for(const[D,T]of Object.entries(d))v.settings[D]=T;return g&&v.setPersistence(g),v},[n,r,o,c,d,g]);let m1=(()=>{class t{constructor(n,r,o,c,d,g,v,D,T,A,U,q){const he=new FN.x,Se=(0,Ps.of)(void 0).pipe((0,Kc.Q)(d.outsideAngular),(0,Jl.w)(()=>c.runOutsideAngular(()=>Promise.resolve().then(O.bind(O,6365)))),(0,ti.U)(()=>(0,Us.on)(n,c,r)),(0,ti.U)(Ae=>g1(Ae,c,g,D,T,A,v,U)),VN({bufferSize:1,refCount:!1}));if(Zr(o))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=(0,Ps.of)(null);else{Se.pipe(function wP(t,e){const n=arguments.length>=2;return r=>r.pipe(t?fh((o,c)=>t(o,c,r)):J_.y,function _P(t){return t<=0?()=>yP.E:(0,oa.e)((e,n)=>{let r=0;e.subscribe((0,au.x)(n,o=>{++r<=t&&(n.next(o),t<=r&&n.complete())}))})}(1),n?function vP(t){return(0,oa.e)((e,n)=>{let r=!1;e.subscribe((0,au.x)(n,o=>{r=!0,n.next(o)},()=>{r||n.next(t),n.complete()}))})}(e):IP(()=>new BN))}()).subscribe();const Qe=Se.pipe((0,Jl.w)(yt=>yt.getRedirectResult().then(Nt=>Nt,()=>null)),dr,VN({bufferSize:1,refCount:!1})),ot=Se.pipe((0,Jl.w)(yt=>new xi.y(Nt=>({unsubscribe:c.runOutsideAngular(()=>yt.onAuthStateChanged(qt=>Nt.next(qt),qt=>Nt.error(qt),()=>Nt.complete()))})))),ut=Se.pipe((0,Jl.w)(yt=>new xi.y(Nt=>({unsubscribe:c.runOutsideAngular(()=>yt.onIdTokenChanged(qt=>Nt.next(qt),qt=>Nt.error(qt),()=>Nt.complete()))}))));this.authState=Qe.pipe(UN(ot),(0,qc.R)(d.outsideAngular),(0,Kc.Q)(d.insideAngular)),this.user=Qe.pipe(UN(ut),(0,qc.R)(d.outsideAngular),(0,Kc.Q)(d.insideAngular)),this.idToken=this.user.pipe((0,Jl.w)(yt=>yt?(0,Mi.D)(yt.getIdToken()):(0,Ps.of)(null))),this.idTokenResult=this.user.pipe((0,Jl.w)(yt=>yt?(0,Mi.D)(yt.getIdTokenResult()):(0,Ps.of)(null))),this.credential=(0,fP.T)(Qe,he,this.authState.pipe(fh(yt=>!yt))).pipe((0,ti.U)(yt=>yt?.user?yt:null),(0,qc.R)(d.outsideAngular),(0,Kc.Q)(d.insideAngular))}return(0,Us.pX)(this,Se,c,{spy:{apply:(Ae,Qe,ot)=>{(Ae.startsWith("signIn")||Ae.startsWith("createUser"))&&ot.then(ut=>he.next(ut))}}})}}return t.\u0275fac=function(n){return new(n||t)(E.LFG(Us.Dh),E.LFG(Us.xv,8),E.LFG(E.Lbi),E.LFG(E.R0b),E.LFG(Zc),E.LFG(c1,8),E.LFG(l1,8),E.LFG(d1,8),E.LFG(h1,8),E.LFG(f1,8),E.LFG(p1,8),E.LFG(j0,8))},t.\u0275prov=E.Yz7({token:t,factory:t.\u0275fac,providedIn:"any"}),t})();function y1(t,e){return function vk(t,e=Nd){return new xi.y(n=>{let r;return null!=e?e.schedule(()=>{r=t.onSnapshot({includeMetadataChanges:!0},n)}):r=t.onSnapshot({includeMetadataChanges:!0},n),()=>{r?.()}})}(t,e)}function Bx(t,e){return y1(t,e).pipe((0,ti.U)(n=>({payload:n,type:"query"})))}function MT(t,e){return Bx(t,e).pipe(_g(void 0),sw(),(0,ti.U)(([n,r])=>{const o=r.payload.docChanges(),c=o.map(d=>({type:d.type,payload:d}));return n&&JSON.stringify(n.payload.metadata)!==JSON.stringify(r.payload.metadata)&&r.payload.docs.forEach((d,g)=>{const v=o.find(T=>T.doc.ref.isEqual(d.ref)),D=n?.payload.docs.find(T=>T.ref.isEqual(d.ref));v&&JSON.stringify(v.doc.metadata)===JSON.stringify(d.metadata)||!v&&D&&JSON.stringify(D.metadata)===JSON.stringify(d.metadata)||c.push({type:"modified",payload:{oldIndex:g,newIndex:g,type:"modified",doc:d}})}),c}))}function _1(t,e,n){return MT(t,n).pipe(ow((r,o)=>function Ek(t,e,n){return e.forEach(r=>{n.indexOf(r.type)>-1&&(t=function wk(t,e){switch(e.type){case"added":if(!t[e.newIndex]||!t[e.newIndex].doc.ref.isEqual(e.doc.ref))return Ux(t,e.newIndex,0,e);break;case"modified":if(null==t[e.oldIndex]||t[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const n=t.slice();return n.splice(e.oldIndex,1),n.splice(e.newIndex,0,e),n}return Ux(t,e.newIndex,1,e)}break;case"removed":if(t[e.oldIndex]&&t[e.oldIndex].doc.ref.isEqual(e.doc.ref))return Ux(t,e.oldIndex,1)}return t}(t,r))}),t}(r,o.map(c=>c.payload),e),[]),(0,aw.x)(),(0,ti.U)(r=>r.map(o=>({type:o.type,payload:o}))))}function Ux(t,e,n,...r){const o=t.slice();return o.splice(e,n,...r),o}function v1(t){return(!t||0===t.length)&&(t=["added","removed","modified"]),t}class I1{constructor(e,n,r){this.ref=e,this.query=n,this.afs=r}stateChanges(e){let n=MT(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(n=n.pipe((0,ti.U)(r=>r.filter(o=>e.indexOf(o.type)>-1)))),n.pipe(_g(void 0),sw(),fh(([r,o])=>o.length>0||!r),(0,ti.U)(([r,o])=>o),dr)}auditTrail(e){return this.stateChanges(e).pipe(ow((n,r)=>[...n,...r],[]))}snapshotChanges(e){const n=v1(e);return _1(this.query,n,this.afs.schedulers.outsideAngular).pipe(dr)}valueChanges(e={}){return Bx(this.query,this.afs.schedulers.outsideAngular).pipe((0,ti.U)(n=>n.payload.docs.map(r=>e.idField?Object.assign(Object.assign({},r.data()),{[e.idField]:r.id}):r.data())),dr)}get(e){return(0,Mi.D)(this.query.get(e)).pipe(dr)}add(e){return this.ref.add(e)}doc(e){return new E1(this.ref.doc(e),this.afs)}}class E1{constructor(e,n){this.ref=e,this.afs=n}set(e,n){return this.ref.set(e,n)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,n){const r=this.ref.collection(e),{ref:o,query:c}=w1(r,n);return new I1(o,c,this.afs)}snapshotChanges(){return function Ik(t,e){return y1(t,e).pipe(_g(void 0),sw(),(0,ti.U)(([n,r])=>r.exists?n?.exists?{payload:r,type:"modified"}:{payload:r,type:"added"}:{payload:r,type:"removed"}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(dr)}valueChanges(e={}){return this.snapshotChanges().pipe((0,ti.U)(({payload:n})=>e.idField?Object.assign(Object.assign({},n.data()),{[e.idField]:n.id}):n.data()))}get(e){return(0,Mi.D)(this.ref.get(e)).pipe(dr)}}class Dk{constructor(e,n){this.query=e,this.afs=n}stateChanges(e){return e&&0!==e.length?MT(this.query,this.afs.schedulers.outsideAngular).pipe((0,ti.U)(n=>n.filter(r=>e.indexOf(r.type)>-1)),fh(n=>n.length>0),dr):MT(this.query,this.afs.schedulers.outsideAngular).pipe(dr)}auditTrail(e){return this.stateChanges(e).pipe(ow((n,r)=>[...n,...r],[]))}snapshotChanges(e){const n=v1(e);return _1(this.query,n,this.afs.schedulers.outsideAngular).pipe(dr)}valueChanges(e={}){return Bx(this.query,this.afs.schedulers.outsideAngular).pipe((0,ti.U)(r=>r.payload.docs.map(o=>e.idField?Object.assign({[e.idField]:o.id},o.data()):o.data())),dr)}get(e){return(0,Mi.D)(this.query.get(e)).pipe(dr)}}const bk=new E.OlP("angularfire2.enableFirestorePersistence"),Tk=new E.OlP("angularfire2.firestore.persistenceSettings"),Ck=new E.OlP("angularfire2.firestore.settings"),Sk=new E.OlP("angularfire2.firestore.use-emulator");function w1(t,e=(n=>n)){return{query:e(t),ref:t}}let Ak=(()=>{class t{constructor(n,r,o,c,d,g,v,D,T,A,U,q,he,Se,Ae,Qe,ot){this.schedulers=v;const ut=(0,Us.on)(n,g,r),yt=T;A&&g1(ut,g,U,he,Se,Ae,q,Qe),[this.firestore,this.persistenceEnabled$]=(0,Us.cc)(`${ut.name}.firestore`,"AngularFirestore",ut.name,()=>{const Nt=g.runOutsideAngular(()=>ut.firestore());if(c&&Nt.settings(c),yt&&Nt.useEmulator(...yt),o&&!Zr(d)){const qt=()=>{try{return(0,Mi.D)(Nt.enablePersistence(D||void 0).then(()=>!0,()=>!1))}catch(vi){return typeof console<"u"&&console.warn(vi),(0,Ps.of)(!1)}};return[Nt,g.runOutsideAngular(qt)]}return[Nt,(0,Ps.of)(!1)]},[c,yt,o])}collection(n,r){let o;o="string"==typeof n?this.firestore.collection(n):n;const{ref:c,query:d}=w1(o,r),g=this.schedulers.ngZone.run(()=>c);return new I1(g,d,this)}collectionGroup(n,r){const o=r||(d=>d),c=this.firestore.collectionGroup(n);return new Dk(o(c),this)}doc(n){let r;r="string"==typeof n?this.firestore.doc(n):n;const o=this.schedulers.ngZone.run(()=>r);return new E1(o,this)}createId(){return this.firestore.collection("_").doc().id}}return t.\u0275fac=function(n){return new(n||t)(E.LFG(Us.Dh),E.LFG(Us.xv,8),E.LFG(bk,8),E.LFG(Ck,8),E.LFG(E.Lbi),E.LFG(E.R0b),E.LFG(Zc),E.LFG(Tk,8),E.LFG(Sk,8),E.LFG(m1,8),E.LFG(c1,8),E.LFG(l1,8),E.LFG(d1,8),E.LFG(h1,8),E.LFG(f1,8),E.LFG(p1,8),E.LFG(j0,8))},t.\u0275prov=E.Yz7({token:t,factory:t.\u0275fac,providedIn:"any"}),t})(),D1=(()=>{var t;class e{constructor(){this.decimalPipe=(0,E.f3M)(Oe)}transform(r){return isNaN(r)||0===r?" [N/A]":" [+"+this.decimalPipe.transform(r,"1.0","en_US")+"]"}}return(t=e).\u0275fac=function(r){return new(r||t)},t.\u0275pipe=E.Yjl({name:"resourceProductionFormatter",type:t,pure:!0}),e})(),b1=(()=>{var t;class e{constructor(){this.document=(0,E.f3M)(we),this.resourceProductionFormatterPipe=(0,E.f3M)(D1),this.decimalPipe=(0,E.f3M)(Oe),this.dgAPI=(0,E.f3M)(Ns),this.firestore=(0,E.f3M)(Ak)}extractSummaries(){return this.dgAPI.navigationSystemPlanets()}fillScans(r){let o=r.map(c=>c.location.join("."));this.firestore.collection("scans",c=>c.where("location","in",o)).get().subscribe(c=>{let g=Object.assign([],c.docChanges().map(v=>v.doc.data())).reduce((v,D)=>v.set(D.location,D),new Map);this.document.querySelectorAll("div.navigation div.planets").forEach(v=>{let D=v.querySelector("div.coords > span").textContent.trim(),T=g.get(D);if(T){v.querySelector(".dgt-navigation-scan-turn .dgt-navigation-scan-turn-value").textContent=this.decimalPipe.transform(T.turn,"1.0","en_US"),T.resources.forEach(U=>{v.querySelector(".dgt-navigation-scan .dgt-navigation-scan-resource."+U.name+" .abundance").textContent=U.abundance.toString()+"%",v.querySelector(".dgt-navigation-scan .dgt-navigation-scan-resource."+U.name+" .production").textContent=this.resourceProductionFormatterPipe.transform(U.production).trim()});let A=T.structures.map(U=>U.name);if(A.includes(Tn.JUMP_GATE)){let U=document.createElement("span");U.classList.add("dgt-navigation-scan-jg"),U.textContent="JG",v.querySelector(".coords").append(U)}if(A.includes(Tn.HYPERSPACE_BEACON)){let U=document.createElement("span");U.classList.add("dgt-navigation-scan-hb"),U.textContent="HB",v.querySelector(".coords").append(U)}if(T.workers.currentNumber>0||T.soldiers>0){v.querySelector(".dgt-navigation-scan-population .dgt-navigation-scan-workers-value").textContent=this.decimalPipe.transform(T.workers.currentNumber,"1.0","en_US"),v.querySelector(".dgt-navigation-scan-population .dgt-navigation-scan-soldiers-value").textContent=this.decimalPipe.transform(T.soldiers,"1.0","en_US");let U=T.workers.currentNumber/15+T.soldiers/2*3+1;v.querySelector(".dgt-navigation-scan-invasion-value").textContent=this.decimalPipe.transform(Math.ceil(U),"1.0","en_US"),v.querySelector(".dgt-navigation-scan-population").style.display="",v.querySelector(".dgt-navigation-scan-invasion-data").style.display=""}}else v.querySelector(".dgt-navigation-scan-turn .dgt-navigation-scan-turn-value").textContent="N/A",v.querySelector(".dgt-navigation-scan .dgt-navigation-scan-resource.metal .abundance").textContent="-",v.querySelector(".dgt-navigation-scan .dgt-navigation-scan-resource.mineral .abundance").textContent="-",v.querySelector(".dgt-navigation-scan .dgt-navigation-scan-resource.food .abundance").textContent="-",v.querySelector(".dgt-navigation-scan .dgt-navigation-scan-resource.energy .abundance").textContent="-"})})}}return(t=e).\u0275fac=function(r){return new(r||t)},t.\u0275prov=E.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),e})();var $0=O(6878);function xk(t){return new xi.y(function(e){return{unsubscribe:(0,$0.x)(t,e.next.bind(e),e.error.bind(e),e.complete.bind(e))}})}class NT{constructor(e){return e}}class C1{constructor(){return gs("auth")}}const jx=new E.OlP("angularfire2.auth-instances");function Rk(t){return(e,n)=>{const r=e.runOutsideAngular(()=>t(n));return new NT(r)}}const Pk={provide:C1,deps:[[new E.FiY,jx]]},kk={provide:NT,useFactory:function Nk(t,e){const n=aa("auth",t,e);return n&&new NT(n)},deps:[[new E.FiY,jx],oy]};let Ok=(()=>{class t{constructor(){(0,Ct.registerVersion)("angularfire",pg.full,"auth")}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275mod=E.oAB({type:t}),t.\u0275inj=E.cJS({providers:[kk,Pk]}),t})();function S1(t,...e){return{ngModule:Ok,providers:[{provide:jx,useFactory:Rk(t),multi:!0,deps:[E.R0b,E.zs3,Zc,mx,[new E.FiY,j0],...e]}]}}const Lk=qi(xk,!0),A1=qi($0.o,!0),Fk=qi($0.a9,!0),Vk=qi($0.c,!0);var Bk={includeMetadataChanges:!1};function Wk(t,e){return void 0===e&&(e={}),function Gk(t){return function $x(t,e){return void 0===e&&(e=Bk),new xi.y(function(n){return{unsubscribe:lx(t,e,{next:n.next.bind(n),error:n.error.bind(n),complete:n.complete.bind(n)})}})}(t,{includeMetadataChanges:!0}).pipe((0,ti.U)(function(e){return e.docs}))}(t).pipe((0,ti.U)(function(n){return n.map(function(r){return function x1(t,e){void 0===e&&(e={});var n=t.data();return!t.exists()||"object"!=typeof n||null===n||e.idField&&(n[e.idField]=t.id),n}(r,e)})}))}class RT{constructor(e){return e}}const P1="firestore",Gx=new E.OlP("angularfire2.firestore-instances");function Zk(t){return(e,n)=>{const r=e.runOutsideAngular(()=>t(n));return new RT(r)}}const Yk={provide:class qk{constructor(){return gs(P1)}},deps:[[new E.FiY,Gx]]},Qk={provide:RT,useFactory:function Kk(t,e){const n=aa(P1,t,e);return n&&new RT(n)},deps:[[new E.FiY,Gx],oy]};let Jk=(()=>{class t{constructor(){(0,Ct.registerVersion)("angularfire",pg.full,"fst")}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275mod=E.oAB({type:t}),t.\u0275inj=E.cJS({providers:[Qk,Yk]}),t})();function k1(t,...e){return{ngModule:Jk,providers:[{provide:Gx,useFactory:Zk(t),multi:!0,deps:[E.R0b,E.zs3,Zc,mx,[new E.FiY,C1],[new E.FiY,j0],...e]}]}}const Xk=qi(Wk,!0),eO=qi(ex,!0),O1=qi(oR,!0),tO=qi(_N,!0),nO=qi($u,!0),rO=qi(yN,!0);let L1=(()=>{var t;class e{constructor(){this._loggedStatus=new E.vpe,this.id=Math.random()}ngOnDestroy(){null!=this.authSubscription&&this.authSubscription.unsubscribe()}setUpFirebaseAuthSubscription(r,o){null!=this.authSubscription&&this.authSubscription.unsubscribe(),this.authSubscription=Lk(r).subscribe(c=>{if(null!=c){const d=eO(o,"valid-users");Xk(nO(d,rO("email","==",c.email),tO(1))).subscribe(g=>{1==g.length&&(Object.assign({email:"",enabled:!1},g.map(D=>D)[0]).enabled?(localStorage.setItem("user",JSON.stringify(c)),this._loggedStatus.emit(!0)):this.signOut(r,!1).catch(D=>{console.log(D.message)}))})}else localStorage.removeItem("user"),this._loggedStatus.emit(!1)})}signInWithEmailAndPassword(r,o,c){Fk(r,o,c).catch(d=>{window.alert(d.message)})}signInWithGoogle(r){Vk(r,new $0.V).catch(o=>{window.alert(o.message)})}signOut(r,o){var c=this;return(0,z.Z)(function*(){yield r.signOut(),localStorage.removeItem("user"),c._loggedStatus.emit(!1),o&&location.reload()})()}get loggedStatus(){return this._loggedStatus}}return(t=e).\u0275fac=function(r){return new(r||t)},t.\u0275prov=E.Yz7({token:t,factory:t.\u0275fac,providedIn:"platform"}),e})();function iO(t,e){1&t&&(E.TgZ(0,"p",1),E._uU(1,"Shared scans are active! All scanned planets will display their summaries directly into navigation screen!"),E.qZA())}let sO=(()=>{var t;class e{constructor(){this.scansService=(0,E.f3M)(b1),this.authService=(0,E.f3M)(L1),this.active=!1,console.log("authService in scan - "+this.authService.id)}ngOnInit(){this.authService.loggedStatus.subscribe(r=>{if(r){let o=this.scansService.extractSummaries();o.length>0&&this.scansService.fillScans(o),this.active=!0}else this.active=!1})}ngOnDestroy(){this.authService.loggedStatus.unsubscribe()}}return(t=e).\u0275fac=function(r){return new(r||t)},t.\u0275cmp=E.Xpm({type:t,selectors:[["dgt-navigation-scan-data-panel"]],decls:1,vars:1,consts:[["style","padding-left: 10px; color: rgb(255, 220, 45);",4,"ngIf"],[2,"padding-left","10px","color","rgb(255, 220, 45)"]],template:function(r,o){1&r&&E.YNc(0,iO,2,0,"p",0),2&r&&E.Q6J("ngIf",o.active)},dependencies:[Wu]}),e})();const Wx={firebase:{apiKey:"AIzaSyDifSxPXVI7ZnorkGi-OZT9cEtq64jbTIw",authDomain:"dg-tools-fd936.firebaseapp.com",projectId:"dg-tools-fd936",storageBucket:"dg-tools-fd936.appspot.com",messagingSenderId:"740995977873",appId:"1:740995977873:web:756583aeec86bc76c3a530",measurementId:"G-DBBD8N8LCR",appCheck:{recaptchaSiteKey:"6Le5AyQoAAAAAEqVW9cQF-nT73cKe3Zp9N8mxTsO"}},production:!0};var oO=yk.Z.initializeApp;let aO=(()=>{var t;class e{constructor(){}}return(t=e).\u0275fac=function(r){return new(r||t)},t.\u0275mod=E.oAB({type:t,bootstrap:[sO]}),t.\u0275inj=E.cJS({providers:[{provide:Us.Dh,useValue:Wx.firebase},Oe,D1,b1,Ns],imports:[Ua,jN(()=>oO(Wx.firebase)),S1(()=>A1()),k1(()=>O1())]}),e})();function uO(t,e){if(1&t){const n=E.EpF();E.TgZ(0,"div",2)(1,"span"),E._uU(2,"DarkGalaxy Tools Login"),E.qZA(),E._UZ(3,"input",3,4)(5,"input",5,6),E.TgZ(7,"button",7),E.NdJ("click",function(){E.CHM(n);const o=E.MAs(4),c=E.MAs(6),d=E.oxw();return E.KtG(d.signInWithEmailAndPassword(o.value,c.value))}),E._uU(8,"Login"),E.qZA(),E.TgZ(9,"button",7),E.NdJ("click",function(){E.CHM(n);const o=E.oxw();return E.KtG(o.signInWithGoogle())}),E._uU(10,"Login with Google"),E.qZA()()}}function cO(t,e){if(1&t){const n=E.EpF();E.TgZ(0,"div",8)(1,"button",7),E.NdJ("click",function(){E.CHM(n);const o=E.oxw();return E.KtG(o.signOut(!0))}),E._uU(2,"Logout"),E.qZA()()}}let lO=(()=>{var t;class e{constructor(){this.authService=(0,E.f3M)(L1),this.auth=(0,E.f3M)(NT),this.firestore=(0,E.f3M)(RT),this.localStorage=localStorage,this.authService.setUpFirebaseAuthSubscription(this.auth,this.firestore),console.log("authService in login - "+this.authService.id)}signInWithEmailAndPassword(r,o){this.authService.signInWithEmailAndPassword(this.auth,r,o)}signInWithGoogle(){this.authService.signInWithGoogle(this.auth)}signOut(r){var o=this;return(0,z.Z)(function*(){return o.authService.signOut(o.auth,r)})()}}return(t=e).\u0275fac=function(r){return new(r||t)},t.\u0275cmp=E.Xpm({type:t,selectors:[["dgt-authentication"]],decls:2,vars:2,consts:[["class","login","id","dgt-login",4,"ngIf"],["class","logout","id","dgt-logout",4,"ngIf"],["id","dgt-login",1,"login"],["type","text","placeholder","email","required",""],["userName",""],["type","password","placeholder","password","required",""],["userPassword",""],[3,"click"],["id","dgt-logout",1,"logout"]],template:function(r,o){1&r&&(E.YNc(0,uO,11,0,"div",0),E.YNc(1,cO,3,0,"div",1)),2&r&&(E.Q6J("ngIf",null==o.localStorage.getItem("user")),E.xp6(1),E.Q6J("ngIf",null!=o.localStorage.getItem("user")))},dependencies:[Wu],styles:[".logout[_ngcontent-%COMP%], .login[_ngcontent-%COMP%]{overflow:hidden;background-color:#4b4b4b99;padding:10px;position:relative}.login[_ngcontent-%COMP%] > input[_ngcontent-%COMP%]{display:block;border-radius:3px;font-size:14px;background:#fff;width:50%;border:0;padding:5px 5px 5px 10px;margin:5px 0}.logout[_ngcontent-%COMP%] > button[_ngcontent-%COMP%], .login[_ngcontent-%COMP%] > button[_ngcontent-%COMP%]{cursor:pointer;color:#fff;font-size:16px;width:80px;border:0;padding:5px 0;margin-top:5px;margin-right:10px;border-radius:3px;background-color:#f45b69;transition:background-color .3s}.logout[_ngcontent-%COMP%] > button[_ngcontent-%COMP%]:hover, .login[_ngcontent-%COMP%] > button[_ngcontent-%COMP%]:hover{background-color:#f24353}a[_ngcontent-%COMP%]{text-decoration:none;color:#fff9;position:absolute;right:10px;bottom:10px;font-size:12px}"]}),e})(),dO=(()=>{var t;class e{constructor(){}}return(t=e).\u0275fac=function(r){return new(r||t)},t.\u0275mod=E.oAB({type:t,bootstrap:[lO]}),t.\u0275inj=E.cJS({imports:[Ua,jN(()=>AP(Wx.firebase)),S1(()=>A1()),k1(()=>O1())]}),e})();const F1=pp();let H0=window.location.pathname.split(/\//g);F1.bootstrapModule(dO).catch(t=>console.error(t)),"navigation"===H0[1]&&6===H0.length&&!isNaN(+H0[2])&&!isNaN(+H0[3])&&!isNaN(+H0[4])&&F1.bootstrapModule(aO).catch(t=>console.error(t))},3018:(ct,Te,O)=>{O.d(Te,{y:()=>V});var E=O(1887),F=O(7394),k=O(4850),oe=O(2737);var Re=O(2653),Fe=O(4674),xe=O(1441);let V=(()=>{class De{constructor(ue){ue&&(this._subscribe=ue)}lift(ue){const Ee=new De;return Ee.source=this,Ee.operator=ue,Ee}subscribe(ue,Ee,Pe){const We=function Ve(De){return De&&De instanceof E.Lv||function re(De){return De&&(0,Fe.m)(De.next)&&(0,Fe.m)(De.error)&&(0,Fe.m)(De.complete)}(De)&&(0,F.Nn)(De)}(ue)?ue:new E.Hp(ue,Ee,Pe);return(0,xe.x)(()=>{const{operator:Ye,source:K}=this;We.add(Ye?Ye.call(We,K):K?this._subscribe(We):this._trySubscribe(We))}),We}_trySubscribe(ue){try{return this._subscribe(ue)}catch(Ee){ue.error(Ee)}}forEach(ue,Ee){return new(Ee=j(Ee))((Pe,We)=>{const Ye=new E.Hp({next:K=>{try{ue(K)}catch(ce){We(ce),Ye.unsubscribe()}},error:We,complete:Pe});this.subscribe(Ye)})}_subscribe(ue){var Ee;return null===(Ee=this.source)||void 0===Ee?void 0:Ee.subscribe(ue)}[k.L](){return this}pipe(...ue){return function we(De){return 0===De.length?oe.y:1===De.length?De[0]:function(ue){return De.reduce((Ee,Pe)=>Pe(Ee),ue)}}(ue)(this)}toPromise(ue){return new(ue=j(ue))((Ee,Pe)=>{let We;this.subscribe(Ye=>We=Ye,Ye=>Pe(Ye),()=>Ee(We))})}}return De.create=st=>new De(st),De})();function j(De){var st;return null!==(st=De??Re.config.Promise)&&void 0!==st?st:Promise}},8645:(ct,Te,O)=>{O.d(Te,{x:()=>Re});var E=O(3018),F=O(7394);const oe=(0,O(2306).d)(xe=>function(){xe(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var me=O(9039),we=O(1441);let Re=(()=>{class xe extends E.y{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(j){const re=new Fe(this,this);return re.operator=j,re}_throwIfClosed(){if(this.closed)throw new oe}next(j){(0,we.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const re of this.currentObservers)re.next(j)}})}error(j){(0,we.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=j;const{observers:re}=this;for(;re.length;)re.shift().error(j)}})}complete(){(0,we.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:j}=this;for(;j.length;)j.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var j;return(null===(j=this.observers)||void 0===j?void 0:j.length)>0}_trySubscribe(j){return this._throwIfClosed(),super._trySubscribe(j)}_subscribe(j){return this._throwIfClosed(),this._checkFinalizedStatuses(j),this._innerSubscribe(j)}_innerSubscribe(j){const{hasError:re,isStopped:Ve,observers:De}=this;return re||Ve?F.Lc:(this.currentObservers=null,De.push(j),new F.w0(()=>{this.currentObservers=null,(0,me.P)(De,j)}))}_checkFinalizedStatuses(j){const{hasError:re,thrownError:Ve,isStopped:De}=this;re?j.error(Ve):De&&j.complete()}asObservable(){const j=new E.y;return j.source=this,j}}return xe.create=(V,j)=>new Fe(V,j),xe})();class Fe extends Re{constructor(V,j){super(),this.destination=V,this.source=j}next(V){var j,re;null===(re=null===(j=this.destination)||void 0===j?void 0:j.next)||void 0===re||re.call(j,V)}error(V){var j,re;null===(re=null===(j=this.destination)||void 0===j?void 0:j.error)||void 0===re||re.call(j,V)}complete(){var V,j;null===(j=null===(V=this.destination)||void 0===V?void 0:V.complete)||void 0===j||j.call(V)}_subscribe(V){var j,re;return null!==(re=null===(j=this.source)||void 0===j?void 0:j.subscribe(V))&&void 0!==re?re:F.Lc}}},1887:(ct,Te,O)=>{O.d(Te,{Hp:()=>ue,Lv:()=>re});var E=O(4674),F=O(7394),k=O(2653),oe=O(3894);function me(){}const we=xe("C",void 0,void 0);function xe(K,ce,J){return{kind:K,value:ce,error:J}}var V=O(7599),j=O(1441);class re extends F.w0{constructor(ce){super(),this.isStopped=!1,ce?(this.destination=ce,(0,F.Nn)(ce)&&ce.add(this)):this.destination=Ye}static create(ce,J,pe){return new ue(ce,J,pe)}next(ce){this.isStopped?We(function Fe(K){return xe("N",K,void 0)}(ce),this):this._next(ce)}error(ce){this.isStopped?We(function Re(K){return xe("E",void 0,K)}(ce),this):(this.isStopped=!0,this._error(ce))}complete(){this.isStopped?We(we,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(ce){this.destination.next(ce)}_error(ce){try{this.destination.error(ce)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const Ve=Function.prototype.bind;function De(K,ce){return Ve.call(K,ce)}class st{constructor(ce){this.partialObserver=ce}next(ce){const{partialObserver:J}=this;if(J.next)try{J.next(ce)}catch(pe){Ee(pe)}}error(ce){const{partialObserver:J}=this;if(J.error)try{J.error(ce)}catch(pe){Ee(pe)}else Ee(ce)}complete(){const{partialObserver:ce}=this;if(ce.complete)try{ce.complete()}catch(J){Ee(J)}}}class ue extends re{constructor(ce,J,pe){let Me;if(super(),(0,E.m)(ce)||!ce)Me={next:ce??void 0,error:J??void 0,complete:pe??void 0};else{let Z;this&&k.config.useDeprecatedNextContext?(Z=Object.create(ce),Z.unsubscribe=()=>this.unsubscribe(),Me={next:ce.next&&De(ce.next,Z),error:ce.error&&De(ce.error,Z),complete:ce.complete&&De(ce.complete,Z)}):Me=ce}this.destination=new st(Me)}}function Ee(K){k.config.useDeprecatedSynchronousErrorHandling?(0,j.O)(K):(0,oe.h)(K)}function We(K,ce){const{onStoppedNotification:J}=k.config;J&&V.z.setTimeout(()=>J(K,ce))}const Ye={closed:!0,next:me,error:function Pe(K){throw K},complete:me}},7394:(ct,Te,O)=>{O.d(Te,{Lc:()=>we,w0:()=>me,Nn:()=>Re});var E=O(4674);const k=(0,O(2306).d)(xe=>function(j){xe(this),this.message=j?`${j.length} errors occurred during unsubscription:\n${j.map((re,Ve)=>`${Ve+1}) ${re.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=j});var oe=O(9039);class me{constructor(V){this.initialTeardown=V,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let V;if(!this.closed){this.closed=!0;const{_parentage:j}=this;if(j)if(this._parentage=null,Array.isArray(j))for(const De of j)De.remove(this);else j.remove(this);const{initialTeardown:re}=this;if((0,E.m)(re))try{re()}catch(De){V=De instanceof k?De.errors:[De]}const{_finalizers:Ve}=this;if(Ve){this._finalizers=null;for(const De of Ve)try{Fe(De)}catch(st){V=V??[],st instanceof k?V=[...V,...st.errors]:V.push(st)}}if(V)throw new k(V)}}add(V){var j;if(V&&V!==this)if(this.closed)Fe(V);else{if(V instanceof me){if(V.closed||V._hasParent(this))return;V._addParent(this)}(this._finalizers=null!==(j=this._finalizers)&&void 0!==j?j:[]).push(V)}}_hasParent(V){const{_parentage:j}=this;return j===V||Array.isArray(j)&&j.includes(V)}_addParent(V){const{_parentage:j}=this;this._parentage=Array.isArray(j)?(j.push(V),j):j?[j,V]:V}_removeParent(V){const{_parentage:j}=this;j===V?this._parentage=null:Array.isArray(j)&&(0,oe.P)(j,V)}remove(V){const{_finalizers:j}=this;j&&(0,oe.P)(j,V),V instanceof me&&V._removeParent(this)}}me.EMPTY=(()=>{const xe=new me;return xe.closed=!0,xe})();const we=me.EMPTY;function Re(xe){return xe instanceof me||xe&&"closed"in xe&&(0,E.m)(xe.remove)&&(0,E.m)(xe.add)&&(0,E.m)(xe.unsubscribe)}function Fe(xe){(0,E.m)(xe)?xe():xe.unsubscribe()}},2653:(ct,Te,O)=>{O.d(Te,{config:()=>E});const E={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}},6232:(ct,Te,O)=>{O.d(Te,{E:()=>F});const F=new(O(3018).y)(me=>me.complete())},2459:(ct,Te,O)=>{O.d(Te,{D:()=>ce});var E=O(4829),F=O(3093),k=O(5137),we=O(3018),Fe=O(4971),xe=O(4674),V=O(7103);function re(J,pe){if(!J)throw new Error("Iterable cannot be null");return new we.y(Me=>{(0,V.f)(Me,pe,()=>{const Z=J[Symbol.asyncIterator]();(0,V.f)(Me,pe,()=>{Z.next().then(Je=>{Je.done?Me.complete():Me.next(Je.value)})},0,!0)})})}var Ve=O(8382),De=O(4026),st=O(4266),ue=O(3664),Ee=O(5726),Pe=O(9853),We=O(541);function ce(J,pe){return pe?function K(J,pe){if(null!=J){if((0,Ve.c)(J))return function oe(J,pe){return(0,E.Xf)(J).pipe((0,k.R)(pe),(0,F.Q)(pe))}(J,pe);if((0,st.z)(J))return function Re(J,pe){return new we.y(Me=>{let Z=0;return pe.schedule(function(){Z===J.length?Me.complete():(Me.next(J[Z++]),Me.closed||this.schedule())})})}(J,pe);if((0,De.t)(J))return function me(J,pe){return(0,E.Xf)(J).pipe((0,k.R)(pe),(0,F.Q)(pe))}(J,pe);if((0,Ee.D)(J))return re(J,pe);if((0,ue.T)(J))return function j(J,pe){return new we.y(Me=>{let Z;return(0,V.f)(Me,pe,()=>{Z=J[Fe.h](),(0,V.f)(Me,pe,()=>{let Je,Xe;try{({value:Je,done:Xe}=Z.next())}catch(Rt){return void Me.error(Rt)}Xe?Me.complete():Me.next(Je)},0,!0)}),()=>(0,xe.m)(Z?.return)&&Z.return()})}(J,pe);if((0,We.L)(J))return function Ye(J,pe){return re((0,We.Q)(J),pe)}(J,pe)}throw(0,Pe.z)(J)}(J,pe):(0,E.Xf)(J)}},4829:(ct,Te,O)=>{O.d(Te,{Xf:()=>Ve});var E=O(7582),F=O(4266),k=O(4026),oe=O(3018),me=O(8382),we=O(5726),Re=O(9853),Fe=O(3664),xe=O(541),V=O(4674),j=O(3894),re=O(4850);function Ve(K){if(K instanceof oe.y)return K;if(null!=K){if((0,me.c)(K))return function De(K){return new oe.y(ce=>{const J=K[re.L]();if((0,V.m)(J.subscribe))return J.subscribe(ce);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(K);if((0,F.z)(K))return function st(K){return new oe.y(ce=>{for(let J=0;J<K.length&&!ce.closed;J++)ce.next(K[J]);ce.complete()})}(K);if((0,k.t)(K))return function ue(K){return new oe.y(ce=>{K.then(J=>{ce.closed||(ce.next(J),ce.complete())},J=>ce.error(J)).then(null,j.h)})}(K);if((0,we.D)(K))return Pe(K);if((0,Fe.T)(K))return function Ee(K){return new oe.y(ce=>{for(const J of K)if(ce.next(J),ce.closed)return;ce.complete()})}(K);if((0,xe.L)(K))return function We(K){return Pe((0,xe.Q)(K))}(K)}throw(0,Re.z)(K)}function Pe(K){return new oe.y(ce=>{(function Ye(K,ce){var J,pe,Me,Z;return(0,E.mG)(this,void 0,void 0,function*(){try{for(J=(0,E.KL)(K);!(pe=yield J.next()).done;)if(ce.next(pe.value),ce.closed)return}catch(Je){Me={error:Je}}finally{try{pe&&!pe.done&&(Z=J.return)&&(yield Z.call(J))}finally{if(Me)throw Me.error}}ce.complete()})})(K,ce).catch(J=>ce.error(J))})}},3019:(ct,Te,O)=>{O.d(Te,{T:()=>we});var E=O(2372),F=O(4829),k=O(6232),oe=O(4564),me=O(2459);function we(...Re){const Fe=(0,oe.yG)(Re),xe=(0,oe._6)(Re,1/0),V=Re;return V.length?1===V.length?(0,F.Xf)(V[0]):(0,E.J)(xe)((0,me.D)(V,Fe)):k.E}},2096:(ct,Te,O)=>{O.d(Te,{of:()=>k});var E=O(4564),F=O(2459);function k(...oe){const me=(0,E.yG)(oe);return(0,F.D)(oe,me)}},8251:(ct,Te,O)=>{O.d(Te,{x:()=>F});var E=O(1887);function F(oe,me,we,Re,Fe){return new k(oe,me,we,Re,Fe)}class k extends E.Lv{constructor(me,we,Re,Fe,xe,V){super(me),this.onFinalize=xe,this.shouldUnsubscribe=V,this._next=we?function(j){try{we(j)}catch(re){me.error(re)}}:super._next,this._error=Fe?function(j){try{Fe(j)}catch(re){me.error(re)}finally{this.unsubscribe()}}:super._error,this._complete=Re?function(){try{Re()}catch(j){me.error(j)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var me;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:we}=this;super.unsubscribe(),!we&&(null===(me=this.onFinalize)||void 0===me||me.call(this))}}}},3997:(ct,Te,O)=>{O.d(Te,{x:()=>oe});var E=O(2737),F=O(9360),k=O(8251);function oe(we,Re=E.y){return we=we??me,(0,F.e)((Fe,xe)=>{let V,j=!0;Fe.subscribe((0,k.x)(xe,re=>{const Ve=Re(re);(j||!we(V,Ve))&&(j=!1,V=Ve,xe.next(re))}))})}function me(we,Re){return we===Re}},7398:(ct,Te,O)=>{O.d(Te,{U:()=>k});var E=O(9360),F=O(8251);function k(oe,me){return(0,E.e)((we,Re)=>{let Fe=0;we.subscribe((0,F.x)(Re,xe=>{Re.next(oe.call(me,xe,Fe++))}))})}},2372:(ct,Te,O)=>{O.d(Te,{J:()=>V});var E=O(7398),F=O(4829),k=O(9360),oe=O(7103),me=O(8251),Re=O(4674);function Fe(j,re,Ve=1/0){return(0,Re.m)(re)?Fe((De,st)=>(0,E.U)((ue,Ee)=>re(De,ue,st,Ee))((0,F.Xf)(j(De,st))),Ve):("number"==typeof re&&(Ve=re),(0,k.e)((De,st)=>function we(j,re,Ve,De,st,ue,Ee,Pe){const We=[];let Ye=0,K=0,ce=!1;const J=()=>{ce&&!We.length&&!Ye&&re.complete()},pe=Z=>Ye<De?Me(Z):We.push(Z),Me=Z=>{ue&&re.next(Z),Ye++;let Je=!1;(0,F.Xf)(Ve(Z,K++)).subscribe((0,me.x)(re,Xe=>{st?.(Xe),ue?pe(Xe):re.next(Xe)},()=>{Je=!0},void 0,()=>{if(Je)try{for(Ye--;We.length&&Ye<De;){const Xe=We.shift();Ee?(0,oe.f)(re,Ee,()=>Me(Xe)):Me(Xe)}J()}catch(Xe){re.error(Xe)}}))};return j.subscribe((0,me.x)(re,pe,()=>{ce=!0,J()})),()=>{Pe?.()}}(De,st,j,Ve)))}var xe=O(2737);function V(j=1/0){return Fe(xe.y,j)}},3093:(ct,Te,O)=>{O.d(Te,{Q:()=>oe});var E=O(7103),F=O(9360),k=O(8251);function oe(me,we=0){return(0,F.e)((Re,Fe)=>{Re.subscribe((0,k.x)(Fe,xe=>(0,E.f)(Fe,me,()=>Fe.next(xe),we),()=>(0,E.f)(Fe,me,()=>Fe.complete(),we),xe=>(0,E.f)(Fe,me,()=>Fe.error(xe),we)))})}},3020:(ct,Te,O)=>{O.d(Te,{B:()=>me});var E=O(4829),F=O(8645),k=O(1887),oe=O(9360);function me(Re={}){const{connector:Fe=(()=>new F.x),resetOnError:xe=!0,resetOnComplete:V=!0,resetOnRefCountZero:j=!0}=Re;return re=>{let Ve,De,st,ue=0,Ee=!1,Pe=!1;const We=()=>{De?.unsubscribe(),De=void 0},Ye=()=>{We(),Ve=st=void 0,Ee=Pe=!1},K=()=>{const ce=Ve;Ye(),ce?.unsubscribe()};return(0,oe.e)((ce,J)=>{ue++,!Pe&&!Ee&&We();const pe=st=st??Fe();J.add(()=>{ue--,0===ue&&!Pe&&!Ee&&(De=we(K,j))}),pe.subscribe(J),!Ve&&ue>0&&(Ve=new k.Hp({next:Me=>pe.next(Me),error:Me=>{Pe=!0,We(),De=we(Ye,xe,Me),pe.error(Me)},complete:()=>{Ee=!0,We(),De=we(Ye,V),pe.complete()}}),(0,E.Xf)(ce).subscribe(Ve))})(re)}}function we(Re,Fe,...xe){if(!0===Fe)return void Re();if(!1===Fe)return;const V=new k.Hp({next:()=>{V.unsubscribe(),Re()}});return(0,E.Xf)(Fe(...xe)).subscribe(V)}},5137:(ct,Te,O)=>{O.d(Te,{R:()=>F});var E=O(9360);function F(k,oe=0){return(0,E.e)((me,we)=>{we.add(k.schedule(()=>me.subscribe(we),oe))})}},4664:(ct,Te,O)=>{O.d(Te,{w:()=>oe});var E=O(4829),F=O(9360),k=O(8251);function oe(me,we){return(0,F.e)((Re,Fe)=>{let xe=null,V=0,j=!1;const re=()=>j&&!xe&&Fe.complete();Re.subscribe((0,k.x)(Fe,Ve=>{xe?.unsubscribe();let De=0;const st=V++;(0,E.Xf)(me(Ve,st)).subscribe(xe=(0,k.x)(Fe,ue=>Fe.next(we?we(Ve,ue,st,De++):ue),()=>{xe=null,re()}))},()=>{j=!0,re()}))})}},7599:(ct,Te,O)=>{O.d(Te,{z:()=>E});const E={setTimeout(F,k,...oe){const{delegate:me}=E;return me?.setTimeout?me.setTimeout(F,k,...oe):setTimeout(F,k,...oe)},clearTimeout(F){const{delegate:k}=E;return(k?.clearTimeout||clearTimeout)(F)},delegate:void 0}},4971:(ct,Te,O)=>{O.d(Te,{h:()=>F});const F=function E(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}()},4850:(ct,Te,O)=>{O.d(Te,{L:()=>E});const E="function"==typeof Symbol&&Symbol.observable||"@@observable"},4564:(ct,Te,O)=>{O.d(Te,{_6:()=>we,yG:()=>me});var E=O(4674);function k(Re){return Re[Re.length-1]}function me(Re){return function F(Re){return Re&&(0,E.m)(Re.schedule)}(k(Re))?Re.pop():void 0}function we(Re,Fe){return"number"==typeof k(Re)?Re.pop():Fe}},9039:(ct,Te,O)=>{function E(F,k){if(F){const oe=F.indexOf(k);0<=oe&&F.splice(oe,1)}}O.d(Te,{P:()=>E})},2306:(ct,Te,O)=>{function E(F){const oe=F(me=>{Error.call(me),me.stack=(new Error).stack});return oe.prototype=Object.create(Error.prototype),oe.prototype.constructor=oe,oe}O.d(Te,{d:()=>E})},1441:(ct,Te,O)=>{O.d(Te,{O:()=>oe,x:()=>k});var E=O(2653);let F=null;function k(me){if(E.config.useDeprecatedSynchronousErrorHandling){const we=!F;if(we&&(F={errorThrown:!1,error:null}),me(),we){const{errorThrown:Re,error:Fe}=F;if(F=null,Re)throw Fe}}else me()}function oe(me){E.config.useDeprecatedSynchronousErrorHandling&&F&&(F.errorThrown=!0,F.error=me)}},7103:(ct,Te,O)=>{function E(F,k,oe,me=0,we=!1){const Re=k.schedule(function(){oe(),we?F.add(this.schedule(null,me)):this.unsubscribe()},me);if(F.add(Re),!we)return Re}O.d(Te,{f:()=>E})},2737:(ct,Te,O)=>{function E(F){return F}O.d(Te,{y:()=>E})},4266:(ct,Te,O)=>{O.d(Te,{z:()=>E});const E=F=>F&&"number"==typeof F.length&&"function"!=typeof F},5726:(ct,Te,O)=>{O.d(Te,{D:()=>F});var E=O(4674);function F(k){return Symbol.asyncIterator&&(0,E.m)(k?.[Symbol.asyncIterator])}},4674:(ct,Te,O)=>{function E(F){return"function"==typeof F}O.d(Te,{m:()=>E})},8382:(ct,Te,O)=>{O.d(Te,{c:()=>k});var E=O(4850),F=O(4674);function k(oe){return(0,F.m)(oe[E.L])}},3664:(ct,Te,O)=>{O.d(Te,{T:()=>k});var E=O(4971),F=O(4674);function k(oe){return(0,F.m)(oe?.[E.h])}},4026:(ct,Te,O)=>{O.d(Te,{t:()=>F});var E=O(4674);function F(k){return(0,E.m)(k?.then)}},541:(ct,Te,O)=>{O.d(Te,{L:()=>oe,Q:()=>k});var E=O(7582),F=O(4674);function k(me){return(0,E.FC)(this,arguments,function*(){const Re=me.getReader();try{for(;;){const{value:Fe,done:xe}=yield(0,E.qq)(Re.read());if(xe)return yield(0,E.qq)(void 0);yield yield(0,E.qq)(Fe)}}finally{Re.releaseLock()}})}function oe(me){return(0,F.m)(me?.getReader)}},9360:(ct,Te,O)=>{O.d(Te,{e:()=>k});var E=O(4674);function k(oe){return me=>{if(function F(oe){return(0,E.m)(oe?.lift)}(me))return me.lift(function(we){try{return oe(we,this)}catch(Re){this.error(Re)}});throw new TypeError("Unable to lift unknown Observable type")}}},3894:(ct,Te,O)=>{O.d(Te,{h:()=>k});var E=O(2653),F=O(7599);function k(oe){F.z.setTimeout(()=>{const{onUnhandledError:me}=E.config;if(!me)throw oe;me(oe)})}},9853:(ct,Te,O)=>{function E(F){return new TypeError(`You provided ${null!==F&&"object"==typeof F?"an invalid object":`'${F}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}O.d(Te,{z:()=>E})},7989:(ct,Te,O)=>{O.d(Te,{AFp:()=>BE,hGG:()=>Zb,Ojb:()=>j_,sBO:()=>Af,EJc:()=>oA,SBq:()=>fg,qLn:()=>dr,vpe:()=>ws,OlP:()=>Wt,zs3:()=>Pi,ZZ4:()=>Zm,aQg:()=>Pf,soG:()=>to,h0i:()=>So,R0b:()=>sr,FiY:()=>ea,Lbi:()=>U_,g9A:()=>ag,Qsj:()=>hM,FYo:()=>WE,JOm:()=>Fp,Rgc:()=>cf,dDg:()=>Ul,eoX:()=>Bu,q4F:()=>YE,GfV:()=>ZE,s_b:()=>Mu,ifc:()=>Ie,Lck:()=>ii,eFA:()=>Hm,f3M:()=>ze,X6Q:()=>SA,_c5:()=>ql,rg0:()=>K0,zSh:()=>L_,wAp:()=>_l,vHH:()=>K,lri:()=>XI,rWj:()=>Ab,cg1:()=>yl,kL8:()=>lD,dqk:()=>At,QGY:()=>pu,F4k:()=>Pv,RDi:()=>nu,AaK:()=>re,TTD:()=>op,xp6:()=>Et,Xpm:()=>qu,lG2:()=>Yu,Yz7:()=>Dt,cJS:()=>_n,oAB:()=>od,Yjl:()=>Qu,Y36:()=>js,_UZ:()=>Wg,qZA:()=>Oi,TgZ:()=>Bh,EpF:()=>Rv,LFG:()=>ke,$8M:()=>Ko,NdJ:()=>Zg,oxw:()=>Fv,Q6J:()=>Hg,MAs:()=>xv,KtG:()=>dc,CHM:()=>fp,YNc:()=>Uw,_uU:()=>eD});var E=O(8645),F=O(7394);class k extends E.x{constructor(s){super(),this._value=s}get value(){return this.getValue()}_subscribe(s){const a=super._subscribe(s);return!a.closed&&s.next(this._value),a}getValue(){const{hasError:s,thrownError:a,_value:u}=this;if(s)throw a;return this._throwIfClosed(),u}next(s){super.next(this._value=s)}}var oe=O(3018),me=O(3019),we=O(2096),Re=O(3020),Fe=O(4664),xe=O(3997);function V(i){for(let s in i)if(i[s]===V)return s;throw Error("Could not find renamed property on target object.")}function re(i){if("string"==typeof i)return i;if(Array.isArray(i))return"["+i.map(re).join(", ")+"]";if(null==i)return""+i;if(i.overriddenName)return`${i.overriddenName}`;if(i.name)return`${i.name}`;const s=i.toString();if(null==s)return""+s;const a=s.indexOf("\n");return-1===a?s:s.substring(0,a)}function Ve(i,s){return null==i||""===i?null===s?"":s:null==s||""===s?i:i+" "+s}const De=V({__forward_ref__:V});function st(i){return i.__forward_ref__=st,i.toString=function(){return re(this())},i}function ue(i){return function Ee(i){return"function"==typeof i&&i.hasOwnProperty(De)&&i.__forward_ref__===st}(i)?i():i}function Pe(i){return i&&!!i.\u0275providers}class K extends Error{constructor(s,a){super(function ce(i,s){return`NG0${Math.abs(i)}${s?": "+s:""}`}(s,a)),this.code=s}}function pe(i){return"function"==typeof i?i.name||i.toString():"object"==typeof i&&null!=i&&"function"==typeof i.type?i.type.name||i.type.toString():function J(i){return"string"==typeof i?i:null==i?"":String(i)}(i)}function Xe(i,s){throw new K(-201,!1)}function Ze(i,s){null==i&&function Le(i,s,a,u){throw new Error(`ASSERTION ERROR: ${i}`+(null==u?"":` [Expected=> ${a} ${u} ${s} <=Actual]`))}(s,i,null,"!=")}function Dt(i){return{token:i.token,providedIn:i.providedIn||null,factory:i.factory,value:void 0}}function _n(i){return{providers:i.providers||[],imports:i.imports||[]}}function vn(i){return kn(i,mr)||kn(i,yr)}function kn(i,s){return i.hasOwnProperty(s)?i[s]:null}function zr(i){return i&&(i.hasOwnProperty(In)||i.hasOwnProperty(ji))?i[In]:null}const mr=V({\u0275prov:V}),In=V({\u0275inj:V}),yr=V({ngInjectableDef:V}),ji=V({ngInjectorDef:V});var at=function(i){return i[i.Default=0]="Default",i[i.Host=1]="Host",i[i.Self=2]="Self",i[i.SkipSelf=4]="SkipSelf",i[i.Optional=8]="Optional",i}(at||{});let _t;function $t(i){const s=_t;return _t=i,s}function _r(i,s,a){const u=vn(i);return u&&"root"==u.providedIn?void 0===u.value?u.value=u.factory():u.value:a&at.Optional?null:void 0!==s?s:void Xe(re(i))}const At=globalThis,hn={},es="__NG_DI_FLAG__",Wr="ngTempTokenPath",B=/\n/gm,N="__source";let R;function G(i){const s=R;return R=i,s}function de(i,s=at.Default){if(void 0===R)throw new K(-203,!1);return null===R?_r(i,void 0,s):R.get(i,s&at.Optional?null:void 0,s)}function ke(i,s=at.Default){return(function mt(){return _t}()||de)(ue(i),s)}function ze(i,s=at.Default){return ke(i,Ft(s))}function Ft(i){return typeof i>"u"||"number"==typeof i?i:0|(i.optional&&8)|(i.host&&1)|(i.self&&2)|(i.skipSelf&&4)}function ft(i){const s=[];for(let a=0;a<i.length;a++){const u=ue(i[a]);if(Array.isArray(u)){if(0===u.length)throw new K(900,!1);let l,h=at.Default;for(let m=0;m<u.length;m++){const y=u[m],w=St(y);"number"==typeof w?-1===w?l=y.token:h|=w:l=y}s.push(ke(l,h))}else s.push(ke(u))}return s}function en(i,s){return i[es]=s,i.prototype[es]=s,i}function St(i){return i[es]}function se(i){return{toString:i}.toString()}var Y=function(i){return i[i.OnPush=0]="OnPush",i[i.Default=1]="Default",i}(Y||{}),Ie=function(i){return i[i.Emulated=0]="Emulated",i[i.None=2]="None",i[i.ShadowDom=3]="ShadowDom",i}(Ie||{});const qe={},Ue=[],Tt=V({\u0275cmp:V}),Bt=V({\u0275dir:V}),Vn=V({\u0275pipe:V}),fn=V({\u0275mod:V}),ur=V({\u0275fac:V}),ts=V({__NG_ELEMENT_ID__:V}),zu=V({__NG_ENV_ID__:V});function Xl(i,s,a){let u=i.length;for(;;){const l=i.indexOf(s,a);if(-1===l)return l;if(0===l||i.charCodeAt(l-1)<=32){const h=s.length;if(l+h===u||i.charCodeAt(l+h)<=32)return l}a=l+1}}function Gu(i,s,a){let u=0;for(;u<a.length;){const l=a[u];if("number"==typeof l){if(0!==l)break;u++;const h=a[u++],m=a[u++],y=a[u++];i.setAttribute(s,m,y,h)}else{const h=l,m=a[++u];xa(h)?i.setProperty(s,h,m):i.setAttribute(s,h,m),u++}}return u}function ns(i){return 3===i||4===i||6===i}function xa(i){return 64===i.charCodeAt(0)}function Ma(i,s){if(null!==s&&0!==s.length)if(null===i||0===i.length)i=s.slice();else{let a=-1;for(let u=0;u<s.length;u++){const l=s[u];"number"==typeof l?a=l:0===a||zf(i,a,l,null,-1===a||2===a?s[++u]:null)}}return i}function zf(i,s,a,u,l){let h=0,m=i.length;if(-1===s)m=-1;else for(;h<i.length;){const y=i[h++];if("number"==typeof y){if(y===s){m=-1;break}if(y>s){m=h-1;break}}}for(;h<i.length;){const y=i[h];if("number"==typeof y)break;if(y===a){if(null===u)return void(null!==l&&(i[h+1]=l));if(u===i[h+1])return void(i[h+2]=l)}h++,null!==u&&h++,null!==l&&h++}-1!==m&&(i.splice(m,0,s),h=m+1),i.splice(h++,0,a),null!==u&&i.splice(h++,0,u),null!==l&&i.splice(h++,0,l)}const pn="ng-template";function uy(i,s,a){let u=0,l=!0;for(;u<i.length;){let h=i[u++];if("string"==typeof h&&l){const m=i[u++];if(a&&"class"===h&&-1!==Xl(m.toLowerCase(),s,0))return!0}else{if(1===h){for(;u<i.length&&"string"==typeof(h=i[u++]);)if(h.toLowerCase()===s)return!0;return!1}"number"==typeof h&&(l=!1)}}return!1}function Wu(i){return 4===i.type&&i.value!==pn}function cy(i,s,a){return s===(4!==i.type||a?i.value:pn)}function ed(i,s,a){let u=4;const l=i.attrs||[],h=function Na(i){for(let s=0;s<i.length;s++)if(ns(i[s]))return s;return i.length}(l);let m=!1;for(let y=0;y<s.length;y++){const w=s[y];if("number"!=typeof w){if(!m)if(4&u){if(u=2|1&u,""!==w&&!cy(i,w,a)||""===w&&1===s.length){if(Pr(u))return!1;m=!0}}else{const b=8&u?w:s[++y];if(8&u&&null!==i.attrs){if(!uy(i.attrs,b,a)){if(Pr(u))return!1;m=!0}continue}const P=td(8&u?"class":w,l,Wu(i),a);if(-1===P){if(Pr(u))return!1;m=!0;continue}if(""!==b){let $;$=P>h?"":l[P+1].toLowerCase();const W=8&u?$:null;if(W&&-1!==Xl(W,b,0)||2&u&&b!==$){if(Pr(u))return!1;m=!0}}}}else{if(!m&&!Pr(u)&&!Pr(w))return!1;if(m&&Pr(w))continue;m=!1,u=w|1&u}}return Pr(u)||m}function Pr(i){return 0==(1&i)}function td(i,s,a,u){if(null===s)return-1;let l=0;if(u||!a){let h=!1;for(;l<s.length;){const m=s[l];if(m===i)return l;if(3===m||6===m)h=!0;else{if(1===m||2===m){let y=s[++l];for(;"string"==typeof y;)y=s[++l];continue}if(4===m)break;if(0===m){l+=4;continue}}l+=h?1:2}return-1}return function rd(i,s){let a=i.indexOf(4);if(a>-1)for(a++;a<i.length;){const u=i[a];if("number"==typeof u)return-1;if(u===s)return a;a++}return-1}(s,i)}function nd(i,s,a=!1){for(let u=0;u<s.length;u++)if(ed(i,s[u],a))return!0;return!1}function Wf(i,s){return i?":not("+s.trim()+")":s}function qf(i){let s=i[0],a=1,u=2,l="",h=!1;for(;a<i.length;){let m=i[a];if("string"==typeof m)if(2&u){const y=i[++a];l+="["+m+(y.length>0?'="'+y+'"':"")+"]"}else 8&u?l+="."+m:4&u&&(l+=" "+m);else""!==l&&!Pr(m)&&(s+=Wf(h,l),l=""),u=m,h=h||!Pr(u);a++}return""!==l&&(s+=Wf(h,l)),s}function qu(i){return se(()=>{const s=Kf(i),a={...s,decls:i.decls,vars:i.vars,template:i.template,consts:i.consts||null,ngContentSelectors:i.ngContentSelectors,onPush:i.changeDetection===Y.OnPush,directiveDefs:null,pipeDefs:null,dependencies:s.standalone&&i.dependencies||null,getStandaloneInjector:null,signals:i.signals??!1,data:i.data||{},encapsulation:i.encapsulation||Ie.Emulated,styles:i.styles||Ue,_:null,schemas:i.schemas||null,tView:null,id:""};Ju(a);const u=i.dependencies;return a.directiveDefs=Cs(u,!1),a.pipeDefs=Cs(u,!0),a.id=function ud(i){let s=0;const a=[i.selectors,i.ngContentSelectors,i.hostVars,i.hostAttrs,i.consts,i.vars,i.decls,i.encapsulation,i.standalone,i.signals,i.exportAs,JSON.stringify(i.inputs),JSON.stringify(i.outputs),Object.getOwnPropertyNames(i.type.prototype),!!i.contentQueries,!!i.viewQuery].join("|");for(const l of a)s=Math.imul(31,s)+l.charCodeAt(0)<<0;return s+=2147483648,"c"+s}(a),a})}function Ku(i){return kt(i)||Qn(i)}function sd(i){return null!==i}function od(i){return se(()=>({type:i.type,bootstrap:i.bootstrap||Ue,declarations:i.declarations||Ue,imports:i.imports||Ue,exports:i.exports||Ue,transitiveCompileScopes:null,schemas:i.schemas||null,id:i.id||null}))}function Zu(i,s){if(null==i)return qe;const a={};for(const u in i)if(i.hasOwnProperty(u)){let l=i[u],h=l;Array.isArray(l)&&(h=l[1],l=l[0]),a[l]=u,s&&(s[l]=h)}return a}function Yu(i){return se(()=>{const s=Kf(i);return Ju(s),s})}function Qu(i){return{type:i.type,name:i.name,factory:null,pure:!1!==i.pure,standalone:!0===i.standalone,onDestroy:i.type.prototype.ngOnDestroy||null}}function kt(i){return i[Tt]||null}function Qn(i){return i[Bt]||null}function Jn(i){return i[Vn]||null}function Kf(i){const s={};return{type:i.type,providersResolver:null,factory:null,hostBindings:i.hostBindings||null,hostVars:i.hostVars||0,hostAttrs:i.hostAttrs||null,contentQueries:i.contentQueries||null,declaredInputs:s,inputTransforms:null,inputConfig:i.inputs||qe,exportAs:i.exportAs||null,standalone:!0===i.standalone,signals:!0===i.signals,selectors:i.selectors||Ue,viewQuery:i.viewQuery||null,features:i.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:Zu(i.inputs,s),outputs:Zu(i.outputs)}}function Ju(i){i.features?.forEach(s=>s(i))}function Cs(i,s){if(!i)return null;const a=s?Jn:Ku;return()=>("function"==typeof i?i():i).map(u=>a(u)).filter(sd)}const gn=0,Oe=1,vt=2,rn=3,Kr=4,is=5,Er=6,io=7,Dn=8,ss=9,Ss=10,lt=11,Pa=12,dy=13,Zr=14,Bn=15,Po=16,Yr=17,kr=18,As=19,Zf=20,so=21,os=22,cd=23,Ti=24,Ot=25,dd=1,ka=2,wr=7,ko=9,Un=11;function Or(i){return Array.isArray(i)&&"object"==typeof i[dd]}function br(i){return Array.isArray(i)&&!0===i[dd]}function hd(i){return 0!=(4&i.flags)}function as(i){return i.componentOffset>-1}function La(i){return 1==(1&i.flags)}function di(i){return!!i.template}function Oo(i){return 0!=(512&i[vt])}function us(i,s){return i.hasOwnProperty(ur)?i[ur]:null}let tc=At.WeakRef??class W0{constructor(s){this.ref=s}deref(){return this.ref}},q0=0,Hi=null,oo=!1;function Xn(i){const s=Hi;return Hi=i,s}class wy{constructor(){this.id=q0++,this.ref=function ep(i){return new tc(i)}(this),this.producers=new Map,this.consumers=new Map,this.trackingVersion=0,this.valueVersion=0}consumerPollProducersForChange(){for(const[s,a]of this.producers){const u=a.producerNode.deref();if(null!=u&&a.atTrackingVersion===this.trackingVersion){if(u.producerPollStatus(a.seenValueVersion))return!0}else this.producers.delete(s),u?.consumers.delete(this.id)}return!1}producerMayHaveChanged(){const s=oo;oo=!0;try{for(const[a,u]of this.consumers){const l=u.consumerNode.deref();null!=l&&l.trackingVersion===u.atTrackingVersion?l.onConsumerDependencyMayHaveChanged():(this.consumers.delete(a),l?.producers.delete(this.id))}}finally{oo=s}}producerAccessed(){if(oo)throw new Error("");if(null===Hi)return;let s=Hi.producers.get(this.id);void 0===s?(s={consumerNode:Hi.ref,producerNode:this.ref,seenValueVersion:this.valueVersion,atTrackingVersion:Hi.trackingVersion},Hi.producers.set(this.id,s),this.consumers.set(Hi.id,s)):(s.seenValueVersion=this.valueVersion,s.atTrackingVersion=Hi.trackingVersion)}get hasProducers(){return this.producers.size>0}get producerUpdatesAllowed(){return!1!==Hi?.consumerAllowSignalWrites}producerPollStatus(s){return this.valueVersion!==s||(this.onProducerUpdateValueVersion(),this.valueVersion!==s)}}let rc=null;function K0(i){const s=Xn(null);try{return i()}finally{Xn(s)}}const Ty=()=>{};class Cy extends wy{constructor(s,a,u){super(),this.watch=s,this.schedule=a,this.dirty=!1,this.cleanupFn=Ty,this.registerOnCleanup=l=>{this.cleanupFn=l},this.consumerAllowSignalWrites=u}notify(){this.dirty||this.schedule(this),this.dirty=!0}onConsumerDependencyMayHaveChanged(){this.notify()}onProducerUpdateValueVersion(){}run(){if(this.dirty=!1,0!==this.trackingVersion&&!this.consumerPollProducersForChange())return;const s=Xn(this);this.trackingVersion++;try{this.cleanupFn(),this.cleanupFn=Ty,this.watch(this.registerOnCleanup)}finally{Xn(s)}}cleanup(){this.cleanupFn()}}class sp{constructor(s,a,u){this.previousValue=s,this.currentValue=a,this.firstChange=u}isFirstChange(){return this.firstChange}}function op(){return Fo}function Fo(i){return i.type.prototype.ngOnChanges&&(i.setInput=sc),Sy}function Sy(){const i=oc(this),s=i?.current;if(s){const a=i.previous;if(a===qe)i.previous=s;else for(let u in s)a[u]=s[u];i.current=null,this.ngOnChanges(s)}}function sc(i,s,a,u){const l=this.declaredInputs[a],h=oc(i)||function Fa(i,s){return i[ap]=s}(i,{previous:qe,current:null}),m=h.current||(h.current={}),y=h.previous,w=y[l];m[l]=new sp(w&&w.currentValue,s,y===qe),i[u]=s}op.ngInherit=!0;const ap="__ngSimpleChanges__";function oc(i){return i[ap]||null}const cs=function(i,s,a){};function tn(i){for(;Array.isArray(i);)i=i[gn];return i}function Tr(i,s){return tn(s[i.index])}function Vo(i,s){return i.data[s]}function cr(i,s){const a=s[i];return Or(a)?a:a[gn]}function ao(i,s){return null==s?null:i[s]}function lp(i){i[Yr]=0}function Py(i){1024&i[vt]||(i[vt]|=1024,Ba(i,1))}function Va(i){1024&i[vt]&&(i[vt]&=-1025,Ba(i,-1))}function Ba(i,s){let a=i[rn];if(null===a)return;a[is]+=s;let u=a;for(a=a[rn];null!==a&&(1===s&&1===u[is]||-1===s&&0===u[is]);)a[is]+=s,u=a,a=a[rn]}const pt={lFrame:Uy(null),bindingsEnabled:!0,skipHydrationRootTNode:null};function hp(){return pt.bindingsEnabled}function _e(){return pt.lFrame.lView}function Lt(){return pt.lFrame.tView}function fp(i){return pt.lFrame.contextLView=i,i[Dn]}function dc(i){return pt.lFrame.contextLView=null,i}function Hn(){let i=pp();for(;null!==i&&64===i.type;)i=i.parent;return i}function pp(){return pt.lFrame.currentTNode}function Ci(i,s){const a=pt.lFrame;a.currentTNode=i,a.isParent=s}function uo(){return pt.lFrame.isParent}function mp(i,s){const a=pt.lFrame;a.bindingIndex=a.bindingRootIndex=i,Td(s)}function Td(i){pt.lFrame.currentDirectiveIndex=i}function vp(i){pt.lFrame.currentQueryIndex=i}function Q0(i){const s=i[Oe];return 2===s.type?s.declTNode:1===s.type?i[Er]:null}function Vy(i,s,a){if(a&at.SkipSelf){let l=s,h=i;for(;!(l=l.parent,null!==l||a&at.Host||(l=Q0(h),null===l||(h=h[Zr],10&l.type))););if(null===l)return!1;s=l,i=h}const u=pt.lFrame=By();return u.currentTNode=s,u.lView=i,!0}function $a(i){const s=By(),a=i[Oe];pt.lFrame=s,s.currentTNode=a.firstChild,s.lView=i,s.tView=a,s.contextLView=i,s.bindingIndex=a.bindingStartIndex,s.inI18n=!1}function By(){const i=pt.lFrame,s=null===i?null:i.child;return null===s?Uy(i):s}function Uy(i){const s={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:i,child:null,inI18n:!1};return null!==i&&(i.child=s),s}function jy(){const i=pt.lFrame;return pt.lFrame=i.parent,i.currentTNode=null,i.lView=null,i}const Cd=jy;function Sd(){const i=jy();i.isParent=!0,i.tView=null,i.selectedIndex=-1,i.contextLView=null,i.elementDepthCount=0,i.currentDirectiveIndex=-1,i.currentNamespace=null,i.bindingRootIndex=-1,i.bindingIndex=-1,i.currentQueryIndex=0}function Fr(){return pt.lFrame.selectedIndex}function Uo(i){pt.lFrame.selectedIndex=i}let jo=!0;function pc(){return jo}function Gi(i){jo=i}function $o(i,s){for(let a=s.directiveStart,u=s.directiveEnd;a<u;a++){const h=i.data[a].type.prototype,{ngAfterContentInit:m,ngAfterContentChecked:y,ngAfterViewInit:w,ngAfterViewChecked:b,ngOnDestroy:S}=h;m&&(i.contentHooks??=[]).push(-a,m),y&&((i.contentHooks??=[]).push(a,y),(i.contentCheckHooks??=[]).push(a,y)),w&&(i.viewHooks??=[]).push(-a,w),b&&((i.viewHooks??=[]).push(a,b),(i.viewCheckHooks??=[]).push(a,b)),null!=S&&(i.destroyHooks??=[]).push(a,S)}}function co(i,s,a){gc(i,s,3,a)}function Tn(i,s,a,u){(3&i[vt])===a&&gc(i,s,a,u)}function xd(i,s){let a=i[vt];(3&a)===s&&(a&=8191,a+=1,i[vt]=a)}function gc(i,s,a,u){const h=u??-1,m=s.length-1;let y=0;for(let w=void 0!==u?65535&i[Yr]:0;w<m;w++)if("number"==typeof s[w+1]){if(y=s[w],null!=u&&y>=u)break}else s[w]<0&&(i[Yr]+=65536),(y<h||-1==h)&&(Ns(i,a,s,w),i[Yr]=(4294901760&i[Yr])+w+2),w++}function Ep(i,s){cs(4,i,s);const a=Xn(null);try{s.call(i)}finally{Xn(a),cs(5,i,s)}}function Ns(i,s,a,u){const l=a[u]<0,h=a[u+1],y=i[l?-a[u]:a[u]];l?i[vt]>>13<i[Yr]>>16&&(3&i[vt])===s&&(i[vt]+=8192,Ep(y,h)):Ep(y,h)}const Rs=-1;class za{constructor(s,a,u){this.factory=s,this.resolving=!1,this.canSeeViewProviders=a,this.injectImpl=u}}function xi(i){return i!==Rs}function Mi(i){return 32767&i}function Ct(i,s){let a=function Ps(i){return i>>16}(i),u=s;for(;a>0;)u=u[Zr],a--;return u}let Rd=!0;function ks(i){const s=Rd;return Rd=i,s}const tt=255,Vr=5;let Jr=0;const hi={};function zo(i,s){const a=Pd(i,s);if(-1!==a)return a;const u=s[Oe];u.firstCreatePass&&(i.injectorIndex=s.length,yc(u.data,i),yc(s,null),yc(u.blueprint,null));const l=Wa(i,s),h=i.injectorIndex;if(xi(l)){const m=Mi(l),y=Ct(l,s),w=y[Oe].data;for(let b=0;b<8;b++)s[h+b]=y[m+b]|w[m+b]}return s[h+8]=l,h}function yc(i,s){i.push(0,0,0,0,0,0,0,0,s)}function Pd(i,s){return-1===i.injectorIndex||i.parent&&i.parent.injectorIndex===i.injectorIndex||null===s[i.injectorIndex+8]?-1:i.injectorIndex}function Wa(i,s){if(i.parent&&-1!==i.parent.injectorIndex)return i.parent.injectorIndex;let a=0,u=null,l=s;for(;null!==l;){if(u=Za(l),null===u)return Rs;if(a++,l=l[Zr],-1!==u.injectorIndex)return u.injectorIndex|a<<16}return Rs}function qa(i,s,a){!function Dp(i,s,a){let u;"string"==typeof a?u=a.charCodeAt(0)||0:a.hasOwnProperty(ts)&&(u=a[ts]),null==u&&(u=a[ts]=Jr++);const l=u&tt;s.data[i+(l>>Vr)]|=1<<l}(i,s,a)}function vc(i,s,a){if(a&at.Optional||void 0!==i)return i;Xe()}function Ic(i,s,a,u){if(a&at.Optional&&void 0===u&&(u=null),!(a&(at.Self|at.Host))){const l=i[ss],h=$t(void 0);try{return l?l.get(s,u,a&at.Optional):_r(s,u,a&at.Optional)}finally{$t(h)}}return vc(u,0,a)}function Ec(i,s,a,u=at.Default,l){if(null!==i){if(2048&s[vt]&&!(u&at.Self)){const m=function Sp(i,s,a,u,l){let h=i,m=s;for(;null!==h&&null!==m&&2048&m[vt]&&!(512&m[vt]);){const y=bp(h,m,a,u|at.Self,hi);if(y!==hi)return y;let w=h.parent;if(!w){const b=m[Zf];if(b){const S=b.get(a,hi,u);if(S!==hi)return S}w=Za(m),m=m[Zr]}h=w}return l}(i,s,a,u,hi);if(m!==hi)return m}const h=bp(i,s,a,u,hi);if(h!==hi)return h}return Ic(s,a,u,l)}function bp(i,s,a,u,l){const h=function Od(i){if("string"==typeof i)return i.charCodeAt(0)||0;const s=i.hasOwnProperty(ts)?i[ts]:void 0;return"number"==typeof s?s>=0?s&tt:Cp:s}(a);if("function"==typeof h){if(!Vy(s,i,u))return u&at.Host?vc(l,0,u):Ic(s,a,u,l);try{let m;if(m=h(u),null!=m||u&at.Optional)return m;Xe()}finally{Cd()}}else if("number"==typeof h){let m=null,y=Pd(i,s),w=Rs,b=u&at.Host?s[Bn][Er]:null;for((-1===y||u&at.SkipSelf)&&(w=-1===y?Wa(i,s):s[y+8],w!==Rs&&Wo(u,!1)?(m=s[Oe],y=Mi(w),s=Ct(w,s)):y=-1);-1!==y;){const S=s[Oe];if(Ni(h,y,S.data)){const P=kd(y,s,a,m,u,b);if(P!==hi)return P}w=s[y+8],w!==Rs&&Wo(u,s[Oe].data[y+8]===b)&&Ni(h,y,s)?(m=S,y=Mi(w),s=Ct(w,s)):y=-1}}return l}function kd(i,s,a,u,l,h){const m=s[Oe],y=m.data[i+8],S=function Go(i,s,a,u,l){const h=i.providerIndexes,m=s.data,y=1048575&h,w=i.directiveStart,S=h>>20,$=l?y+S:i.directiveEnd;for(let W=u?y:y+S;W<$;W++){const ae=m[W];if(W<w&&a===ae||W>=w&&ae.type===a)return W}if(l){const W=m[w];if(W&&di(W)&&W.type===a)return w}return null}(y,m,a,null==u?as(y)&&Rd:u!=m&&0!=(3&y.type),l&at.Host&&h===y);return null!==S?lo(s,m,S,y):hi}function lo(i,s,a,u){let l=i[a];const h=s.data;if(function mc(i){return i instanceof za}(l)){const m=l;m.resolving&&function Me(i,s){const a=s?`. Dependency path: ${s.join(" > ")} > ${i}`:"";throw new K(-200,`Circular dependency in DI detected for ${i}${a}`)}(pe(h[a]));const y=ks(m.canSeeViewProviders);m.resolving=!0;const b=m.injectImpl?$t(m.injectImpl):null;Vy(i,u,at.Default);try{l=i[a]=m.factory(void 0,h,i,u),s.firstCreatePass&&a>=u.directiveStart&&function Ai(i,s,a){const{ngOnChanges:u,ngOnInit:l,ngDoCheck:h}=s.type.prototype;if(u){const m=Fo(s);(a.preOrderHooks??=[]).push(i,m),(a.preOrderCheckHooks??=[]).push(i,m)}l&&(a.preOrderHooks??=[]).push(0-i,l),h&&((a.preOrderHooks??=[]).push(i,h),(a.preOrderCheckHooks??=[]).push(i,h))}(a,h[a],s)}finally{null!==b&&$t(b),ks(y),m.resolving=!1,Cd()}}return l}function Ni(i,s,a){return!!(a[s+(i>>Vr)]&1<<i)}function Wo(i,s){return!(i&at.Self||i&at.Host&&s)}class Cr{constructor(s,a){this._tNode=s,this._lView=a}get(s,a,u){return Ec(this._tNode,this._lView,s,Ft(u),a)}}function Cp(){return new Cr(Hn(),_e())}function Za(i){const s=i[Oe],a=s.type;return 2===a?s.declTNode:1===a?i[Er]:null}function Ko(i){return function _c(i,s){if("class"===s)return i.classes;if("style"===s)return i.styles;const a=i.attrs;if(a){const u=a.length;let l=0;for(;l<u;){const h=a[l];if(ns(h))break;if(0===h)l+=2;else if("number"==typeof h)for(l++;l<u&&"string"==typeof a[l];)l++;else{if(h===s)return a[l+1];l+=2}}}return null}(Hn(),i)}const fo="__parameters__";function Yo(i,s,a){return se(()=>{const u=function Ld(i){return function(...a){if(i){const u=i(...a);for(const l in u)this[l]=u[l]}}}(s);function l(...h){if(this instanceof l)return u.apply(this,h),this;const m=new l(...h);return y.annotation=m,y;function y(w,b,S){const P=w.hasOwnProperty(fo)?w[fo]:Object.defineProperty(w,fo,{value:[]})[fo];for(;P.length<=S;)P.push(null);return(P[S]=P[S]||[]).push(m),w}}return a&&(l.prototype=Object.create(a.prototype)),l.prototype.ngMetadataName=i,l.annotationCls=l,l})}function Qo(i,s){i.forEach(a=>Array.isArray(a)?Qo(a,s):s(a))}function Ud(i,s,a){s>=i.length?i.push(a):i.splice(s,0,a)}function Jo(i,s){return s>=i.length-1?i.pop():i.splice(s,1)[0]}const ea=en(Yo("Optional"),8),go=en(Yo("SkipSelf"),4);function Op(i){return 128==(128&i.flags)}var Fp=function(i){return i[i.Important=1]="Important",i[i.DashCase=2]="DashCase",i}(Fp||{});const Xy=new Map;let fi=0;const Zd="__ngContext__";function Ur(i,s){Or(s)?(i[Zd]=s[As],function GT(i){Xy.set(i[As],i)}(s)):i[Zd]=s}let e_;function t_(i,s){return e_(i,s)}function Jd(i){const s=i[rn];return br(s)?s[rn]:s}function mE(i){return ra(i[Pa])}function Xd(i){return ra(i[Kr])}function ra(i){for(;null!==i&&!br(i);)i=i[Kr];return i}function Oc(i,s,a,u,l){if(null!=u){let h,m=!1;br(u)?h=u:Or(u)&&(m=!0,u=u[gn]);const y=tn(u);0===i&&null!==a?null==l?vE(s,a,y):mo(s,a,y,l||null,!0):1===i&&null!==a?mo(s,a,y,l||null,!0):2===i?function Wp(i,s,a){const u=Hp(i,s);u&&function c_(i,s,a,u){i.removeChild(s,a,u)}(i,u,s,a)}(s,y,m):3===i&&s.destroyNode(y),null!=h&&function sC(i,s,a,u,l){const h=a[wr];h!==tn(a)&&Oc(s,i,u,h,l);for(let y=Un;y<a.length;y++){const w=a[y];Lc(w[Oe],w,i,s,u,h)}}(s,i,h,a,l)}}function Up(i,s,a){return i.createElement(s,a)}function s_(i,s){const a=i[ko],u=a.indexOf(s);Va(s),a.splice(u,1)}function eh(i,s){if(i.length<=Un)return;const a=Un+s,u=i[a];if(u){const l=u[Po];null!==l&&l!==i&&s_(l,u),s>0&&(i[a-1][Kr]=u[Kr]);const h=Jo(i,Un+s);!function eC(i,s){Lc(i,s,s[lt],2,null,null),s[gn]=null,s[Er]=null}(u[Oe],u);const m=h[kr];null!==m&&m.detachView(h[Oe]),u[rn]=null,u[Kr]=null,u[vt]&=-129}return u}function o_(i,s){if(!(256&s[vt])){const a=s[lt];s[cd]?.destroy(),s[Ti]?.destroy(),a.destroyNode&&Lc(i,s,a,3,null,null),function tC(i){let s=i[Pa];if(!s)return a_(i[Oe],i);for(;s;){let a=null;if(Or(s))a=s[Pa];else{const u=s[Un];u&&(a=u)}if(!a){for(;s&&!s[Kr]&&s!==i;)Or(s)&&a_(s[Oe],s),s=s[rn];null===s&&(s=i),Or(s)&&a_(s[Oe],s),a=s&&s[Kr]}s=a}}(s)}}function a_(i,s){if(!(256&s[vt])){s[vt]&=-129,s[vt]|=256,function u_(i,s){let a;if(null!=i&&null!=(a=i.destroyHooks))for(let u=0;u<a.length;u+=2){const l=s[a[u]];if(!(l instanceof za)){const h=a[u+1];if(Array.isArray(h))for(let m=0;m<h.length;m+=2){const y=l[h[m]],w=h[m+1];cs(4,y,w);try{w.call(y)}finally{cs(5,y,w)}}else{cs(4,l,h);try{h.call(l)}finally{cs(5,l,h)}}}}}(i,s),function _E(i,s){const a=i.cleanup,u=s[io];if(null!==a)for(let h=0;h<a.length-1;h+=2)if("string"==typeof a[h]){const m=a[h+3];m>=0?u[m]():u[-m].unsubscribe(),h+=2}else a[h].call(u[a[h+1]]);null!==u&&(s[io]=null);const l=s[so];if(null!==l){s[so]=null;for(let h=0;h<l.length;h++)(0,l[h])()}}(i,s),1===s[Oe].type&&s[lt].destroy();const a=s[Po];if(null!==a&&br(s[rn])){a!==s[rn]&&s_(a,s);const u=s[kr];null!==u&&u.detachView(i)}!function hE(i){Xy.delete(i[As])}(s)}}function jp(i,s,a){return function $p(i,s,a){let u=s;for(;null!==u&&40&u.type;)u=(s=u).parent;if(null===u)return a[gn];{const{componentOffset:l}=u;if(l>-1){const{encapsulation:h}=i.data[u.directiveStart+l];if(h===Ie.None||h===Ie.Emulated)return null}return Tr(u,a)}}(i,s.parent,a)}function mo(i,s,a,u,l){i.insertBefore(s,a,u,l)}function vE(i,s,a){i.appendChild(s,a)}function IE(i,s,a,u,l){null!==u?mo(i,s,a,u,l):vE(i,s,a)}function Hp(i,s){return i.parentNode(s)}let th,y_,l_=function zp(i,s,a){return 40&i.type?Tr(i,a):null};function Gp(i,s,a,u){const l=jp(i,u,s),h=s[lt],y=function Fs(i,s,a){return l_(i,s,a)}(u.parent||s[Er],u,s);if(null!=l)if(Array.isArray(a))for(let w=0;w<a.length;w++)IE(h,l,a[w],y,!1);else IE(h,l,a,y,!1);void 0!==th&&th(h,u,s,a,l)}function eu(i,s){if(null!==s){const a=s.type;if(3&a)return Tr(s,i);if(4&a)return h_(-1,i[s.index]);if(8&a){const u=s.child;if(null!==u)return eu(i,u);{const l=i[s.index];return br(l)?h_(-1,l):tn(l)}}if(32&a)return t_(s,i)()||tn(i[s.index]);{const u=d_(i,s);return null!==u?Array.isArray(u)?u[0]:eu(Jd(i[Bn]),u):eu(i,s.next)}}return null}function d_(i,s){return null!==s?i[Bn][Er].projection[s.projection]:null}function h_(i,s){const a=Un+i+1;if(a<s.length){const u=s[a],l=u[Oe].firstChild;if(null!==l)return eu(u,l)}return s[wr]}function p_(i,s,a,u,l,h,m){for(;null!=a;){const y=u[a.index],w=a.type;if(m&&0===s&&(y&&Ur(tn(y),u),a.flags|=2),32!=(32&a.flags))if(8&w)p_(i,s,a.child,u,l,h,!1),Oc(s,i,l,y,h);else if(32&w){const b=t_(a,u);let S;for(;S=b();)Oc(s,i,l,S,h);Oc(s,i,l,y,h)}else 16&w?wE(i,s,u,a,l,h):Oc(s,i,l,y,h);a=m?a.projectionNext:a.next}}function Lc(i,s,a,u,l,h){p_(a,u,i.firstChild,s,l,h,!1)}function wE(i,s,a,u,l,h){const m=a[Bn],w=m[Er].projection[u.projection];if(Array.isArray(w))for(let b=0;b<w.length;b++)Oc(s,i,l,w[b],h);else{let b=w;const S=m[rn];Op(u)&&(b.flags|=128),p_(i,s,b,S,l,h,!0)}}function Vs(i,s,a){""===a?i.removeAttribute(s,"class"):i.setAttribute(s,"class",a)}function DE(i,s,a){const{mergedAttrs:u,classes:l,styles:h}=a;null!==u&&Gu(i,s,u),null!==l&&Vs(i,s,l),null!==h&&function qp(i,s,a){i.setAttribute(s,"style",a)}(i,s,h)}function nu(i){y_=i}class Wt{constructor(s,a){this._desc=s,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof a?this.__NG_ELEMENT_ID__=a:void 0!==a&&(this.\u0275prov=Dt({token:this,providedIn:a.providedIn||"root",factory:a.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}const ng=new Wt("ENVIRONMENT_INITIALIZER"),rg=new Wt("INJECTOR",-1),LE=new Wt("INJECTOR_DEF_TYPES");class FE{get(s,a=hn){if(a===hn){const u=new Error(`NullInjectorError: No provider for ${re(s)}!`);throw u.name="NullInjectorError",u}return a}}function P_(...i){return{\u0275providers:EC(0,i),\u0275fromNgModule:!0}}function EC(i,...s){const a=[],u=new Set;let l;const h=m=>{a.push(m)};return Qo(s,m=>{const y=m;su(y,h,[],u)&&(l||=[],l.push(y))}),void 0!==l&&wC(l,h),a}function wC(i,s){for(let a=0;a<i.length;a++){const{ngModule:u,providers:l}=i[a];k_(l,h=>{s(h,u)})}}function su(i,s,a,u){if(!(i=ue(i)))return!1;let l=null,h=zr(i);const m=!h&&kt(i);if(h||m){if(m&&!m.standalone)return!1;l=i}else{const w=i.ngModule;if(h=zr(w),!h)return!1;l=w}const y=u.has(l);if(m){if(y)return!1;if(u.add(l),m.dependencies){const w="function"==typeof m.dependencies?m.dependencies():m.dependencies;for(const b of w)su(b,s,a,u)}}else{if(!h)return!1;{if(null!=h.imports&&!y){let b;u.add(l);try{Qo(h.imports,S=>{su(S,s,a,u)&&(b||=[],b.push(S))})}finally{}void 0!==b&&wC(b,s)}if(!y){const b=us(l)||(()=>new l);s({provide:l,useFactory:b,deps:Ue},l),s({provide:LE,useValue:l,multi:!0},l),s({provide:ng,useValue:()=>ke(l),multi:!0},l)}const w=h.providers;if(null!=w&&!y){const b=i;k_(w,S=>{s(S,b)})}}}return l!==i&&void 0!==i.providers}function k_(i,s){for(let a of i)Pe(a)&&(a=a.\u0275providers),Array.isArray(a)?k_(a,s):s(a)}const DC=V({provide:String,useValue:V});function O_(i){return null!==i&&"object"==typeof i&&DC in i}function ou(i){return"function"==typeof i}const L_=new Wt("Set Injector scope."),ih={},bC={};let F_;function sg(){return void 0===F_&&(F_=new FE),F_}class _o{}class Uc extends _o{get destroyed(){return this._destroyed}constructor(s,a,u,l){super(),this.parent=a,this.source=u,this.scopes=l,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,og(s,m=>this.processProvider(m)),this.records.set(rg,jc(void 0,this)),l.has("environment")&&this.records.set(_o,jc(void 0,this));const h=this.records.get(L_);null!=h&&"string"==typeof h.value&&this.scopes.add(h.value),this.injectorDefTypes=new Set(this.get(LE.multi,Ue,at.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(const a of this._ngOnDestroyHooks)a.ngOnDestroy();const s=this._onDestroyHooks;this._onDestroyHooks=[];for(const a of s)a()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear()}}onDestroy(s){return this.assertNotDestroyed(),this._onDestroyHooks.push(s),()=>this.removeOnDestroy(s)}runInContext(s){this.assertNotDestroyed();const a=G(this),u=$t(void 0);try{return s()}finally{G(a),$t(u)}}get(s,a=hn,u=at.Default){if(this.assertNotDestroyed(),s.hasOwnProperty(zu))return s[zu](this);u=Ft(u);const h=G(this),m=$t(void 0);try{if(!(u&at.SkipSelf)){let w=this.records.get(s);if(void 0===w){const b=function AC(i){return"function"==typeof i||"object"==typeof i&&i instanceof Wt}(s)&&vn(s);w=b&&this.injectableDefInScope(b)?jc(V_(s),ih):null,this.records.set(s,w)}if(null!=w)return this.hydrate(s,w)}return(u&at.Self?sg():this.parent).get(s,a=u&at.Optional&&a===hn?null:a)}catch(y){if("NullInjectorError"===y.name){if((y[Wr]=y[Wr]||[]).unshift(re(s)),h)throw y;return function vr(i,s,a,u){const l=i[Wr];throw s[N]&&l.unshift(s[N]),i.message=function ro(i,s,a,u=null){i=i&&"\n"===i.charAt(0)&&"\u0275"==i.charAt(1)?i.slice(2):i;let l=re(s);if(Array.isArray(s))l=s.map(re).join(" -> ");else if("object"==typeof s){let h=[];for(let m in s)if(s.hasOwnProperty(m)){let y=s[m];h.push(m+":"+("string"==typeof y?JSON.stringify(y):re(y)))}l=`{${h.join(", ")}}`}return`${a}${u?"("+u+")":""}[${l}]: ${i.replace(B,"\n  ")}`}("\n"+i.message,l,a,u),i.ngTokenPath=l,i[Wr]=null,i}(y,s,"R3InjectorError",this.source)}throw y}finally{$t(m),G(h)}}resolveInjectorInitializers(){const s=G(this),a=$t(void 0);try{const l=this.get(ng.multi,Ue,at.Self);for(const h of l)h()}finally{G(s),$t(a)}}toString(){const s=[],a=this.records;for(const u of a.keys())s.push(re(u));return`R3Injector[${s.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new K(205,!1)}processProvider(s){let a=ou(s=ue(s))?s:ue(s&&s.provide);const u=function TC(i){return O_(i)?jc(void 0,i.useValue):jc(function VE(i,s,a){let u;if(ou(i)){const l=ue(i);return us(l)||V_(l)}if(O_(i))u=()=>ue(i.useValue);else if(function tr(i){return!(!i||!i.useFactory)}(i))u=()=>i.useFactory(...ft(i.deps||[]));else if(function ig(i){return!(!i||!i.useExisting)}(i))u=()=>ke(ue(i.useExisting));else{const l=ue(i&&(i.useClass||i.provide));if(!function CC(i){return!!i.deps}(i))return us(l)||V_(l);u=()=>new l(...ft(i.deps))}return u}(i),ih)}(s);if(ou(s)||!0!==s.multi)this.records.get(a);else{let l=this.records.get(a);l||(l=jc(void 0,ih,!0),l.factory=()=>ft(l.multi),this.records.set(a,l)),a=s,l.multi.push(s)}this.records.set(a,u)}hydrate(s,a){return a.value===ih&&(a.value=bC,a.value=a.factory()),"object"==typeof a.value&&a.value&&function SC(i){return null!==i&&"object"==typeof i&&"function"==typeof i.ngOnDestroy}(a.value)&&this._ngOnDestroyHooks.add(a.value),a.value}injectableDefInScope(s){if(!s.providedIn)return!1;const a=ue(s.providedIn);return"string"==typeof a?"any"===a||this.scopes.has(a):this.injectorDefTypes.has(a)}removeOnDestroy(s){const a=this._onDestroyHooks.indexOf(s);-1!==a&&this._onDestroyHooks.splice(a,1)}}function V_(i){const s=vn(i),a=null!==s?s.factory:us(i);if(null!==a)return a;if(i instanceof Wt)throw new K(204,!1);if(i instanceof Function)return function B_(i){const s=i.length;if(s>0)throw function Qa(i,s){const a=[];for(let u=0;u<i;u++)a.push(s);return a}(s,"?"),new K(204,!1);const a=function Hr(i){return i&&(i[mr]||i[yr])||null}(i);return null!==a?()=>a.factory(i):()=>new i}(i);throw new K(204,!1)}function jc(i,s,a=!1){return{factory:i,value:s,multi:a?[]:void 0}}function og(i,s){for(const a of i)Array.isArray(a)?og(a,s):a&&Pe(a)?og(a.\u0275providers,s):s(a)}const BE=new Wt("AppId",{providedIn:"root",factory:()=>xC}),xC="ng",ag=new Wt("Platform Initializer"),U_=new Wt("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),j_=new Wt("CSP nonce",{providedIn:"root",factory:()=>function ia(){if(void 0!==y_)return y_;if(typeof document<"u")return document;throw new K(210,!1)}().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});let lg=(i,s,a)=>null;function W_(i,s,a=!1){return lg(i,s,a)}class uM{}class GE{}class cM{resolveComponentFactory(s){throw function LC(i){const s=Error(`No component factory found for ${re(i)}.`);return s.ngComponent=i,s}(s)}}let Wc=(()=>{class s{}return s.NULL=new cM,s})();function lM(){return lh(Hn(),_e())}function lh(i,s){return new fg(Tr(i,s))}let fg=(()=>{class s{constructor(u){this.nativeElement=u}}return s.__NG_ELEMENT_ID__=lM,s})();class WE{}let hM=(()=>{class s{constructor(){this.destroyNode=null}}return s.__NG_ELEMENT_ID__=()=>function qE(){const i=_e(),a=cr(Hn().index,i);return(Or(a)?a:i)[lt]}(),s})(),KE=(()=>{var i;class s{}return(i=s).\u0275prov=Dt({token:i,providedIn:"root",factory:()=>null}),s})();class ZE{constructor(s){this.full=s,this.major=s.split(".")[0],this.minor=s.split(".")[1],this.patch=s.split(".").slice(2).join(".")}}const YE=new ZE("16.2.1"),Y_={};function gg(i,s=null,a=null,u){const l=mg(i,s,a,u);return l.resolveInjectorInitializers(),l}function mg(i,s=null,a=null,u,l=new Set){const h=[a||Ue,P_(i)];return u=u||("object"==typeof i?void 0:re(i)),new Uc(h,s||sg(),u||null,l)}let Pi=(()=>{var i;class s{static create(u,l){if(Array.isArray(u))return gg({name:""},l,u,"");{const h=u.name??"";return gg({name:h},u.parent,u.providers,h)}}}return(i=s).THROW_IF_NOT_FOUND=hn,i.NULL=new FE,i.\u0275prov=Dt({token:i,providedIn:"any",factory:()=>ke(rg)}),i.__NG_ELEMENT_ID__=-1,s})();let vo=(()=>{var i;class s{constructor(){this.callbacks=new Set,this.deferredCallbacks=new Set,this.renderDepth=0,this.runningCallbacks=!1}begin(){if(this.runningCallbacks)throw new K(102,!1);this.renderDepth++}end(){if(this.renderDepth--,0===this.renderDepth)try{this.runningCallbacks=!0;for(const u of this.callbacks)u.invoke()}finally{this.runningCallbacks=!1;for(const u of this.deferredCallbacks)this.callbacks.add(u);this.deferredCallbacks.clear()}}register(u){(this.runningCallbacks?this.deferredCallbacks:this.callbacks).add(u)}unregister(u){this.callbacks.delete(u),this.deferredCallbacks.delete(u)}ngOnDestroy(){this.callbacks.clear(),this.deferredCallbacks.clear()}}return(i=s).\u0275prov=Dt({token:i,providedIn:"root",factory:()=>new i}),s})();function hh(i){for(;i;){i[vt]|=64;const s=Jd(i);if(Oo(i)&&!s)return i;i=s}return null}function tw(i){return i.ngOriginalError}class dr{constructor(){this._console=console}handleError(s){const a=this._findOriginalError(s);this._console.error("ERROR",s),a&&this._console.error("ORIGINAL ERROR",a)}_findOriginalError(s){let a=s&&tw(s);for(;a&&tw(a);)a=tw(a);return a||null}}const qi=new Wt("",{providedIn:"root",factory:()=>!1});class $C extends wy{constructor(){super(...arguments),this.consumerAllowSignalWrites=!1,this._lView=null}set lView(s){this._lView=s}onConsumerDependencyMayHaveChanged(){hh(this._lView)}onProducerUpdateValueVersion(){}get hasReadASignal(){return this.hasProducers}runInContext(s,a,u){const l=Xn(this);this.trackingVersion++;try{s(a,u)}finally{Xn(l)}}destroy(){this.trackingVersion++}}let vg=null;function uw(){return vg??=new $C,vg}function Ki(i,s){return i[s]??uw()}function Ge(i,s){const a=uw();a.hasReadASignal&&(i[s]=vg,a.lView=i,vg=new $C)}const It={};function Et(i){ph(Lt(),_e(),Fr()+i,!1)}function ph(i,s,a,u){if(!u)if(3==(3&s[vt])){const h=i.preOrderCheckHooks;null!==h&&co(s,h,a)}else{const h=i.preOrderHooks;null!==h&&Tn(s,h,0,a)}Uo(a)}function js(i,s=at.Default){const a=_e();return null===a?ke(i,s):Ec(Hn(),a,ue(i),s)}function Ig(i,s,a,u,l,h,m,y,w,b,S){const P=s.blueprint.slice();return P[gn]=l,P[vt]=140|u,(null!==b||i&&2048&i[vt])&&(P[vt]|=2048),lp(P),P[rn]=P[Zr]=i,P[Dn]=a,P[Ss]=m||i&&i[Ss],P[lt]=y||i&&i[lt],P[ss]=w||i&&i[ss]||null,P[Er]=h,P[As]=function zT(){return fi++}(),P[os]=S,P[Zf]=b,P[Bn]=2==s.type?i[Bn]:P,P}function Yc(i,s,a,u,l){let h=i.data[s];if(null===h)h=function tv(i,s,a,u,l){const h=pp(),m=uo(),w=i.data[s]=function GC(i,s,a,u,l,h){let m=s?s.injectorIndex:-1,y=0;return function Ms(){return null!==pt.skipHydrationRootTNode}()&&(y|=128),{type:a,index:u,insertBeforeIndex:null,injectorIndex:m,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:y,providerIndexes:0,value:l,attrs:h,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:s,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,m?h:h&&h.parent,a,s,u,l);return null===i.firstChild&&(i.firstChild=w),null!==h&&(m?null==h.child&&null!==w.parent&&(h.child=w):null===h.next&&(h.next=w,w.prev=h)),w}(i,s,a,u,l),function gp(){return pt.lFrame.inI18n}()&&(h.flags|=32);else if(64&h.type){h.type=a,h.value=u,h.attrs=l;const m=function Bo(){const i=pt.lFrame,s=i.currentTNode;return i.isParent?s:s.parent}();h.injectorIndex=null===m?-1:m.injectorIndex}return Ci(h,!0),h}function zn(i,s,a,u){if(0===a)return-1;const l=s.length;for(let h=0;h<a;h++)s.push(u),i.blueprint.push(u),i.data.push(null);return l}function gh(i,s,a,u,l){const h=Ki(s,cd),m=Fr(),y=2&u;try{if(Uo(-1),y&&s.length>Ot&&ph(i,s,Ot,!1),cs(y?2:0,l),y)h.runInContext(a,u,l);else{const b=Xn(null);try{a(u,l)}finally{Xn(b)}}}finally{y&&null===s[cd]&&Ge(s,cd),Uo(m),cs(y?3:1,l)}}function Gn(i,s,a){if(hd(s)){const u=Xn(null);try{const h=s.directiveEnd;for(let m=s.directiveStart;m<h;m++){const y=i.data[m];y.contentQueries&&y.contentQueries(1,a[m],m)}}finally{Xn(u)}}}function $s(i,s,a){hp()&&(function pw(i,s,a,u){const l=a.directiveStart,h=a.directiveEnd;as(a)&&function YC(i,s,a){const u=Tr(s,i),l=rv(a);let m=16;a.signals?m=4096:a.onPush&&(m=64);const y=Jc(i,Ig(i,l,null,m,u,s,null,i[Ss].rendererFactory.createRenderer(u,a),null,null,null));i[s.index]=y}(s,a,i.data[l+a.componentOffset]),i.firstCreatePass||zo(a,s),Ur(u,s);const m=a.initialInputs;for(let y=l;y<h;y++){const w=i.data[y],b=lo(s,i,y,a);Ur(b,s),null!==m&&mw(0,y-l,b,w,0,m),di(w)&&(cr(a.index,s)[Dn]=lo(s,i,y,a))}}(i,s,a,Tr(a,s)),64==(64&a.flags)&&gw(i,s,a))}function nv(i,s,a=Tr){const u=s.localNames;if(null!==u){let l=s.index+1;for(let h=0;h<u.length;h+=2){const m=u[h+1],y=-1===m?a(s,i):i[m];i[l++]=y}}}function rv(i){const s=i.tView;return null===s||s.incompleteFirstPass?i.tView=mh(1,null,i.template,i.decls,i.vars,i.directiveDefs,i.pipeDefs,i.viewQuery,i.schemas,i.consts,i.id):s}function mh(i,s,a,u,l,h,m,y,w,b,S){const P=Ot+u,$=P+l,W=function cw(i,s){const a=[];for(let u=0;u<s;u++)a.push(u<i?null:It);return a}(P,$),ae="function"==typeof b?b():b;return W[Oe]={type:i,blueprint:W,template:a,queries:null,viewQuery:y,declTNode:s,data:W.slice().fill(null,P),bindingStartIndex:P,expandoStartIndex:$,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof h?h():h,pipeRegistry:"function"==typeof m?m():m,firstChild:null,schemas:w,consts:ae,incompleteFirstPass:!1,ssrId:S}}let Qc=i=>null;function lw(i,s,a,u){for(let l in i)if(i.hasOwnProperty(l)){a=null===a?{}:a;const h=i[l];null===u?uu(a,s,l,h):u.hasOwnProperty(l)&&uu(a,s,u[l],h)}return a}function uu(i,s,a,u){i.hasOwnProperty(a)?i[a].push(s,u):i[a]=[s,u]}function yh(i,s,a,u){if(hp()){const l=null===u?null:{"":-1},h=function qC(i,s){const a=i.directiveRegistry;let u=null,l=null;if(a)for(let h=0;h<a.length;h++){const m=a[h];if(nd(s,m.selectors,!1))if(u||(u=[]),di(m))if(null!==m.findHostDirectiveDefs){const y=[];l=l||new Map,m.findHostDirectiveDefs(m,y,l),u.unshift(...y,m),cu(i,s,y.length)}else u.unshift(m),cu(i,s,0);else l=l||new Map,m.findHostDirectiveDefs?.(m,u,l),u.push(m)}return null===u?null:[u,l]}(i,a);let m,y;null===h?m=y=null:[m,y]=h,null!==m&&wg(i,s,a,m,l,y),l&&function KC(i,s,a){if(s){const u=i.localNames=[];for(let l=0;l<s.length;l+=2){const h=a[s[l+1]];if(null==h)throw new K(-301,!1);u.push(s[l],h)}}}(a,u,l)}a.mergedAttrs=Ma(a.mergedAttrs,a.attrs)}function wg(i,s,a,u,l,h){for(let b=0;b<u.length;b++)qa(zo(a,s),i,u[b].type);!function Dg(i,s,a){i.flags|=1,i.directiveStart=s,i.directiveEnd=s+a,i.providerIndexes=s}(a,i.data.length,u.length);for(let b=0;b<u.length;b++){const S=u[b];S.providersResolver&&S.providersResolver(S)}let m=!1,y=!1,w=zn(i,s,u.length,null);for(let b=0;b<u.length;b++){const S=u[b];a.mergedAttrs=Ma(a.mergedAttrs,S.hostAttrs),uv(i,a,s,w,S),ZC(w,S,l),null!==S.contentQueries&&(a.flags|=4),(null!==S.hostBindings||null!==S.hostAttrs||0!==S.hostVars)&&(a.flags|=64);const P=S.type.prototype;!m&&(P.ngOnChanges||P.ngOnInit||P.ngDoCheck)&&((i.preOrderHooks??=[]).push(a.index),m=!0),!y&&(P.ngOnChanges||P.ngDoCheck)&&((i.preOrderCheckHooks??=[]).push(a.index),y=!0),w++}!function dw(i,s,a){const l=s.directiveEnd,h=i.data,m=s.attrs,y=[];let w=null,b=null;for(let S=s.directiveStart;S<l;S++){const P=h[S],$=a?a.get(P):null,ae=$?$.outputs:null;w=lw(P.inputs,S,w,$?$.inputs:null),b=lw(P.outputs,S,b,ae);const be=null===w||null===m||Wu(s)?null:cv(w,S,m);y.push(be)}null!==w&&(w.hasOwnProperty("class")&&(s.flags|=8),w.hasOwnProperty("style")&&(s.flags|=16)),s.initialInputs=y,s.inputs=w,s.outputs=b}(i,a,h)}function gw(i,s,a){const u=a.directiveStart,l=a.directiveEnd,h=a.index,m=function VT(){return pt.lFrame.currentDirectiveIndex}();try{Uo(h);for(let y=u;y<l;y++){const w=i.data[y],b=s[y];Td(y),(null!==w.hostBindings||0!==w.hostVars||null!==w.hostAttrs)&&_h(w,b)}}finally{Uo(-1),Td(m)}}function _h(i,s){null!==i.hostBindings&&i.hostBindings(1,s)}function cu(i,s,a){s.componentOffset=a,(i.components??=[]).push(s.index)}function ZC(i,s,a){if(a){if(s.exportAs)for(let u=0;u<s.exportAs.length;u++)a[s.exportAs[u]]=i;di(s)&&(a[""]=i)}}function uv(i,s,a,u,l){i.data[u]=l;const h=l.factory||(l.factory=us(l.type)),m=new za(h,di(l),js);i.blueprint[u]=m,a[u]=m,function ov(i,s,a,u,l){const h=l.hostBindings;if(h){let m=i.hostBindingOpCodes;null===m&&(m=i.hostBindingOpCodes=[]);const y=~s.index;(function av(i){let s=i.length;for(;s>0;){const a=i[--s];if("number"==typeof a&&a<0)return a}return 0})(m)!=y&&m.push(y),m.push(a,u,h)}}(i,s,u,zn(i,a,l.hostVars,It),l)}function mw(i,s,a,u,l,h){const m=h[s];if(null!==m)for(let y=0;y<m.length;)vh(u,a,m[y++],m[y++],m[y++])}function vh(i,s,a,u,l){const h=Xn(null);try{const m=i.inputTransforms;null!==m&&m.hasOwnProperty(u)&&(l=m[u].call(s,l)),null!==i.setInput?i.setInput(s,l,a,u):s[u]=l}finally{Xn(h)}}function cv(i,s,a){let u=null,l=0;for(;l<a.length;){const h=a[l];if(0!==h)if(5!==h){if("number"==typeof h)break;if(i.hasOwnProperty(h)){null===u&&(u=[]);const m=i[h];for(let y=0;y<m.length;y+=2)if(m[y]===s){u.push(h,m[y+1],a[l+1]);break}}l+=2}else l+=2;else l+=4}return u}function Tg(i,s,a,u){return[i,!0,!1,s,null,0,u,a,null,null,null]}function Cg(i,s){const a=i.contentQueries;if(null!==a)for(let u=0;u<a.length;u+=2){const h=a[u+1];if(-1!==h){const m=i.data[h];vp(a[u]),m.contentQueries(2,s[h],h)}}}function Jc(i,s){return i[Pa]?i[dy][Kr]=s:i[Pa]=s,i[dy]=s,s}function Sg(i,s,a){vp(0);const u=Xn(null);try{s(i,a)}finally{Xn(u)}}function Ag(i,s){const a=i[ss],u=a?a.get(dr,null):null;u&&u.handleError(s)}function xg(i,s,a,u,l){for(let h=0;h<a.length;){const m=a[h++],y=a[h++];vh(i.data[m],s[m],u,y,l)}}function hv(i,s){const a=cr(s,i),u=a[Oe];!function fv(i,s){for(let a=s.length;a<i.blueprint.length;a++)s.push(i.blueprint[a])}(u,a);const l=a[gn];null!==l&&null===a[os]&&(a[os]=W_(l,a[ss])),Ih(u,a,a[Dn])}function Ih(i,s,a){$a(s);try{const u=i.viewQuery;null!==u&&Sg(1,u,a);const l=i.template;null!==l&&gh(i,s,l,1,a),i.firstCreatePass&&(i.firstCreatePass=!1),i.staticContentQueries&&Cg(i,s),i.staticViewQueries&&Sg(2,i.viewQuery,a);const h=i.components;null!==h&&function hr(i,s){for(let a=0;a<s.length;a++)hv(i,s[a])}(s,h)}catch(u){throw i.firstCreatePass&&(i.incompleteFirstPass=!0,i.firstCreatePass=!1),u}finally{s[vt]&=-5,Sd()}}let fr=(()=>{var i;class s{constructor(){this.all=new Set,this.queue=new Map}create(u,l,h){const m=typeof Zone>"u"?null:Zone.current,y=new Cy(u,S=>{this.all.has(S)&&this.queue.set(S,m)},h);let w;this.all.add(y),y.notify();const b=()=>{y.cleanup(),w?.(),this.all.delete(y),this.queue.delete(y)};return w=l?.onDestroy(b),{destroy:b}}flush(){if(0!==this.queue.size)for(const[u,l]of this.queue)this.queue.delete(u),l?l.run(()=>u.run()):u.run()}get isQueueEmpty(){return 0===this.queue.size}}return(i=s).\u0275prov=Dt({token:i,providedIn:"root",factory:()=>new i}),s})();function Xc(i,s,a){let u=a?i.styles:null,l=a?i.classes:null,h=0;if(null!==s)for(let m=0;m<s.length;m++){const y=s[m];"number"==typeof y?h=y:1==h?l=Ve(l,y):2==h&&(u=Ve(u,y+": "+s[++m]+";"))}a?i.styles=u:i.stylesWithoutHost=u,a?i.classes=l:i.classesWithoutHost=l}function Eh(i,s,a,u,l=!1){for(;null!==a;){const h=s[a.index];if(null!==h&&u.push(tn(h)),br(h)){for(let y=Un;y<h.length;y++){const w=h[y],b=w[Oe].firstChild;null!==b&&Eh(w[Oe],w,b,u)}h[wr]!==h[gn]&&u.push(h[wr])}const m=a.type;if(8&m)Eh(i,s,a.child,u);else if(32&m){const y=t_(a,s);let w;for(;w=y();)u.push(w)}else if(16&m){const y=d_(s,a);if(Array.isArray(y))u.push(...y);else{const w=Jd(s[Bn]);Eh(w[Oe],w,y,u,!0)}}a=l?a.projectionNext:a.next}return u}function Ng(i,s,a,u=!0){const l=s[Ss],h=l.rendererFactory,m=l.afterRenderEventManager;h.begin?.(),m?.begin();try{vw(i,s,i.template,a)}catch(w){throw u&&Ag(s,w),w}finally{h.end?.(),l.effectManager?.flush(),m?.end()}}function vw(i,s,a,u){const l=s[vt];if(256!=(256&l)){s[Ss].effectManager?.flush(),$a(s);try{lp(s),function ja(i){return pt.lFrame.bindingIndex=i}(i.bindingStartIndex),null!==a&&gh(i,s,a,2,u);const m=3==(3&l);if(m){const b=i.preOrderCheckHooks;null!==b&&co(s,b,null)}else{const b=i.preOrderHooks;null!==b&&Tn(s,b,0,null),xd(s,0)}if(function JC(i){for(let s=mE(i);null!==s;s=Xd(s)){if(!s[ka])continue;const a=s[ko];for(let u=0;u<a.length;u++){Py(a[u])}}}(s),Iw(s,2),null!==i.contentQueries&&Cg(i,s),m){const b=i.contentCheckHooks;null!==b&&co(s,b)}else{const b=i.contentHooks;null!==b&&Tn(s,b,1),xd(s,1)}!function ev(i,s){const a=i.hostBindingOpCodes;if(null===a)return;const u=Ki(s,Ti);try{for(let l=0;l<a.length;l++){const h=a[l];if(h<0)Uo(~h);else{const m=h,y=a[++l],w=a[++l];mp(y,m),u.runInContext(w,2,s[m])}}}finally{null===s[Ti]&&Ge(s,Ti),Uo(-1)}}(i,s);const y=i.components;null!==y&&Rg(s,y,0);const w=i.viewQuery;if(null!==w&&Sg(2,w,u),m){const b=i.viewCheckHooks;null!==b&&co(s,b)}else{const b=i.viewHooks;null!==b&&Tn(s,b,2),xd(s,2)}!0===i.firstUpdatePass&&(i.firstUpdatePass=!1),s[vt]&=-73,Va(s)}finally{Sd()}}}function Iw(i,s){for(let a=mE(i);null!==a;a=Xd(a))for(let u=Un;u<a.length;u++)el(a[u],s)}function wh(i,s,a){el(cr(s,i),a)}function el(i,s){if(!function Ny(i){return 128==(128&i[vt])}(i))return;const a=i[Oe];if(80&i[vt]&&0===s||1024&i[vt]||2===s)vw(a,i,a.template,i[Dn]);else if(i[is]>0){Iw(i,1);const l=i[Oe].components;null!==l&&Rg(i,l,1)}}function Rg(i,s,a){for(let u=0;u<s.length;u++)wh(i,s[u],a)}class tl{get rootNodes(){const s=this._lView,a=s[Oe];return Eh(a,s,a.firstChild,[])}constructor(s,a){this._lView=s,this._cdRefInjectingView=a,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[Dn]}set context(s){this._lView[Dn]=s}get destroyed(){return 256==(256&this._lView[vt])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const s=this._lView[rn];if(br(s)){const a=s[8],u=a?a.indexOf(this):-1;u>-1&&(eh(s,u),Jo(a,u))}this._attachedToViewContainer=!1}o_(this._lView[Oe],this._lView)}onDestroy(s){!function uc(i,s){if(256==(256&i[vt]))throw new K(911,!1);null===i[so]&&(i[so]=[]),i[so].push(s)}(this._lView,s)}markForCheck(){hh(this._cdRefInjectingView||this._lView)}detach(){this._lView[vt]&=-129}reattach(){this._lView[vt]|=128}detectChanges(){Ng(this._lView[Oe],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new K(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function r_(i,s){Lc(i,s,s[lt],2,null,null)}(this._lView[Oe],this._lView)}attachToAppRef(s){if(this._attachedToViewContainer)throw new K(902,!1);this._appRef=s}}class XC extends tl{constructor(s){super(s),this._view=s}detectChanges(){const s=this._view;Ng(s[Oe],s,s[Dn],!1)}checkNoChanges(){}get context(){return null}}class Dh extends Wc{constructor(s){super(),this.ngModule=s}resolveComponentFactory(s){const a=kt(s);return new bh(a,this.ngModule)}}function Pg(i){const s=[];for(let a in i)i.hasOwnProperty(a)&&s.push({propName:i[a],templateName:a});return s}class Ew{constructor(s,a){this.injector=s,this.parentInjector=a}get(s,a,u){u=Ft(u);const l=this.injector.get(s,Y_,u);return l!==Y_||a===Y_?l:this.parentInjector.get(s,a,u)}}class bh extends GE{get inputs(){const s=this.componentDef,a=s.inputTransforms,u=Pg(s.inputs);if(null!==a)for(const l of u)a.hasOwnProperty(l.propName)&&(l.transform=a[l.propName]);return u}get outputs(){return Pg(this.componentDef.outputs)}constructor(s,a){super(),this.componentDef=s,this.ngModule=a,this.componentType=s.type,this.selector=function z0(i){return i.map(qf).join(",")}(s.selectors),this.ngContentSelectors=s.ngContentSelectors?s.ngContentSelectors:[],this.isBoundToModule=!!a}create(s,a,u,l){let h=(l=l||this.ngModule)instanceof _o?l:l?.injector;h&&null!==this.componentDef.getStandaloneInjector&&(h=this.componentDef.getStandaloneInjector(h)||h);const m=h?new Ew(s,h):s,y=m.get(WE,null);if(null===y)throw new K(407,!1);const P={rendererFactory:y,sanitizer:m.get(KE,null),effectManager:m.get(fr,null),afterRenderEventManager:m.get(vo,null)},$=y.createRenderer(null,this.componentDef),W=this.componentDef.selectors[0][0]||"div",ae=u?function jr(i,s,a,u){const h=u.get(qi,!1)||a===Ie.ShadowDom,m=i.selectRootElement(s,h);return function zC(i){Qc(i)}(m),m}($,u,this.componentDef.encapsulation,m):Up($,W,function pv(i){const s=i.toLowerCase();return"svg"===s?"svg":"math"===s?"math":null}(W)),nt=this.componentDef.signals?4608:this.componentDef.onPush?576:528;let ye=null;null!==ae&&(ye=W_(ae,m,!0));const gt=mh(0,null,null,1,0,null,null,null,null,null,null),Pt=Ig(null,gt,null,nt,null,null,P,$,m,null,ye);let Qt,ui;$a(Pt);try{const Ds=this.componentDef;let Uu,T0=null;Ds.findHostDirectiveDefs?(Uu=[],T0=new Map,Ds.findHostDirectiveDefs(Ds,Uu,T0),Uu.push(Ds)):Uu=[Ds];const UA=function ww(i,s){const a=i[Oe],u=Ot;return i[u]=s,Yc(a,u,2,"#host",null)}(Pt,ae),C0=function Dw(i,s,a,u,l,h,m){const y=l[Oe];!function bw(i,s,a,u){for(const l of i)s.mergedAttrs=Ma(s.mergedAttrs,l.hostAttrs);null!==s.mergedAttrs&&(Xc(s,s.mergedAttrs,!0),null!==a&&DE(u,a,s))}(u,i,s,m);let w=null;null!==s&&(w=W_(s,l[ss]));const b=h.rendererFactory.createRenderer(s,a);let S=16;a.signals?S=4096:a.onPush&&(S=64);const P=Ig(l,rv(a),null,S,l[i.index],i,h,b,null,null,w);return y.firstCreatePass&&cu(y,i,u.length-1),Jc(l,P),l[i.index]=P}(UA,ae,Ds,Uu,Pt,P,$);ui=Vo(gt,Ot),ae&&function eS(i,s,a,u){if(u)Gu(i,a,["ng-version",YE.full]);else{const{attrs:l,classes:h}=function qr(i){const s=[],a=[];let u=1,l=2;for(;u<i.length;){let h=i[u];if("string"==typeof h)2===l?""!==h&&s.push(h,i[++u]):8===l&&a.push(h);else{if(!Pr(l))break;l=h}u++}return{attrs:s,classes:a}}(s.selectors[0]);l&&Gu(i,a,l),h&&h.length>0&&Vs(i,a,h.join(" "))}}($,Ds,ae,u),void 0!==a&&function tS(i,s,a){const u=i.projection=[];for(let l=0;l<s.length;l++){const h=a[l];u.push(null!=h?Array.from(h):null)}}(ui,this.ngContentSelectors,a),Qt=function kg(i,s,a,u,l,h){const m=Hn(),y=l[Oe],w=Tr(m,l);wg(y,l,m,a,null,u);for(let S=0;S<a.length;S++)Ur(lo(l,y,m.directiveStart+S,m),l);gw(y,l,m),w&&Ur(w,l);const b=lo(l,y,m.directiveStart+m.componentOffset,m);if(i[Dn]=l[Dn]=b,null!==h)for(const S of h)S(b,s);return Gn(y,m,i),b}(C0,Ds,Uu,T0,Pt,[nl]),Ih(gt,Pt,null)}finally{Sd()}return new Th(this.componentType,Qt,lh(ui,Pt),Pt,ui)}}class Th extends uM{constructor(s,a,u,l,h){super(),this.location=u,this._rootLView=l,this._tNode=h,this.previousInputValues=null,this.instance=a,this.hostView=this.changeDetectorRef=new XC(l),this.componentType=s}setInput(s,a){const u=this._tNode.inputs;let l;if(null!==u&&(l=u[s])){if(this.previousInputValues??=new Map,this.previousInputValues.has(s)&&Object.is(this.previousInputValues.get(s),a))return;const h=this._rootLView;xg(h[Oe],h,l,s,a),this.previousInputValues.set(s,a),hh(cr(this._tNode.index,h))}}get injector(){return new Cr(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(s){this.hostView.onDestroy(s)}}function nl(){const i=Hn();$o(_e()[Oe],i)}function rl(i){return!!du(i)&&(Array.isArray(i)||!(i instanceof Map)&&Symbol.iterator in i)}function du(i){return null!==i&&("function"==typeof i||"object"==typeof i)}function Uw(i,s,a,u,l,h,m,y){const w=_e(),b=Lt(),S=i+Ot,P=b.firstCreatePass?function Vh(i,s,a,u,l,h,m,y,w){const b=s.consts,S=Yc(s,i,4,m||null,ao(b,y));yh(s,a,S,ao(b,w)),$o(s,S);const P=S.tView=mh(2,S,u,l,h,s.directiveRegistry,s.pipeRegistry,null,s.schemas,b,null);return null!==s.queries&&(s.queries.template(s,S),P.queries=s.queries.embeddedTView(S)),S}(S,b,w,s,a,u,l,h,m):b.data[S];Ci(P,!1);const $=Sn(b,w,P,i);pc()&&Gp(b,w,$,P),Ur($,w),Jc(w,w[S]=Tg($,w,$,P)),La(P)&&$s(b,w,P),null!=m&&nv(w,P,y)}let Sn=function Av(i,s,a,u){return Gi(!0),s[lt].createComment("")};function xv(i){return function Lr(i,s){return i[s]}(function hc(){return pt.lFrame.contextLView}(),Ot+i)}function Hg(i,s,a){const u=_e();return function nr(i,s,a){return!Object.is(i[s],a)&&(i[s]=a,!0)}(u,function Qr(){return pt.lFrame.bindingIndex++}(),s)&&function pi(i,s,a,u,l,h,m,y){const w=Tr(s,a);let S,b=s.inputs;!y&&null!=b&&(S=b[u])?(xg(i,a,S,u,l),as(s)&&function WC(i,s){const a=cr(s,i);16&a[vt]||(a[vt]|=64)}(a,s.index)):3&s.type&&(u=function sv(i){return"class"===i?"className":"for"===i?"htmlFor":"formaction"===i?"formAction":"innerHtml"===i?"innerHTML":"readonly"===i?"readOnly":"tabindex"===i?"tabIndex":i}(u),l=null!=m?m(l,s.value||"",u):l,h.setProperty(w,u,l))}(Lt(),function ln(){const i=pt.lFrame;return Vo(i.tView,i.selectedIndex)}(),u,i,s,u[lt],a,!1),Hg}function zg(i,s,a,u,l){const m=l?"class":"style";xg(i,a,s.inputs[m],m,u)}function Bh(i,s,a,u){const l=_e(),h=Lt(),m=Ot+i,y=l[lt],w=h.firstCreatePass?function Gg(i,s,a,u,l,h){const m=s.consts,w=Yc(s,i,2,u,ao(m,l));return yh(s,a,w,ao(m,h)),null!==w.attrs&&Xc(w,w.attrs,!1),null!==w.mergedAttrs&&Xc(w,w.mergedAttrs,!0),null!==s.queries&&s.queries.elementStart(s,w),w}(m,h,l,s,a,u):h.data[m],b=jw(h,l,w,y,s,i);l[m]=b;const S=La(w);return Ci(w,!0),DE(y,b,w),32!=(32&w.flags)&&pc()&&Gp(h,l,b,w),0===function Dd(){return pt.lFrame.elementDepthCount}()&&Ur(b,l),function ky(){pt.lFrame.elementDepthCount++}(),S&&($s(h,l,w),Gn(h,w,l)),null!==u&&nv(l,w),Bh}function Oi(){let i=Hn();uo()?function Ua(){pt.lFrame.isParent=!1}():(i=i.parent,Ci(i,!1));const s=i;(function Oy(i){return pt.skipHydrationRootTNode===i})(s)&&function bn(){pt.skipHydrationRootTNode=null}(),function dp(){pt.lFrame.elementDepthCount--}();const a=Lt();return a.firstCreatePass&&($o(a,i),hd(i)&&a.queries.elementEnd(i)),null!=s.classesWithoutHost&&function Ga(i){return 0!=(8&i.flags)}(s)&&zg(a,s,_e(),s.classesWithoutHost,!0),null!=s.stylesWithoutHost&&function wp(i){return 0!=(16&i.flags)}(s)&&zg(a,s,_e(),s.stylesWithoutHost,!1),Oi}function Wg(i,s,a,u){return Bh(i,s,a,u),Oi(),Wg}let jw=(i,s,a,u,l,h)=>(Gi(!0),Up(u,l,function Ad(){return pt.lFrame.currentNamespace}()));function Rv(){return _e()}function pu(i){return!!i&&"function"==typeof i.then}function Pv(i){return!!i&&"function"==typeof i.subscribe}function Zg(i,s,a,u){const l=_e(),h=Lt(),m=Hn();return function Ov(i,s,a,u,l,h,m){const y=La(u),b=i.firstCreatePass&&function lv(i){return i.cleanup||(i.cleanup=[])}(i),S=s[Dn],P=function yw(i){return i[io]||(i[io]=[])}(s);let $=!0;if(3&u.type||m){const be=Tr(u,s),He=m?m(be):be,nt=P.length,ye=m?Pt=>m(tn(Pt[u.index])):u.index;let gt=null;if(!m&&y&&(gt=function kv(i,s,a,u){const l=i.cleanup;if(null!=l)for(let h=0;h<l.length-1;h+=2){const m=l[h];if(m===a&&l[h+1]===u){const y=s[io],w=l[h+2];return y.length>w?y[w]:null}"string"==typeof m&&(h+=2)}return null}(i,s,l,u.index)),null!==gt)(gt.__ngLastListenerFn__||gt).__ngNextListenerFn__=h,gt.__ngLastListenerFn__=h,$=!1;else{h=Lv(u,s,S,h,!1);const Pt=a.listen(He,l,h);P.push(h,Pt),b&&b.push(l,ye,nt,nt+1)}}else h=Lv(u,s,S,h,!1);const W=u.outputs;let ae;if($&&null!==W&&(ae=W[l])){const be=ae.length;if(be)for(let He=0;He<be;He+=2){const Qt=s[ae[He]][ae[He+1]].subscribe(h),ui=P.length;P.push(h,Qt),b&&b.push(l,u.index,ui,-(ui+1))}}}(h,l,l[lt],m,i,s,u),Zg}function Hh(i,s,a,u){try{return cs(6,s,a),!1!==a(u)}catch(l){return Ag(i,l),!1}finally{cs(7,s,a)}}function Lv(i,s,a,u,l){return function h(m){if(m===Function)return u;hh(i.componentOffset>-1?cr(i.index,s):s);let w=Hh(s,a,u,m),b=h.__ngNextListenerFn__;for(;b;)w=Hh(s,a,b,m)&&w,b=b.__ngNextListenerFn__;return l&&!1===w&&m.preventDefault(),w}}function Fv(i=1){return function Ip(i){return(pt.lFrame.contextLView=function J0(i,s){for(;i>0;)s=s[Zr],i--;return s}(i,pt.lFrame.contextLView))[Dn]}(i)}function eD(i,s=""){const a=_e(),u=Lt(),l=i+Ot,h=u.firstCreatePass?Yc(u,l,1,s,null):u.data[l],m=Wv(u,a,h,s,i);a[l]=m,pc()&&Gp(u,a,m,h),Ci(h,!1)}let Wv=(i,s,a,u,l)=>(Gi(!0),function Bp(i,s){return i.createText(s)}(s[lt],u));const Fn=void 0;var cD=["en",[["a","p"],["AM","PM"],Fn],[["AM","PM"],Fn,Fn],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],Fn,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],Fn,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",Fn,"{1} 'at' {0}",Fn],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function wS(i){const a=Math.floor(Math.abs(i)),u=i.toString().replace(/^[^.]*\.?/,"").length;return 1===a&&0===u?1:5}];let ri={};function yl(i){const s=function TS(i){return i.toLowerCase().replace(/_/g,"-")}(i);let a=dD(s);if(a)return a;const u=s.split("-")[0];if(a=dD(u),a)return a;if("en"===u)return cD;throw new K(701,!1)}function lD(i){return yl(i)[_l.PluralCase]}function dD(i){return i in ri||(ri[i]=At.ng&&At.ng.common&&At.ng.common.locales&&At.ng.common.locales[i]),ri[i]}var _l=function(i){return i[i.LocaleId=0]="LocaleId",i[i.DayPeriodsFormat=1]="DayPeriodsFormat",i[i.DayPeriodsStandalone=2]="DayPeriodsStandalone",i[i.DaysFormat=3]="DaysFormat",i[i.DaysStandalone=4]="DaysStandalone",i[i.MonthsFormat=5]="MonthsFormat",i[i.MonthsStandalone=6]="MonthsStandalone",i[i.Eras=7]="Eras",i[i.FirstDayOfWeek=8]="FirstDayOfWeek",i[i.WeekendRange=9]="WeekendRange",i[i.DateFormat=10]="DateFormat",i[i.TimeFormat=11]="TimeFormat",i[i.DateTimeFormat=12]="DateTimeFormat",i[i.NumberSymbols=13]="NumberSymbols",i[i.NumberFormats=14]="NumberFormats",i[i.CurrencyCode=15]="CurrencyCode",i[i.CurrencySymbol=16]="CurrencySymbol",i[i.CurrencyName=17]="CurrencyName",i[i.Currencies=18]="Currencies",i[i.Directionality=19]="Directionality",i[i.PluralCase=20]="PluralCase",i[i.ExtraData=21]="ExtraData",i}(_l||{});const vl="en-US";let hD=vl;class So{}class Cu{}function ii(i,s){return new xl(i,s??null,[])}class xl extends So{constructor(s,a,u){super(),this._parent=a,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new Dh(this);const l=function Ir(i,s){const a=i[fn]||null;if(!a&&!0===s)throw new Error(`Type ${re(i)} does not have '\u0275mod' property.`);return a}(s);this._bootstrapComponents=function gs(i){return i instanceof Function?i():i}(l.bootstrap),this._r3Injector=mg(s,a,[{provide:So,useValue:this},{provide:Wc,useValue:this.componentFactoryResolver},...u],re(s),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(s)}get injector(){return this._r3Injector}destroy(){const s=this._r3Injector;!s.destroyed&&s.destroy(),this.destroyCbs.forEach(a=>a()),this.destroyCbs=null}onDestroy(s){this.destroyCbs.push(s)}}class Su extends Cu{constructor(s){super(),this.moduleType=s}create(s){return new xl(this.moduleType,s,[])}}function wm(i){return s=>{setTimeout(i,void 0,s)}}const ws=class YD extends E.x{constructor(s=!1){super(),this.__isAsync=s}emit(s){super.next(s)}subscribe(s,a,u){let l=s,h=a||(()=>null),m=u;if(s&&"object"==typeof s){const w=s;l=w.next?.bind(w),h=w.error?.bind(w),m=w.complete?.bind(w)}this.__isAsync&&(h=wm(h),l&&(l=wm(l)),m&&(m=wm(m)));const y=super.subscribe({next:l,error:h,complete:m});return s instanceof F.w0&&s.add(y),y}};function II(i,s,a,u=!0){const l=s[Oe];if(function i_(i,s,a,u){const l=Un+u,h=a.length;u>0&&(a[l-1][Kr]=s),u<h-Un?(s[Kr]=a[l],Ud(a,Un+u,s)):(a.push(s),s[Kr]=null),s[rn]=a;const m=s[Po];null!==m&&a!==m&&function nC(i,s){const a=i[ko];s[Bn]!==s[rn][rn][Bn]&&(i[ka]=!0),null===a?i[ko]=[s]:a.push(s)}(m,s);const y=s[kr];null!==y&&y.insertView(i),s[vt]|=128}(l,s,i,a),u){const h=h_(a,i),m=s[lt],y=Hp(m,i[wr]);null!==y&&function Qx(i,s,a,u,l,h){u[gn]=l,u[Er]=s,Lc(i,u,a,1,l,h)}(l,i[Er],m,s,y,h)}}let cf=(()=>{class s{}return s.__NG_ELEMENT_ID__=JD,s})();const qn=cf,zt=class extends qn{constructor(s,a,u){super(),this._declarationLView=s,this._declarationTContainer=a,this.elementRef=u}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(s,a){return this.createEmbeddedViewImpl(s,a)}createEmbeddedViewImpl(s,a,u){const l=function vI(i,s,a,u){const l=s.tView,y=Ig(i,l,a,4096&i[vt]?4096:16,null,s,null,null,null,u?.injector??null,u?.hydrationInfo??null);y[Po]=i[s.index];const b=i[kr];return null!==b&&(y[kr]=b.createEmbeddedView(l)),Ih(l,y,a),y}(this._declarationLView,this._declarationTContainer,s,{injector:a,hydrationInfo:u});return new tl(l)}};function JD(){return function lf(i,s){return 4&i.type?new zt(s,i,lh(i,s)):null}(Hn(),_e())}let Mu=(()=>{class s{}return s.__NG_ELEMENT_ID__=tb,s})();function tb(){return function DI(i,s){let a;const u=s[i.index];return br(u)?a=u:(a=Tg(u,s,null,i),s[i.index]=a,Jc(s,a)),ib(a,s,i,u),new wI(a,i,s)}(Hn(),_e())}const nb=Mu,wI=class extends nb{constructor(s,a,u){super(),this._lContainer=s,this._hostTNode=a,this._hostLView=u}get element(){return lh(this._hostTNode,this._hostLView)}get injector(){return new Cr(this._hostTNode,this._hostLView)}get parentInjector(){const s=Wa(this._hostTNode,this._hostLView);if(xi(s)){const a=Ct(s,this._hostLView),u=Mi(s);return new Cr(a[Oe].data[u+8],a)}return new Cr(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(s){const a=rb(this._lContainer);return null!==a&&a[s]||null}get length(){return this._lContainer.length-Un}createEmbeddedView(s,a,u){let l,h;"number"==typeof u?l=u:null!=u&&(l=u.index,h=u.injector);const y=s.createEmbeddedViewImpl(a||{},h,null);return this.insertImpl(y,l,false),y}createComponent(s,a,u,l,h){const m=s&&!function Ya(i){return"function"==typeof i}(s);let y;if(m)y=a;else{const be=a||{};y=be.index,u=be.injector,l=be.projectableNodes,h=be.environmentInjector||be.ngModuleRef}const w=m?s:new bh(kt(s)),b=u||this.parentInjector;if(!h&&null==w.ngModule){const He=(m?b:this.parentInjector).get(_o,null);He&&(h=He)}kt(w.componentType??{});const W=w.create(b,l,null,h);return this.insertImpl(W.hostView,y,false),W}insert(s,a){return this.insertImpl(s,a,!1)}insertImpl(s,a,u){const l=s._lView;if(function Ry(i){return br(i[rn])}(l)){const w=this.indexOf(s);if(-1!==w)this.detach(w);else{const b=l[rn],S=new wI(b,b[Er],b[rn]);S.detach(S.indexOf(s))}}const m=this._adjustIndex(a),y=this._lContainer;return II(y,l,m,!u),s.attachToViewContainerRef(),Ud(Sm(y),m,s),s}move(s,a){return this.insert(s,a)}indexOf(s){const a=rb(this._lContainer);return null!==a?a.indexOf(s):-1}remove(s){const a=this._adjustIndex(s,-1),u=eh(this._lContainer,a);u&&(Jo(Sm(this._lContainer),a),o_(u[Oe],u))}detach(s){const a=this._adjustIndex(s,-1),u=eh(this._lContainer,a);return u&&null!=Jo(Sm(this._lContainer),a)?new tl(u):null}_adjustIndex(s,a=0){return s??this.length+a}};function rb(i){return i[8]}function Sm(i){return i[8]||(i[8]=[])}let ib=function sb(i,s,a,u){if(i[wr])return;let l;l=8&a.type?tn(u):function zS(i,s){const a=i[lt],u=a.createComment(""),l=Tr(s,i);return mo(a,Hp(a,l),u,function rC(i,s){return i.nextSibling(s)}(a,l),!1),u}(s,a),i[wr]=l};const _b=new Wt("Application Initializer");let eo=(()=>{var i;class s{constructor(){this.initialized=!1,this.done=!1,this.donePromise=new Promise((u,l)=>{this.resolve=u,this.reject=l}),this.appInits=ze(_b,{optional:!0})??[]}runInitializers(){if(this.initialized)return;const u=[];for(const h of this.appInits){const m=h();if(pu(m))u.push(m);else if(Pv(m)){const y=new Promise((w,b)=>{m.subscribe({complete:w,error:b})});u.push(y)}}const l=()=>{this.done=!0,this.resolve()};Promise.all(u).then(()=>{l()}).catch(h=>{this.reject(h)}),0===u.length&&l(),this.initialized=!0}}return(i=s).\u0275fac=function(u){return new(u||i)},i.\u0275prov=Dt({token:i,factory:i.\u0275fac,providedIn:"root"}),s})();const to=new Wt("LocaleId",{providedIn:"root",factory:()=>ze(to,at.Optional|at.SkipSelf)||function vb(){return typeof $localize<"u"&&$localize.locale||vl}()}),oA=new Wt("DefaultCurrencyCode",{providedIn:"root",factory:()=>"USD"});let Ib=(()=>{var i;class s{constructor(){this.taskId=0,this.pendingTasks=new Set,this.hasPendingTasks=new k(!1)}add(){this.hasPendingTasks.next(!0);const u=this.taskId++;return this.pendingTasks.add(u),u}remove(u){this.pendingTasks.delete(u),0===this.pendingTasks.size&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this.hasPendingTasks.next(!1)}}return(i=s).\u0275fac=function(u){return new(u||i)},i.\u0275prov=Dt({token:i,factory:i.\u0275fac,providedIn:"root"}),s})();function Lm(...i){}class sr{constructor({enableLongStackTrace:s=!1,shouldCoalesceEventChangeDetection:a=!1,shouldCoalesceRunChangeDetection:u=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new ws(!1),this.onMicrotaskEmpty=new ws(!1),this.onStable=new ws(!1),this.onError=new ws(!1),typeof Zone>"u")throw new K(908,!1);Zone.assertZonePatched();const l=this;l._nesting=0,l._outer=l._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(l._inner=l._inner.fork(new Zone.TaskTrackingZoneSpec)),s&&Zone.longStackTraceZoneSpec&&(l._inner=l._inner.fork(Zone.longStackTraceZoneSpec)),l.shouldCoalesceEventChangeDetection=!u&&a,l.shouldCoalesceRunChangeDetection=u,l.lastRequestAnimationFrameId=-1,l.nativeRequestAnimationFrame=function ZI(){const i="function"==typeof At.requestAnimationFrame;let s=At[i?"requestAnimationFrame":"setTimeout"],a=At[i?"cancelAnimationFrame":"clearTimeout"];if(typeof Zone<"u"&&s&&a){const u=s[Zone.__symbol__("OriginalDelegate")];u&&(s=u);const l=a[Zone.__symbol__("OriginalDelegate")];l&&(a=l)}return{nativeRequestAnimationFrame:s,nativeCancelAnimationFrame:a}}().nativeRequestAnimationFrame,function EA(i){const s=()=>{!function Cb(i){i.isCheckStableRunning||-1!==i.lastRequestAnimationFrameId||(i.lastRequestAnimationFrameId=i.nativeRequestAnimationFrame.call(At,()=>{i.fakeTopEventTask||(i.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{i.lastRequestAnimationFrameId=-1,Vm(i),i.isCheckStableRunning=!0,bf(i),i.isCheckStableRunning=!1},void 0,()=>{},()=>{})),i.fakeTopEventTask.invoke()}),Vm(i))}(i)};i._inner=i._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(a,u,l,h,m,y)=>{try{return QI(i),a.invokeTask(l,h,m,y)}finally{(i.shouldCoalesceEventChangeDetection&&"eventTask"===h.type||i.shouldCoalesceRunChangeDetection)&&s(),Bm(i)}},onInvoke:(a,u,l,h,m,y,w)=>{try{return QI(i),a.invoke(l,h,m,y,w)}finally{i.shouldCoalesceRunChangeDetection&&s(),Bm(i)}},onHasTask:(a,u,l,h)=>{a.hasTask(l,h),u===l&&("microTask"==h.change?(i._hasPendingMicrotasks=h.microTask,Vm(i),bf(i)):"macroTask"==h.change&&(i.hasPendingMacrotasks=h.macroTask))},onHandleError:(a,u,l,h)=>(a.handleError(l,h),i.runOutsideAngular(()=>i.onError.emit(h)),!1)})}(l)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!sr.isInAngularZone())throw new K(909,!1)}static assertNotInAngularZone(){if(sr.isInAngularZone())throw new K(909,!1)}run(s,a,u){return this._inner.run(s,a,u)}runTask(s,a,u,l){const h=this._inner,m=h.scheduleEventTask("NgZoneEvent: "+l,s,YI,Lm,Lm);try{return h.runTask(m,a,u)}finally{h.cancelTask(m)}}runGuarded(s,a,u){return this._inner.runGuarded(s,a,u)}runOutsideAngular(s){return this._outer.run(s)}}const YI={};function bf(i){if(0==i._nesting&&!i.hasPendingMicrotasks&&!i.isStable)try{i._nesting++,i.onMicrotaskEmpty.emit(null)}finally{if(i._nesting--,!i.hasPendingMicrotasks)try{i.runOutsideAngular(()=>i.onStable.emit(null))}finally{i.isStable=!0}}}function Vm(i){i.hasPendingMicrotasks=!!(i._hasPendingMicrotasks||(i.shouldCoalesceEventChangeDetection||i.shouldCoalesceRunChangeDetection)&&-1!==i.lastRequestAnimationFrameId)}function QI(i){i._nesting++,i.isStable&&(i.isStable=!1,i.onUnstable.emit(null))}function Bm(i){i._nesting--,bf(i)}class wA{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new ws,this.onMicrotaskEmpty=new ws,this.onStable=new ws,this.onError=new ws}run(s,a,u){return s.apply(a,u)}runGuarded(s,a,u){return s.apply(a,u)}runOutsideAngular(s){return s()}runTask(s,a,u,l){return s.apply(a,u)}}const JI=new Wt("",{providedIn:"root",factory:Sb});function Sb(){const i=ze(sr);let s=!0;const a=new oe.y(l=>{s=i.isStable&&!i.hasPendingMacrotasks&&!i.hasPendingMicrotasks,i.runOutsideAngular(()=>{l.next(s),l.complete()})}),u=new oe.y(l=>{let h;i.runOutsideAngular(()=>{h=i.onStable.subscribe(()=>{sr.assertNotInAngularZone(),queueMicrotask(()=>{!s&&!i.hasPendingMacrotasks&&!i.hasPendingMicrotasks&&(s=!0,l.next(!0))})})});const m=i.onUnstable.subscribe(()=>{sr.assertInAngularZone(),s&&(s=!1,i.runOutsideAngular(()=>{l.next(!1)}))});return()=>{h.unsubscribe(),m.unsubscribe()}});return(0,me.T)(a,u.pipe((0,Re.B)()))}const XI=new Wt(""),Ab=new Wt("");let jl,Ul=(()=>{var i;class s{constructor(u,l,h){this._ngZone=u,this.registry=l,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,jl||(function e0(i){jl=i}(h),h.addToWindow(l)),this._watchAngularEvents(),u.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{sr.assertNotInAngularZone(),queueMicrotask(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())queueMicrotask(()=>{for(;0!==this._callbacks.length;){let u=this._callbacks.pop();clearTimeout(u.timeoutId),u.doneCb(this._didWork)}this._didWork=!1});else{let u=this.getPendingTasks();this._callbacks=this._callbacks.filter(l=>!l.updateCb||!l.updateCb(u)||(clearTimeout(l.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(u=>({source:u.source,creationLocation:u.creationLocation,data:u.data})):[]}addCallback(u,l,h){let m=-1;l&&l>0&&(m=setTimeout(()=>{this._callbacks=this._callbacks.filter(y=>y.timeoutId!==m),u(this._didWork,this.getPendingTasks())},l)),this._callbacks.push({doneCb:u,timeoutId:m,updateCb:h})}whenStable(u,l,h){if(h&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(u,l,h),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(u){this.registry.registerApplication(u,this)}unregisterApplication(u){this.registry.unregisterApplication(u)}findProviders(u,l,h){return[]}}return(i=s).\u0275fac=function(u){return new(u||i)(ke(sr),ke(Bu),ke(Ab))},i.\u0275prov=Dt({token:i,factory:i.\u0275fac}),s})(),Bu=(()=>{var i;class s{constructor(){this._applications=new Map}registerApplication(u,l){this._applications.set(u,l)}unregisterApplication(u){this._applications.delete(u)}unregisterAllApplications(){this._applications.clear()}getTestability(u){return this._applications.get(u)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(u,l=!0){return jl?.findTestabilityInTree(this,u,l)??null}}return(i=s).\u0275fac=function(u){return new(u||i)},i.\u0275prov=Dt({token:i,factory:i.\u0275fac,providedIn:"platform"}),s})(),No=null;const t0=new Wt("AllowMultipleToken"),Um=new Wt("PlatformDestroyListeners"),xb=new Wt("appBootstrapListener");function Hm(i,s,a=[]){const u=`Platform: ${s}`,l=new Wt(u);return(h=[])=>{let m=a0();if(!m||m.injector.get(t0,!1)){const y=[...a,...h,{provide:l,useValue:!0}];i?i(y):function r0(i){if(No&&!No.get(t0,!1))throw new K(400,!1);(function jm(){!function vd(i){rc=i}(()=>{throw new K(600,!1)})})(),No=i;const s=i.get(u0);(function $l(i){i.get(ag,null)?.forEach(a=>a())})(i)}(function zm(i=[],s){return Pi.create({name:s,providers:[{provide:L_,useValue:"platform"},{provide:Um,useValue:new Set([()=>No=null])},...i]})}(y,u))}return function o0(i){const s=a0();if(!s)throw new K(401,!1);return s}()}}function a0(){return No?.get(u0)??null}let u0=(()=>{var i;class s{constructor(u){this._injector=u,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(u,l){const h=function c0(i="zone.js",s){return"noop"===i?new wA:"zone.js"===i?new sr(s):i}(l?.ngZone,function Tf(i){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:i?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:i?.runCoalescing??!1}}({eventCoalescing:l?.ngZoneEventCoalescing,runCoalescing:l?.ngZoneRunCoalescing}));return h.run(()=>{const m=function PD(i,s,a){return new xl(i,s,a)}(u.moduleType,this.injector,function Pb(i){return[{provide:sr,useFactory:i},{provide:ng,multi:!0,useFactory:()=>{const s=ze(d0,{optional:!0});return()=>s.initialize()}},{provide:Cf,useFactory:Sf},{provide:JI,useFactory:Sb}]}(()=>h)),y=m.injector.get(dr,null);return h.runOutsideAngular(()=>{const w=h.onError.subscribe({next:b=>{y.handleError(b)}});m.onDestroy(()=>{Gm(this._modules,m),w.unsubscribe()})}),function Nb(i,s,a){try{const u=a();return pu(u)?u.catch(l=>{throw s.runOutsideAngular(()=>i.handleError(l)),l}):u}catch(u){throw s.runOutsideAngular(()=>i.handleError(u)),u}}(y,h,()=>{const w=m.injector.get(eo);return w.runInitializers(),w.donePromise.then(()=>(function fD(i){Ze(i,"Expected localeId to be defined"),"string"==typeof i&&(hD=i.toLowerCase().replace(/_/g,"-"))}(m.injector.get(to,vl)||vl),this._moduleDoBootstrap(m),m))})})}bootstrapModule(u,l=[]){const h=Rb({},l);return function n0(i,s,a){const u=new Su(a);return Promise.resolve(u)}(0,0,u).then(m=>this.bootstrapModuleFactory(m,h))}_moduleDoBootstrap(u){const l=u.injector.get(Kn);if(u._bootstrapComponents.length>0)u._bootstrapComponents.forEach(h=>l.bootstrap(h));else{if(!u.instance.ngDoBootstrap)throw new K(-403,!1);u.instance.ngDoBootstrap(l)}this._modules.push(u)}onDestroy(u){this._destroyListeners.push(u)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new K(404,!1);this._modules.slice().forEach(l=>l.destroy()),this._destroyListeners.forEach(l=>l());const u=this._injector.get(Um,null);u&&(u.forEach(l=>l()),u.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}}return(i=s).\u0275fac=function(u){return new(u||i)(ke(Pi))},i.\u0275prov=Dt({token:i,factory:i.\u0275fac,providedIn:"platform"}),s})();function Rb(i,s){return Array.isArray(s)?s.reduce(Rb,i):{...i,...s}}let Kn=(()=>{var i;class s{constructor(){this._bootstrapListeners=[],this._runningTick=!1,this._destroyed=!1,this._destroyListeners=[],this._views=[],this.internalErrorHandler=ze(Cf),this.zoneIsStable=ze(JI),this.componentTypes=[],this.components=[],this.isStable=ze(Ib).hasPendingTasks.pipe((0,Fe.w)(u=>u?(0,we.of)(!1):this.zoneIsStable),(0,xe.x)(),(0,Re.B)()),this._injector=ze(_o)}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(u,l){const h=u instanceof GE;if(!this._injector.get(eo).done)throw!h&&function Ra(i){const s=kt(i)||Qn(i)||Jn(i);return null!==s&&s.standalone}(u),new K(405,!1);let y;y=h?u:this._injector.get(Wc).resolveComponentFactory(u),this.componentTypes.push(y.componentType);const w=function Mb(i){return i.isBoundToModule}(y)?void 0:this._injector.get(So),S=y.create(Pi.NULL,[],l||y.selector,w),P=S.location.nativeElement,$=S.injector.get(XI,null);return $?.registerApplication(P),S.onDestroy(()=>{this.detachView(S.hostView),Gm(this.components,S),$?.unregisterApplication(P)}),this._loadComponent(S),S}tick(){if(this._runningTick)throw new K(101,!1);try{this._runningTick=!0;for(let u of this._views)u.detectChanges()}catch(u){this.internalErrorHandler(u)}finally{this._runningTick=!1}}attachView(u){const l=u;this._views.push(l),l.attachToAppRef(this)}detachView(u){const l=u;Gm(this._views,l),l.detachFromAppRef()}_loadComponent(u){this.attachView(u.hostView),this.tick(),this.components.push(u);const l=this._injector.get(xb,[]);l.push(...this._bootstrapListeners),l.forEach(h=>h(u))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(u=>u()),this._views.slice().forEach(u=>u.destroy())}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(u){return this._destroyListeners.push(u),()=>Gm(this._destroyListeners,u)}destroy(){if(this._destroyed)throw new K(406,!1);const u=this._injector;u.destroy&&!u.destroyed&&u.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}}return(i=s).\u0275fac=function(u){return new(u||i)},i.\u0275prov=Dt({token:i,factory:i.\u0275fac,providedIn:"root"}),s})();function Gm(i,s){const a=i.indexOf(s);a>-1&&i.splice(a,1)}const Cf=new Wt("",{providedIn:"root",factory:()=>ze(dr).handleError.bind(void 0)});function Sf(){const i=ze(sr),s=ze(dr);return a=>i.runOutsideAngular(()=>s.handleError(a))}let d0=(()=>{var i;class s{constructor(){this.zone=ze(sr),this.applicationRef=ze(Kn)}initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}}return(i=s).\u0275fac=function(u){return new(u||i)},i.\u0275prov=Dt({token:i,factory:i.\u0275fac,providedIn:"root"}),s})();function SA(){return!1}let Af=(()=>{class s{}return s.__NG_ELEMENT_ID__=h0,s})();function h0(i){return function Hl(i,s,a){if(as(i)&&!a){const u=cr(i.index,s);return new tl(u,u)}return 47&i.type?new tl(s[Bn],s):null}(Hn(),_e(),16==(16&i))}class $b{constructor(){}supports(s){return rl(s)}create(s){return new zb(s)}}const Hb=(i,s)=>s;class zb{constructor(s){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=s||Hb}forEachItem(s){let a;for(a=this._itHead;null!==a;a=a._next)s(a)}forEachOperation(s){let a=this._itHead,u=this._removalsHead,l=0,h=null;for(;a||u;){const m=!u||a&&a.currentIndex<qm(u,l,h)?a:u,y=qm(m,l,h),w=m.currentIndex;if(m===u)l--,u=u._nextRemoved;else if(a=a._next,null==m.previousIndex)l++;else{h||(h=[]);const b=y-l,S=w-l;if(b!=S){for(let $=0;$<b;$++){const W=$<h.length?h[$]:h[$]=0,ae=W+$;S<=ae&&ae<b&&(h[$]=W+1)}h[m.previousIndex]=S-b}}y!==w&&s(m,y,w)}}forEachPreviousItem(s){let a;for(a=this._previousItHead;null!==a;a=a._nextPrevious)s(a)}forEachAddedItem(s){let a;for(a=this._additionsHead;null!==a;a=a._nextAdded)s(a)}forEachMovedItem(s){let a;for(a=this._movesHead;null!==a;a=a._nextMoved)s(a)}forEachRemovedItem(s){let a;for(a=this._removalsHead;null!==a;a=a._nextRemoved)s(a)}forEachIdentityChange(s){let a;for(a=this._identityChangesHead;null!==a;a=a._nextIdentityChange)s(a)}diff(s){if(null==s&&(s=[]),!rl(s))throw new K(900,!1);return this.check(s)?this:null}onDestroy(){}check(s){this._reset();let l,h,m,a=this._itHead,u=!1;if(Array.isArray(s)){this.length=s.length;for(let y=0;y<this.length;y++)h=s[y],m=this._trackByFn(y,h),null!==a&&Object.is(a.trackById,m)?(u&&(a=this._verifyReinsertion(a,h,m,y)),Object.is(a.item,h)||this._addIdentityChange(a,h)):(a=this._mismatch(a,h,m,y),u=!0),a=a._next}else l=0,function Lg(i,s){if(Array.isArray(i))for(let a=0;a<i.length;a++)s(i[a]);else{const a=i[Symbol.iterator]();let u;for(;!(u=a.next()).done;)s(u.value)}}(s,y=>{m=this._trackByFn(l,y),null!==a&&Object.is(a.trackById,m)?(u&&(a=this._verifyReinsertion(a,y,m,l)),Object.is(a.item,y)||this._addIdentityChange(a,y)):(a=this._mismatch(a,y,m,l),u=!0),a=a._next,l++}),this.length=l;return this._truncate(a),this.collection=s,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let s;for(s=this._previousItHead=this._itHead;null!==s;s=s._next)s._nextPrevious=s._next;for(s=this._additionsHead;null!==s;s=s._nextAdded)s.previousIndex=s.currentIndex;for(this._additionsHead=this._additionsTail=null,s=this._movesHead;null!==s;s=s._nextMoved)s.previousIndex=s.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(s,a,u,l){let h;return null===s?h=this._itTail:(h=s._prev,this._remove(s)),null!==(s=null===this._unlinkedRecords?null:this._unlinkedRecords.get(u,null))?(Object.is(s.item,a)||this._addIdentityChange(s,a),this._reinsertAfter(s,h,l)):null!==(s=null===this._linkedRecords?null:this._linkedRecords.get(u,l))?(Object.is(s.item,a)||this._addIdentityChange(s,a),this._moveAfter(s,h,l)):s=this._addAfter(new xA(a,u),h,l),s}_verifyReinsertion(s,a,u,l){let h=null===this._unlinkedRecords?null:this._unlinkedRecords.get(u,null);return null!==h?s=this._reinsertAfter(h,s._prev,l):s.currentIndex!=l&&(s.currentIndex=l,this._addToMoves(s,l)),s}_truncate(s){for(;null!==s;){const a=s._next;this._addToRemovals(this._unlink(s)),s=a}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(s,a,u){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(s);const l=s._prevRemoved,h=s._nextRemoved;return null===l?this._removalsHead=h:l._nextRemoved=h,null===h?this._removalsTail=l:h._prevRemoved=l,this._insertAfter(s,a,u),this._addToMoves(s,u),s}_moveAfter(s,a,u){return this._unlink(s),this._insertAfter(s,a,u),this._addToMoves(s,u),s}_addAfter(s,a,u){return this._insertAfter(s,a,u),this._additionsTail=null===this._additionsTail?this._additionsHead=s:this._additionsTail._nextAdded=s,s}_insertAfter(s,a,u){const l=null===a?this._itHead:a._next;return s._next=l,s._prev=a,null===l?this._itTail=s:l._prev=s,null===a?this._itHead=s:a._next=s,null===this._linkedRecords&&(this._linkedRecords=new Gb),this._linkedRecords.put(s),s.currentIndex=u,s}_remove(s){return this._addToRemovals(this._unlink(s))}_unlink(s){null!==this._linkedRecords&&this._linkedRecords.remove(s);const a=s._prev,u=s._next;return null===a?this._itHead=u:a._next=u,null===u?this._itTail=a:u._prev=a,s}_addToMoves(s,a){return s.previousIndex===a||(this._movesTail=null===this._movesTail?this._movesHead=s:this._movesTail._nextMoved=s),s}_addToRemovals(s){return null===this._unlinkedRecords&&(this._unlinkedRecords=new Gb),this._unlinkedRecords.put(s),s.currentIndex=null,s._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=s,s._prevRemoved=null):(s._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=s),s}_addIdentityChange(s,a){return s.item=a,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=s:this._identityChangesTail._nextIdentityChange=s,s}}class xA{constructor(s,a){this.item=s,this.trackById=a,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class y0{constructor(){this._head=null,this._tail=null}add(s){null===this._head?(this._head=this._tail=s,s._nextDup=null,s._prevDup=null):(this._tail._nextDup=s,s._prevDup=this._tail,s._nextDup=null,this._tail=s)}get(s,a){let u;for(u=this._head;null!==u;u=u._nextDup)if((null===a||a<=u.currentIndex)&&Object.is(u.trackById,s))return u;return null}remove(s){const a=s._prevDup,u=s._nextDup;return null===a?this._head=u:a._nextDup=u,null===u?this._tail=a:u._prevDup=a,null===this._head}}class Gb{constructor(){this.map=new Map}put(s){const a=s.trackById;let u=this.map.get(a);u||(u=new y0,this.map.set(a,u)),u.add(s)}get(s,a){const l=this.map.get(s);return l?l.get(s,a):null}remove(s){const a=s.trackById;return this.map.get(a).remove(s)&&this.map.delete(a),s}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function qm(i,s,a){const u=i.previousIndex;if(null===u)return u;let l=0;return a&&u<a.length&&(l=a[u]),u+s+l}class Wb{constructor(){}supports(s){return s instanceof Map||du(s)}create(){return new _0}}class _0{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(s){let a;for(a=this._mapHead;null!==a;a=a._next)s(a)}forEachPreviousItem(s){let a;for(a=this._previousMapHead;null!==a;a=a._nextPrevious)s(a)}forEachChangedItem(s){let a;for(a=this._changesHead;null!==a;a=a._nextChanged)s(a)}forEachAddedItem(s){let a;for(a=this._additionsHead;null!==a;a=a._nextAdded)s(a)}forEachRemovedItem(s){let a;for(a=this._removalsHead;null!==a;a=a._nextRemoved)s(a)}diff(s){if(s){if(!(s instanceof Map||du(s)))throw new K(900,!1)}else s=new Map;return this.check(s)?this:null}onDestroy(){}check(s){this._reset();let a=this._mapHead;if(this._appendAfter=null,this._forEach(s,(u,l)=>{if(a&&a.key===l)this._maybeAddToChanges(a,u),this._appendAfter=a,a=a._next;else{const h=this._getOrCreateRecordForKey(l,u);a=this._insertBeforeOrAppend(a,h)}}),a){a._prev&&(a._prev._next=null),this._removalsHead=a;for(let u=a;null!==u;u=u._nextRemoved)u===this._mapHead&&(this._mapHead=null),this._records.delete(u.key),u._nextRemoved=u._next,u.previousValue=u.currentValue,u.currentValue=null,u._prev=null,u._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(s,a){if(s){const u=s._prev;return a._next=s,a._prev=u,s._prev=a,u&&(u._next=a),s===this._mapHead&&(this._mapHead=a),this._appendAfter=s,s}return this._appendAfter?(this._appendAfter._next=a,a._prev=this._appendAfter):this._mapHead=a,this._appendAfter=a,null}_getOrCreateRecordForKey(s,a){if(this._records.has(s)){const l=this._records.get(s);this._maybeAddToChanges(l,a);const h=l._prev,m=l._next;return h&&(h._next=m),m&&(m._prev=h),l._next=null,l._prev=null,l}const u=new MA(s);return this._records.set(s,u),u.currentValue=a,this._addToAdditions(u),u}_reset(){if(this.isDirty){let s;for(this._previousMapHead=this._mapHead,s=this._previousMapHead;null!==s;s=s._next)s._nextPrevious=s._next;for(s=this._changesHead;null!==s;s=s._nextChanged)s.previousValue=s.currentValue;for(s=this._additionsHead;null!=s;s=s._nextAdded)s.previousValue=s.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(s,a){Object.is(a,s.currentValue)||(s.previousValue=s.currentValue,s.currentValue=a,this._addToChanges(s))}_addToAdditions(s){null===this._additionsHead?this._additionsHead=this._additionsTail=s:(this._additionsTail._nextAdded=s,this._additionsTail=s)}_addToChanges(s){null===this._changesHead?this._changesHead=this._changesTail=s:(this._changesTail._nextChanged=s,this._changesTail=s)}_forEach(s,a){s instanceof Map?s.forEach(a):Object.keys(s).forEach(u=>a(s[u],u))}}class MA{constructor(s){this.key=s,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function Km(){return new Zm([new $b])}let Zm=(()=>{var i;class s{constructor(u){this.factories=u}static create(u,l){if(null!=l){const h=l.factories.slice();u=u.concat(h)}return new s(u)}static extend(u){return{provide:s,useFactory:l=>s.create(u,l||Km()),deps:[[s,new go,new ea]]}}find(u){const l=this.factories.find(h=>h.supports(u));if(null!=l)return l;throw new K(901,!1)}}return(i=s).\u0275prov=Dt({token:i,providedIn:"root",factory:Km}),s})();function Ym(){return new Pf([new Wb])}let Pf=(()=>{var i;class s{constructor(u){this.factories=u}static create(u,l){if(l){const h=l.factories.slice();u=u.concat(h)}return new s(u)}static extend(u){return{provide:s,useFactory:l=>s.create(u,l||Ym()),deps:[[s,new go,new ea]]}}find(u){const l=this.factories.find(h=>h.supports(u));if(l)return l;throw new K(901,!1)}}return(i=s).\u0275prov=Dt({token:i,providedIn:"root",factory:Ym}),s})();const ql=Hm(null,"core",[]);let Zb=(()=>{var i;class s{constructor(u){}}return(i=s).\u0275fac=function(u){return new(u||i)(ke(Kn))},i.\u0275mod=od({type:i}),i.\u0275inj=_n({}),s})()},3106:(ct,Te,O)=>{O.d(Te,{Z:()=>st});var E=O(9058),F=O(4537),k=O(534),oe=O(7879);class me{constructor(Ee,Pe){this._delegate=Ee,this.firebase=Pe,(0,k._addComponent)(Ee,new F.wA("app-compat",()=>this,"PUBLIC")),this.container=Ee.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(Ee){this._delegate.automaticDataCollectionEnabled=Ee}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(Ee=>{this._delegate.checkDestroyed(),Ee()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,k.deleteApp)(this._delegate)))}_getService(Ee,Pe=k._DEFAULT_ENTRY_NAME){var We;this._delegate.checkDestroyed();const Ye=this._delegate.container.getProvider(Ee);return!Ye.isInitialized()&&"EXPLICIT"===(null===(We=Ye.getComponent())||void 0===We?void 0:We.instantiationMode)&&Ye.initialize(),Ye.getImmediate({identifier:Pe})}_removeServiceInstance(Ee,Pe=k._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(Ee).clearInstance(Pe)}_addComponent(Ee){(0,k._addComponent)(this._delegate,Ee)}_addOrOverwriteComponent(Ee){(0,k._addOrOverwriteComponent)(this._delegate,Ee)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const Re=new E.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),V=function xe(){const ue=function Fe(ue){const Ee={},Pe={__esModule:!0,initializeApp:function K(Me,Z={}){const Je=k.initializeApp(Me,Z);if((0,E.r3)(Ee,Je.name))return Ee[Je.name];const Xe=new ue(Je,Pe);return Ee[Je.name]=Xe,Xe},app:Ye,registerVersion:k.registerVersion,setLogLevel:k.setLogLevel,onLog:k.onLog,apps:null,SDK_VERSION:k.SDK_VERSION,INTERNAL:{registerComponent:function J(Me){const Z=Me.name,Je=Z.replace("-compat","");if(k._registerComponent(Me)&&"PUBLIC"===Me.type){const Xe=(Rt=Ye())=>{if("function"!=typeof Rt[Je])throw Re.create("invalid-app-argument",{appName:Z});return Rt[Je]()};void 0!==Me.serviceProps&&(0,E.ZB)(Xe,Me.serviceProps),Pe[Je]=Xe,ue.prototype[Je]=function(...Rt){return this._getService.bind(this,Z).apply(this,Me.multipleInstances?Rt:[])}}return"PUBLIC"===Me.type?Pe[Je]:null},removeApp:function We(Me){delete Ee[Me]},useAsService:function pe(Me,Z){return"serverAuth"===Z?null:Z},modularAPIs:k}};function Ye(Me){if(!(0,E.r3)(Ee,Me=Me||k._DEFAULT_ENTRY_NAME))throw Re.create("no-app",{appName:Me});return Ee[Me]}return Pe.default=Pe,Object.defineProperty(Pe,"apps",{get:function ce(){return Object.keys(Ee).map(Me=>Ee[Me])}}),Ye.App=ue,Pe}(me);return ue.INTERNAL=Object.assign(Object.assign({},ue.INTERNAL),{createFirebaseNamespace:xe,extendNamespace:function Ee(Pe){(0,E.ZB)(ue,Pe)},createSubscribe:E.ne,ErrorFactory:E.LL,deepExtend:E.ZB}),ue}(),j=new oe.Yd("@firebase/app-compat");if((0,E.jU)()&&void 0!==self.firebase){j.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const ue=self.firebase.SDK_VERSION;ue&&ue.indexOf("LITE")>=0&&j.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const st=V;!function De(ue){(0,k.registerVersion)("@firebase/app-compat","0.2.13",ue)}()},534:(ct,Te,O)=>{O.r(Te),O.d(Te,{FirebaseError:()=>oe.ZR,SDK_VERSION:()=>wi,_DEFAULT_ENTRY_NAME:()=>at,_addComponent:()=>_r,_addOrOverwriteComponent:()=>Gr,_apps:()=>mt,_clearComponents:()=>Ht,_components:()=>$t,_getProvider:()=>En,_registerComponent:()=>At,_removeServiceInstance:()=>Xi,deleteApp:()=>$n,getApp:()=>$i,getApps:()=>jn,initializeApp:()=>Di,onLog:()=>hn,registerVersion:()=>Rr,setLogLevel:()=>es});var E=O(5861),F=O(4537),k=O(7879),oe=O(9058);const me=(se,Y)=>Y.some(Ie=>se instanceof Ie);let we,Re;const V=new WeakMap,j=new WeakMap,re=new WeakMap,Ve=new WeakMap,De=new WeakMap;let Ee={get(se,Y,Ie){if(se instanceof IDBTransaction){if("done"===Y)return j.get(se);if("objectStoreNames"===Y)return se.objectStoreNames||re.get(se);if("store"===Y)return Ie.objectStoreNames[1]?void 0:Ie.objectStore(Ie.objectStoreNames[0])}return K(se[Y])},set:(se,Y,Ie)=>(se[Y]=Ie,!0),has:(se,Y)=>se instanceof IDBTransaction&&("done"===Y||"store"===Y)||Y in se};function Ye(se){return"function"==typeof se?function We(se){return se!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function xe(){return Re||(Re=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(se)?function(...Y){return se.apply(ce(this),Y),K(V.get(this))}:function(...Y){return K(se.apply(ce(this),Y))}:function(Y,...Ie){const qe=se.call(ce(this),Y,...Ie);return re.set(qe,Y.sort?Y.sort():[Y]),K(qe)}}(se):(se instanceof IDBTransaction&&function ue(se){if(j.has(se))return;const Y=new Promise((Ie,qe)=>{const Ue=()=>{se.removeEventListener("complete",Tt),se.removeEventListener("error",Bt),se.removeEventListener("abort",Bt)},Tt=()=>{Ie(),Ue()},Bt=()=>{qe(se.error||new DOMException("AbortError","AbortError")),Ue()};se.addEventListener("complete",Tt),se.addEventListener("error",Bt),se.addEventListener("abort",Bt)});j.set(se,Y)}(se),me(se,function Fe(){return we||(we=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(se,Ee):se)}function K(se){if(se instanceof IDBRequest)return function st(se){const Y=new Promise((Ie,qe)=>{const Ue=()=>{se.removeEventListener("success",Tt),se.removeEventListener("error",Bt)},Tt=()=>{Ie(K(se.result)),Ue()},Bt=()=>{qe(se.error),Ue()};se.addEventListener("success",Tt),se.addEventListener("error",Bt)});return Y.then(Ie=>{Ie instanceof IDBCursor&&V.set(Ie,se)}).catch(()=>{}),De.set(Y,se),Y}(se);if(Ve.has(se))return Ve.get(se);const Y=Ye(se);return Y!==se&&(Ve.set(se,Y),De.set(Y,se)),Y}const ce=se=>De.get(se),Me=["get","getKey","getAll","getAllKeys","count"],Z=["put","add","delete","clear"],Je=new Map;function Xe(se,Y){if(!(se instanceof IDBDatabase)||Y in se||"string"!=typeof Y)return;if(Je.get(Y))return Je.get(Y);const Ie=Y.replace(/FromIndex$/,""),qe=Y!==Ie,Ue=Z.includes(Ie);if(!(Ie in(qe?IDBIndex:IDBObjectStore).prototype)||!Ue&&!Me.includes(Ie))return;const Tt=function(){var Bt=(0,E.Z)(function*(Vn,...fn){const ur=this.transaction(Vn,Ue?"readwrite":"readonly");let ts=ur.store;return qe&&(ts=ts.index(fn.shift())),(yield Promise.all([ts[Ie](...fn),Ue&&ur.done]))[0]});return function(fn){return Bt.apply(this,arguments)}}();return Je.set(Y,Tt),Tt}!function Pe(se){Ee=se(Ee)}(se=>({...se,get:(Y,Ie,qe)=>Xe(Y,Ie)||se.get(Y,Ie,qe),has:(Y,Ie)=>!!Xe(Y,Ie)||se.has(Y,Ie)}));class Rt{constructor(Y){this.container=Y}getPlatformInfoString(){return this.container.getProviders().map(Ie=>{if(function ar(se){const Y=se.getComponent();return"VERSION"===Y?.type}(Ie)){const qe=Ie.getImmediate();return`${qe.library}/${qe.version}`}return null}).filter(Ie=>Ie).join(" ")}}const Ii="@firebase/app",cn=new k.Yd("@firebase/app"),at="[DEFAULT]",_t={[Ii]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},mt=new Map,$t=new Map;function _r(se,Y){try{se.container.addComponent(Y)}catch(Ie){cn.debug(`Component ${Y.name} failed to register with FirebaseApp ${se.name}`,Ie)}}function Gr(se,Y){se.container.addOrOverwriteComponent(Y)}function At(se){const Y=se.name;if($t.has(Y))return cn.debug(`There were multiple attempts to register component ${Y}.`),!1;$t.set(Y,se);for(const Ie of mt.values())_r(Ie,se);return!0}function En(se,Y){const Ie=se.container.getProvider("heartbeat").getImmediate({optional:!0});return Ie&&Ie.triggerHeartbeat(),se.container.getProvider(Y)}function Xi(se,Y,Ie=at){En(se,Y).clearInstance(Ie)}function Ht(){$t.clear()}const bt=new oe.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."});class wn{constructor(Y,Ie,qe){this._isDeleted=!1,this._options=Object.assign({},Y),this._config=Object.assign({},Ie),this._name=Ie.name,this._automaticDataCollectionEnabled=Ie.automaticDataCollectionEnabled,this._container=qe,this.container.addComponent(new F.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(Y){this.checkDestroyed(),this._automaticDataCollectionEnabled=Y}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(Y){this._isDeleted=Y}checkDestroyed(){if(this.isDeleted)throw bt.create("app-deleted",{appName:this._name})}}const wi="9.23.0";function Di(se,Y={}){let Ie=se;"object"!=typeof Y&&(Y={name:Y});const qe=Object.assign({name:at,automaticDataCollectionEnabled:!1},Y),Ue=qe.name;if("string"!=typeof Ue||!Ue)throw bt.create("bad-app-name",{appName:String(Ue)});if(Ie||(Ie=(0,oe.aH)()),!Ie)throw bt.create("no-options");const Tt=mt.get(Ue);if(Tt){if((0,oe.vZ)(Ie,Tt.options)&&(0,oe.vZ)(qe,Tt.config))return Tt;throw bt.create("duplicate-app",{appName:Ue})}const Bt=new F.H0(Ue);for(const fn of $t.values())Bt.addComponent(fn);const Vn=new wn(Ie,qe,Bt);return mt.set(Ue,Vn),Vn}function $i(se=at){const Y=mt.get(se);if(!Y&&se===at&&(0,oe.aH)())return Di();if(!Y)throw bt.create("no-app",{appName:se});return Y}function jn(){return Array.from(mt.values())}function $n(se){return Yn.apply(this,arguments)}function Yn(){return(Yn=(0,E.Z)(function*(se){const Y=se.name;mt.has(Y)&&(mt.delete(Y),yield Promise.all(se.container.getProviders().map(Ie=>Ie.delete())),se.isDeleted=!0)})).apply(this,arguments)}function Rr(se,Y,Ie){var qe;let Ue=null!==(qe=_t[se])&&void 0!==qe?qe:se;Ie&&(Ue+=`-${Ie}`);const Tt=Ue.match(/\s|\//),Bt=Y.match(/\s|\//);if(Tt||Bt){const Vn=[`Unable to register library "${Ue}" with version "${Y}":`];return Tt&&Vn.push(`library name "${Ue}" contains illegal characters (whitespace or "/")`),Tt&&Bt&&Vn.push("and"),Bt&&Vn.push(`version name "${Y}" contains illegal characters (whitespace or "/")`),void cn.warn(Vn.join(" "))}At(new F.wA(`${Ue}-version`,()=>({library:Ue,version:Y}),"VERSION"))}function hn(se,Y){if(null!==se&&"function"!=typeof se)throw bt.create("invalid-log-argument");(0,k.Am)(se,Y)}function es(se){(0,k.Ub)(se)}const Wr="firebase-heartbeat-database",bi=1,B="firebase-heartbeat-store";let L=null;function N(){return L||(L=function J(se,Y,{blocked:Ie,upgrade:qe,blocking:Ue,terminated:Tt}={}){const Bt=indexedDB.open(se,Y),Vn=K(Bt);return qe&&Bt.addEventListener("upgradeneeded",fn=>{qe(K(Bt.result),fn.oldVersion,fn.newVersion,K(Bt.transaction),fn)}),Ie&&Bt.addEventListener("blocked",fn=>Ie(fn.oldVersion,fn.newVersion,fn)),Vn.then(fn=>{Tt&&fn.addEventListener("close",()=>Tt()),Ue&&fn.addEventListener("versionchange",ur=>Ue(ur.oldVersion,ur.newVersion,ur))}).catch(()=>{}),Vn}(Wr,bi,{upgrade:(se,Y)=>{0===Y&&se.createObjectStore(B)}}).catch(se=>{throw bt.create("idb-open",{originalErrorMessage:se.message})})),L}function x(){return(x=(0,E.Z)(function*(se){try{return yield(yield N()).transaction(B).objectStore(B).get(ke(se))}catch(Y){if(Y instanceof oe.ZR)cn.warn(Y.message);else{const Ie=bt.create("idb-get",{originalErrorMessage:Y?.message});cn.warn(Ie.message)}}})).apply(this,arguments)}function G(se,Y){return de.apply(this,arguments)}function de(){return(de=(0,E.Z)(function*(se,Y){try{const qe=(yield N()).transaction(B,"readwrite");yield qe.objectStore(B).put(Y,ke(se)),yield qe.done}catch(Ie){if(Ie instanceof oe.ZR)cn.warn(Ie.message);else{const qe=bt.create("idb-set",{originalErrorMessage:Ie?.message});cn.warn(qe.message)}}})).apply(this,arguments)}function ke(se){return`${se.name}!${se.options.appId}`}class Ft{constructor(Y){this.container=Y,this._heartbeatsCache=null;const Ie=this.container.getProvider("app").getImmediate();this._storage=new St(Ie),this._heartbeatsCachePromise=this._storage.read().then(qe=>(this._heartbeatsCache=qe,qe))}triggerHeartbeat(){var Y=this;return(0,E.Z)(function*(){const qe=Y.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),Ue=ft();if(null===Y._heartbeatsCache&&(Y._heartbeatsCache=yield Y._heartbeatsCachePromise),Y._heartbeatsCache.lastSentHeartbeatDate!==Ue&&!Y._heartbeatsCache.heartbeats.some(Tt=>Tt.date===Ue))return Y._heartbeatsCache.heartbeats.push({date:Ue,agent:qe}),Y._heartbeatsCache.heartbeats=Y._heartbeatsCache.heartbeats.filter(Tt=>{const Bt=new Date(Tt.date).valueOf();return Date.now()-Bt<=2592e6}),Y._storage.overwrite(Y._heartbeatsCache)})()}getHeartbeatsHeader(){var Y=this;return(0,E.Z)(function*(){if(null===Y._heartbeatsCache&&(yield Y._heartbeatsCachePromise),null===Y._heartbeatsCache||0===Y._heartbeatsCache.heartbeats.length)return"";const Ie=ft(),{heartbeatsToSend:qe,unsentEntries:Ue}=function en(se,Y=1024){const Ie=[];let qe=se.slice();for(const Ue of se){const Tt=Ie.find(Bt=>Bt.agent===Ue.agent);if(Tt){if(Tt.dates.push(Ue.date),vr(Ie)>Y){Tt.dates.pop();break}}else if(Ie.push({agent:Ue.agent,dates:[Ue.date]}),vr(Ie)>Y){Ie.pop();break}qe=qe.slice(1)}return{heartbeatsToSend:Ie,unsentEntries:qe}}(Y._heartbeatsCache.heartbeats),Tt=(0,oe.L)(JSON.stringify({version:2,heartbeats:qe}));return Y._heartbeatsCache.lastSentHeartbeatDate=Ie,Ue.length>0?(Y._heartbeatsCache.heartbeats=Ue,yield Y._storage.overwrite(Y._heartbeatsCache)):(Y._heartbeatsCache.heartbeats=[],Y._storage.overwrite(Y._heartbeatsCache)),Tt})()}}function ft(){return(new Date).toISOString().substring(0,10)}class St{constructor(Y){this.app=Y,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,E.Z)(function*(){return!!(0,oe.hl)()&&(0,oe.eu)().then(()=>!0).catch(()=>!1)})()}read(){var Y=this;return(0,E.Z)(function*(){return(yield Y._canUseIndexedDBPromise)&&(yield function R(se){return x.apply(this,arguments)}(Y.app))||{heartbeats:[]}})()}overwrite(Y){var Ie=this;return(0,E.Z)(function*(){var qe;if(yield Ie._canUseIndexedDBPromise){const Tt=yield Ie.read();return G(Ie.app,{lastSentHeartbeatDate:null!==(qe=Y.lastSentHeartbeatDate)&&void 0!==qe?qe:Tt.lastSentHeartbeatDate,heartbeats:Y.heartbeats})}})()}add(Y){var Ie=this;return(0,E.Z)(function*(){var qe;if(yield Ie._canUseIndexedDBPromise){const Tt=yield Ie.read();return G(Ie.app,{lastSentHeartbeatDate:null!==(qe=Y.lastSentHeartbeatDate)&&void 0!==qe?qe:Tt.lastSentHeartbeatDate,heartbeats:[...Tt.heartbeats,...Y.heartbeats]})}})()}}function vr(se){return(0,oe.L)(JSON.stringify({version:2,heartbeats:se})).length}!function ro(se){At(new F.wA("platform-logger",Y=>new Rt(Y),"PRIVATE")),At(new F.wA("heartbeat",Y=>new Ft(Y),"PRIVATE")),Rr(Ii,"0.9.13",se),Rr(Ii,"0.9.13","esm2017"),Rr("fire-js","")}("")},4537:(ct,Te,O)=>{O.d(Te,{H0:()=>Fe,wA:()=>k});var E=O(5861),F=O(9058);class k{constructor(V,j,re){this.name=V,this.instanceFactory=j,this.type=re,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(V){return this.instantiationMode=V,this}setMultipleInstances(V){return this.multipleInstances=V,this}setServiceProps(V){return this.serviceProps=V,this}setInstanceCreatedCallback(V){return this.onInstanceCreated=V,this}}const oe="[DEFAULT]";class me{constructor(V,j){this.name=V,this.container=j,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(V){const j=this.normalizeInstanceIdentifier(V);if(!this.instancesDeferred.has(j)){const re=new F.BH;if(this.instancesDeferred.set(j,re),this.isInitialized(j)||this.shouldAutoInitialize())try{const Ve=this.getOrInitializeService({instanceIdentifier:j});Ve&&re.resolve(Ve)}catch{}}return this.instancesDeferred.get(j).promise}getImmediate(V){var j;const re=this.normalizeInstanceIdentifier(V?.identifier),Ve=null!==(j=V?.optional)&&void 0!==j&&j;if(!this.isInitialized(re)&&!this.shouldAutoInitialize()){if(Ve)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:re})}catch(De){if(Ve)return null;throw De}}getComponent(){return this.component}setComponent(V){if(V.name!==this.name)throw Error(`Mismatching Component ${V.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=V,this.shouldAutoInitialize()){if(function Re(xe){return"EAGER"===xe.instantiationMode}(V))try{this.getOrInitializeService({instanceIdentifier:oe})}catch{}for(const[j,re]of this.instancesDeferred.entries()){const Ve=this.normalizeInstanceIdentifier(j);try{const De=this.getOrInitializeService({instanceIdentifier:Ve});re.resolve(De)}catch{}}}}clearInstance(V=oe){this.instancesDeferred.delete(V),this.instancesOptions.delete(V),this.instances.delete(V)}delete(){var V=this;return(0,E.Z)(function*(){const j=Array.from(V.instances.values());yield Promise.all([...j.filter(re=>"INTERNAL"in re).map(re=>re.INTERNAL.delete()),...j.filter(re=>"_delete"in re).map(re=>re._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(V=oe){return this.instances.has(V)}getOptions(V=oe){return this.instancesOptions.get(V)||{}}initialize(V={}){const{options:j={}}=V,re=this.normalizeInstanceIdentifier(V.instanceIdentifier);if(this.isInitialized(re))throw Error(`${this.name}(${re}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const Ve=this.getOrInitializeService({instanceIdentifier:re,options:j});for(const[De,st]of this.instancesDeferred.entries())re===this.normalizeInstanceIdentifier(De)&&st.resolve(Ve);return Ve}onInit(V,j){var re;const Ve=this.normalizeInstanceIdentifier(j),De=null!==(re=this.onInitCallbacks.get(Ve))&&void 0!==re?re:new Set;De.add(V),this.onInitCallbacks.set(Ve,De);const st=this.instances.get(Ve);return st&&V(st,Ve),()=>{De.delete(V)}}invokeOnInitCallbacks(V,j){const re=this.onInitCallbacks.get(j);if(re)for(const Ve of re)try{Ve(V,j)}catch{}}getOrInitializeService({instanceIdentifier:V,options:j={}}){let re=this.instances.get(V);if(!re&&this.component&&(re=this.component.instanceFactory(this.container,{instanceIdentifier:(xe=V,xe===oe?void 0:xe),options:j}),this.instances.set(V,re),this.instancesOptions.set(V,j),this.invokeOnInitCallbacks(re,V),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,V,re)}catch{}var xe;return re||null}normalizeInstanceIdentifier(V=oe){return this.component?this.component.multipleInstances?V:oe:V}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class Fe{constructor(V){this.name=V,this.providers=new Map}addComponent(V){const j=this.getProvider(V.name);if(j.isComponentSet())throw new Error(`Component ${V.name} has already been registered with ${this.name}`);j.setComponent(V)}addOrOverwriteComponent(V){this.getProvider(V.name).isComponentSet()&&this.providers.delete(V.name),this.addComponent(V)}getProvider(V){if(this.providers.has(V))return this.providers.get(V);const j=new me(V,this);return this.providers.set(V,j),j}getProviders(){return Array.from(this.providers.values())}}},7879:(ct,Te,O)=>{O.d(Te,{Am:()=>xe,Ub:()=>Fe,Yd:()=>Re,in:()=>F});const E=[];var F=function(V){return V[V.DEBUG=0]="DEBUG",V[V.VERBOSE=1]="VERBOSE",V[V.INFO=2]="INFO",V[V.WARN=3]="WARN",V[V.ERROR=4]="ERROR",V[V.SILENT=5]="SILENT",V}(F||{});const k={debug:F.DEBUG,verbose:F.VERBOSE,info:F.INFO,warn:F.WARN,error:F.ERROR,silent:F.SILENT},oe=F.INFO,me={[F.DEBUG]:"log",[F.VERBOSE]:"log",[F.INFO]:"info",[F.WARN]:"warn",[F.ERROR]:"error"},we=(V,j,...re)=>{if(j<V.logLevel)return;const Ve=(new Date).toISOString(),De=me[j];if(!De)throw new Error(`Attempted to log a message with an invalid logType (value: ${j})`);console[De](`[${Ve}]  ${V.name}:`,...re)};class Re{constructor(j){this.name=j,this._logLevel=oe,this._logHandler=we,this._userLogHandler=null,E.push(this)}get logLevel(){return this._logLevel}set logLevel(j){if(!(j in F))throw new TypeError(`Invalid value "${j}" assigned to \`logLevel\``);this._logLevel=j}setLogLevel(j){this._logLevel="string"==typeof j?k[j]:j}get logHandler(){return this._logHandler}set logHandler(j){if("function"!=typeof j)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=j}get userLogHandler(){return this._userLogHandler}set userLogHandler(j){this._userLogHandler=j}debug(...j){this._userLogHandler&&this._userLogHandler(this,F.DEBUG,...j),this._logHandler(this,F.DEBUG,...j)}log(...j){this._userLogHandler&&this._userLogHandler(this,F.VERBOSE,...j),this._logHandler(this,F.VERBOSE,...j)}info(...j){this._userLogHandler&&this._userLogHandler(this,F.INFO,...j),this._logHandler(this,F.INFO,...j)}warn(...j){this._userLogHandler&&this._userLogHandler(this,F.WARN,...j),this._logHandler(this,F.WARN,...j)}error(...j){this._userLogHandler&&this._userLogHandler(this,F.ERROR,...j),this._logHandler(this,F.ERROR,...j)}}function Fe(V){E.forEach(j=>{j.setLogLevel(V)})}function xe(V,j){for(const re of E){let Ve=null;j&&j.level&&(Ve=k[j.level]),re.userLogHandler=null===V?null:(De,st,...ue)=>{const Ee=ue.map(Pe=>{if(null==Pe)return null;if("string"==typeof Pe)return Pe;if("number"==typeof Pe||"boolean"==typeof Pe)return Pe.toString();if(Pe instanceof Error)return Pe.message;try{return JSON.stringify(Pe)}catch{return null}}).filter(Pe=>Pe).join(" ");st>=(Ve??De.logLevel)&&V({level:F[st].toLowerCase(),message:Ee,args:ue,type:De.name})}}}},7142:(ct,Te,O)=>{O.d(Te,{Z:()=>E.Z});var E=O(3106);E.Z.registerVersion("firebase","9.23.0","app-compat")},6365:(ct,Te,O)=>{O.r(Te);var E=O(5861),F=O(3106),k=O(6878),oe=O(9058),Re=(O(534),O(7879),O(4537));function Fe(){return window}function j(){return j=(0,E.Z)(function*(N,R,x){var G;const{BuildInfo:de}=Fe();(0,k.as)(R.sessionId,"AuthEvent did not contain a session ID");const ke=yield function Pe(N){return We.apply(this,arguments)}(R.sessionId),ht={};return(0,k.at)()?ht.ibi=de.packageName:(0,k.au)()?ht.apn=de.packageName:(0,k.av)(N,"operation-not-supported-in-this-environment"),de.displayName&&(ht.appDisplayName=de.displayName),ht.sessionId=ke,(0,k.aw)(N,x,R.type,void 0,null!==(G=R.eventId)&&void 0!==G?G:void 0,ht)}),j.apply(this,arguments)}function Ve(){return(Ve=(0,E.Z)(function*(N){const{BuildInfo:R}=Fe(),x={};(0,k.at)()?x.iosBundleId=R.packageName:(0,k.au)()?x.androidPackageName=R.packageName:(0,k.av)(N,"operation-not-supported-in-this-environment"),yield(0,k.ax)(N,x)})).apply(this,arguments)}function ue(){return(ue=(0,E.Z)(function*(N,R,x){const{cordova:G}=Fe();let de=()=>{};try{yield new Promise((ke,ht)=>{let ze=null;function Ft(){var St;ke();const vr=null===(St=G.plugins.browsertab)||void 0===St?void 0:St.close;"function"==typeof vr&&vr(),"function"==typeof x?.close&&x.close()}function ft(){ze||(ze=window.setTimeout(()=>{ht((0,k.az)(N,"redirect-cancelled-by-user"))},2e3))}function en(){"visible"===document?.visibilityState&&ft()}R.addPassiveListener(Ft),document.addEventListener("resume",ft,!1),(0,k.au)()&&document.addEventListener("visibilitychange",en,!1),de=()=>{R.removePassiveListener(Ft),document.removeEventListener("resume",ft,!1),document.removeEventListener("visibilitychange",en,!1),ze&&window.clearTimeout(ze)}})}finally{de()}})).apply(this,arguments)}function We(){return(We=(0,E.Z)(function*(N){const R=function Ye(N){if((0,k.as)(/[0-9a-zA-Z]+/.test(N),"Can only convert alpha-numeric strings"),typeof TextEncoder<"u")return(new TextEncoder).encode(N);const R=new ArrayBuffer(N.length),x=new Uint8Array(R);for(let G=0;G<N.length;G++)x[G]=N.charCodeAt(G);return x}(N),x=yield crypto.subtle.digest("SHA-256",R);return Array.from(new Uint8Array(x)).map(de=>de.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}class ce extends k.aB{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(R=>{this.resolveInialized=R})}addPassiveListener(R){this.passiveListeners.add(R)}removePassiveListener(R){this.passiveListeners.delete(R)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(R){return this.resolveInialized(),this.passiveListeners.forEach(x=>x(R)),super.onEvent(R)}initialized(){var R=this;return(0,E.Z)(function*(){yield R.initPromise})()}}function Me(N){return Z.apply(this,arguments)}function Z(){return(Z=(0,E.Z)(function*(N){const R=yield Rt()._get(ar(N));return R&&(yield Rt()._remove(ar(N))),R})).apply(this,arguments)}function Xe(){const N=[];for(let x=0;x<20;x++){const G=Math.floor(62*Math.random());N.push("1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".charAt(G))}return N.join("")}function Rt(){return(0,k.aC)(k.b)}function ar(N){return(0,k.aD)("authEvent",N.config.apiKey,N.name)}function cn(N){if(!N?.includes("?"))return{};const[R,...x]=N.split("?");return(0,oe.zd)(x.join("?"))}const ne=class bs{constructor(){this._redirectPersistence=k.a,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=k.aE,this._overrideRedirectResult=k.aF}_initialize(R){var x=this;return(0,E.Z)(function*(){const G=R._key();let de=x.eventManagers.get(G);return de||(de=new ce(R),x.eventManagers.set(G,de),x.attachCallbackListeners(R,de)),de})()}_openPopup(R){(0,k.av)(R,"operation-not-supported-in-this-environment")}_openRedirect(R,x,G,de){var ke=this;return(0,E.Z)(function*(){!function Ee(N){var R,x,G,de,ke,ht,ze,Ft,ft,en;const St=Fe();(0,k.aA)("function"==typeof(null===(R=St?.universalLinks)||void 0===R?void 0:R.subscribe),N,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),(0,k.aA)(typeof(null===(x=St?.BuildInfo)||void 0===x?void 0:x.packageName)<"u",N,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),(0,k.aA)("function"==typeof(null===(ke=null===(de=null===(G=St?.cordova)||void 0===G?void 0:G.plugins)||void 0===de?void 0:de.browsertab)||void 0===ke?void 0:ke.openUrl),N,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),(0,k.aA)("function"==typeof(null===(Ft=null===(ze=null===(ht=St?.cordova)||void 0===ht?void 0:ht.plugins)||void 0===ze?void 0:ze.browsertab)||void 0===Ft?void 0:Ft.isAvailable),N,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),(0,k.aA)("function"==typeof(null===(en=null===(ft=St?.cordova)||void 0===ft?void 0:ft.InAppBrowser)||void 0===en?void 0:en.open),N,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(R);const ht=yield ke._initialize(R);yield ht.initialized(),ht.resetRedirect(),(0,k.aG)(),yield ke._originValidation(R);const ze=function J(N,R,x=null){return{type:R,eventId:x,urlResponse:null,sessionId:Xe(),postBody:null,tenantId:N.tenantId,error:(0,k.az)(N,"no-auth-event")}}(R,G,de);yield function pe(N,R){return Rt()._set(ar(N),R)}(R,ze);const Ft=yield function V(N,R,x){return j.apply(this,arguments)}(R,ze,x),ft=yield function De(N){const{cordova:R}=Fe();return new Promise(x=>{R.plugins.browsertab.isAvailable(G=>{let de=null;G?R.plugins.browsertab.openUrl(N):de=R.InAppBrowser.open(N,(0,k.ay)()?"_blank":"_system","location=yes"),x(de)})})}(Ft);return function st(N,R,x){return ue.apply(this,arguments)}(R,ht,ft)})()}_isIframeWebStorageSupported(R,x){throw new Error("Method not implemented.")}_originValidation(R){const x=R._key();return this.originValidationPromises[x]||(this.originValidationPromises[x]=function re(N){return Ve.apply(this,arguments)}(R)),this.originValidationPromises[x]}attachCallbackListeners(R,x){const{universalLinks:G,handleOpenURL:de,BuildInfo:ke}=Fe(),ht=setTimeout((0,E.Z)(function*(){yield Me(R),x.onEvent(ie())}),500),ze=function(){var en=(0,E.Z)(function*(St){clearTimeout(ht);const vr=yield Me(R);let ro=null;vr&&St?.url&&(ro=function Je(N,R){var x,G;const de=function Ji(N){const R=cn(N),x=R.link?decodeURIComponent(R.link):void 0,G=cn(x).link,de=R.deep_link_id?decodeURIComponent(R.deep_link_id):void 0;return cn(de).link||de||G||x||N}(R);if(de.includes("/__/auth/callback")){const ke=cn(de),ht=ke.firebaseError?function Ii(N){try{return JSON.parse(N)}catch{return null}}(decodeURIComponent(ke.firebaseError)):null,ze=null===(G=null===(x=ht?.code)||void 0===x?void 0:x.split("auth/"))||void 0===G?void 0:G[1],Ft=ze?(0,k.az)(ze):null;return Ft?{type:N.type,eventId:N.eventId,tenantId:N.tenantId,error:Ft,urlResponse:null,sessionId:null,postBody:null}:{type:N.type,eventId:N.eventId,tenantId:N.tenantId,sessionId:N.sessionId,urlResponse:de,postBody:null}}return null}(vr,St.url)),x.onEvent(ro||ie())});return function(vr){return en.apply(this,arguments)}}();typeof G<"u"&&"function"==typeof G.subscribe&&G.subscribe(null,ze);const Ft=de,ft=`${ke.packageName.toLowerCase()}://`;Fe().handleOpenURL=function(){var en=(0,E.Z)(function*(St){if(St.toLowerCase().startsWith(ft)&&ze({url:St}),"function"==typeof Ft)try{Ft(St)}catch(vr){console.error(vr)}});return function(St){return en.apply(this,arguments)}}()}};function ie(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:(0,k.az)("no-auth-event")}}function Ze(){var N;return(null===(N=self?.location)||void 0===N?void 0:N.protocol)||null}function Jt(N=(0,oe.z$)()){return!("file:"!==Ze()&&"ionic:"!==Ze()&&"capacitor:"!==Ze()||!N.toLowerCase().match(/iphone|ipad|ipod|android/))}function _n(){try{const N=self.localStorage,R=k.aL();if(N)return N.setItem(R,"1"),N.removeItem(R),!function Zt(N=(0,oe.z$)()){return function jt(){return(0,oe.w1)()&&11===document?.documentMode}()||function Dt(N=(0,oe.z$)()){return/Edge\/\d+/.test(N)}(N)}()||(0,oe.hl)()}catch{return vn()&&(0,oe.hl)()}return!1}function vn(){return typeof global<"u"&&"WorkerGlobalScope"in global&&"importScripts"in global}function Xt(){return(function Le(){return"http:"===Ze()||"https:"===Ze()}()||(0,oe.ru)()||Jt())&&!function dt(){return(0,oe.b$)()||(0,oe.UG)()}()&&_n()&&!vn()}function kn(){return Jt()&&typeof document<"u"}function zr(){return(zr=(0,E.Z)(function*(){return!!kn()&&new Promise(N=>{const R=setTimeout(()=>{N(!1)},1e3);document.addEventListener("deviceready",()=>{clearTimeout(R),N(!0)})})})).apply(this,arguments)}const In={LOCAL:"local",NONE:"none",SESSION:"session"},yr=k.aA,ji="persistence";function _t(N){return mt.apply(this,arguments)}function mt(){return(mt=(0,E.Z)(function*(N){yield N._initializationPromise;const R=_r(),x=k.aD(ji,N.config.apiKey,N.name);R&&R.setItem(x,N._getPersistence())})).apply(this,arguments)}function _r(){var N;try{return(null===(N=function mr(){return typeof window<"u"?window:null}())||void 0===N?void 0:N.sessionStorage)||null}catch{return null}}const Gr=k.aA;class At{constructor(){this.browserResolver=k.aC(k.k),this.cordovaResolver=k.aC(ne),this.underlyingResolver=null,this._redirectPersistence=k.a,this._completeRedirectFn=k.aE,this._overrideRedirectResult=k.aF}_initialize(R){var x=this;return(0,E.Z)(function*(){return yield x.selectUnderlyingResolver(),x.assertedUnderlyingResolver._initialize(R)})()}_openPopup(R,x,G,de){var ke=this;return(0,E.Z)(function*(){return yield ke.selectUnderlyingResolver(),ke.assertedUnderlyingResolver._openPopup(R,x,G,de)})()}_openRedirect(R,x,G,de){var ke=this;return(0,E.Z)(function*(){return yield ke.selectUnderlyingResolver(),ke.assertedUnderlyingResolver._openRedirect(R,x,G,de)})()}_isIframeWebStorageSupported(R,x){this.assertedUnderlyingResolver._isIframeWebStorageSupported(R,x)}_originValidation(R){return this.assertedUnderlyingResolver._originValidation(R)}get _shouldInitProactively(){return kn()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return Gr(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var R=this;return(0,E.Z)(function*(){if(R.underlyingResolver)return;const x=yield function Hr(){return zr.apply(this,arguments)}();R.underlyingResolver=x?R.cordovaResolver:R.browserResolver})()}}function En(N){return N.unwrap()}function Ht(N){return bt(N)}function bt(N){const{_tokenResponse:R}=N instanceof oe.ZR?N.customData:N;if(!R)return null;if(!(N instanceof oe.ZR)&&"temporaryProof"in R&&"phoneNumber"in R)return k.P.credentialFromResult(N);const x=R.providerId;if(!x||x===k.p.PASSWORD)return null;let G;switch(x){case k.p.GOOGLE:G=k.V;break;case k.p.FACEBOOK:G=k.U;break;case k.p.GITHUB:G=k.W;break;case k.p.TWITTER:G=k.Z;break;default:const{oauthIdToken:de,oauthAccessToken:ke,oauthTokenSecret:ht,pendingToken:ze,nonce:Ft}=R;return ke||ht||de||ze?ze?x.startsWith("saml.")?k.aO._create(x,ze):k.L._fromParams({providerId:x,signInMethod:x,pendingToken:ze,idToken:de,accessToken:ke}):new k.X(x).credential({idToken:de,accessToken:ke,rawNonce:Ft}):null}return N instanceof oe.ZR?G.credentialFromError(N):G.credentialFromResult(N)}function wn(N,R){return R.catch(x=>{throw x instanceof oe.ZR&&function Ts(N,R){var x;const G=null===(x=R.customData)||void 0===x?void 0:x._tokenResponse;if("auth/multi-factor-auth-required"===R?.code)R.resolver=new $i(N,k.aq(N,R));else if(G){const de=bt(R),ke=R;de&&(ke.credential=de,ke.tenantId=G.tenantId||void 0,ke.email=G.email||void 0,ke.phoneNumber=G.phoneNumber||void 0)}}(N,x),x}).then(x=>{const de=x.user;return{operationType:x.operationType,credential:Ht(x),additionalUserInfo:k.ao(x),user:jn.getOrCreate(de)}})}function wi(N,R){return Di.apply(this,arguments)}function Di(){return(Di=(0,E.Z)(function*(N,R){const x=yield R;return{verificationId:x.verificationId,confirm:G=>wn(N,x.confirm(G))}})).apply(this,arguments)}class $i{constructor(R,x){this.resolver=x,this.auth=function Xi(N){return N.wrapped()}(R)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(R){return wn(En(this.auth),this.resolver.resolveSignIn(R))}}class jn{constructor(R){this._delegate=R,this.multiFactor=k.ar(R)}static getOrCreate(R){return jn.USER_MAP.has(R)||jn.USER_MAP.set(R,new jn(R)),jn.USER_MAP.get(R)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(R){return this._delegate.getIdTokenResult(R)}getIdToken(R){return this._delegate.getIdToken(R)}linkAndRetrieveDataWithCredential(R){return this.linkWithCredential(R)}linkWithCredential(R){var x=this;return(0,E.Z)(function*(){return wn(x.auth,k.a0(x._delegate,R))})()}linkWithPhoneNumber(R,x){var G=this;return(0,E.Z)(function*(){return wi(G.auth,k.l(G._delegate,R,x))})()}linkWithPopup(R){var x=this;return(0,E.Z)(function*(){return wn(x.auth,k.d(x._delegate,R,At))})()}linkWithRedirect(R){var x=this;return(0,E.Z)(function*(){return yield _t(k.aH(x.auth)),k.g(x._delegate,R,At)})()}reauthenticateAndRetrieveDataWithCredential(R){return this.reauthenticateWithCredential(R)}reauthenticateWithCredential(R){var x=this;return(0,E.Z)(function*(){return wn(x.auth,k.a1(x._delegate,R))})()}reauthenticateWithPhoneNumber(R,x){return wi(this.auth,k.r(this._delegate,R,x))}reauthenticateWithPopup(R){return wn(this.auth,k.e(this._delegate,R,At))}reauthenticateWithRedirect(R){var x=this;return(0,E.Z)(function*(){return yield _t(k.aH(x.auth)),k.h(x._delegate,R,At)})()}sendEmailVerification(R){return k.ae(this._delegate,R)}unlink(R){var x=this;return(0,E.Z)(function*(){return yield k.an(x._delegate,R),x})()}updateEmail(R){return k.aj(this._delegate,R)}updatePassword(R){return k.ak(this._delegate,R)}updatePhoneNumber(R){return k.u(this._delegate,R)}updateProfile(R){return k.ai(this._delegate,R)}verifyBeforeUpdateEmail(R,x){return k.af(this._delegate,R,x)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}jn.USER_MAP=new WeakMap;const $n=k.aA;let Yn=(()=>{class N{constructor(x,G){if(this.app=x,G.isInitialized())return this._delegate=G.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:de}=x.options;$n(de,"invalid-api-key",{appName:x.name}),$n(de,"invalid-api-key",{appName:x.name});const ke=typeof window<"u"?At:void 0;this._delegate=G.initialize({options:{persistence:hn(de,x.name),popupRedirectResolver:ke}}),this._delegate._updateErrorMap(k.D),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?jn.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(x){this._delegate.languageCode=x}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(x){this._delegate.tenantId=x}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(x,G){k.I(this._delegate,x,G)}applyActionCode(x){return k.a5(this._delegate,x)}checkActionCode(x){return k.a6(this._delegate,x)}confirmPasswordReset(x,G){return k.a4(this._delegate,x,G)}createUserWithEmailAndPassword(x,G){var de=this;return(0,E.Z)(function*(){return wn(de._delegate,k.a8(de._delegate,x,G))})()}fetchProvidersForEmail(x){return this.fetchSignInMethodsForEmail(x)}fetchSignInMethodsForEmail(x){return k.ad(this._delegate,x)}isSignInWithEmailLink(x){return k.ab(this._delegate,x)}getRedirectResult(){var x=this;return(0,E.Z)(function*(){$n(Xt(),x._delegate,"operation-not-supported-in-this-environment");const G=yield k.j(x._delegate,At);return G?wn(x._delegate,Promise.resolve(G)):{credential:null,user:null}})()}addFrameworkForLogging(x){!function le(N,R){(0,k.aH)(N)._logFramework(R)}(this._delegate,x)}onAuthStateChanged(x,G,de){const{next:ke,error:ht,complete:ze}=Rr(x,G,de);return this._delegate.onAuthStateChanged(ke,ht,ze)}onIdTokenChanged(x,G,de){const{next:ke,error:ht,complete:ze}=Rr(x,G,de);return this._delegate.onIdTokenChanged(ke,ht,ze)}sendSignInLinkToEmail(x,G){return k.aa(this._delegate,x,G)}sendPasswordResetEmail(x,G){return k.a3(this._delegate,x,G||void 0)}setPersistence(x){var G=this;return(0,E.Z)(function*(){let de;switch(function at(N,R){yr(Object.values(In).includes(R),N,"invalid-persistence-type"),(0,oe.b$)()?yr(R!==In.SESSION,N,"unsupported-persistence-type"):(0,oe.UG)()?yr(R===In.NONE,N,"unsupported-persistence-type"):vn()?yr(R===In.NONE||R===In.LOCAL&&(0,oe.hl)(),N,"unsupported-persistence-type"):yr(R===In.NONE||_n(),N,"unsupported-persistence-type")}(G._delegate,x),x){case In.SESSION:de=k.a;break;case In.LOCAL:de=(yield k.aC(k.i)._isAvailable())?k.i:k.b;break;case In.NONE:de=k.N;break;default:return k.av("argument-error",{appName:G._delegate.name})}return G._delegate.setPersistence(de)})()}signInAndRetrieveDataWithCredential(x){return this.signInWithCredential(x)}signInAnonymously(){return wn(this._delegate,k._(this._delegate))}signInWithCredential(x){return wn(this._delegate,k.$(this._delegate,x))}signInWithCustomToken(x){return wn(this._delegate,k.a2(this._delegate,x))}signInWithEmailAndPassword(x,G){return wn(this._delegate,k.a9(this._delegate,x,G))}signInWithEmailLink(x,G){return wn(this._delegate,k.ac(this._delegate,x,G))}signInWithPhoneNumber(x,G){return wi(this._delegate,k.s(this._delegate,x,G))}signInWithPopup(x){var G=this;return(0,E.Z)(function*(){return $n(Xt(),G._delegate,"operation-not-supported-in-this-environment"),wn(G._delegate,k.c(G._delegate,x,At))})()}signInWithRedirect(x){var G=this;return(0,E.Z)(function*(){return $n(Xt(),G._delegate,"operation-not-supported-in-this-environment"),yield _t(G._delegate),k.f(G._delegate,x,At)})()}updateCurrentUser(x){return this._delegate.updateCurrentUser(x)}verifyPasswordResetCode(x){return k.a7(this._delegate,x)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return N.Persistence=In,N})();function Rr(N,R,x){let G=N;"function"!=typeof N&&({next:G,error:R,complete:x}=N);const de=G;return{next:ht=>de(ht&&jn.getOrCreate(ht)),error:R,complete:x}}function hn(N,R){const x=function $t(N,R){const x=_r();if(!x)return[];const G=k.aD(ji,N,R);switch(x.getItem(G)){case In.NONE:return[k.N];case In.LOCAL:return[k.i,k.a];case In.SESSION:return[k.a];default:return[]}}(N,R);if(typeof self<"u"&&!x.includes(k.i)&&x.push(k.i),typeof window<"u")for(const G of[k.b,k.a])x.includes(G)||x.push(G);return x.includes(k.N)||x.push(k.N),x}class es{constructor(){this.providerId="phone",this._delegate=new k.P(En(F.Z.auth()))}static credential(R,x){return k.P.credential(R,x)}verifyPhoneNumber(R,x){return this._delegate.verifyPhoneNumber(R,x)}unwrap(){return this._delegate}}es.PHONE_SIGN_IN_METHOD=k.P.PHONE_SIGN_IN_METHOD,es.PROVIDER_ID=k.P.PROVIDER_ID;const Wr=k.aA;class bi{constructor(R,x,G=F.Z.app()){var de;Wr(null===(de=G.options)||void 0===de?void 0:de.apiKey,"invalid-api-key",{appName:G.name}),this._delegate=new k.R(R,x,G.auth()),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function L(N){N.INTERNAL.registerComponent(new Re.wA("auth-compat",R=>{const x=R.getProvider("app-compat").getImmediate(),G=R.getProvider("auth");return new Yn(x,G)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:k.A.EMAIL_SIGNIN,PASSWORD_RESET:k.A.PASSWORD_RESET,RECOVER_EMAIL:k.A.RECOVER_EMAIL,REVERT_SECOND_FACTOR_ADDITION:k.A.REVERT_SECOND_FACTOR_ADDITION,VERIFY_AND_CHANGE_EMAIL:k.A.VERIFY_AND_CHANGE_EMAIL,VERIFY_EMAIL:k.A.VERIFY_EMAIL}},EmailAuthProvider:k.Q,FacebookAuthProvider:k.U,GithubAuthProvider:k.W,GoogleAuthProvider:k.V,OAuthProvider:k.X,SAMLAuthProvider:k.Y,PhoneAuthProvider:es,PhoneMultiFactorGenerator:k.m,RecaptchaVerifier:bi,TwitterAuthProvider:k.Z,Auth:Yn,AuthCredential:k.J,Error:oe.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),N.registerVersion("@firebase/auth-compat","0.4.2")}(F.Z)},5861:(ct,Te,O)=>{function E(k,oe,me,we,Re,Fe,xe){try{var V=k[Fe](xe),j=V.value}catch(re){return void me(re)}V.done?oe(j):Promise.resolve(j).then(we,Re)}function F(k){return function(){var oe=this,me=arguments;return new Promise(function(we,Re){var Fe=k.apply(oe,me);function xe(j){E(Fe,we,Re,xe,V,"next",j)}function V(j){E(Fe,we,Re,xe,V,"throw",j)}xe(void 0)})}}O.d(Te,{Z:()=>F})},7582:(ct,Te,O)=>{function oe(ne,ie){var le={};for(var X in ne)Object.prototype.hasOwnProperty.call(ne,X)&&ie.indexOf(X)<0&&(le[X]=ne[X]);if(null!=ne&&"function"==typeof Object.getOwnPropertySymbols){var fe=0;for(X=Object.getOwnPropertySymbols(ne);fe<X.length;fe++)ie.indexOf(X[fe])<0&&Object.prototype.propertyIsEnumerable.call(ne,X[fe])&&(le[X[fe]]=ne[X[fe]])}return le}function re(ne,ie,le,X){return new(le||(le=Promise))(function(Ce,Ze){function Le(jt){try{dt(X.next(jt))}catch(Dt){Ze(Dt)}}function Jt(jt){try{dt(X.throw(jt))}catch(Dt){Ze(Dt)}}function dt(jt){jt.done?Ce(jt.value):function fe(Ce){return Ce instanceof le?Ce:new le(function(Ze){Ze(Ce)})}(jt.value).then(Le,Jt)}dt((X=X.apply(ne,ie||[])).next())})}function K(ne){return this instanceof K?(this.v=ne,this):new K(ne)}function ce(ne,ie,le){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var fe,X=le.apply(ne,ie||[]),Ce=[];return fe={},Ze("next"),Ze("throw"),Ze("return"),fe[Symbol.asyncIterator]=function(){return this},fe;function Ze(Zt){X[Zt]&&(fe[Zt]=function(_n){return new Promise(function(vn,Xt){Ce.push([Zt,_n,vn,Xt])>1||Le(Zt,_n)})})}function Le(Zt,_n){try{!function Jt(Zt){Zt.value instanceof K?Promise.resolve(Zt.value.v).then(dt,jt):Dt(Ce[0][2],Zt)}(X[Zt](_n))}catch(vn){Dt(Ce[0][3],vn)}}function dt(Zt){Le("next",Zt)}function jt(Zt){Le("throw",Zt)}function Dt(Zt,_n){Zt(_n),Ce.shift(),Ce.length&&Le(Ce[0][0],Ce[0][1])}}function pe(ne){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var le,ie=ne[Symbol.asyncIterator];return ie?ie.call(ne):(ne=function ue(ne){var ie="function"==typeof Symbol&&Symbol.iterator,le=ie&&ne[ie],X=0;if(le)return le.call(ne);if(ne&&"number"==typeof ne.length)return{next:function(){return ne&&X>=ne.length&&(ne=void 0),{value:ne&&ne[X++],done:!ne}}};throw new TypeError(ie?"Object is not iterable.":"Symbol.iterator is not defined.")}(ne),le={},X("next"),X("throw"),X("return"),le[Symbol.asyncIterator]=function(){return this},le);function X(Ce){le[Ce]=ne[Ce]&&function(Ze){return new Promise(function(Le,Jt){!function fe(Ce,Ze,Le,Jt){Promise.resolve(Jt).then(function(dt){Ce({value:dt,done:Le})},Ze)}(Le,Jt,(Ze=ne[Ce](Ze)).done,Ze.value)})}}}O.d(Te,{FC:()=>ce,KL:()=>pe,_T:()=>oe,mG:()=>re,qq:()=>K}),"function"==typeof SuppressedError&&SuppressedError}},ct=>{ct(ct.s=8497)}]);